# Smoke Test Configuration
# This config is used exclusively for testing the pipeline

# --- Global Settings ---
output_dir: "smoke-test/output"
context_lines: 5
concurrency: 1
timeout: 600

# --- Segmentation (Kraken) ---
kraken:
  model: "default"
  padding: 10

# --- Image Preprocessing (Transcription) ---
preprocessing:
  # Segmentation settings (affects Kraken line detection)
  segmentation_padding: 0  # Pixels of white border added before segmentation (helps small images)
  
  # Transcription settings (affects Gemini API calls)
  line_mask: true
  enhance_contrast: true
  contrast_factor: 1.5
  invert: true
  save_line_crops: true
  transcription_resolution: "medium"  # high (3072px), medium (1536px), low (768px)
  fallback_resolution: true
  min_crop_size: 1000  # Filter out noise crops smaller than 1000 pixels

# --- Transcription Models ---
models:
  gemini-2.5-flash:
    model: "gemini-2.5-flash"
    prompt: |
      Transcribe this handwritten text exactly as written.
      Maintain original spelling and punctuation.
      If the text is illegible, a single number, or a fragment, transcribe ONLY what you see.
      Do NOT invent text, do NOT complete sentences, and do NOT add context.
      If the image is blank, return [BLANK].
    generation_config:
      temperature: 0.0
      max_output_tokens: 65536
      top_p: 0.95
      top_k: 40
