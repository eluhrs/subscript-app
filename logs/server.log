2025-12-11 04:30:56.618701 - MODULE IMPORT - Writing to log file.
2025-12-11 04:30:58.449046 - MODULE IMPORT - Writing to log file.
2025-12-11 04:31:00.202854 - MODULE IMPORT - Writing to log file.
2025-12-11 04:33:13,155 - INFO - SYSTEM: Server module initialized at 2025-12-11 04:33:13.155723
2025-12-11 04:33:14,733 - INFO - SYSTEM: Server module initialized at 2025-12-11 04:33:14.733019
2025-12-11 04:37:13,976 - INFO - SYSTEM: Server module initialized at 2025-12-11 04:37:13.976527
2025-12-11 04:37:15,868 - INFO - SYSTEM: Server module initialized at 2025-12-11 04:37:15.868931
2025-12-11 04:37:34,912 - INFO - SYSTEM: Server module initialized at 2025-12-11 04:37:34.912191
2025-12-11 04:37:36,066 - INFO - SYSTEM: Server module initialized at 2025-12-11 04:37:36.066883
2025-12-11 04:38:05,215 - INFO - SYSTEM: Server module initialized at 2025-12-11 04:38:05.215848
2025-12-11 04:38:06,336 - INFO - SYSTEM: Server module initialized at 2025-12-11 04:38:06.336564
2025-12-11 04:38:07,733 - INFO - Connected to redis://redis:6379/0
2025-12-11 04:38:07,737 - INFO - mingle: searching for neighbors
2025-12-11 04:38:08,750 - INFO - mingle: all alone
2025-12-11 04:38:08,765 - INFO - celery@d89871f458aa ready.
2025-12-11 04:38:41,200 - INFO - SYSTEM: Server module initialized at 2025-12-11 04:38:41.200865
2025-12-11 04:39:02,912 - INFO - SYSTEM: Server module initialized at 2025-12-11 04:39:02.912522
2025-12-11 04:39:03,811 - INFO - SYSTEM: Server module initialized at 2025-12-11 04:39:03.811510
2025-12-11 04:39:04,805 - INFO - Connected to redis://redis:6379/0
2025-12-11 04:39:04,807 - INFO - mingle: searching for neighbors
2025-12-11 04:39:05,821 - INFO - mingle: all alone
2025-12-11 04:39:05,846 - INFO - celery@d89871f458aa ready.
2025-12-11 04:39:23,208 - INFO - SYSTEM: Server module initialized at 2025-12-11 04:39:23.208150
2025-12-11 04:39:24,041 - INFO - SYSTEM: Server module initialized at 2025-12-11 04:39:24.041066
2025-12-11 04:39:24,966 - INFO - Connected to redis://redis:6379/0
2025-12-11 04:39:24,968 - INFO - mingle: searching for neighbors
2025-12-11 04:39:25,983 - INFO - mingle: all alone
2025-12-11 04:39:25,995 - INFO - celery@d89871f458aa ready.
2025-12-11 04:40:32,710 - INFO - SYSTEM: Server module initialized at 2025-12-11 04:40:32.710322
2025-12-11 04:40:45,495 - INFO - SYSTEM: Server module initialized at 2025-12-11 04:40:45.495467
2025-12-11 04:40:46,749 - INFO - SYSTEM: Server module initialized at 2025-12-11 04:40:46.749121
2025-12-11 04:40:48,168 - INFO - Connected to redis://redis:6379/0
2025-12-11 04:40:48,171 - INFO - mingle: searching for neighbors
2025-12-11 04:40:49,181 - INFO - mingle: all alone
2025-12-11 04:40:49,191 - INFO - celery@d89871f458aa ready.
2025-12-11 04:41:57,571 - INFO - JOB SUBMITTED: User eluhrs@gmail.com uploaded Add_70520_0116.jpg
2025-12-11 04:41:57,722 - INFO - Task server.tasks.process_document_task[20031a10-ddee-4030-b89f-d30f55aea889] received
2025-12-11 04:41:57,755 - INFO - TASK START: Processing Add_70520_0116.jpg (ID: 12)
2025-12-11 04:41:57,755 - INFO - Command: subscript historical-manuscript gemini-pro-3 /app/documents/eluhrs@gmail.com/Add_70520_0116-0cb467d5/Add_70520_0116.jpg --output /app/documents/eluhrs@gmail.com/Add_70520_0116-0cb467d5
2025-12-11 04:41:57,764 - INFO - Running from: /app
2025-12-11 04:41:57,764 - INFO - Using config: /app/config.yml
2025-12-11 04:41:57,765 - INFO - Output directory: /app/documents/eluhrs@gmail.com/Add_70520_0116-0cb467d5
2025-12-11 04:41:57,765 - INFO - ----------------------------------------
2025-12-11 04:42:00,666 - INFO - 
Subscript.py initialized segmentation provider: historical-manuscript
2025-12-11 04:42:00,667 - INFO - Subscript.py Initialized transcription provider: gemini-pro-3
2025-12-11 04:42:00,667 - INFO - Processing 1 files...
2025-12-11 04:42:00,667 - INFO - Processing /app/documents/eluhrs@gmail.com/Add_70520_0116-0cb467d5/Add_70520_0116.jpg...
2025-12-11 04:42:00,667 - INFO - Segmenting /app/documents/eluhrs@gmail.com/Add_70520_0116-0cb467d5/Add_70520_0116.jpg with Kraken...
2025-12-11 04:42:00,672 - INFO - Loading segmentation model from /usr/local/lib/python3.10/site-packages/kraken/blla.mlmodel...
2025-12-11 04:42:01,192 - INFO - Segmenting /app/documents/eluhrs@gmail.com/Add_70520_0116-0cb467d5/Add_70520_0116.jpg
2025-12-11 04:42:04,554 - INFO - Vectorizing regions
2025-12-11 04:42:04,696 - INFO - Vectorizing regions
2025-12-11 04:42:04,836 - INFO - Vectorizing baselines
2025-12-11 04:42:11,639 - INFO - Compute reading order on 18 lines in lr direction
2025-12-11 04:42:11,640 - INFO - Perform topological sort on partially ordered lines
2025-12-11 04:42:11,640 - INFO - Compute reading order on 1 lines in lr direction
2025-12-11 04:42:11,641 - INFO - Perform topological sort on partially ordered lines
2025-12-11 04:42:11,643 - INFO - Found 18 lines.
2025-12-11 04:42:11,644 - INFO - Initializing Gemini model: gemini-3-pro-preview
2025-12-11 04:42:11,658 - INFO - Annotating 18 regions for Visual Tagging...
2025-12-11 04:42:11,695 - INFO - Saved debug image to /app/documents/eluhrs@gmail.com/Add_70520_0116-0cb467d5/Add_70520_0116-debug.jpg
2025-12-11 04:42:11,696 - INFO - Sending annotated image to Gemini...
2025-12-11 04:45:13,447 - INFO - Received JSON response from Gemini.
2025-12-11 04:45:13,449 - WARNING - Gemini did not return text for box 9
2025-12-11 04:45:13,625 - INFO - SUBSCRIPT OUTPUT for 12:

------------- gemini-pro-3 output for Add_70520_0116.jpg -------------
glad aspects were present (confirming her
Maiestie wth THEODOSIES dylligence, ARETAPHE=
LIS constancie; and ANTIGONVS clemencie)
setlinge them selues euar sence, in her Princelie
brest: as ye rarenes and greatnes of her Gracis
vertuse declare. Whom God presaruid from
formar perell, to rule & reygne ouer us, in
this last leaden adge: wherin Iniquitie hath

sought to surmount ye glorie of his Deitie, and
so presumed to suppresse his professors: As if
Shylde of her Souerayntie (for worldlie
Quens
Ma:tie is ye per force) did not protect his poore membars a=
fect protector of Religion mong us: what error wold not inuade us?
What Scisme or sect wold not assawte us?
What treason wold not entrapp us? When
all
----------------------------------------------------------------

Saved PageXML to /app/documents/eluhrs@gmail.com/Add_70520_0116-0cb467d5/Add_70520_0116.xml
Saved TXT to /app/documents/eluhrs@gmail.com/Add_70520_0116-0cb467d5/Add_70520_0116.txt
Saved PDF to /app/documents/eluhrs@gmail.com/Add_70520_0116-0cb467d5/Add_70520_0116.pdf

Time:   00:03:12
Input:  1329 tokens
Output: 314 tokens
Cost:   $0.0064

----------------------------------------------------------------


2025-12-11 04:45:13,640 - INFO - Generated thumbnail: /app/documents/eluhrs@gmail.com/Add_70520_0116-0cb467d5/Add_70520_0116-thumb.jpg
2025-12-11 04:45:13,657 - INFO - Task server.tasks.process_document_task[20031a10-ddee-4030-b89f-d30f55aea889] succeeded in 195.9325876730145s: None
2025-12-11 04:48:14,431 - INFO - JOB SUBMITTED: User eluhrs@gmail.com uploaded Add_70520_0116.jpg
2025-12-11 04:48:14,453 - INFO - Task server.tasks.process_document_task[86a2e109-55b7-4bca-b39f-8f641e17cc78] received
2025-12-11 04:48:14,471 - INFO - TASK START: Processing Add_70520_0116.jpg (ID: 13)
2025-12-11 04:48:14,472 - INFO - Command: subscript historical-manuscript gemini-pro-3 /app/documents/eluhrs@gmail.com/Add_70520_0116-72d47886/Add_70520_0116.jpg --output /app/documents/eluhrs@gmail.com/Add_70520_0116-72d47886
2025-12-11 04:48:14,488 - INFO - Running from: /app
2025-12-11 04:48:14,488 - INFO - Using config: /app/config.yml
2025-12-11 04:48:14,489 - INFO - Output directory: /app/documents/eluhrs@gmail.com/Add_70520_0116-72d47886
2025-12-11 04:48:14,489 - INFO - ----------------------------------------
2025-12-11 04:48:14,491 - INFO - 
Subscript.py initialized segmentation provider: historical-manuscript
2025-12-11 04:48:14,491 - INFO - Subscript.py Initialized transcription provider: gemini-pro-3
2025-12-11 04:48:14,491 - INFO - Processing 1 files...
2025-12-11 04:48:14,492 - INFO - Processing /app/documents/eluhrs@gmail.com/Add_70520_0116-72d47886/Add_70520_0116.jpg...
2025-12-11 04:48:14,492 - INFO - Segmenting /app/documents/eluhrs@gmail.com/Add_70520_0116-72d47886/Add_70520_0116.jpg with Kraken...
2025-12-11 04:48:14,494 - INFO - Loading segmentation model from /usr/local/lib/python3.10/site-packages/kraken/blla.mlmodel...
2025-12-11 04:48:15,003 - INFO - Segmenting /app/documents/eluhrs@gmail.com/Add_70520_0116-72d47886/Add_70520_0116.jpg
2025-12-11 04:48:18,721 - INFO - Vectorizing regions
2025-12-11 04:48:18,867 - INFO - Vectorizing regions
2025-12-11 04:48:19,001 - INFO - Vectorizing baselines
2025-12-11 04:48:25,708 - INFO - Compute reading order on 18 lines in lr direction
2025-12-11 04:48:25,709 - INFO - Perform topological sort on partially ordered lines
2025-12-11 04:48:25,710 - INFO - Compute reading order on 1 lines in lr direction
2025-12-11 04:48:25,710 - INFO - Perform topological sort on partially ordered lines
2025-12-11 04:48:25,711 - INFO - Found 18 lines.
2025-12-11 04:48:25,712 - INFO - Initializing Gemini model: gemini-3-pro-preview
2025-12-11 04:48:25,728 - INFO - Annotating 18 regions for Visual Tagging...
2025-12-11 04:48:25,765 - INFO - Saved debug image to /app/documents/eluhrs@gmail.com/Add_70520_0116-72d47886/Add_70520_0116-debug.jpg
2025-12-11 04:48:25,765 - INFO - Sending annotated image to Gemini...
2025-12-11 04:51:06,103 - INFO - Received JSON response from Gemini.
2025-12-11 04:51:06,292 - INFO - SUBSCRIPT OUTPUT for 13:

------------- gemini-pro-3 output for Add_70520_0116.jpg -------------
glad aspects were present (confirming her
Maiestie wth THEODOSIES dylligence, ARETAPHE-
LIS constancie, and ANTIGONVS clemencie)
setlinge them selues euar sence, in her Princelie
brest: as ye rarenes and greatnes of her Gracis
vertuse declare. Whom God presaruid from
formar perell, to rule & reygne ouer us, in
this last leaden adge: wherin Iniquitie hath
sought to surmount ye glorie of his Deitie, and
so presumed to suppresse his professors: As if
ye Shylde of her Souerayntie (for worldlie
force) did not protect his poore membars a=
Qurens
Ma:tie is ye per
fect protector
What Scisme or sect wold not assawte us?
What treason wold not entrapp us? When
all
----------------------------------------------------------------

Saved PageXML to /app/documents/eluhrs@gmail.com/Add_70520_0116-72d47886/Add_70520_0116.xml
Saved TXT to /app/documents/eluhrs@gmail.com/Add_70520_0116-72d47886/Add_70520_0116.txt
Saved PDF to /app/documents/eluhrs@gmail.com/Add_70520_0116-72d47886/Add_70520_0116.pdf

Time:   00:02:51
Input:  1329 tokens
Output: 307 tokens
Cost:   $0.0063

----------------------------------------------------------------


2025-12-11 04:51:06,306 - INFO - Generated thumbnail: /app/documents/eluhrs@gmail.com/Add_70520_0116-72d47886/Add_70520_0116-thumb.jpg
2025-12-11 04:51:06,320 - INFO - Task server.tasks.process_document_task[86a2e109-55b7-4bca-b39f-8f641e17cc78] succeeded in 171.86233287100913s: None
2025-12-11 04:52:50,966 - INFO - SYSTEM: Server module initialized at 2025-12-11 04:52:50.966786
2025-12-11 05:02:05,578 - INFO - JOB SUBMITTED: User eluhrs@gmail.com uploaded Add_70520_0116.jpg
2025-12-11 05:02:05,816 - INFO - Task server.tasks.process_document_task[d5ca0522-b63f-4697-946d-812b69e8b9a2] received
2025-12-11 05:02:05,849 - INFO - TASK START: Processing Add_70520_0116.jpg (ID: 14)
2025-12-11 05:02:05,850 - INFO - Command: subscript historical-manuscript gemini-pro-3 /app/documents/eluhrs@gmail.com/Add_70520_0116-a1cda2c9/Add_70520_0116.jpg --output /app/documents/eluhrs@gmail.com/Add_70520_0116-a1cda2c9
2025-12-11 05:02:05,870 - INFO - Running from: /app
2025-12-11 05:02:05,870 - INFO - Using config: /app/config.yml
2025-12-11 05:02:05,871 - INFO - Output directory: /app/documents/eluhrs@gmail.com/Add_70520_0116-a1cda2c9
2025-12-11 05:02:05,871 - INFO - ----------------------------------------
2025-12-11 05:02:05,874 - INFO - 
Subscript.py initialized segmentation provider: historical-manuscript
2025-12-11 05:02:05,874 - INFO - Subscript.py Initialized transcription provider: gemini-pro-3
2025-12-11 05:02:05,875 - INFO - Processing 1 files...
2025-12-11 05:02:05,875 - INFO - Processing /app/documents/eluhrs@gmail.com/Add_70520_0116-a1cda2c9/Add_70520_0116.jpg...
2025-12-11 05:02:05,875 - INFO - Segmenting /app/documents/eluhrs@gmail.com/Add_70520_0116-a1cda2c9/Add_70520_0116.jpg with Kraken...
2025-12-11 05:02:05,878 - INFO - Loading segmentation model from /usr/local/lib/python3.10/site-packages/kraken/blla.mlmodel...
2025-12-11 05:02:06,381 - INFO - Segmenting /app/documents/eluhrs@gmail.com/Add_70520_0116-a1cda2c9/Add_70520_0116.jpg
2025-12-11 05:02:10,301 - INFO - Vectorizing regions
2025-12-11 05:02:10,448 - INFO - Vectorizing regions
2025-12-11 05:02:10,592 - INFO - Vectorizing baselines
2025-12-11 05:02:17,106 - INFO - Compute reading order on 18 lines in lr direction
2025-12-11 05:02:17,107 - INFO - Perform topological sort on partially ordered lines
2025-12-11 05:02:17,107 - INFO - Compute reading order on 1 lines in lr direction
2025-12-11 05:02:17,108 - INFO - Perform topological sort on partially ordered lines
2025-12-11 05:02:17,111 - INFO - Found 18 lines.
2025-12-11 05:02:17,111 - INFO - Initializing Gemini model: gemini-3-pro-preview
2025-12-11 05:02:17,127 - INFO - Annotating 18 regions for Visual Tagging...
2025-12-11 05:02:17,164 - INFO - Saved debug image to /app/documents/eluhrs@gmail.com/Add_70520_0116-a1cda2c9/Add_70520_0116-debug.jpg
2025-12-11 05:02:17,164 - INFO - Sending annotated image to Gemini...
2025-12-11 05:04:06,057 - INFO - Received JSON response from Gemini.
2025-12-11 05:04:06,241 - INFO - SUBSCRIPT OUTPUT for 14:

------------- gemini-pro-3 output for Add_70520_0116.jpg -------------
glad aspects were present (confirming her
Maiestie wth THEODOSIES dylligence, ARETAPHE=
LIS constancie, and ANTIGONVS clemencie)
setlinge them selues euar sence, in her Princelie
brest: as ye rarenes and greatnes of her Gracis
vertuse declare. Whom God presaruid from
formar perell, to rule & reygne ouer us, in
this last leaden adge: wherin Iniquitie hath
sought to surmount ye glorie of his Deitie, and
so presumed to suppresse his professors: As if
ye Shylde of her Souerayntie (for worldlie
force) did not protect his poore membars a=
Quiens
Ma:tie is ye per
fect protector
of Religion
mong us: What error wold not inuade us?
What Scisme or sect wold not assawte us?
----------------------------------------------------------------

Saved PageXML to /app/documents/eluhrs@gmail.com/Add_70520_0116-a1cda2c9/Add_70520_0116.xml
Saved TXT to /app/documents/eluhrs@gmail.com/Add_70520_0116-a1cda2c9/Add_70520_0116.txt
Saved PDF to /app/documents/eluhrs@gmail.com/Add_70520_0116-a1cda2c9/Add_70520_0116.pdf

Time:   00:02:00
Input:  1329 tokens
Output: 353 tokens
Cost:   $0.0069

----------------------------------------------------------------


2025-12-11 05:04:06,255 - INFO - Generated thumbnail: /app/documents/eluhrs@gmail.com/Add_70520_0116-a1cda2c9/Add_70520_0116-thumb.jpg
2025-12-11 05:04:06,263 - INFO - Task server.tasks.process_document_task[d5ca0522-b63f-4697-946d-812b69e8b9a2] succeeded in 120.43892855499871s: None
2025-12-12 12:23:40,377 - INFO - SYSTEM: Server module initialized at 2025-12-12 12:23:40.377916
2025-12-12 12:47:32,268 - INFO - JOB SUBMITTED: User eluhrs@gmail.com uploaded background.jpg
2025-12-12 12:52:15,161 - INFO - SYSTEM: Server module initialized at 2025-12-12 12:52:15.161972
2025-12-12 12:52:41,564 - INFO - SYSTEM: Server module initialized at 2025-12-12 12:52:41.563964
2025-12-12 12:53:13,770 - INFO - SYSTEM: Server module initialized at 2025-12-12 12:53:13.770088
2025-12-12 12:54:37,417 - INFO - JOB SUBMITTED: User eluhrs@gmail.com uploaded background.jpg
2025-12-12 12:55:55,939 - INFO - SYSTEM: Server module initialized at 2025-12-12 12:55:55.939840
2025-12-12 12:55:56,106 - INFO - SYSTEM: Server module initialized at 2025-12-12 12:55:56.106080
2025-12-12 12:55:57,528 - INFO - Connected to redis://redis:6379/0
2025-12-12 12:55:57,533 - INFO - mingle: searching for neighbors
2025-12-12 12:55:58,556 - INFO - mingle: all alone
2025-12-12 12:55:58,568 - INFO - celery@df60cee06ad6 ready.
2025-12-12 13:00:20,823 - INFO - SYSTEM: Server module initialized at 2025-12-12 13:00:20.823357
2025-12-12 13:02:54,280 - INFO - JOB SUBMITTED: User eluhrs@gmail.com uploaded background.jpg
2025-12-12 13:02:54,599 - INFO - Task server.tasks.process_document_task[e461a6c7-34be-4a6f-9c2e-9aa42ba05648] received
2025-12-12 13:02:54,773 - INFO - TASK START: Processing background.jpg (ID: 2)
2025-12-12 13:02:54,775 - INFO - Command: subscript historical-manuscript gemini-pro-3 /app/documents/eluhrs@gmail.com/background-5bc843aa/background.jpg --output /app/documents/eluhrs@gmail.com/background-5bc843aa
2025-12-12 13:02:54,802 - INFO - Running from: /app
2025-12-12 13:02:54,803 - INFO - Using config: /app/config.yml
2025-12-12 13:02:54,803 - INFO - Output directory: /app/documents/eluhrs@gmail.com/background-5bc843aa
2025-12-12 13:02:54,804 - INFO - ----------------------------------------
2025-12-12 13:03:00,507 - INFO - 
Subscript.py initialized segmentation provider: historical-manuscript
2025-12-12 13:03:00,507 - INFO - Subscript.py Initialized transcription provider: gemini-pro-3
2025-12-12 13:03:00,508 - INFO - Processing 1 files...
2025-12-12 13:03:00,508 - INFO - Processing /app/documents/eluhrs@gmail.com/background-5bc843aa/background.jpg...
2025-12-12 13:03:00,508 - INFO - Segmenting /app/documents/eluhrs@gmail.com/background-5bc843aa/background.jpg with Kraken...
2025-12-12 13:03:00,517 - INFO - Loading segmentation model from /usr/local/lib/python3.10/site-packages/kraken/blla.mlmodel...
2025-12-12 13:03:01,394 - INFO - Segmenting /app/documents/eluhrs@gmail.com/background-5bc843aa/background.jpg
2025-12-12 13:03:01,728 - WARNING - consumer: Connection to broker lost. Trying to re-establish the connection...
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/redis/retry.py", line 116, in call_with_retry
    return do()
  File "/usr/local/lib/python3.10/site-packages/redis/client.py", line 973, in <lambda>
    lambda: command(*args, **kwargs),
  File "/usr/local/lib/python3.10/site-packages/redis/client.py", line 996, in try_read
    return conn.read_response(disconnect_on_error=False, push_request=True)
  File "/usr/local/lib/python3.10/site-packages/redis/connection.py", line 1133, in read_response
    response = self._parser.read_response(disable_decoding=disable_decoding)
  File "/usr/local/lib/python3.10/site-packages/redis/_parsers/resp2.py", line 15, in read_response
    result = self._read_response(disable_decoding=disable_decoding)
  File "/usr/local/lib/python3.10/site-packages/redis/_parsers/resp2.py", line 25, in _read_response
    raw = self._buffer.readline()
  File "/usr/local/lib/python3.10/site-packages/redis/_parsers/socket.py", line 115, in readline
    self._read_from_socket()
  File "/usr/local/lib/python3.10/site-packages/redis/_parsers/socket.py", line 68, in _read_from_socket
    raise ConnectionError(SERVER_CLOSED_CONNECTION_ERROR)
redis.exceptions.ConnectionError: Connection closed by server.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/redis/connection.py", line 855, in connect_check_health
    sock = self.retry.call_with_retry(
  File "/usr/local/lib/python3.10/site-packages/redis/retry.py", line 116, in call_with_retry
    return do()
  File "/usr/local/lib/python3.10/site-packages/redis/connection.py", line 856, in <lambda>
    lambda: self._connect(), lambda error: self.disconnect(error)
  File "/usr/local/lib/python3.10/site-packages/redis/connection.py", line 1306, in _connect
    raise err
  File "/usr/local/lib/python3.10/site-packages/redis/connection.py", line 1290, in _connect
    sock.connect(socket_address)
ConnectionRefusedError: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/celery/worker/consumer/consumer.py", line 346, in start
    blueprint.start(self)
  File "/usr/local/lib/python3.10/site-packages/celery/bootsteps.py", line 116, in start
    step.start(parent)
  File "/usr/local/lib/python3.10/site-packages/celery/worker/consumer/consumer.py", line 790, in start
    c.loop(*c.loop_args())
  File "/usr/local/lib/python3.10/site-packages/celery/worker/loops.py", line 97, in asynloop
    next(loop)
  File "/usr/local/lib/python3.10/site-packages/kombu/asynchronous/hub.py", line 377, in create_loop
    cb(*cbargs)
  File "/usr/local/lib/python3.10/site-packages/kombu/transport/redis.py", line 1395, in on_readable
    self.cycle.on_readable(fileno)
  File "/usr/local/lib/python3.10/site-packages/kombu/transport/redis.py", line 579, in on_readable
    chan.handlers[type]()
  File "/usr/local/lib/python3.10/site-packages/kombu/transport/redis.py", line 931, in _receive
    ret.append(self._receive_one(c))
  File "/usr/local/lib/python3.10/site-packages/kombu/transport/redis.py", line 941, in _receive_one
    response = c.parse_response()
  File "/usr/local/lib/python3.10/site-packages/redis/client.py", line 998, in parse_response
    response = self._execute(conn, try_read)
  File "/usr/local/lib/python3.10/site-packages/redis/client.py", line 972, in _execute
    response = conn.retry.call_with_retry(
  File "/usr/local/lib/python3.10/site-packages/redis/retry.py", line 121, in call_with_retry
    fail(error)
  File "/usr/local/lib/python3.10/site-packages/redis/client.py", line 974, in <lambda>
    lambda _: self._reconnect(conn),
  File "/usr/local/lib/python3.10/site-packages/redis/client.py", line 958, in _reconnect
    conn.connect()
  File "/usr/local/lib/python3.10/site-packages/redis/connection.py", line 846, in connect
    self.connect_check_health(check_health=True)
  File "/usr/local/lib/python3.10/site-packages/redis/connection.py", line 863, in connect_check_health
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 111 connecting to redis:6379. Connection refused.
2025-12-12 13:03:01,738 - WARNING - /usr/local/lib/python3.10/site-packages/celery/worker/consumer/consumer.py:397: CPendingDeprecationWarning: 
In Celery 5.1 we introduced an optional breaking change which
on connection loss cancels all currently executed tasks with late acknowledgement enabled.
These tasks cannot be acknowledged as the connection is gone, and the tasks are automatically redelivered
back to the queue. You can enable this behavior using the worker_cancel_long_running_tasks_on_connection_loss
setting. In Celery 5.1 it is set to False by default. The setting will be set to True by default in Celery 6.0.

  warnings.warn(CANCEL_TASKS_BY_DEFAULT, CPendingDeprecationWarning)

2025-12-12 13:03:01,739 - INFO - Temporarily reducing the prefetch count to 36 to avoid over-fetching since 1 tasks are currently being processed.
The prefetch count will be gradually restored to 40 as the tasks complete processing.
2025-12-12 13:03:01,763 - ERROR - consumer: Cannot connect to redis://redis:6379/0: Error 111 connecting to redis:6379. Connection refused..
Trying again in 2.00 seconds... (1/100)

2025-12-12 13:03:03,845 - ERROR - consumer: Cannot connect to redis://redis:6379/0: Error -2 connecting to redis:6379. Name or service not known..
Trying again in 4.00 seconds... (2/100)

2025-12-12 13:03:08,219 - INFO - SYSTEM: Server module initialized at 2025-12-12 13:03:08.219275
2025-12-12 13:03:08,399 - INFO - SYSTEM: Server module initialized at 2025-12-12 13:03:08.399123
2025-12-12 13:03:09,498 - INFO - Connected to redis://redis:6379/0
2025-12-12 13:03:09,501 - INFO - mingle: searching for neighbors
2025-12-12 13:03:10,521 - INFO - mingle: all alone
2025-12-12 13:03:10,534 - INFO - celery@ea6ff6d6d02b ready.
2025-12-12 13:04:22,424 - INFO - JOB SUBMITTED: User eluhrs@gmail.com uploaded background.jpg
2025-12-12 13:04:22,734 - INFO - Task server.tasks.process_document_task[74acf7f7-10f4-4b73-87d2-83bdd994d3e3] received
2025-12-12 13:04:22,902 - INFO - Task 2 received options raw: {"transcription":{"prompt":"\"Convert all dates to ISO format.\""}}
2025-12-12 13:04:22,904 - INFO - Task 2 parsed options: {'transcription': {'prompt': '"Convert all dates to ISO format."'}}
2025-12-12 13:04:22,904 - INFO - Task 2 found prompt override: "Convert all dates to ISO format."
2025-12-12 13:04:22,910 - INFO - Using config override from user options: /app/documents/eluhrs@gmail.com/background-b8ab6a66/override_2.yml
2025-12-12 13:04:22,911 - INFO - TASK START: Processing background.jpg (ID: 2)
2025-12-12 13:04:22,911 - INFO - Command: subscript historical-manuscript gemini-pro-3 /app/documents/eluhrs@gmail.com/background-b8ab6a66/background.jpg --output /app/documents/eluhrs@gmail.com/background-b8ab6a66 --config-file /app/documents/eluhrs@gmail.com/background-b8ab6a66/override_2.yml
2025-12-12 13:04:22,923 - INFO - Running from: /app
2025-12-12 13:04:22,923 - INFO - Using config: /app/config.yml
2025-12-12 13:04:22,923 - INFO - Output directory: /app/documents/eluhrs@gmail.com/background-b8ab6a66
2025-12-12 13:04:22,924 - INFO - ----------------------------------------
2025-12-12 13:04:22,924 - WARNING - No files found for pattern: --config-file
2025-12-12 13:04:27,435 - INFO - 
Subscript.py initialized segmentation provider: historical-manuscript
2025-12-12 13:04:27,435 - INFO - Subscript.py Initialized transcription provider: gemini-pro-3
2025-12-12 13:04:27,436 - INFO - Processing 2 files...
2025-12-12 13:04:27,436 - INFO - Processing /app/documents/eluhrs@gmail.com/background-b8ab6a66/background.jpg...
2025-12-12 13:04:27,436 - INFO - Segmenting /app/documents/eluhrs@gmail.com/background-b8ab6a66/background.jpg with Kraken...
2025-12-12 13:04:27,443 - INFO - Loading segmentation model from /usr/local/lib/python3.10/site-packages/kraken/blla.mlmodel...
2025-12-12 13:04:28,121 - INFO - Segmenting /app/documents/eluhrs@gmail.com/background-b8ab6a66/background.jpg
2025-12-12 13:04:31,872 - INFO - Vectorizing regions
2025-12-12 13:04:32,152 - INFO - Vectorizing regions
2025-12-12 13:04:32,427 - INFO - Vectorizing baselines
2025-12-12 13:04:43,176 - INFO - Compute reading order on 23 lines in lr direction
2025-12-12 13:04:43,177 - INFO - Perform topological sort on partially ordered lines
2025-12-12 13:04:43,177 - INFO - Compute reading order on 1 lines in lr direction
2025-12-12 13:04:43,177 - INFO - Perform topological sort on partially ordered lines
2025-12-12 13:04:43,179 - INFO - Found 23 lines.
2025-12-12 13:04:43,180 - INFO - Initializing Gemini model: gemini-3-pro-preview
2025-12-12 13:04:43,193 - INFO - Annotating 23 regions for Visual Tagging...
2025-12-12 13:04:43,229 - INFO - Saved debug image to /app/documents/eluhrs@gmail.com/background-b8ab6a66/background-debug.jpg
2025-12-12 13:04:43,229 - INFO - Sending annotated image to Gemini...
2025-12-12 13:05:17,976 - INFO - Received JSON response from Gemini.
2025-12-12 13:05:18,032 - INFO - Processing /app/documents/eluhrs@gmail.com/background-b8ab6a66/override_2.yml...
2025-12-12 13:05:18,033 - INFO - Segmenting /app/documents/eluhrs@gmail.com/background-b8ab6a66/override_2.yml with Kraken...
2025-12-12 13:05:18,033 - ERROR - Failed to process /app/documents/eluhrs@gmail.com/background-b8ab6a66/override_2.yml: cannot identify image file '/app/documents/eluhrs@gmail.com/background-b8ab6a66/override_2.yml'
2025-12-12 13:05:18,034 - INFO - SUBSCRIPT OUTPUT for 2:

------------- gemini-pro-3 output for background.jpg -------------
Panama, Dec. 29. 1874
My Dear Capt. Green,
Your favor by Dr. Boyd duly came.
We observed our latitude stars on Sunday night, and
of course last night again. The instrument behaves well.
Yesterday morning (before your letter came) & this morn.
we observed for azimuth & variation. Though heavily on
our minds we couldn't accomplish it earlier, while the
longitude work lasted. On Sat. night we observed 24 stars.
I will enclose your signals. I think our work is a success.
To-day Mr. Spencer dismantles the telegraph line. We hope to
un
come over on Sat. Morn. - I do not think the pier is steady,
I think some one hit an arm of the instrument unconsciously
each time I found it out of meridian.
The vernier trouble is due to that arm making an angle
with the vertical. I am convinced that most of the register
troubles are due to bad quality of the fillet paper. It is un=
equal thickness at two edges and also varies in thickness
lengthwise, so as to require frequent readjustment of
rollers & stylet.
Very truly Yrs.
Miles Rock
----------------------------------------------------------------

Saved PageXML to /app/documents/eluhrs@gmail.com/background-b8ab6a66/background.xml
Saved TXT to /app/documents/eluhrs@gmail.com/background-b8ab6a66/background.txt
Saved PDF to /app/documents/eluhrs@gmail.com/background-b8ab6a66/background.pdf

Time:   00:00:50
Input:  1325 tokens
Output: 406 tokens
Cost:   $0.0075

----------------------------------------------------------------

Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/subscript/__main__.py", line 284, in main
    regions = segmentation_engine.analyze(image_path, config)
  File "/usr/local/lib/python3.10/site-packages/subscript/modules/segmentation.py", line 34, in analyze
    im = Image.open(image_path)
  File "/usr/local/lib/python3.10/site-packages/PIL/Image.py", line 3560, in open
    raise UnidentifiedImageError(msg)
PIL.UnidentifiedImageError: cannot identify image file '/app/documents/eluhrs@gmail.com/background-b8ab6a66/override_2.yml'

2025-12-12 13:05:18,035 - INFO - Task Complete: background.jpg
2025-12-12 13:05:18,041 - INFO - Task server.tasks.process_document_task[74acf7f7-10f4-4b73-87d2-83bdd994d3e3] succeeded in 55.288221440976486s: None
2025-12-12 13:06:18,223 - INFO - JOB SUBMITTED: User eluhrs@gmail.com uploaded background.jpg
2025-12-12 13:06:18,226 - INFO - Task server.tasks.process_document_task[22477318-4a3f-4e3e-83e4-e8f49f492c31] received
2025-12-12 13:06:18,232 - INFO - Task 3 received options raw: {"transcription":{"prompt":"Convert all dates to ISO format."}}
2025-12-12 13:06:18,232 - INFO - Task 3 parsed options: {'transcription': {'prompt': 'Convert all dates to ISO format.'}}
2025-12-12 13:06:18,232 - INFO - Task 3 found prompt override: Convert all dates to ISO format.
2025-12-12 13:06:18,234 - INFO - Using config override from user options: /app/documents/eluhrs@gmail.com/background-67c5377d/override_3.yml
2025-12-12 13:06:18,235 - INFO - TASK START: Processing background.jpg (ID: 3)
2025-12-12 13:06:18,235 - INFO - Command: subscript historical-manuscript gemini-pro-3 /app/documents/eluhrs@gmail.com/background-67c5377d/background.jpg --output /app/documents/eluhrs@gmail.com/background-67c5377d --config-file /app/documents/eluhrs@gmail.com/background-67c5377d/override_3.yml
2025-12-12 13:06:18,244 - INFO - Running from: /app
2025-12-12 13:06:18,244 - INFO - Using config: /app/config.yml
2025-12-12 13:06:18,244 - INFO - Output directory: /app/documents/eluhrs@gmail.com/background-67c5377d
2025-12-12 13:06:18,244 - INFO - ----------------------------------------
2025-12-12 13:06:18,245 - WARNING - No files found for pattern: --config-file
2025-12-12 13:06:18,245 - INFO - 
Subscript.py initialized segmentation provider: historical-manuscript
2025-12-12 13:06:18,245 - INFO - Subscript.py Initialized transcription provider: gemini-pro-3
2025-12-12 13:06:18,245 - INFO - Processing 2 files...
2025-12-12 13:06:18,246 - INFO - Processing /app/documents/eluhrs@gmail.com/background-67c5377d/background.jpg...
2025-12-12 13:06:18,246 - INFO - Segmenting /app/documents/eluhrs@gmail.com/background-67c5377d/background.jpg with Kraken...
2025-12-12 13:06:18,247 - INFO - Loading segmentation model from /usr/local/lib/python3.10/site-packages/kraken/blla.mlmodel...
2025-12-12 13:06:18,704 - INFO - Segmenting /app/documents/eluhrs@gmail.com/background-67c5377d/background.jpg
2025-12-12 13:06:23,404 - INFO - Vectorizing regions
2025-12-12 13:06:23,674 - INFO - Vectorizing regions
2025-12-12 13:06:23,946 - INFO - Vectorizing baselines
2025-12-12 13:06:34,863 - INFO - Compute reading order on 23 lines in lr direction
2025-12-12 13:06:34,880 - INFO - Perform topological sort on partially ordered lines
2025-12-12 13:06:34,881 - INFO - Compute reading order on 1 lines in lr direction
2025-12-12 13:06:34,881 - INFO - Perform topological sort on partially ordered lines
2025-12-12 13:06:34,884 - INFO - Found 23 lines.
2025-12-12 13:06:34,885 - INFO - Initializing Gemini model: gemini-3-pro-preview
2025-12-12 13:06:34,897 - INFO - Annotating 23 regions for Visual Tagging...
2025-12-12 13:06:34,933 - INFO - Saved debug image to /app/documents/eluhrs@gmail.com/background-67c5377d/background-debug.jpg
2025-12-12 13:06:34,934 - INFO - Sending annotated image to Gemini...
2025-12-12 13:07:30,105 - INFO - SYSTEM: Server module initialized at 2025-12-12 13:07:30.105032
2025-12-12 13:07:48,265 - INFO - Received JSON response from Gemini.
2025-12-12 13:07:48,269 - ERROR - Failed to generate PDF: [Errno 2] No such file or directory: '/app/documents/eluhrs@gmail.com/background-67c5377d/background.jpg'
2025-12-12 13:07:48,269 - ERROR - Failed to process /app/documents/eluhrs@gmail.com/background-67c5377d/background.jpg: [Errno 2] No such file or directory: '/app/documents/eluhrs@gmail.com/background-67c5377d/background.jpg'
2025-12-12 13:07:48,270 - INFO - Processing /app/documents/eluhrs@gmail.com/background-67c5377d/override_3.yml...
2025-12-12 13:07:48,270 - INFO - Segmenting /app/documents/eluhrs@gmail.com/background-67c5377d/override_3.yml with Kraken...
2025-12-12 13:07:48,270 - ERROR - Failed to process /app/documents/eluhrs@gmail.com/background-67c5377d/override_3.yml: [Errno 2] No such file or directory: '/app/documents/eluhrs@gmail.com/background-67c5377d/override_3.yml'
2025-12-12 13:07:48,271 - INFO - SUBSCRIPT OUTPUT for 3:
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/subscript/__main__.py", line 300, in main
    output_engine.generate(image_path, regions, config.get('output_dir', 'output'), config)
  File "/usr/local/lib/python3.10/site-packages/subscript/modules/output.py", line 32, in generate
    self._generate_xml(image_path, regions, xml_path)
  File "/usr/local/lib/python3.10/site-packages/subscript/modules/output.py", line 52, in _generate_xml
    with Image.open(image_path) as im:
  File "/usr/local/lib/python3.10/site-packages/PIL/Image.py", line 3493, in open
    fp = builtins.open(filename, "rb")
FileNotFoundError: [Errno 2] No such file or directory: '/app/documents/eluhrs@gmail.com/background-67c5377d/background.jpg'
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/subscript/__main__.py", line 284, in main
    regions = segmentation_engine.analyze(image_path, config)
  File "/usr/local/lib/python3.10/site-packages/subscript/modules/segmentation.py", line 34, in analyze
    im = Image.open(image_path)
  File "/usr/local/lib/python3.10/site-packages/PIL/Image.py", line 3493, in open
    fp = builtins.open(filename, "rb")
FileNotFoundError: [Errno 2] No such file or directory: '/app/documents/eluhrs@gmail.com/background-67c5377d/override_3.yml'

2025-12-12 13:07:48,271 - INFO - Task Complete: background.jpg
2025-12-12 13:07:48,272 - WARNING - Document 3 deleted during processing. Suppressing error.
2025-12-12 13:07:48,274 - INFO - Task server.tasks.process_document_task[22477318-4a3f-4e3e-83e4-e8f49f492c31] succeeded in 90.0456356239738s: None
2025-12-12 13:09:48,905 - INFO - JOB SUBMITTED: User eluhrs@gmail.com uploaded background.jpg
2025-12-12 13:09:49,322 - INFO - Task server.tasks.process_document_task[fbe14945-9fee-474d-8e86-4f73c4f599a3] received
2025-12-12 13:09:49,369 - INFO - Task 2 received options raw: {"transcription":{"prompt":"Convert all dates to ISO format."}}
2025-12-12 13:09:49,373 - INFO - Task 2 parsed options: {'transcription': {'prompt': 'Convert all dates to ISO format.'}}
2025-12-12 13:09:49,374 - INFO - Task 2 found prompt override: Convert all dates to ISO format.
2025-12-12 13:09:49,383 - INFO - Using config override from user options: /app/documents/eluhrs@gmail.com/background-6e370c9e/override_2.yml
2025-12-12 13:09:49,384 - INFO - TASK START: Processing background.jpg (ID: 2)
2025-12-12 13:09:49,384 - INFO - Command: subscript historical-manuscript gemini-pro-3 /app/documents/eluhrs@gmail.com/background-6e370c9e/background.jpg --output /app/documents/eluhrs@gmail.com/background-6e370c9e --config-file /app/documents/eluhrs@gmail.com/background-6e370c9e/override_2.yml
2025-12-12 13:09:49,402 - INFO - Running from: /app
2025-12-12 13:09:49,402 - INFO - Using config: /app/config.yml
2025-12-12 13:09:49,403 - INFO - Output directory: /app/documents/eluhrs@gmail.com/background-6e370c9e
2025-12-12 13:09:49,403 - INFO - ----------------------------------------
2025-12-12 13:09:49,404 - WARNING - No files found for pattern: --config-file
2025-12-12 13:09:49,406 - INFO - 
Subscript.py initialized segmentation provider: historical-manuscript
2025-12-12 13:09:49,406 - INFO - Subscript.py Initialized transcription provider: gemini-pro-3
2025-12-12 13:09:49,407 - INFO - Processing 2 files...
2025-12-12 13:09:49,407 - INFO - Processing /app/documents/eluhrs@gmail.com/background-6e370c9e/background.jpg...
2025-12-12 13:09:49,408 - INFO - Segmenting /app/documents/eluhrs@gmail.com/background-6e370c9e/background.jpg with Kraken...
2025-12-12 13:09:49,411 - INFO - Loading segmentation model from /usr/local/lib/python3.10/site-packages/kraken/blla.mlmodel...
2025-12-12 13:09:50,399 - INFO - Segmenting /app/documents/eluhrs@gmail.com/background-6e370c9e/background.jpg
2025-12-12 13:10:03,149 - INFO - Vectorizing regions
2025-12-12 13:10:03,592 - INFO - Vectorizing regions
2025-12-12 13:10:03,939 - INFO - Vectorizing baselines
2025-12-12 13:10:09,129 - INFO - SYSTEM: Server module initialized at 2025-12-12 13:10:09.129356
2025-12-12 13:10:10,306 - INFO - Connected to redis://redis:6379/0
2025-12-12 13:10:10,313 - INFO - mingle: searching for neighbors
2025-12-12 13:10:11,326 - INFO - mingle: all alone
2025-12-12 13:10:11,338 - INFO - celery@b44630bd5b7c ready.
2025-12-12 13:15:06,189 - INFO - JOB SUBMITTED: User eluhrs@gmail.com uploaded background.jpg
2025-12-12 13:15:06,209 - INFO - Task server.tasks.process_document_task[e98678a9-a7c8-456f-9485-862499365455] received
2025-12-12 13:15:06,302 - INFO - Task 2 received options raw: {"transcription":{"prompt":"Convert all dates to ISO format."}}
2025-12-12 13:15:06,303 - INFO - Task 2 parsed options: {'transcription': {'prompt': 'Convert all dates to ISO format.'}}
2025-12-12 13:15:06,304 - INFO - Task 2 found prompt override: Convert all dates to ISO format.
2025-12-12 13:15:06,307 - INFO - Using config override from user options: /tmp/override_2.yml
2025-12-12 13:15:06,308 - INFO - TASK START: Processing background.jpg (ID: 2)
2025-12-12 13:15:06,308 - INFO - Command: subscript historical-manuscript gemini-pro-3 /app/documents/eluhrs@gmail.com/background-af42d4bf/background.jpg --output /app/documents/eluhrs@gmail.com/background-af42d4bf --config-file /tmp/override_2.yml
2025-12-12 13:15:06,318 - INFO - Running from: /app
2025-12-12 13:15:06,319 - INFO - Using config: /app/config.yml
2025-12-12 13:15:06,319 - INFO - Output directory: /app/documents/eluhrs@gmail.com/background-af42d4bf
2025-12-12 13:15:06,319 - INFO - ----------------------------------------
2025-12-12 13:15:06,320 - WARNING - No files found for pattern: --config-file
2025-12-12 13:15:10,871 - INFO - 
Subscript.py initialized segmentation provider: historical-manuscript
2025-12-12 13:15:10,872 - INFO - Subscript.py Initialized transcription provider: gemini-pro-3
2025-12-12 13:15:10,872 - INFO - Processing 2 files...
2025-12-12 13:15:10,872 - INFO - Processing /app/documents/eluhrs@gmail.com/background-af42d4bf/background.jpg...
2025-12-12 13:15:10,872 - INFO - Segmenting /app/documents/eluhrs@gmail.com/background-af42d4bf/background.jpg with Kraken...
2025-12-12 13:15:10,879 - INFO - Loading segmentation model from /usr/local/lib/python3.10/site-packages/kraken/blla.mlmodel...
2025-12-12 13:15:11,405 - INFO - Segmenting /app/documents/eluhrs@gmail.com/background-af42d4bf/background.jpg
2025-12-12 13:15:15,026 - INFO - Vectorizing regions
2025-12-12 13:15:15,311 - INFO - Vectorizing regions
2025-12-12 13:15:15,590 - INFO - Vectorizing baselines
2025-12-12 13:15:25,726 - INFO - Compute reading order on 23 lines in lr direction
2025-12-12 13:15:25,728 - INFO - Perform topological sort on partially ordered lines
2025-12-12 13:15:25,731 - INFO - Compute reading order on 1 lines in lr direction
2025-12-12 13:15:25,731 - INFO - Perform topological sort on partially ordered lines
2025-12-12 13:15:25,733 - INFO - Found 23 lines.
2025-12-12 13:15:25,734 - INFO - Initializing Gemini model: gemini-3-pro-preview
2025-12-12 13:15:25,747 - INFO - Annotating 23 regions for Visual Tagging...
2025-12-12 13:15:25,790 - INFO - Saved debug image to /app/documents/eluhrs@gmail.com/background-af42d4bf/background-debug.jpg
2025-12-12 13:15:25,791 - INFO - Sending annotated image to Gemini...
2025-12-12 13:16:08,092 - INFO - Received JSON response from Gemini.
2025-12-12 13:16:08,134 - INFO - Processing /tmp/override_2.yml...
2025-12-12 13:16:08,134 - INFO - Segmenting /tmp/override_2.yml with Kraken...
2025-12-12 13:16:08,134 - ERROR - Failed to process /tmp/override_2.yml: cannot identify image file '/tmp/override_2.yml'
2025-12-12 13:16:08,135 - INFO - SUBSCRIPT OUTPUT for 2:

------------- gemini-pro-3 output for background.jpg -------------
Panama, Dec. 29. 1874
My Dear Capt. Green, -
Your favor by Dr. Boyd duly came.
We observed our latitude stars on Sunday night, and
of course last night again. The instrument behaves well.
Yesterday morning (before your letter came) & this morn.
we observed for azimuth & variation. Though heavily on
our minds we couldn't accomplish it earlier, while the
longitude work lasted. On Sat. night we observed 24 stars.
I will enclose your signals. I think our work is a success.
To-day Mr. Spencer dismantles the telegraph line. We hope to
un
come over on Sat. Morn. - I do not think the pier is steady,
I think some one hit an arm of the instrument unconsciously
each time I found it out of meridian.
The vernier trouble is due to that arm making an angle
with the vertical. I am convinced that most of the register
troubles are due to bad quality of the fillet paper. It is un=
equal thickness at two edges and also varies in thickness
lengthwise, so as to require frequent readjustment of
rollers & stylet.
Very truly Yrs.
Miles Rock
----------------------------------------------------------------

Saved PageXML to /app/documents/eluhrs@gmail.com/background-af42d4bf/background.xml
Saved TXT to /app/documents/eluhrs@gmail.com/background-af42d4bf/background.txt
Saved PDF to /app/documents/eluhrs@gmail.com/background-af42d4bf/background.pdf

Time:   00:00:57
Input:  1325 tokens
Output: 408 tokens
Cost:   $0.0075

----------------------------------------------------------------

Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/subscript/__main__.py", line 284, in main
    regions = segmentation_engine.analyze(image_path, config)
  File "/usr/local/lib/python3.10/site-packages/subscript/modules/segmentation.py", line 34, in analyze
    im = Image.open(image_path)
  File "/usr/local/lib/python3.10/site-packages/PIL/Image.py", line 3560, in open
    raise UnidentifiedImageError(msg)
PIL.UnidentifiedImageError: cannot identify image file '/tmp/override_2.yml'

2025-12-12 13:16:08,136 - INFO - Task Complete: background.jpg
2025-12-12 13:16:08,141 - INFO - Task server.tasks.process_document_task[e98678a9-a7c8-456f-9485-862499365455] succeeded in 61.92429802904371s: None
2025-12-12 13:17:50,132 - INFO - SYSTEM: Server module initialized at 2025-12-12 13:17:50.132514
2025-12-12 13:19:05,719 - INFO - JOB SUBMITTED: User eluhrs@gmail.com uploaded background.jpg
2025-12-12 13:19:05,907 - INFO - Task server.tasks.process_document_task[7da375e8-a15f-4b45-abbb-3ef48a939d6b] received
2025-12-12 13:19:05,950 - INFO - Task 2 received options raw: {"transcription":{"prompt":"Convert all dates to ISO format."}}
2025-12-12 13:19:05,959 - INFO - Task 2 parsed options: {'transcription': {'prompt': 'Convert all dates to ISO format.'}}
2025-12-12 13:19:05,959 - INFO - Task 2 found prompt override: Convert all dates to ISO format.
2025-12-12 13:19:05,964 - INFO - Using config override from user options: /tmp/override_2.yml
2025-12-12 13:19:05,964 - INFO - TASK START: Processing background.jpg (ID: 2)
2025-12-12 13:19:05,964 - INFO - Command: subscript historical-manuscript gemini-pro-3 /app/documents/eluhrs@gmail.com/background-d6fb8fa3/background.jpg --output /app/documents/eluhrs@gmail.com/background-d6fb8fa3 --config-file /tmp/override_2.yml
2025-12-12 13:19:05,985 - INFO - Running from: /app
2025-12-12 13:19:05,986 - INFO - Using config: /app/config.yml
2025-12-12 13:19:05,986 - INFO - Output directory: /app/documents/eluhrs@gmail.com/background-d6fb8fa3
2025-12-12 13:19:05,987 - INFO - ----------------------------------------
2025-12-12 13:19:05,987 - WARNING - No files found for pattern: --config-file
2025-12-12 13:19:05,990 - INFO - 
Subscript.py initialized segmentation provider: historical-manuscript
2025-12-12 13:19:05,991 - INFO - Subscript.py Initialized transcription provider: gemini-pro-3
2025-12-12 13:19:05,991 - INFO - Processing 2 files...
2025-12-12 13:19:05,991 - INFO - Processing /app/documents/eluhrs@gmail.com/background-d6fb8fa3/background.jpg...
2025-12-12 13:19:05,993 - INFO - Segmenting /app/documents/eluhrs@gmail.com/background-d6fb8fa3/background.jpg with Kraken...
2025-12-12 13:19:05,999 - INFO - Loading segmentation model from /usr/local/lib/python3.10/site-packages/kraken/blla.mlmodel...
2025-12-12 13:19:06,691 - INFO - Segmenting /app/documents/eluhrs@gmail.com/background-d6fb8fa3/background.jpg
2025-12-12 13:19:14,185 - INFO - Vectorizing regions
2025-12-12 13:19:14,470 - INFO - Vectorizing regions
2025-12-12 13:19:14,699 - INFO - Vectorizing baselines
2025-12-12 13:19:25,008 - INFO - Compute reading order on 23 lines in lr direction
2025-12-12 13:19:25,009 - INFO - Perform topological sort on partially ordered lines
2025-12-12 13:19:25,009 - INFO - Compute reading order on 1 lines in lr direction
2025-12-12 13:19:25,010 - INFO - Perform topological sort on partially ordered lines
2025-12-12 13:19:25,011 - INFO - Found 23 lines.
2025-12-12 13:19:25,012 - INFO - Initializing Gemini model: gemini-3-pro-preview
2025-12-12 13:19:25,024 - INFO - Annotating 23 regions for Visual Tagging...
2025-12-12 13:19:25,055 - INFO - Saved debug image to /app/documents/eluhrs@gmail.com/background-d6fb8fa3/background-debug.jpg
2025-12-12 13:19:25,055 - INFO - Sending annotated image to Gemini...
2025-12-12 13:19:50,637 - INFO - Received JSON response from Gemini.
2025-12-12 13:19:50,691 - INFO - Processing /tmp/override_2.yml...
2025-12-12 13:19:50,692 - INFO - Segmenting /tmp/override_2.yml with Kraken...
2025-12-12 13:19:50,693 - ERROR - Failed to process /tmp/override_2.yml: cannot identify image file '/tmp/override_2.yml'
2025-12-12 13:19:50,696 - INFO - SUBSCRIPT OUTPUT for 2:

------------- gemini-pro-3 output for background.jpg -------------
Panama, Dec. 29. 1874
My Dear Capt. Green,-
Your favor by Dr. Boyd duly came.
We observed our latitude stars on Sunday night, and
of course last night again. The instrument behaves well.
Yesterday morning (before your letter came) & this morn.
we observed for azimuth & variation. Though heavily on
our minds we couldn't accomplish it earlier, while the
longitude work lasted. On Sat. night we observed 24 stars.
I will enclose your signals. I think our work is a success.
To-day Mr. Spencer dismantles the telegraph line. We hope to
un
come over on Sat. Morn. - I do not think the pier is steady,
I think some one hit an arm of the instrument unconsciously
each time I found it out of meridian.
The vernier trouble is due to that arm making an angle
with the vertical. I am convinced that most of the register
troubles are due to bad quality of the fillet paper. It is un=
equal thickness at two edges and also varies in thickness
lengthwise, so as to require frequent readjustment of
rollers & stylet.
Very truly Yrs.
Miles Rock
----------------------------------------------------------------

Saved PageXML to /app/documents/eluhrs@gmail.com/background-d6fb8fa3/background.xml
Saved TXT to /app/documents/eluhrs@gmail.com/background-d6fb8fa3/background.txt
Saved PDF to /app/documents/eluhrs@gmail.com/background-d6fb8fa3/background.pdf

Time:   00:00:44
Input:  1325 tokens
Output: 407 tokens
Cost:   $0.0075

----------------------------------------------------------------

Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/subscript/__main__.py", line 284, in main
    regions = segmentation_engine.analyze(image_path, config)
  File "/usr/local/lib/python3.10/site-packages/subscript/modules/segmentation.py", line 34, in analyze
    im = Image.open(image_path)
  File "/usr/local/lib/python3.10/site-packages/PIL/Image.py", line 3560, in open
    raise UnidentifiedImageError(msg)
PIL.UnidentifiedImageError: cannot identify image file '/tmp/override_2.yml'

2025-12-12 13:19:50,699 - INFO - Task Complete: background.jpg
2025-12-12 13:19:50,727 - INFO - Task server.tasks.process_document_task[7da375e8-a15f-4b45-abbb-3ef48a939d6b] succeeded in 44.806341352988966s: None
2025-12-12 13:20:12,992 - INFO - SYSTEM: Server module initialized at 2025-12-12 13:20:12.992580
2025-12-12 13:20:14,099 - INFO - Connected to redis://redis:6379/0
2025-12-12 13:20:14,102 - INFO - mingle: searching for neighbors
2025-12-12 13:20:15,115 - INFO - mingle: all alone
2025-12-12 13:20:15,125 - INFO - celery@43cc669a147a ready.
2025-12-12 13:38:02,820 - INFO - JOB SUBMITTED: User eluhrs@gmail.com uploaded background.jpg
2025-12-12 13:38:02,833 - INFO - Task server.tasks.process_document_task[921452f6-0a5f-43cb-b2dc-3eb874378f6a] received
2025-12-12 13:38:02,930 - INFO - Task 2 received options raw: {"transcription":{"prompt":"Convert all dates to ISO format."}}
2025-12-12 13:38:02,932 - INFO - Task 2 parsed options: {'transcription': {'prompt': 'Convert all dates to ISO format.'}}
2025-12-12 13:38:02,932 - INFO - Task 2 found prompt override: Convert all dates to ISO format.
2025-12-12 13:38:02,934 - INFO - TASK START: Processing background.jpg (ID: 2)
2025-12-12 13:38:02,934 - INFO - Command: subscript historical-manuscript gemini-pro-3 /app/documents/eluhrs@gmail.com/background-7ae410fd/background.jpg --output /app/documents/eluhrs@gmail.com/background-7ae410fd --prompt Convert all dates to ISO format.
2025-12-12 13:38:02,945 - INFO - Running from: /app
2025-12-12 13:38:02,945 - INFO - Using config: /app/config.yml
2025-12-12 13:38:02,946 - INFO - Output directory: /app/documents/eluhrs@gmail.com/background-7ae410fd
2025-12-12 13:38:02,946 - INFO - ----------------------------------------
2025-12-12 13:38:07,071 - INFO - 
Subscript.py initialized segmentation provider: historical-manuscript
2025-12-12 13:38:07,071 - INFO - Subscript.py Initialized transcription provider: gemini-pro-3
2025-12-12 13:38:07,072 - INFO - Processing 1 files...
2025-12-12 13:38:07,072 - INFO - Processing /app/documents/eluhrs@gmail.com/background-7ae410fd/background.jpg...
2025-12-12 13:38:07,072 - INFO - Segmenting /app/documents/eluhrs@gmail.com/background-7ae410fd/background.jpg with Kraken...
2025-12-12 13:38:07,077 - INFO - Loading segmentation model from /usr/local/lib/python3.10/site-packages/kraken/blla.mlmodel...
2025-12-12 13:38:07,487 - INFO - Segmenting /app/documents/eluhrs@gmail.com/background-7ae410fd/background.jpg
2025-12-12 13:38:10,795 - INFO - Vectorizing regions
2025-12-12 13:38:11,014 - INFO - Vectorizing regions
2025-12-12 13:38:11,228 - INFO - Vectorizing baselines
2025-12-12 13:38:19,238 - INFO - Compute reading order on 23 lines in lr direction
2025-12-12 13:38:19,242 - INFO - Perform topological sort on partially ordered lines
2025-12-12 13:38:19,242 - INFO - Compute reading order on 1 lines in lr direction
2025-12-12 13:38:19,243 - INFO - Perform topological sort on partially ordered lines
2025-12-12 13:38:19,244 - INFO - Found 23 lines.
2025-12-12 13:38:19,247 - INFO - Initializing Gemini model: gemini-3-pro-preview
2025-12-12 13:38:19,263 - INFO - Annotating 23 regions for Visual Tagging...
2025-12-12 13:38:19,291 - INFO - Saved debug image to /app/documents/eluhrs@gmail.com/background-7ae410fd/background-debug.jpg
2025-12-12 13:38:19,291 - INFO - Sending annotated image to Gemini...
2025-12-12 13:39:46,466 - INFO - Received JSON response from Gemini.
2025-12-12 13:39:46,536 - INFO - SUBSCRIPT OUTPUT for 2:

------------- gemini-pro-3 output for background.jpg -------------
Panama, 1874-12-29
My Dear Capt. Green,-
Your favor by Dr. Boyd duly came.
We observed our latitude stars on Sunday night, and
of course last night again. The instrument behaves well.
Yesterday morning (before your letter came) & this morn.
we observed for azimuth & variation. Though heavily on
our minds we couldn't accomplish it earlier, while the
longitude work lasted. On Sat. night we observed 24 stars.
I will enclose your signals. I think our work is a success.
To-day Mr. Spencer dismounts the telegraph line. We hope to
un
come over on Sat. Morn. - I do not think the pier is, steady,
I think some one hit an arm of the instrument unconsciously
each time I found it out of meridian.
The vernier trouble is due to that arm making an angle
with the vertical. I am convinced that most of the register
troubles are due to bad quality of the fillet paper. It is un=
equal thickness at two edges and also varies in thickness
lengthwise, so as to require frequent readjustment of
rollers & stylet.
Very truly Yrs.
Miles Rock
----------------------------------------------------------------

Saved PageXML to /app/documents/eluhrs@gmail.com/background-7ae410fd/background.xml
Saved TXT to /app/documents/eluhrs@gmail.com/background-7ae410fd/background.txt
Saved PDF to /app/documents/eluhrs@gmail.com/background-7ae410fd/background.pdf

Time:   00:01:39
Input:  1202 tokens
Output: 409 tokens
Cost:   $0.0073

----------------------------------------------------------------


2025-12-12 13:39:46,537 - INFO - Task Complete: background.jpg
2025-12-12 13:39:46,558 - INFO - Task server.tasks.process_document_task[921452f6-0a5f-43cb-b2dc-3eb874378f6a] succeeded in 103.71527837996837s: None
2025-12-12 15:55:00,314 - INFO - SYSTEM: Server module initialized at 2025-12-12 15:55:00.314152
2025-12-12 16:00:48,041 - INFO - JOB SUBMITTED: User eluhrs@gmail.com uploaded background.jpg
2025-12-12 16:00:48,228 - INFO - Task server.tasks.process_document_task[f1d2492e-59a5-4697-9ebe-8719b43c353b] received
2025-12-12 16:00:48,266 - INFO - Task 3 received options raw: {"transcription":{"prompt":"Convert all dates to ISO format.","temperature":0.8}}
2025-12-12 16:00:48,267 - INFO - Task 3 parsed options: {'transcription': {'prompt': 'Convert all dates to ISO format.', 'temperature': 0.8}}
2025-12-12 16:00:48,267 - INFO - Task 3 found prompt override: Convert all dates to ISO format.
2025-12-12 16:00:48,269 - INFO - TASK START: Processing background.jpg (ID: 3)
2025-12-12 16:00:48,269 - INFO - Command: subscript historical-manuscript gemini-pro-3 /app/documents/eluhrs@gmail.com/background-e8850e19/background.jpg --output /app/documents/eluhrs@gmail.com/background-e8850e19 --prompt Convert all dates to ISO format.
2025-12-12 16:00:48,280 - INFO - Running from: /app
2025-12-12 16:00:48,280 - INFO - Using config: /app/config.yml
2025-12-12 16:00:48,280 - INFO - Output directory: /app/documents/eluhrs@gmail.com/background-e8850e19
2025-12-12 16:00:48,280 - INFO - ----------------------------------------
2025-12-12 16:00:48,283 - INFO - 
Subscript.py initialized segmentation provider: historical-manuscript
2025-12-12 16:00:48,284 - INFO - Subscript.py Initialized transcription provider: gemini-pro-3
2025-12-12 16:00:48,284 - INFO - Processing 1 files...
2025-12-12 16:00:48,284 - INFO - Processing /app/documents/eluhrs@gmail.com/background-e8850e19/background.jpg...
2025-12-12 16:00:48,285 - INFO - Segmenting /app/documents/eluhrs@gmail.com/background-e8850e19/background.jpg with Kraken...
2025-12-12 16:00:48,287 - INFO - Loading segmentation model from /usr/local/lib/python3.10/site-packages/kraken/blla.mlmodel...
2025-12-12 16:00:48,695 - INFO - Segmenting /app/documents/eluhrs@gmail.com/background-e8850e19/background.jpg
2025-12-12 16:00:51,943 - INFO - Vectorizing regions
2025-12-12 16:00:52,169 - INFO - Vectorizing regions
2025-12-12 16:00:52,390 - INFO - Vectorizing baselines
2025-12-12 16:01:00,574 - INFO - Compute reading order on 23 lines in lr direction
2025-12-12 16:01:00,577 - INFO - Perform topological sort on partially ordered lines
2025-12-12 16:01:00,578 - INFO - Compute reading order on 1 lines in lr direction
2025-12-12 16:01:00,579 - INFO - Perform topological sort on partially ordered lines
2025-12-12 16:01:00,587 - INFO - Found 23 lines.
2025-12-12 16:01:00,591 - INFO - Initializing Gemini model: gemini-3-pro-preview
2025-12-12 16:01:00,614 - INFO - Annotating 23 regions for Visual Tagging...
2025-12-12 16:01:00,644 - INFO - Saved debug image to /app/documents/eluhrs@gmail.com/background-e8850e19/background-debug.jpg
2025-12-12 16:01:00,644 - INFO - Sending annotated image to Gemini...
2025-12-12 16:01:37,746 - INFO - Received JSON response from Gemini.
2025-12-12 16:01:37,802 - INFO - SUBSCRIPT OUTPUT for 3:

------------- gemini-pro-3 output for background.jpg -------------
1874-12-29
My Dear Capt. Green,-
Your favor by Dr. Boyd duly came.
We observed our latitude stars on Sunday night, and
of course last night again. The instrument behaves well.
Yesterday morning (before your letter came) & this morn.
we observed for azimuth & variation. Though heavily on
our minds we couldn't accomplish it earlier, while the
longitude work lasted. On Sat. night we observed 24 stars.
I will enclose your signals. I think our work is a success.
To-day Mr. Spencer dismantles the telegraph line. We hope to
un
come over on Sat. Morn. - I do not think the pier is steady,
I think some one hit an arm of the instrument unconsciously
each time I found it out of meridian.
The vernier trouble is due to that arm making an angle
with the vertical. I am convinced that most of the register
troubles are due to bad quality of the fillet paper. It is un=
equal thickness at two edges and also varies in thickness
lengthwise, so as to require frequent readjustment of
rollers & stylet.
Very truly Yrs.
Miles Rock
----------------------------------------------------------------

Saved PageXML to /app/documents/eluhrs@gmail.com/background-e8850e19/background.xml
Saved TXT to /app/documents/eluhrs@gmail.com/background-e8850e19/background.txt
Saved PDF to /app/documents/eluhrs@gmail.com/background-e8850e19/background.pdf

Time:   00:00:49
Input:  1202 tokens
Output: 403 tokens
Cost:   $0.0072

----------------------------------------------------------------


2025-12-12 16:01:37,802 - INFO - Task Complete: background.jpg
2025-12-12 16:01:37,808 - INFO - Task server.tasks.process_document_task[f1d2492e-59a5-4697-9ebe-8719b43c353b] succeeded in 49.56837352295406s: None
2025-12-12 16:04:41,725 - INFO - SYSTEM: Server module initialized at 2025-12-12 16:04:41.725251
2025-12-12 16:05:25,599 - INFO - SYSTEM: Server module initialized at 2025-12-12 16:05:25.599595
2025-12-12 16:33:12,848 - INFO - JOB SUBMITTED: User eluhrs@gmail.com uploaded rock01.jpg
2025-12-12 16:33:13,055 - INFO - Task server.tasks.process_document_task[b3a4a2f0-97db-44fe-bdd8-224bb20b838b] received
2025-12-12 16:33:13,086 - INFO - Task 2 received options raw: {"transcription":{"temperature":0.8}}
2025-12-12 16:33:13,087 - INFO - Task 2 parsed options: {'transcription': {'temperature': 0.8}}
2025-12-12 16:33:13,089 - INFO - TASK START: Processing rock01.jpg (ID: 2)
2025-12-12 16:33:13,089 - INFO - Command: subscript historical-manuscript gemini-pro-3 /app/documents/eluhrs@gmail.com/rock01-24a62daf/rock01.jpg --output /app/documents/eluhrs@gmail.com/rock01-24a62daf
2025-12-12 16:33:13,099 - INFO - Running from: /app
2025-12-12 16:33:13,099 - INFO - Using config: /app/config.yml
2025-12-12 16:33:13,100 - INFO - Output directory: /app/documents/eluhrs@gmail.com/rock01-24a62daf
2025-12-12 16:33:13,100 - INFO - ----------------------------------------
2025-12-12 16:33:13,102 - INFO - 
Subscript.py initialized segmentation provider: historical-manuscript
2025-12-12 16:33:13,103 - INFO - Subscript.py Initialized transcription provider: gemini-pro-3
2025-12-12 16:33:13,103 - INFO - Processing 1 files...
2025-12-12 16:33:13,104 - INFO - Processing /app/documents/eluhrs@gmail.com/rock01-24a62daf/rock01.jpg...
2025-12-12 16:33:13,104 - INFO - Segmenting /app/documents/eluhrs@gmail.com/rock01-24a62daf/rock01.jpg with Kraken...
2025-12-12 16:33:13,108 - INFO - Loading segmentation model from /usr/local/lib/python3.10/site-packages/kraken/blla.mlmodel...
2025-12-12 16:33:13,598 - INFO - Segmenting /app/documents/eluhrs@gmail.com/rock01-24a62daf/rock01.jpg
2025-12-12 16:33:16,218 - INFO - Vectorizing regions
2025-12-12 16:33:16,371 - INFO - Vectorizing regions
2025-12-12 16:33:16,519 - INFO - Vectorizing baselines
2025-12-12 16:33:23,292 - INFO - Compute reading order on 23 lines in lr direction
2025-12-12 16:33:23,293 - INFO - Perform topological sort on partially ordered lines
2025-12-12 16:33:23,294 - INFO - Compute reading order on 1 lines in lr direction
2025-12-12 16:33:23,294 - INFO - Perform topological sort on partially ordered lines
2025-12-12 16:33:23,295 - INFO - Compute reading order on 2 lines in lr direction
2025-12-12 16:33:23,295 - INFO - Perform topological sort on partially ordered lines
2025-12-12 16:33:23,300 - INFO - Found 24 lines.
2025-12-12 16:33:23,302 - INFO - Initializing Gemini model: gemini-3-pro-preview
2025-12-12 16:33:23,447 - INFO - Resized image to (2289, 3000)
2025-12-12 16:33:23,455 - INFO - Annotating 24 regions for Visual Tagging...
2025-12-12 16:33:23,531 - INFO - Saved debug image to /app/documents/eluhrs@gmail.com/rock01-24a62daf/rock01-debug.jpg
2025-12-12 16:33:23,532 - INFO - Sending annotated image to Gemini...
2025-12-12 16:33:24,035 - INFO - Task server.tasks.process_document_task[f47f2625-c87f-4919-8203-fa0c65917714] received
2025-12-12 16:33:24,057 - INFO - Task server.tasks.process_document_task[1f997d35-ca1b-4e46-a8b6-94b69f300ee0] received
2025-12-12 16:33:24,060 - INFO - Created parent thumbnail at /app/documents/eluhrs@gmail.com/north-84bf1ad6/north-thumb.jpg
2025-12-12 16:33:24,118 - INFO - Task 4 received options raw: {"transcription":{"temperature":0.8}}
2025-12-12 16:33:24,119 - INFO - Task 4 parsed options: {'transcription': {'temperature': 0.8}}
2025-12-12 16:33:24,123 - INFO - TASK START: Processing north01.jpg (ID: 4)
2025-12-12 16:33:24,124 - INFO - Command: subscript historical-manuscript gemini-pro-3 /app/documents/eluhrs@gmail.com/north-84bf1ad6/north01.jpg --output /app/documents/eluhrs@gmail.com/north-84bf1ad6
2025-12-12 16:33:24,133 - INFO - Running from: /app
2025-12-12 16:33:24,133 - INFO - Using config: /app/config.yml
2025-12-12 16:33:24,134 - INFO - Output directory: /app/documents/eluhrs@gmail.com/north-84bf1ad6
2025-12-12 16:33:24,134 - INFO - ----------------------------------------
2025-12-12 16:33:24,178 - INFO - Task 5 received options raw: {"transcription":{"temperature":0.8}}
2025-12-12 16:33:24,191 - INFO - Task 5 parsed options: {'transcription': {'temperature': 0.8}}
2025-12-12 16:33:24,205 - INFO - TASK START: Processing north02.jpg (ID: 5)
2025-12-12 16:33:24,211 - INFO - Command: subscript historical-manuscript gemini-pro-3 /app/documents/eluhrs@gmail.com/north-84bf1ad6/north02.jpg --output /app/documents/eluhrs@gmail.com/north-84bf1ad6
2025-12-12 16:33:24,230 - INFO - Running from: /app
2025-12-12 16:33:24,230 - INFO - Using config: /app/config.yml
2025-12-12 16:33:24,231 - INFO - Output directory: /app/documents/eluhrs@gmail.com/north-84bf1ad6
2025-12-12 16:33:24,231 - INFO - ----------------------------------------
2025-12-12 16:33:27,555 - INFO - 
Subscript.py initialized segmentation provider: historical-manuscript
2025-12-12 16:33:27,555 - INFO - Subscript.py Initialized transcription provider: gemini-pro-3
2025-12-12 16:33:27,556 - INFO - Processing 1 files...
2025-12-12 16:33:27,556 - INFO - Processing /app/documents/eluhrs@gmail.com/north-84bf1ad6/north02.jpg...
2025-12-12 16:33:27,556 - INFO - Segmenting /app/documents/eluhrs@gmail.com/north-84bf1ad6/north02.jpg with Kraken...
2025-12-12 16:33:27,560 - INFO - Loading segmentation model from /usr/local/lib/python3.10/site-packages/kraken/blla.mlmodel...
2025-12-12 16:33:27,567 - INFO - 
Subscript.py initialized segmentation provider: historical-manuscript
2025-12-12 16:33:27,567 - INFO - Subscript.py Initialized transcription provider: gemini-pro-3
2025-12-12 16:33:27,568 - INFO - Processing 1 files...
2025-12-12 16:33:27,568 - INFO - Processing /app/documents/eluhrs@gmail.com/north-84bf1ad6/north01.jpg...
2025-12-12 16:33:27,568 - INFO - Segmenting /app/documents/eluhrs@gmail.com/north-84bf1ad6/north01.jpg with Kraken...
2025-12-12 16:33:27,573 - INFO - Loading segmentation model from /usr/local/lib/python3.10/site-packages/kraken/blla.mlmodel...
2025-12-12 16:33:28,066 - INFO - Segmenting /app/documents/eluhrs@gmail.com/north-84bf1ad6/north02.jpg
2025-12-12 16:33:28,070 - INFO - Segmenting /app/documents/eluhrs@gmail.com/north-84bf1ad6/north01.jpg
2025-12-12 16:33:35,032 - INFO - Vectorizing regions
2025-12-12 16:33:35,133 - INFO - Vectorizing regions
2025-12-12 16:33:35,145 - INFO - Vectorizing regions
2025-12-12 16:33:35,235 - INFO - Vectorizing regions
2025-12-12 16:33:35,251 - INFO - Vectorizing baselines
2025-12-12 16:33:35,334 - INFO - Vectorizing baselines
2025-12-12 16:33:41,127 - INFO - Compute reading order on 18 lines in lr direction
2025-12-12 16:33:41,131 - INFO - Perform topological sort on partially ordered lines
2025-12-12 16:33:41,131 - INFO - Compute reading order on 15 lines in lr direction
2025-12-12 16:33:41,132 - INFO - Compute reading order on 1 lines in lr direction
2025-12-12 16:33:41,132 - INFO - Perform topological sort on partially ordered lines
2025-12-12 16:33:41,132 - INFO - Perform topological sort on partially ordered lines
2025-12-12 16:33:41,132 - INFO - Compute reading order on 1 lines in lr direction
2025-12-12 16:33:41,133 - INFO - Perform topological sort on partially ordered lines
2025-12-12 16:33:41,133 - INFO - Compute reading order on 2 lines in lr direction
2025-12-12 16:33:41,133 - INFO - Perform topological sort on partially ordered lines
2025-12-12 16:33:41,134 - INFO - Found 18 lines.
2025-12-12 16:33:41,134 - INFO - Found 16 lines.
2025-12-12 16:33:41,134 - INFO - Initializing Gemini model: gemini-3-pro-preview
2025-12-12 16:33:41,135 - INFO - Initializing Gemini model: gemini-3-pro-preview
2025-12-12 16:33:41,145 - INFO - Annotating 16 regions for Visual Tagging...
2025-12-12 16:33:41,145 - INFO - Annotating 18 regions for Visual Tagging...
2025-12-12 16:33:41,173 - INFO - Saved debug image to /app/documents/eluhrs@gmail.com/north-84bf1ad6/north02-debug.jpg
2025-12-12 16:33:41,173 - INFO - Sending annotated image to Gemini...
2025-12-12 16:33:41,175 - INFO - Saved debug image to /app/documents/eluhrs@gmail.com/north-84bf1ad6/north01-debug.jpg
2025-12-12 16:33:41,175 - INFO - Sending annotated image to Gemini...
2025-12-12 16:34:20,565 - INFO - Received JSON response from Gemini.
2025-12-12 16:34:20,869 - INFO - SUBSCRIPT OUTPUT for 2:

------------- gemini-pro-3 output for rock01.jpg -------------
4
Panama, Dec. 29. 1874
My dear Capt. Green,-
Your favor by Dr. Boyd duly came.
We observed our latitude stars on Sunday night, and
of course last night again. The instrument behaves well.
Yesterday morning (before your letter came) & this morn.
we observed for azimuth & variation. Though heavily on
our minds we couldn't accomplish it earlier, while the
longitude work lasted. On Sat. night we observed 24 stars.
I will enclose your signals. I think our work is a success.
To-day Mr. Spencer dismounts the telegraph line. We hope to
un
come over on Sat. Morn. - I do not think the pier is steady,
I think some one hit an arm of the instrument unconsciously
each time I found it out of meridian.
The vernier trouble is due to that arm making an angle
with the vertical. I am convinced that most of the register
troubles are due to bad quality of the fillet paper. It is un-
equal thickness at two edges and also varies in thickness
lengthwise, so as to require frequent readjustment of
rollers & stylet.
Very truly Yrs.
Miles Rock
----------------------------------------------------------------

Saved PageXML to /app/documents/eluhrs@gmail.com/rock01-24a62daf/rock01.xml
Saved TXT to /app/documents/eluhrs@gmail.com/rock01-24a62daf/rock01.txt
Saved PDF to /app/documents/eluhrs@gmail.com/rock01-24a62daf/rock01.pdf

Time:   00:01:07
Input:  1295 tokens
Output: 418 tokens
Cost:   $0.0076

----------------------------------------------------------------


2025-12-12 16:34:20,870 - INFO - Task Complete: rock01.jpg
2025-12-12 16:34:20,875 - INFO - Task server.tasks.process_document_task[b3a4a2f0-97db-44fe-bdd8-224bb20b838b] succeeded in 67.80745557206683s: None
2025-12-12 16:35:00,609 - INFO - Received JSON response from Gemini.
2025-12-12 16:35:00,753 - INFO - SUBSCRIPT OUTPUT for 5:

------------- gemini-pro-3 output for north02.jpg -------------
all ye euells yt may be, ar crept so near vntous.
Zeland is full, France not free, & Scotland
vnclensid; the Common people spoyled, theyr
Commonwelths racked, theyr Nobilitie
murtherid, the Councell contemnid and
theyr Kyngs disobeyed: For dissention, sedici=
on Ciuell slaughtar, & rebellion, is ye onlie
argument entreatid of among them .
If therfore it pleasid her Hyghnes, to vse ye
benefit of present tyme: to bend her browe
vpon ye disobedient: to hold vp her threatning
hand ouer them, and to aduance her pusant
arme towards them; the verie shadoe of her
sworde, wold feare and vanquyshe ye prow=
dest of them .
but
----------------------------------------------------------------

Saved PageXML to /app/documents/eluhrs@gmail.com/north-84bf1ad6/north02.xml
Saved TXT to /app/documents/eluhrs@gmail.com/north-84bf1ad6/north02.txt
Saved PDF to /app/documents/eluhrs@gmail.com/north-84bf1ad6/north02.pdf

Time:   00:01:33
Input:  1273 tokens
Output: 282 tokens
Cost:   $0.0059

----------------------------------------------------------------


2025-12-12 16:35:00,754 - INFO - Task Complete: north02.jpg
2025-12-12 16:35:00,764 - INFO - Task server.tasks.process_document_task[1f997d35-ca1b-4e46-a8b6-94b69f300ee0] succeeded in 96.69941437698435s: None
2025-12-12 16:35:31,502 - INFO - Received JSON response from Gemini.
2025-12-12 16:35:31,656 - INFO - SUBSCRIPT OUTPUT for 4:

------------- gemini-pro-3 output for north01.jpg -------------
glad aspects were present (confirming her
MaiesTie wth THEODOSIES dylligence, ARETAPHE=
LIS constancie, and ANTIGONVS clemencie)
setlinge them selues euar sence, in her Princelie
brest: as ye rarenes and greatnes of her Gracis
vertuse declare . Whom God presaruid from
formar perell, to rule & reygne ouer us, in
this last leaden adge: wherin Iniquitie hath
sought to surmount ye glorie of his Deitie, and
so presumed to suppresse his professors: As if
ye Shylde of her Souerayntie (for worldlie
force) did not protect his poore membars a=
Quens
Matie is ye per
fect protector
of Religion
What Scisme or sect wold not assawte us?
all
----------------------------------------------------------------

Saved PageXML to /app/documents/eluhrs@gmail.com/north-84bf1ad6/north01.xml
Saved TXT to /app/documents/eluhrs@gmail.com/north-84bf1ad6/north01.txt
Saved PDF to /app/documents/eluhrs@gmail.com/north-84bf1ad6/north01.pdf

Time:   00:02:04
Input:  1285 tokens
Output: 297 tokens
Cost:   $0.0061

----------------------------------------------------------------


2025-12-12 16:35:31,657 - INFO - Task Complete: north01.jpg
2025-12-12 16:35:31,668 - INFO - All 2 pages for parent 3 are done. Triggering merge.
2025-12-12 16:35:31,673 - INFO - Task server.tasks.merge_document_task[fd543740-2390-46f6-8956-2dc5dd0469b8] received
2025-12-12 16:35:31,674 - INFO - Task server.tasks.process_document_task[f47f2625-c87f-4919-8203-fa0c65917714] succeeded in 127.6281753500225s: None
2025-12-12 16:35:31,677 - INFO - Starting merge for parent 3: north.pdf
2025-12-12 16:35:31,686 - INFO - Running subscript command: ['subscript', '--combine', '/app/documents/eluhrs@gmail.com/north-84bf1ad6/north.pdf', '/app/documents/eluhrs@gmail.com/north-84bf1ad6/north01.jpg', '/app/documents/eluhrs@gmail.com/north-84bf1ad6/north02.jpg']
2025-12-12 16:35:31,694 - INFO - Running from: /app
2025-12-12 16:35:31,694 - INFO - Using config: /app/config.yml
2025-12-12 16:35:31,694 - INFO - Output directory: /app/output
2025-12-12 16:35:31,694 - INFO - ----------------------------------------
2025-12-12 16:35:31,695 - INFO - 
Subscript.py initialized segmentation provider: historical-manuscript
2025-12-12 16:35:31,695 - INFO - Subscript.py Initialized transcription provider: gemini-pro-3
2025-12-12 16:35:31,695 - INFO - Processing 2 files...
2025-12-12 16:35:31,695 - INFO - Processing /app/documents/eluhrs@gmail.com/north-84bf1ad6/north01.jpg...
2025-12-12 16:35:31,696 - INFO - Segmenting /app/documents/eluhrs@gmail.com/north-84bf1ad6/north01.jpg with Kraken...
2025-12-12 16:35:31,697 - INFO - Loading segmentation model from /usr/local/lib/python3.10/site-packages/kraken/blla.mlmodel...
2025-12-12 16:35:32,085 - INFO - Segmenting /app/documents/eluhrs@gmail.com/north-84bf1ad6/north01.jpg
2025-12-12 16:35:34,229 - INFO - Vectorizing regions
2025-12-12 16:35:34,336 - INFO - Vectorizing regions
2025-12-12 16:35:34,440 - INFO - Vectorizing baselines
2025-12-12 16:35:39,680 - INFO - Compute reading order on 18 lines in lr direction
2025-12-12 16:35:39,681 - INFO - Perform topological sort on partially ordered lines
2025-12-12 16:35:39,682 - INFO - Compute reading order on 1 lines in lr direction
2025-12-12 16:35:39,682 - INFO - Perform topological sort on partially ordered lines
2025-12-12 16:35:39,683 - INFO - Found 18 lines.
2025-12-12 16:35:39,684 - INFO - Initializing Gemini model: gemini-3-pro-preview
2025-12-12 16:35:39,695 - INFO - Annotating 18 regions for Visual Tagging...
2025-12-12 16:35:39,723 - INFO - Saved debug image to output/north01-debug.jpg
2025-12-12 16:35:39,723 - INFO - Sending annotated image to Gemini...
2025-12-12 16:37:45,635 - INFO - Received JSON response from Gemini.
2025-12-12 16:37:45,790 - WARNING - 
------------- gemini-pro-3 output for north01.jpg -------------
2025-12-12 16:37:45,790 - WARNING - glad aspects were present (confirming her
2025-12-12 16:37:45,790 - WARNING - MaiesTie wth THEODOSIES dylligence, ARETAPHE=
2025-12-12 16:37:45,791 - WARNING - LIS constancie, and ANTIGONVS clemencie)
2025-12-12 16:37:45,791 - WARNING - setlinge them selues euar sence, in her Princelie
2025-12-12 16:37:45,791 - WARNING - brest: as ye rarenes and greatnes of her Gracis
2025-12-12 16:37:45,791 - WARNING - vertuse declare. Whom God presaruid from
2025-12-12 16:37:45,791 - WARNING - formar perell, to rule & reygne ouer us, in
2025-12-12 16:37:45,792 - WARNING - this last leaden adge: wherin Iniquitie hath
2025-12-12 16:37:45,792 - WARNING - sought to surmount ye glorie of his Deitie, and
2025-12-12 16:37:45,792 - WARNING - so presumed to suppresse his professors: As if
2025-12-12 16:37:45,792 - WARNING - ye Shylde of her Souerayntie (for worldlie
2025-12-12 16:37:45,792 - WARNING - force) did not protect his poore membars a=
2025-12-12 16:37:45,792 - WARNING - Quie:ns
2025-12-12 16:37:45,793 - WARNING - Ma:tie
2025-12-12 16:37:45,793 - WARNING - self protector mong us: What error wold not muade us?
2025-12-12 16:37:45,793 - WARNING - of Religion What Scisme or sect wold not assawte us?
2025-12-12 16:37:45,793 - WARNING - What treason wold not entrapp us? When
2025-12-12 16:37:45,793 - WARNING - all
2025-12-12 16:37:45,793 - WARNING - ----------------------------------------------------------------
2025-12-12 16:37:45,794 - WARNING - Saved PageXML to output/north01.xml
2025-12-12 16:37:45,794 - WARNING - Saved TXT to output/north01.txt
2025-12-12 16:37:45,794 - WARNING - Saved PDF to output/north01.pdf
2025-12-12 16:37:45,794 - WARNING - Time:   00:02:14
2025-12-12 16:37:45,794 - WARNING - Input:  1285 tokens
2025-12-12 16:37:45,794 - WARNING - Output: 336 tokens
2025-12-12 16:37:45,795 - WARNING - Cost:   $0.0066
2025-12-12 16:37:45,795 - WARNING - ----------------------------------------------------------------
2025-12-12 16:37:45,795 - INFO - Processing /app/documents/eluhrs@gmail.com/north-84bf1ad6/north02.jpg...
2025-12-12 16:37:45,795 - INFO - Segmenting /app/documents/eluhrs@gmail.com/north-84bf1ad6/north02.jpg with Kraken...
2025-12-12 16:37:45,796 - INFO - Loading segmentation model from /usr/local/lib/python3.10/site-packages/kraken/blla.mlmodel...
2025-12-12 16:37:46,135 - INFO - Segmenting /app/documents/eluhrs@gmail.com/north-84bf1ad6/north02.jpg
2025-12-12 16:37:48,310 - INFO - Vectorizing regions
2025-12-12 16:37:48,416 - INFO - Vectorizing regions
2025-12-12 16:37:48,521 - INFO - Vectorizing baselines
2025-12-12 16:37:53,405 - INFO - Compute reading order on 15 lines in lr direction
2025-12-12 16:37:53,406 - INFO - Perform topological sort on partially ordered lines
2025-12-12 16:37:53,407 - INFO - Compute reading order on 1 lines in lr direction
2025-12-12 16:37:53,407 - INFO - Perform topological sort on partially ordered lines
2025-12-12 16:37:53,408 - INFO - Compute reading order on 2 lines in lr direction
2025-12-12 16:37:53,408 - INFO - Perform topological sort on partially ordered lines
2025-12-12 16:37:53,411 - INFO - Found 16 lines.
2025-12-12 16:37:53,414 - INFO - Initializing Gemini model: gemini-3-pro-preview
2025-12-12 16:37:53,426 - INFO - Annotating 16 regions for Visual Tagging...
2025-12-12 16:37:53,450 - INFO - Saved debug image to output/north02-debug.jpg
2025-12-12 16:37:53,451 - INFO - Sending annotated image to Gemini...
2025-12-12 16:38:26,340 - INFO - Task server.tasks.rebuild_pdf_task[62ceb8b3-1f06-4b10-ae52-bdd1a8dc2743] received
2025-12-12 16:38:26,386 - INFO - Running from: /app
2025-12-12 16:38:26,387 - INFO - Using config: /app/config.yml
2025-12-12 16:38:26,387 - INFO - Output directory: /app/documents/eluhrs@gmail.com/rock01-24a62daf
2025-12-12 16:38:26,387 - INFO - ----------------------------------------
2025-12-12 16:38:26,389 - INFO - 
Subscript.py initialized segmentation provider: historical-manuscript
2025-12-12 16:38:26,390 - INFO - Subscript.py Initialized transcription provider: gemini-pro-3
2025-12-12 16:38:26,390 - INFO - Processing 1 files...
2025-12-12 16:38:26,390 - INFO - Processing /app/documents/eluhrs@gmail.com/rock01-24a62daf/rock01.jpg...
2025-12-12 16:38:26,391 - INFO - Using existing XML: /app/documents/eluhrs@gmail.com/rock01-24a62daf/rock01.xml
2025-12-12 16:38:26,393 - INFO - Parsed 24 text regions from /app/documents/eluhrs@gmail.com/rock01-24a62daf/rock01.xml
2025-12-12 16:38:26,672 - WARNING - 
------------- gemini-pro-3 output for rock01.jpg -------------
2025-12-12 16:38:26,672 - WARNING - 4
2025-12-12 16:38:26,672 - WARNING - Panama, Dec. 29. 1874
2025-12-12 16:38:26,672 - WARNING - My dear Capt. Green,
2025-12-12 16:38:26,673 - WARNING - Your favor by Dr. Boyd duly came.
2025-12-12 16:38:26,673 - WARNING - We observed our latitude stars on Sunday night, and
2025-12-12 16:38:26,673 - WARNING - of course last night again. The instrument behaves well.
2025-12-12 16:38:26,673 - WARNING - Yesterday morning (before your letter came) & this morn.
2025-12-12 16:38:26,673 - WARNING - we observed for azimuth & variation. Though heavily on
2025-12-12 16:38:26,674 - WARNING - our minds we couldn't accomplish it earlier, while the
2025-12-12 16:38:26,674 - WARNING - longitude work lasted. On Sat. night we observed 24 stars.
2025-12-12 16:38:26,674 - WARNING - I will enclose your signals. I think our work is a success.
2025-12-12 16:38:26,674 - WARNING - To-day Mr. Spencer dismounts the telegraph line. We hope to
2025-12-12 16:38:26,674 - WARNING - un
2025-12-12 16:38:26,674 - WARNING - come over on Sat. Morn. - I do not think the pier is steady,
2025-12-12 16:38:26,675 - WARNING - I think some one hit an arm of the instrument unconsciously
2025-12-12 16:38:26,675 - WARNING - each time I found it out of meridian.
2025-12-12 16:38:26,675 - WARNING - The vernier trouble is due to that arm making an angle
2025-12-12 16:38:26,675 - WARNING - with the vertical. I am convinced that most of the register
2025-12-12 16:38:26,675 - WARNING - troubles are due to bad quality of the fillet paper. It is un-
2025-12-12 16:38:26,675 - WARNING - equal thickness at two edges and also varies in thickness
2025-12-12 16:38:26,676 - WARNING - lengthwise, so as to require frequent readjustment of
2025-12-12 16:38:26,676 - WARNING - rollers & stylet.
2025-12-12 16:38:26,676 - WARNING - Very truly Yrs.
2025-12-12 16:38:26,676 - WARNING - Miles Rock
2025-12-12 16:38:26,676 - WARNING - ----------------------------------------------------------------
2025-12-12 16:38:26,677 - WARNING - Saved PageXML to /app/documents/eluhrs@gmail.com/rock01-24a62daf/rock01.xml
2025-12-12 16:38:26,677 - WARNING - Saved TXT to /app/documents/eluhrs@gmail.com/rock01-24a62daf/rock01.txt
2025-12-12 16:38:26,677 - WARNING - Saved PDF to /app/documents/eluhrs@gmail.com/rock01-24a62daf/rock01.pdf
2025-12-12 16:38:26,677 - WARNING - Time:   00:00:00
2025-12-12 16:38:26,677 - WARNING - Input:  0 tokens
2025-12-12 16:38:26,678 - WARNING - Output: 0 tokens
2025-12-12 16:38:26,678 - WARNING - Cost:   $0.0000
2025-12-12 16:38:26,678 - WARNING - ----------------------------------------------------------------
2025-12-12 16:38:26,686 - INFO - Task server.tasks.rebuild_pdf_task[62ceb8b3-1f06-4b10-ae52-bdd1a8dc2743] succeeded in 0.3374748339410871s: None
2025-12-12 16:39:21,505 - INFO - Received JSON response from Gemini.
2025-12-12 16:39:21,660 - WARNING - 
------------- gemini-pro-3 output for north02.jpg -------------
2025-12-12 16:39:21,660 - WARNING - all ye euells yt may be, ar crept so near vntous.
2025-12-12 16:39:21,661 - WARNING - Zeland is full, France not free, & Scotland
2025-12-12 16:39:21,661 - WARNING - vnclensid; the Common people spoyled, theyr
2025-12-12 16:39:21,661 - WARNING - Commonwelths racked, theyr Nobilitie
2025-12-12 16:39:21,661 - WARNING - murtherid, the Councell contemnid and
2025-12-12 16:39:21,661 - WARNING - theyr Kyngs disobeyed: For dissention, sedici=
2025-12-12 16:39:21,661 - WARNING - on Ciuell slaughtar, & rebellion, is ye onlie
2025-12-12 16:39:21,662 - WARNING - argument entreatid of among them.
2025-12-12 16:39:21,662 - WARNING - If therfore it pleasid her Hyghnes, to vse ye
2025-12-12 16:39:21,662 - WARNING - benefit of present tyme: to bend her browe
2025-12-12 16:39:21,662 - WARNING - vpon ye disobedient: to hold vp her threatning
2025-12-12 16:39:21,662 - WARNING - hand ouer them, and to aduance her pusant
2025-12-12 16:39:21,662 - WARNING - arme towards them; the verie shadoe of her
2025-12-12 16:39:21,663 - WARNING - sworde, wold feare and vanquyshe ye prow=
2025-12-12 16:39:21,663 - WARNING - dist of them.
2025-12-12 16:39:21,663 - WARNING - but
2025-12-12 16:39:21,663 - WARNING - ----------------------------------------------------------------
2025-12-12 16:39:21,663 - WARNING - Saved PageXML to output/north02.xml
2025-12-12 16:39:21,664 - WARNING - Saved TXT to output/north02.txt
2025-12-12 16:39:21,664 - WARNING - Saved PDF to output/north02.pdf
2025-12-12 16:39:21,664 - WARNING - Time:   00:01:35
2025-12-12 16:39:21,664 - WARNING - Input:  1273 tokens
2025-12-12 16:39:21,664 - WARNING - Output: 296 tokens
2025-12-12 16:39:21,664 - WARNING - Cost:   $0.0061
2025-12-12 16:39:21,665 - WARNING - Total time:   00:03:49
2025-12-12 16:39:21,665 - WARNING - Total input:  2558 tokens
2025-12-12 16:39:21,665 - WARNING - Total output: 632 tokens
2025-12-12 16:39:21,665 - WARNING - Total cost:   $0.0127
2025-12-12 16:39:21,665 - WARNING - ----------------------------------------------------------------
2025-12-12 16:39:21,665 - INFO - Combining 2 PDFs into /app/documents/eluhrs@gmail.com/north-84bf1ad6/north.pdf...
2025-12-12 16:39:21,736 - INFO - Saved Combined PDF to /app/documents/eluhrs@gmail.com/north-84bf1ad6/north.pdf
2025-12-12 16:39:21,737 - INFO - Combining 2 TXTs into /app/documents/eluhrs@gmail.com/north-84bf1ad6/north.txt...
2025-12-12 16:39:21,738 - INFO - Saved Combined TXT to /app/documents/eluhrs@gmail.com/north-84bf1ad6/north.txt
2025-12-12 16:39:21,744 - INFO - Task server.tasks.merge_document_task[fd543740-2390-46f6-8956-2dc5dd0469b8] succeeded in 230.06609085400123s: None
2025-12-12 16:39:59,823 - INFO - Task server.tasks.rebuild_pdf_task[4544598b-f78f-45a5-a83a-88ea76d3955e] received
2025-12-12 16:39:59,880 - INFO - Running from: /app
2025-12-12 16:39:59,882 - INFO - Using config: /app/config.yml
2025-12-12 16:39:59,882 - INFO - Output directory: /app/documents/eluhrs@gmail.com/north-84bf1ad6
2025-12-12 16:39:59,882 - INFO - ----------------------------------------
2025-12-12 16:39:59,884 - INFO - 
Subscript.py initialized segmentation provider: historical-manuscript
2025-12-12 16:39:59,885 - INFO - Subscript.py Initialized transcription provider: gemini-pro-3
2025-12-12 16:39:59,886 - INFO - Processing 1 files...
2025-12-12 16:39:59,886 - INFO - Processing /app/documents/eluhrs@gmail.com/north-84bf1ad6/north.pdf...
2025-12-12 16:39:59,886 - ERROR - XML file not found for --onlypdf mode. Checked:
  /app/documents/eluhrs@gmail.com/north-84bf1ad6/north.xml
  /app/documents/eluhrs@gmail.com/north-84bf1ad6/north.xml
2025-12-12 16:39:59,894 - INFO - Task server.tasks.rebuild_pdf_task[4544598b-f78f-45a5-a83a-88ea76d3955e] succeeded in 0.05475750006735325s: None
2025-12-12 18:25:06,993 - INFO - JOB SUBMITTED: User eluhrs@gmail.com uploaded rock01.jpg
2025-12-12 18:25:07,022 - INFO - Task server.tasks.process_document_task[053dda70-250d-4536-b7ca-05dc21783124] received
2025-12-12 18:25:07,053 - INFO - Task 2 received options raw: {"transcription":{"temperature":0.8}}
2025-12-12 18:25:07,054 - INFO - Task 2 parsed options: {'transcription': {'temperature': 0.8}}
2025-12-12 18:25:07,056 - INFO - TASK START: Processing rock01.jpg (ID: 2)
2025-12-12 18:25:07,057 - INFO - Command: subscript historical-manuscript gemini-pro-3 /app/documents/eluhrs@gmail.com/rock01-ef60bfff/rock01.jpg --output /app/documents/eluhrs@gmail.com/rock01-ef60bfff
2025-12-12 18:25:07,069 - INFO - Running from: /app
2025-12-12 18:25:07,069 - INFO - Using config: /app/config.yml
2025-12-12 18:25:07,070 - INFO - Output directory: /app/documents/eluhrs@gmail.com/rock01-ef60bfff
2025-12-12 18:25:07,070 - INFO - ----------------------------------------
2025-12-12 18:25:07,071 - INFO - 
Subscript.py initialized segmentation provider: historical-manuscript
2025-12-12 18:25:07,072 - INFO - Subscript.py Initialized transcription provider: gemini-pro-3
2025-12-12 18:25:07,072 - INFO - Processing 1 files...
2025-12-12 18:25:07,072 - INFO - Processing /app/documents/eluhrs@gmail.com/rock01-ef60bfff/rock01.jpg...
2025-12-12 18:25:07,072 - INFO - Segmenting /app/documents/eluhrs@gmail.com/rock01-ef60bfff/rock01.jpg with Kraken...
2025-12-12 18:25:07,075 - INFO - Loading segmentation model from /usr/local/lib/python3.10/site-packages/kraken/blla.mlmodel...
2025-12-12 18:25:07,599 - INFO - Segmenting /app/documents/eluhrs@gmail.com/rock01-ef60bfff/rock01.jpg
2025-12-12 18:25:10,360 - INFO - Vectorizing regions
2025-12-12 18:25:10,560 - INFO - Vectorizing regions
2025-12-12 18:25:10,757 - INFO - Vectorizing baselines
2025-12-12 18:25:19,487 - INFO - Compute reading order on 23 lines in lr direction
2025-12-12 18:25:19,489 - INFO - Perform topological sort on partially ordered lines
2025-12-12 18:25:19,490 - INFO - Compute reading order on 1 lines in lr direction
2025-12-12 18:25:19,491 - INFO - Perform topological sort on partially ordered lines
2025-12-12 18:25:19,491 - INFO - Compute reading order on 2 lines in lr direction
2025-12-12 18:25:19,492 - INFO - Perform topological sort on partially ordered lines
2025-12-12 18:25:19,496 - INFO - Found 24 lines.
2025-12-12 18:25:19,498 - INFO - Initializing Gemini model: gemini-3-pro-preview
2025-12-12 18:25:19,672 - INFO - Resized image to (2289, 3000)
2025-12-12 18:25:19,681 - INFO - Annotating 24 regions for Visual Tagging...
2025-12-12 18:25:19,778 - INFO - Saved debug image to /app/documents/eluhrs@gmail.com/rock01-ef60bfff/rock01-debug.jpg
2025-12-12 18:25:19,778 - INFO - Sending annotated image to Gemini...
2025-12-12 18:25:25,969 - INFO - Task server.tasks.process_document_task[57f19487-b269-4675-b261-c44255af938e] received
2025-12-12 18:25:25,991 - INFO - Task 4 received options raw: {"transcription":{"temperature":0.8}}
2025-12-12 18:25:25,993 - INFO - Task 4 parsed options: {'transcription': {'temperature': 0.8}}
2025-12-12 18:25:25,996 - INFO - TASK START: Processing north01.jpg (ID: 4)
2025-12-12 18:25:25,996 - INFO - Command: subscript historical-manuscript gemini-pro-3 /app/documents/eluhrs@gmail.com/north-665bc576/north01.jpg --output /app/documents/eluhrs@gmail.com/north-665bc576
2025-12-12 18:25:25,997 - INFO - Task server.tasks.process_document_task[33e91d27-99e0-40e5-9341-165623f35386] received
2025-12-12 18:25:26,001 - INFO - Created parent thumbnail at /app/documents/eluhrs@gmail.com/north-665bc576/north-thumb.jpg
2025-12-12 18:25:26,015 - INFO - Running from: /app
2025-12-12 18:25:26,015 - INFO - Using config: /app/config.yml
2025-12-12 18:25:26,016 - INFO - Output directory: /app/documents/eluhrs@gmail.com/north-665bc576
2025-12-12 18:25:26,016 - INFO - ----------------------------------------
2025-12-12 18:25:26,018 - INFO - 
Subscript.py initialized segmentation provider: historical-manuscript
2025-12-12 18:25:26,018 - INFO - Subscript.py Initialized transcription provider: gemini-pro-3
2025-12-12 18:25:26,018 - INFO - Processing 1 files...
2025-12-12 18:25:26,018 - INFO - Processing /app/documents/eluhrs@gmail.com/north-665bc576/north01.jpg...
2025-12-12 18:25:26,019 - INFO - Segmenting /app/documents/eluhrs@gmail.com/north-665bc576/north01.jpg with Kraken...
2025-12-12 18:25:26,021 - INFO - Loading segmentation model from /usr/local/lib/python3.10/site-packages/kraken/blla.mlmodel...
2025-12-12 18:25:26,026 - INFO - Task 5 received options raw: {"transcription":{"temperature":0.8}}
2025-12-12 18:25:26,027 - INFO - Task 5 parsed options: {'transcription': {'temperature': 0.8}}
2025-12-12 18:25:26,030 - INFO - TASK START: Processing north02.jpg (ID: 5)
2025-12-12 18:25:26,030 - INFO - Command: subscript historical-manuscript gemini-pro-3 /app/documents/eluhrs@gmail.com/north-665bc576/north02.jpg --output /app/documents/eluhrs@gmail.com/north-665bc576
2025-12-12 18:25:26,044 - INFO - Running from: /app
2025-12-12 18:25:26,044 - INFO - Using config: /app/config.yml
2025-12-12 18:25:26,044 - INFO - Output directory: /app/documents/eluhrs@gmail.com/north-665bc576
2025-12-12 18:25:26,045 - INFO - ----------------------------------------
2025-12-12 18:25:26,048 - INFO - 
Subscript.py initialized segmentation provider: historical-manuscript
2025-12-12 18:25:26,049 - INFO - Subscript.py Initialized transcription provider: gemini-pro-3
2025-12-12 18:25:26,049 - INFO - Processing 1 files...
2025-12-12 18:25:26,050 - INFO - Processing /app/documents/eluhrs@gmail.com/north-665bc576/north02.jpg...
2025-12-12 18:25:26,051 - INFO - Segmenting /app/documents/eluhrs@gmail.com/north-665bc576/north02.jpg with Kraken...
2025-12-12 18:25:26,053 - INFO - Loading segmentation model from /usr/local/lib/python3.10/site-packages/kraken/blla.mlmodel...
2025-12-12 18:25:26,675 - INFO - Segmenting /app/documents/eluhrs@gmail.com/north-665bc576/north01.jpg
2025-12-12 18:25:26,732 - INFO - Segmenting /app/documents/eluhrs@gmail.com/north-665bc576/north02.jpg
2025-12-12 18:25:34,440 - INFO - Vectorizing regions
2025-12-12 18:25:34,576 - INFO - Vectorizing regions
2025-12-12 18:25:34,709 - INFO - Vectorizing baselines
2025-12-12 18:25:35,004 - INFO - Vectorizing regions
2025-12-12 18:25:35,141 - INFO - Vectorizing regions
2025-12-12 18:25:35,272 - INFO - Vectorizing baselines
2025-12-12 18:25:41,466 - INFO - Compute reading order on 15 lines in lr direction
2025-12-12 18:25:41,483 - INFO - Perform topological sort on partially ordered lines
2025-12-12 18:25:41,498 - INFO - Compute reading order on 1 lines in lr direction
2025-12-12 18:25:41,498 - INFO - Perform topological sort on partially ordered lines
2025-12-12 18:25:41,499 - INFO - Compute reading order on 2 lines in lr direction
2025-12-12 18:25:41,499 - INFO - Perform topological sort on partially ordered lines
2025-12-12 18:25:41,501 - INFO - Found 16 lines.
2025-12-12 18:25:41,502 - INFO - Initializing Gemini model: gemini-3-pro-preview
2025-12-12 18:25:41,515 - INFO - Annotating 16 regions for Visual Tagging...
2025-12-12 18:25:41,551 - INFO - Saved debug image to /app/documents/eluhrs@gmail.com/north-665bc576/north02-debug.jpg
2025-12-12 18:25:41,551 - INFO - Sending annotated image to Gemini...
2025-12-12 18:25:42,465 - INFO - Compute reading order on 18 lines in lr direction
2025-12-12 18:25:42,467 - INFO - Perform topological sort on partially ordered lines
2025-12-12 18:25:42,467 - INFO - Compute reading order on 1 lines in lr direction
2025-12-12 18:25:42,468 - INFO - Perform topological sort on partially ordered lines
2025-12-12 18:25:42,469 - INFO - Found 18 lines.
2025-12-12 18:25:42,470 - INFO - Initializing Gemini model: gemini-3-pro-preview
2025-12-12 18:25:42,484 - INFO - Annotating 18 regions for Visual Tagging...
2025-12-12 18:25:42,521 - INFO - Saved debug image to /app/documents/eluhrs@gmail.com/north-665bc576/north01-debug.jpg
2025-12-12 18:25:42,522 - INFO - Sending annotated image to Gemini...
2025-12-12 18:29:22,541 - INFO - Received JSON response from Gemini.
2025-12-12 18:29:22,938 - INFO - SUBSCRIPT OUTPUT for 2:

------------- gemini-pro-3 output for rock01.jpg -------------
74
Panama, Dec. 29. 1874
My dear Capt. Green,-
Your favor by Dr. Boyd duly came.
We observed our latitude stars on Sunday night, and
of course last night again. The instrument behaves well.
Yesterday morning (before your letter came) & this morn,
we observed for azimuth & variation. Though heavily on
our minds we couldn't accomplish it earlier, while the
longitude work lasted. On Sat. night we observed 24 stars.
I will enclose your signals. I think our work is a success.
To-day Mr. Spencer dismounts the telegraph line. We hope to
un
come over on Sat. Morn. - I do not think the pier is steady,
I think some one hit an arm of the instrument unconsciously
each time I found it out of meridian.
The vernier trouble is due to that arm making an angle
with the vertical. I am convinced that most of the register
troubles are due to bad quality of the fillet paper. It is un=
equal thickness at two edges and also varies in thickness
lengthwise, so as to require frequent readjustment of
rollers & stylet.
Very truly Yrs.
Miles Rock
----------------------------------------------------------------

Saved PageXML to /app/documents/eluhrs@gmail.com/rock01-ef60bfff/rock01.xml
Saved TXT to /app/documents/eluhrs@gmail.com/rock01-ef60bfff/rock01.txt
Saved PDF to /app/documents/eluhrs@gmail.com/rock01-ef60bfff/rock01.pdf

Time:   00:04:15
Input:  1295 tokens
Output: 418 tokens
Cost:   $0.0076

----------------------------------------------------------------


2025-12-12 18:29:22,938 - INFO - Task Complete: rock01.jpg
2025-12-12 18:29:22,956 - INFO - Task server.tasks.process_document_task[053dda70-250d-4536-b7ca-05dc21783124] succeeded in 256.05252557701897s: None
2025-12-12 18:30:35,135 - INFO - Task server.tasks.rebuild_pdf_task[3e525afd-46f7-4b60-95c9-92fc4cbeddce] received
2025-12-12 18:30:35,153 - INFO - Running from: /app
2025-12-12 18:30:35,154 - INFO - Using config: /app/config.yml
2025-12-12 18:30:35,154 - INFO - Output directory: /app/documents/eluhrs@gmail.com/rock01-ef60bfff
2025-12-12 18:30:35,155 - INFO - ----------------------------------------
2025-12-12 18:30:35,156 - INFO - 
Subscript.py initialized segmentation provider: historical-manuscript
2025-12-12 18:30:35,156 - INFO - Subscript.py Initialized transcription provider: gemini-pro-3
2025-12-12 18:30:35,156 - INFO - Processing 1 files...
2025-12-12 18:30:35,157 - INFO - Processing /app/documents/eluhrs@gmail.com/rock01-ef60bfff/rock01.jpg...
2025-12-12 18:30:35,157 - INFO - Using existing XML: /app/documents/eluhrs@gmail.com/rock01-ef60bfff/rock01.xml
2025-12-12 18:30:35,158 - INFO - Parsed 24 text regions from /app/documents/eluhrs@gmail.com/rock01-ef60bfff/rock01.xml
2025-12-12 18:30:35,527 - WARNING - 
------------- gemini-pro-3 output for rock01.jpg -------------
2025-12-12 18:30:35,527 - WARNING - 74
2025-12-12 18:30:35,528 - WARNING - Panama, Dec. 29. 1874
2025-12-12 18:30:35,528 - WARNING - My dear Capt. Green,
2025-12-12 18:30:35,528 - WARNING - Your favor by Dr. Boyd duly came.
2025-12-12 18:30:35,528 - WARNING - We observed our latitude stars on Sunday night, and
2025-12-12 18:30:35,528 - WARNING - of course last night again. The instrument behaves well.
2025-12-12 18:30:35,528 - WARNING - Yesterday morning (before your letter came) & this morn,
2025-12-12 18:30:35,529 - WARNING - we observed for azimuth & variation. Though heavily on
2025-12-12 18:30:35,529 - WARNING - our minds we couldn't accomplish it earlier, while the
2025-12-12 18:30:35,529 - WARNING - longitude work lasted. On Sat. night we observed 24 stars.
2025-12-12 18:30:35,529 - WARNING - I will enclose your signals. I think our work is a success.
2025-12-12 18:30:35,530 - WARNING - To-day Mr. Spencer dismounts the telegraph line. We hope to
2025-12-12 18:30:35,530 - WARNING - un
2025-12-12 18:30:35,530 - WARNING - come over on Sat. Morn. - I do not think the pier is steady,
2025-12-12 18:30:35,530 - WARNING - I think some one hit an arm of the instrument unconsciously
2025-12-12 18:30:35,530 - WARNING - each time I found it out of meridian.
2025-12-12 18:30:35,531 - WARNING - The vernier trouble is due to that arm making an angle
2025-12-12 18:30:35,531 - WARNING - with the vertical. I am convinced that most of the register
2025-12-12 18:30:35,531 - WARNING - troubles are due to bad quality of the fillet paper. It is un=
2025-12-12 18:30:35,531 - WARNING - equal thickness at two edges and also varies in thickness
2025-12-12 18:30:35,531 - WARNING - lengthwise, so as to require frequent readjustment of
2025-12-12 18:30:35,531 - WARNING - rollers & stylet.
2025-12-12 18:30:35,532 - WARNING - Very truly Yrs.
2025-12-12 18:30:35,532 - WARNING - Miles Rock
2025-12-12 18:30:35,532 - WARNING - ----------------------------------------------------------------
2025-12-12 18:30:35,532 - WARNING - Saved PageXML to /app/documents/eluhrs@gmail.com/rock01-ef60bfff/rock01.xml
2025-12-12 18:30:35,532 - WARNING - Saved TXT to /app/documents/eluhrs@gmail.com/rock01-ef60bfff/rock01.txt
2025-12-12 18:30:35,532 - WARNING - Saved PDF to /app/documents/eluhrs@gmail.com/rock01-ef60bfff/rock01.pdf
2025-12-12 18:30:35,533 - WARNING - Time:   00:00:00
2025-12-12 18:30:35,533 - WARNING - Input:  0 tokens
2025-12-12 18:30:35,533 - WARNING - Output: 0 tokens
2025-12-12 18:30:35,533 - WARNING - Cost:   $0.0000
2025-12-12 18:30:35,533 - WARNING - ----------------------------------------------------------------
2025-12-12 18:30:35,540 - INFO - Task server.tasks.rebuild_pdf_task[3e525afd-46f7-4b60-95c9-92fc4cbeddce] succeeded in 0.4007366249570623s: None
2025-12-12 18:30:52,492 - INFO - Received JSON response from Gemini.
2025-12-12 18:30:52,673 - INFO - SUBSCRIPT OUTPUT for 5:

------------- gemini-pro-3 output for north02.jpg -------------
all ye euells yt may be, ar crept so near vntous.
Zeland is full, France not free, & Scotland
vnclensid: the Common people spoyled, theyr
Commonwelths racked, theyr Nobilitie
murtherid, the Councell contemnd and
theyr Kyngs disobeyed: For dissention, sedici-
on Ciuell slaughtar, & rebellion, is ye onlie
argument entreatid of among them .
If therfore it pleasid her Hyghnes, to vse ye
benefit of present tyme; to bend her browe
vpon ye disobedient: to hold vp her threatning
hand ouer them, and to aduance her pusant
arme towards them; the verie shadoe of her
sworde, wold feare and vanquyshe ye prow-
dist of them .
but
----------------------------------------------------------------

Saved PageXML to /app/documents/eluhrs@gmail.com/north-665bc576/north02.xml
Saved TXT to /app/documents/eluhrs@gmail.com/north-665bc576/north02.txt
Saved PDF to /app/documents/eluhrs@gmail.com/north-665bc576/north02.pdf

Time:   00:05:26
Input:  1273 tokens
Output: 284 tokens
Cost:   $0.0060

----------------------------------------------------------------


2025-12-12 18:30:52,674 - INFO - Task Complete: north02.jpg
2025-12-12 18:30:52,694 - INFO - Task server.tasks.process_document_task[33e91d27-99e0-40e5-9341-165623f35386] succeeded in 326.8204182749614s: None
2025-12-12 18:31:52,611 - INFO - Received JSON response from Gemini.
2025-12-12 18:31:52,795 - INFO - SUBSCRIPT OUTPUT for 4:

------------- gemini-pro-3 output for north01.jpg -------------
glad aspects were present (confirming her
Maiestie wth THEODOSIES dylligence, ARETAPHE=
LIS constancie, and ANTIGONYS clemencie)
setlinge them selues euar sence, in her Princelie
brest: as ye rarenes and greatnes of her Gracis
vertuse declare . Whom God presaruid from
formar perell, to rule & reygne ouer us, in
this last leaden adge: wherin Iniquitie hath
sought to surmount ye glorie of his Deitie, and
so presumed to suppresse his professors: As if
ye Shylde of her Souerayntie (for worldlie
force) did not protect his poore membars a=
Quiens
Ma:tie is ye per
fect protector mong us: What error wold not inuade us?
of Religion What Scisme or sect wold not assawte us?
What treason wold not entrapp us? When
all
----------------------------------------------------------------

Saved PageXML to /app/documents/eluhrs@gmail.com/north-665bc576/north01.xml
Saved TXT to /app/documents/eluhrs@gmail.com/north-665bc576/north01.txt
Saved PDF to /app/documents/eluhrs@gmail.com/north-665bc576/north01.pdf

Time:   00:06:26
Input:  1285 tokens
Output: 321 tokens
Cost:   $0.0064

----------------------------------------------------------------


2025-12-12 18:31:52,797 - INFO - Task Complete: north01.jpg
2025-12-12 18:31:52,813 - INFO - All 2 pages for parent 3 are done. Triggering merge.
2025-12-12 18:31:52,821 - INFO - Task server.tasks.merge_document_task[9a2a837f-2663-47e7-97f1-4b4f51ff2c39] received
2025-12-12 18:31:52,822 - INFO - Task server.tasks.process_document_task[57f19487-b269-4675-b261-c44255af938e] succeeded in 386.97906734398566s: None
2025-12-12 18:31:52,822 - INFO - Starting merge for parent 3: north.pdf
2025-12-12 18:31:52,828 - INFO - Running subscript command: ['subscript', '--combine', '/app/documents/eluhrs@gmail.com/north-665bc576/north.pdf', '/app/documents/eluhrs@gmail.com/north-665bc576/north01.jpg', '/app/documents/eluhrs@gmail.com/north-665bc576/north02.jpg']
2025-12-12 18:31:52,835 - INFO - Running from: /app
2025-12-12 18:31:52,835 - INFO - Using config: /app/config.yml
2025-12-12 18:31:52,835 - INFO - Output directory: /app/output
2025-12-12 18:31:52,836 - INFO - ----------------------------------------
2025-12-12 18:31:52,836 - INFO - 
Subscript.py initialized segmentation provider: historical-manuscript
2025-12-12 18:31:52,836 - INFO - Subscript.py Initialized transcription provider: gemini-pro-3
2025-12-12 18:31:52,836 - INFO - Processing 2 files...
2025-12-12 18:31:52,837 - INFO - Processing /app/documents/eluhrs@gmail.com/north-665bc576/north01.jpg...
2025-12-12 18:31:52,837 - INFO - Segmenting /app/documents/eluhrs@gmail.com/north-665bc576/north01.jpg with Kraken...
2025-12-12 18:31:52,837 - INFO - Loading segmentation model from /usr/local/lib/python3.10/site-packages/kraken/blla.mlmodel...
2025-12-12 18:31:53,341 - INFO - Segmenting /app/documents/eluhrs@gmail.com/north-665bc576/north01.jpg
2025-12-12 18:31:56,123 - INFO - Vectorizing regions
2025-12-12 18:31:56,267 - INFO - Vectorizing regions
2025-12-12 18:31:56,403 - INFO - Vectorizing baselines
2025-12-12 18:32:03,056 - INFO - Compute reading order on 18 lines in lr direction
2025-12-12 18:32:03,058 - INFO - Perform topological sort on partially ordered lines
2025-12-12 18:32:03,059 - INFO - Compute reading order on 1 lines in lr direction
2025-12-12 18:32:03,059 - INFO - Perform topological sort on partially ordered lines
2025-12-12 18:32:03,061 - INFO - Found 18 lines.
2025-12-12 18:32:03,062 - INFO - Initializing Gemini model: gemini-3-pro-preview
2025-12-12 18:32:03,078 - INFO - Annotating 18 regions for Visual Tagging...
2025-12-12 18:32:03,114 - INFO - Saved debug image to output/north01-debug.jpg
2025-12-12 18:32:03,115 - INFO - Sending annotated image to Gemini...
2025-12-12 18:33:32,081 - INFO - Received JSON response from Gemini.
2025-12-12 18:33:32,259 - WARNING - 
------------- gemini-pro-3 output for north01.jpg -------------
2025-12-12 18:33:32,259 - WARNING - glad aspects were present (confirming her
2025-12-12 18:33:32,259 - WARNING - Maiestie wth THEODOSIES dylligence, ARETAPHE=
2025-12-12 18:33:32,259 - WARNING - LIS constancie, and ANTIGONVS clemencie)
2025-12-12 18:33:32,260 - WARNING - setlinge them selues euar sence, in her Princelie
2025-12-12 18:33:32,260 - WARNING - brest: as ye rarenes and greatnes of her Gracis
2025-12-12 18:33:32,260 - WARNING - vertuse declare . Whom God presaruid from
2025-12-12 18:33:32,260 - WARNING - formar perell, to rule & reygne ouer us, in
2025-12-12 18:33:32,260 - WARNING - this last leaden adge: wherin Iniquitie hath
2025-12-12 18:33:32,260 - WARNING - sought to surmount ye glorie of his Deitie, and
2025-12-12 18:33:32,260 - WARNING - so presumed to suppresse his professors: As if
2025-12-12 18:33:32,260 - WARNING - ye Shylde of her Souerayntie (for worldlie
2025-12-12 18:33:32,261 - WARNING - force) did not protect his poore membars a=
2025-12-12 18:33:32,261 - WARNING - Quens
2025-12-12 18:33:32,261 - WARNING - Matie is ye per=
2025-12-12 18:33:32,261 - WARNING - fect protector
2025-12-12 18:33:32,261 - WARNING - of Religion
2025-12-12 18:33:32,261 - WARNING - mong us: What error wold not inuade us?
2025-12-12 18:33:32,261 - WARNING - What Scisme or sect wold not assawte us?
2025-12-12 18:33:32,261 - WARNING - ----------------------------------------------------------------
2025-12-12 18:33:32,262 - WARNING - Saved PageXML to output/north01.xml
2025-12-12 18:33:32,262 - WARNING - Saved TXT to output/north01.txt
2025-12-12 18:33:32,262 - WARNING - Saved PDF to output/north01.pdf
2025-12-12 18:33:32,262 - WARNING - Time:   00:01:39
2025-12-12 18:33:32,262 - WARNING - Input:  1285 tokens
2025-12-12 18:33:32,262 - WARNING - Output: 333 tokens
2025-12-12 18:33:32,262 - WARNING - Cost:   $0.0066
2025-12-12 18:33:32,263 - WARNING - ----------------------------------------------------------------
2025-12-12 18:33:32,263 - INFO - Processing /app/documents/eluhrs@gmail.com/north-665bc576/north02.jpg...
2025-12-12 18:33:32,263 - INFO - Segmenting /app/documents/eluhrs@gmail.com/north-665bc576/north02.jpg with Kraken...
2025-12-12 18:33:32,263 - INFO - Loading segmentation model from /usr/local/lib/python3.10/site-packages/kraken/blla.mlmodel...
2025-12-12 18:33:32,752 - INFO - Segmenting /app/documents/eluhrs@gmail.com/north-665bc576/north02.jpg
2025-12-12 18:33:35,343 - INFO - Vectorizing regions
2025-12-12 18:33:35,479 - INFO - Vectorizing regions
2025-12-12 18:33:35,612 - INFO - Vectorizing baselines
2025-12-12 18:33:42,464 - INFO - Compute reading order on 15 lines in lr direction
2025-12-12 18:33:42,464 - INFO - Perform topological sort on partially ordered lines
2025-12-12 18:33:42,465 - INFO - Compute reading order on 1 lines in lr direction
2025-12-12 18:33:42,465 - INFO - Perform topological sort on partially ordered lines
2025-12-12 18:33:42,465 - INFO - Compute reading order on 2 lines in lr direction
2025-12-12 18:33:42,465 - INFO - Perform topological sort on partially ordered lines
2025-12-12 18:33:42,467 - INFO - Found 16 lines.
2025-12-12 18:33:42,467 - INFO - Initializing Gemini model: gemini-3-pro-preview
2025-12-12 18:33:42,480 - INFO - Annotating 16 regions for Visual Tagging...
2025-12-12 18:33:42,519 - INFO - Saved debug image to output/north02-debug.jpg
2025-12-12 18:33:42,520 - INFO - Sending annotated image to Gemini...
2025-12-12 18:54:13,739 - INFO - SYSTEM: Server module initialized at 2025-12-12 18:54:13.739334
2025-12-12 18:54:14,693 - INFO - SYSTEM: Server module initialized at 2025-12-12 18:54:14.693429
2025-12-12 18:54:15,898 - INFO - Connected to redis://redis:6379/0
2025-12-12 18:54:15,902 - INFO - mingle: searching for neighbors
2025-12-12 18:54:16,919 - INFO - mingle: all alone
2025-12-12 18:54:16,930 - INFO - celery@43cc669a147a ready.
2025-12-12 19:03:54,962 - INFO - Task server.tasks.process_document_task[46bf4c22-f39e-401f-856e-e20bfb0dd7dd] received
2025-12-12 19:03:54,989 - INFO - Task server.tasks.process_document_task[c11f25ed-410e-4068-834c-b1e3fbad7f8d] received
2025-12-12 19:03:54,991 - INFO - Created parent thumbnail at /app/documents/eluhrs@gmail.com/north-115e82b4/north-thumb.jpg
2025-12-12 19:03:55,033 - INFO - Task 4 received options raw: {"transcription":{"temperature":0.8}}
2025-12-12 19:03:55,034 - INFO - Task 4 parsed options: {'transcription': {'temperature': 0.8}}
2025-12-12 19:03:55,036 - INFO - TASK START: Processing north01.jpg (ID: 4)
2025-12-12 19:03:55,036 - INFO - Command: subscript historical-manuscript gemini-pro-3 /app/documents/eluhrs@gmail.com/north-115e82b4/north01.jpg --output /app/documents/eluhrs@gmail.com/north-115e82b4
2025-12-12 19:03:55,045 - INFO - Task 5 received options raw: {"transcription":{"temperature":0.8}}
2025-12-12 19:03:55,046 - INFO - Task 5 parsed options: {'transcription': {'temperature': 0.8}}
2025-12-12 19:03:55,047 - INFO - Running from: /app
2025-12-12 19:03:55,047 - INFO - Using config: /app/config.yml
2025-12-12 19:03:55,047 - INFO - Output directory: /app/documents/eluhrs@gmail.com/north-115e82b4
2025-12-12 19:03:55,048 - INFO - ----------------------------------------
2025-12-12 19:03:55,048 - INFO - TASK START: Processing north02.jpg (ID: 5)
2025-12-12 19:03:55,048 - INFO - Command: subscript historical-manuscript gemini-pro-3 /app/documents/eluhrs@gmail.com/north-115e82b4/north02.jpg --output /app/documents/eluhrs@gmail.com/north-115e82b4
2025-12-12 19:03:55,058 - INFO - Running from: /app
2025-12-12 19:03:55,066 - INFO - Using config: /app/config.yml
2025-12-12 19:03:55,069 - INFO - Output directory: /app/documents/eluhrs@gmail.com/north-115e82b4
2025-12-12 19:03:55,071 - INFO - ----------------------------------------
2025-12-12 19:03:58,852 - INFO - 
Subscript.py initialized segmentation provider: historical-manuscript
2025-12-12 19:03:58,852 - INFO - Subscript.py Initialized transcription provider: gemini-pro-3
2025-12-12 19:03:58,852 - INFO - Processing 1 files...
2025-12-12 19:03:58,853 - INFO - Processing /app/documents/eluhrs@gmail.com/north-115e82b4/north02.jpg...
2025-12-12 19:03:58,853 - INFO - Segmenting /app/documents/eluhrs@gmail.com/north-115e82b4/north02.jpg with Kraken...
2025-12-12 19:03:58,853 - INFO - 
Subscript.py initialized segmentation provider: historical-manuscript
2025-12-12 19:03:58,853 - INFO - Subscript.py Initialized transcription provider: gemini-pro-3
2025-12-12 19:03:58,853 - INFO - Processing 1 files...
2025-12-12 19:03:58,854 - INFO - Processing /app/documents/eluhrs@gmail.com/north-115e82b4/north01.jpg...
2025-12-12 19:03:58,854 - INFO - Segmenting /app/documents/eluhrs@gmail.com/north-115e82b4/north01.jpg with Kraken...
2025-12-12 19:03:58,858 - INFO - Loading segmentation model from /usr/local/lib/python3.10/site-packages/kraken/blla.mlmodel...
2025-12-12 19:03:58,859 - INFO - Loading segmentation model from /usr/local/lib/python3.10/site-packages/kraken/blla.mlmodel...
2025-12-12 19:03:59,467 - INFO - Segmenting /app/documents/eluhrs@gmail.com/north-115e82b4/north01.jpg
2025-12-12 19:03:59,476 - INFO - Segmenting /app/documents/eluhrs@gmail.com/north-115e82b4/north02.jpg
2025-12-12 19:04:07,523 - INFO - Vectorizing regions
2025-12-12 19:04:07,573 - INFO - Vectorizing regions
2025-12-12 19:04:07,648 - INFO - Vectorizing regions
2025-12-12 19:04:07,684 - INFO - Vectorizing regions
2025-12-12 19:04:07,760 - INFO - Vectorizing baselines
2025-12-12 19:04:07,794 - INFO - Vectorizing baselines
2025-12-12 19:04:13,604 - INFO - Compute reading order on 15 lines in lr direction
2025-12-12 19:04:13,605 - INFO - Perform topological sort on partially ordered lines
2025-12-12 19:04:13,605 - INFO - Compute reading order on 1 lines in lr direction
2025-12-12 19:04:13,605 - INFO - Perform topological sort on partially ordered lines
2025-12-12 19:04:13,605 - INFO - Compute reading order on 2 lines in lr direction
2025-12-12 19:04:13,606 - INFO - Perform topological sort on partially ordered lines
2025-12-12 19:04:13,607 - INFO - Found 16 lines.
2025-12-12 19:04:13,607 - INFO - Initializing Gemini model: gemini-3-pro-preview
2025-12-12 19:04:13,618 - INFO - Annotating 16 regions for Visual Tagging...
2025-12-12 19:04:13,647 - INFO - Saved debug image to /app/documents/eluhrs@gmail.com/north-115e82b4/north02-debug.jpg
2025-12-12 19:04:13,647 - INFO - Sending annotated image to Gemini...
2025-12-12 19:04:13,787 - INFO - Compute reading order on 18 lines in lr direction
2025-12-12 19:04:13,788 - INFO - Perform topological sort on partially ordered lines
2025-12-12 19:04:13,788 - INFO - Compute reading order on 1 lines in lr direction
2025-12-12 19:04:13,789 - INFO - Perform topological sort on partially ordered lines
2025-12-12 19:04:13,790 - INFO - Found 18 lines.
2025-12-12 19:04:13,791 - INFO - Initializing Gemini model: gemini-3-pro-preview
2025-12-12 19:04:13,802 - INFO - Annotating 18 regions for Visual Tagging...
2025-12-12 19:04:13,832 - INFO - Saved debug image to /app/documents/eluhrs@gmail.com/north-115e82b4/north01-debug.jpg
2025-12-12 19:04:13,833 - INFO - Sending annotated image to Gemini...
2025-12-12 19:05:32,750 - INFO - Received JSON response from Gemini.
2025-12-12 19:05:32,892 - INFO - SUBSCRIPT OUTPUT for 5:

------------- gemini-pro-3 output for north02.jpg -------------
all ye euells yt may be, ar crept so near vntous.
Zeland is full, France not free, & Scotland
vnclensid: the Common people spoyled, theyr
Commonwelths racked, theyr Nobilitie
murtherid, the Councell contemnid and
theyr Kyngs disobeyed: For dissention, sedici=
on Ciuell slaughtar, & rebellion, is ye onlie
argument entreatid of among them .
If therfore it pleasid her Hyghnes, to vse ye
benefit of present tyme: to bend her browe
vpon ye disobedient: to hold vp her threatning
hand ouer them, and to aduance her pusant
arme towards them: the verie shadoe of her
sworde, wold feare and vanquyshe ye prow=
dest of them .
but
----------------------------------------------------------------

Saved PageXML to /app/documents/eluhrs@gmail.com/north-115e82b4/north02.xml
Saved TXT to /app/documents/eluhrs@gmail.com/north-115e82b4/north02.txt
Saved PDF to /app/documents/eluhrs@gmail.com/north-115e82b4/north02.pdf

Time:   00:01:34
Input:  1273 tokens
Output: 282 tokens
Cost:   $0.0059

----------------------------------------------------------------


2025-12-12 19:05:32,893 - INFO - Task Complete: north02.jpg
2025-12-12 19:05:32,923 - INFO - Task server.tasks.process_document_task[c11f25ed-410e-4068-834c-b1e3fbad7f8d] succeeded in 97.93114704394247s: None
2025-12-12 19:06:33,680 - INFO - Received JSON response from Gemini.
2025-12-12 19:06:33,840 - INFO - SUBSCRIPT OUTPUT for 4:

------------- gemini-pro-3 output for north01.jpg -------------
glad aspects were present (confirming her
Maiestie wth THEODOSIES dylligence, ARETAPHE=
LIS constancie, and ANTIGONVS clemencie)
setlinge them selues euar sence, in her Princelie
brest: as ye rarenes and greatnes of her Gracis
vertuse declare. Whom God presaruid from
formar perell, to rule & reygne ouer us, in
this last leaden adge: wherin Iniquitie hath
sought to surmount ye glorie of his Deitie, and
so presumed to suppresse his professors: As if
ye Shylde of her Souerayntie (for worldlie
force) did not protect his poore membars a=
Quiens
Ma:tie
is ye per
What Scisme or sect wold not assawte us?
What treason wold not entrapp us? When
all
----------------------------------------------------------------

Saved PageXML to /app/documents/eluhrs@gmail.com/north-115e82b4/north01.xml
Saved TXT to /app/documents/eluhrs@gmail.com/north-115e82b4/north01.txt
Saved PDF to /app/documents/eluhrs@gmail.com/north-115e82b4/north01.pdf

Time:   00:02:34
Input:  1285 tokens
Output: 304 tokens
Cost:   $0.0062

----------------------------------------------------------------


2025-12-12 19:06:33,841 - INFO - Task Complete: north01.jpg
2025-12-12 19:06:33,862 - INFO - All 2 pages for parent 3 are done. Triggering merge.
2025-12-12 19:06:33,878 - INFO - Task server.tasks.process_document_task[46bf4c22-f39e-401f-856e-e20bfb0dd7dd] succeeded in 158.91265332198236s: None
2025-12-12 19:06:33,877 - INFO - Task server.tasks.merge_document_task[3d58a1bb-ca8f-4c7a-907e-1ee5f9e926e0] received
2025-12-12 19:06:33,881 - INFO - Starting merge for parent 3: north.pdf
2025-12-12 19:06:33,887 - INFO - Running subscript command: ['subscript', '--combine', '/app/documents/eluhrs@gmail.com/north-115e82b4/north.pdf', '/app/documents/eluhrs@gmail.com/north-115e82b4/north01.jpg', '/app/documents/eluhrs@gmail.com/north-115e82b4/north02.jpg']
2025-12-12 19:06:33,895 - INFO - Running from: /app
2025-12-12 19:06:33,895 - INFO - Using config: /app/config.yml
2025-12-12 19:06:33,896 - INFO - Output directory: /app/output
2025-12-12 19:06:33,896 - INFO - ----------------------------------------
2025-12-12 19:06:33,897 - INFO - 
Subscript.py initialized segmentation provider: historical-manuscript
2025-12-12 19:06:33,897 - INFO - Subscript.py Initialized transcription provider: gemini-pro-3
2025-12-12 19:06:33,898 - INFO - Processing 2 files...
2025-12-12 19:06:33,898 - INFO - Processing /app/documents/eluhrs@gmail.com/north-115e82b4/north01.jpg...
2025-12-12 19:06:33,898 - INFO - Segmenting /app/documents/eluhrs@gmail.com/north-115e82b4/north01.jpg with Kraken...
2025-12-12 19:06:33,899 - INFO - Loading segmentation model from /usr/local/lib/python3.10/site-packages/kraken/blla.mlmodel...
2025-12-12 19:06:34,324 - INFO - Segmenting /app/documents/eluhrs@gmail.com/north-115e82b4/north01.jpg
2025-12-12 19:06:36,861 - INFO - Vectorizing regions
2025-12-12 19:06:36,970 - INFO - Vectorizing regions
2025-12-12 19:06:37,079 - INFO - Vectorizing baselines
2025-12-12 19:06:42,127 - INFO - Compute reading order on 18 lines in lr direction
2025-12-12 19:06:42,128 - INFO - Perform topological sort on partially ordered lines
2025-12-12 19:06:42,129 - INFO - Compute reading order on 1 lines in lr direction
2025-12-12 19:06:42,130 - INFO - Perform topological sort on partially ordered lines
2025-12-12 19:06:42,135 - INFO - Found 18 lines.
2025-12-12 19:06:42,142 - INFO - Initializing Gemini model: gemini-3-pro-preview
2025-12-12 19:06:42,155 - INFO - Annotating 18 regions for Visual Tagging...
2025-12-12 19:06:42,187 - INFO - Saved debug image to output/north01-debug.jpg
2025-12-12 19:06:42,187 - INFO - Sending annotated image to Gemini...
2025-12-12 19:08:14,866 - INFO - Task server.tasks.process_document_task[ddc6157c-d4dc-43dd-8985-a54a49567c49] received
2025-12-12 19:08:14,872 - INFO - Task 4 received options raw: {"transcription":{"temperature":0.8}}
2025-12-12 19:08:14,872 - INFO - Task 4 parsed options: {'transcription': {'temperature': 0.8}}
2025-12-12 19:08:14,873 - INFO - TASK START: Processing north01.jpg (ID: 4)
2025-12-12 19:08:14,874 - INFO - Command: subscript historical-manuscript gemini-pro-3 /app/documents/eluhrs@gmail.com/north-71fa33ce/north01.jpg --output /app/documents/eluhrs@gmail.com/north-71fa33ce
2025-12-12 19:08:14,881 - INFO - Running from: /app
2025-12-12 19:08:14,881 - INFO - Using config: /app/config.yml
2025-12-12 19:08:14,882 - INFO - Output directory: /app/documents/eluhrs@gmail.com/north-71fa33ce
2025-12-12 19:08:14,882 - INFO - ----------------------------------------
2025-12-12 19:08:14,883 - INFO - 
Subscript.py initialized segmentation provider: historical-manuscript
2025-12-12 19:08:14,883 - INFO - Subscript.py Initialized transcription provider: gemini-pro-3
2025-12-12 19:08:14,884 - INFO - Processing 1 files...
2025-12-12 19:08:14,884 - INFO - Processing /app/documents/eluhrs@gmail.com/north-71fa33ce/north01.jpg...
2025-12-12 19:08:14,884 - INFO - Segmenting /app/documents/eluhrs@gmail.com/north-71fa33ce/north01.jpg with Kraken...
2025-12-12 19:08:14,885 - INFO - Loading segmentation model from /usr/local/lib/python3.10/site-packages/kraken/blla.mlmodel...
2025-12-12 19:08:14,887 - INFO - Task server.tasks.process_document_task[e56c77f0-3e8f-42f7-86b9-58edb66f4243] received
2025-12-12 19:08:14,889 - INFO - Created parent thumbnail at /app/documents/eluhrs@gmail.com/north-71fa33ce/north-thumb.jpg
2025-12-12 19:08:14,961 - INFO - Task 5 received options raw: {"transcription":{"temperature":0.8}}
2025-12-12 19:08:14,963 - INFO - Task 5 parsed options: {'transcription': {'temperature': 0.8}}
2025-12-12 19:08:14,965 - INFO - TASK START: Processing north02.jpg (ID: 5)
2025-12-12 19:08:14,965 - INFO - Command: subscript historical-manuscript gemini-pro-3 /app/documents/eluhrs@gmail.com/north-71fa33ce/north02.jpg --output /app/documents/eluhrs@gmail.com/north-71fa33ce
2025-12-12 19:08:14,973 - INFO - Running from: /app
2025-12-12 19:08:14,974 - INFO - Using config: /app/config.yml
2025-12-12 19:08:14,974 - INFO - Output directory: /app/documents/eluhrs@gmail.com/north-71fa33ce
2025-12-12 19:08:14,975 - INFO - ----------------------------------------
2025-12-12 19:08:15,591 - INFO - Segmenting /app/documents/eluhrs@gmail.com/north-71fa33ce/north01.jpg
2025-12-12 19:08:18,504 - INFO - 
Subscript.py initialized segmentation provider: historical-manuscript
2025-12-12 19:08:18,504 - INFO - Subscript.py Initialized transcription provider: gemini-pro-3
2025-12-12 19:08:18,505 - INFO - Processing 1 files...
2025-12-12 19:08:18,505 - INFO - Processing /app/documents/eluhrs@gmail.com/north-71fa33ce/north02.jpg...
2025-12-12 19:08:18,506 - INFO - Segmenting /app/documents/eluhrs@gmail.com/north-71fa33ce/north02.jpg with Kraken...
2025-12-12 19:08:18,509 - INFO - Loading segmentation model from /usr/local/lib/python3.10/site-packages/kraken/blla.mlmodel...
2025-12-12 19:08:19,042 - INFO - Segmenting /app/documents/eluhrs@gmail.com/north-71fa33ce/north02.jpg
2025-12-12 19:08:21,515 - INFO - Vectorizing regions
2025-12-12 19:08:21,636 - INFO - Vectorizing regions
2025-12-12 19:08:21,747 - INFO - Vectorizing baselines
2025-12-12 19:08:23,651 - INFO - Vectorizing regions
2025-12-12 19:08:23,760 - INFO - Vectorizing regions
2025-12-12 19:08:23,865 - INFO - Vectorizing baselines
2025-12-12 19:08:27,143 - INFO - Received JSON response from Gemini.
2025-12-12 19:08:27,147 - ERROR - Failed to generate PDF: [Errno 2] No such file or directory: '/app/documents/eluhrs@gmail.com/north-115e82b4/north01.jpg'
2025-12-12 19:08:27,149 - ERROR - Failed to process /app/documents/eluhrs@gmail.com/north-115e82b4/north01.jpg: [Errno 2] No such file or directory: '/app/documents/eluhrs@gmail.com/north-115e82b4/north01.jpg'
2025-12-12 19:08:27,150 - WARNING - Traceback (most recent call last):
2025-12-12 19:08:27,154 - WARNING -   File "/usr/local/lib/python3.10/site-packages/subscript/__main__.py", line 300, in main
    output_engine.generate(image_path, regions, config.get('output_dir', 'output'), config)
2025-12-12 19:08:27,154 - WARNING -   File "/usr/local/lib/python3.10/site-packages/subscript/modules/output.py", line 32, in generate
    self._generate_xml(image_path, regions, xml_path)
2025-12-12 19:08:27,154 - WARNING -   File "/usr/local/lib/python3.10/site-packages/subscript/modules/output.py", line 52, in _generate_xml
    with Image.open(image_path) as im:
2025-12-12 19:08:27,154 - WARNING -   File "/usr/local/lib/python3.10/site-packages/PIL/Image.py", line 3493, in open
    fp = builtins.open(filename, "rb")
2025-12-12 19:08:27,154 - WARNING - FileNotFoundError: [Errno 2] No such file or directory: '/app/documents/eluhrs@gmail.com/north-115e82b4/north01.jpg'
2025-12-12 19:08:27,154 - INFO - Processing /app/documents/eluhrs@gmail.com/north-115e82b4/north02.jpg...
2025-12-12 19:08:27,155 - INFO - Segmenting /app/documents/eluhrs@gmail.com/north-115e82b4/north02.jpg with Kraken...
2025-12-12 19:08:27,155 - ERROR - Failed to process /app/documents/eluhrs@gmail.com/north-115e82b4/north02.jpg: [Errno 2] No such file or directory: '/app/documents/eluhrs@gmail.com/north-115e82b4/north02.jpg'
2025-12-12 19:08:27,155 - WARNING - Traceback (most recent call last):
2025-12-12 19:08:27,155 - WARNING -   File "/usr/local/lib/python3.10/site-packages/subscript/__main__.py", line 284, in main
    regions = segmentation_engine.analyze(image_path, config)
2025-12-12 19:08:27,155 - WARNING -   File "/usr/local/lib/python3.10/site-packages/subscript/modules/segmentation.py", line 34, in analyze
    im = Image.open(image_path)
2025-12-12 19:08:27,155 - WARNING -   File "/usr/local/lib/python3.10/site-packages/PIL/Image.py", line 3493, in open
    fp = builtins.open(filename, "rb")
2025-12-12 19:08:27,155 - WARNING - FileNotFoundError: [Errno 2] No such file or directory: '/app/documents/eluhrs@gmail.com/north-115e82b4/north02.jpg'
2025-12-12 19:08:27,161 - INFO - Compute reading order on 18 lines in lr direction
2025-12-12 19:08:27,164 - INFO - Perform topological sort on partially ordered lines
2025-12-12 19:08:27,164 - INFO - Compute reading order on 1 lines in lr direction
2025-12-12 19:08:27,165 - INFO - Perform topological sort on partially ordered lines
2025-12-12 19:08:27,169 - INFO - Found 18 lines.
2025-12-12 19:08:27,171 - INFO - Initializing Gemini model: gemini-3-pro-preview
2025-12-12 19:08:27,173 - INFO - Task server.tasks.merge_document_task[3d58a1bb-ca8f-4c7a-907e-1ee5f9e926e0] succeeded in 113.29188067698851s: None
2025-12-12 19:08:27,188 - INFO - Annotating 18 regions for Visual Tagging...
2025-12-12 19:08:27,217 - INFO - Saved debug image to /app/documents/eluhrs@gmail.com/north-71fa33ce/north01-debug.jpg
2025-12-12 19:08:27,218 - INFO - Sending annotated image to Gemini...
2025-12-12 19:08:29,342 - INFO - Compute reading order on 15 lines in lr direction
2025-12-12 19:08:29,342 - INFO - Perform topological sort on partially ordered lines
2025-12-12 19:08:29,343 - INFO - Compute reading order on 1 lines in lr direction
2025-12-12 19:08:29,344 - INFO - Perform topological sort on partially ordered lines
2025-12-12 19:08:29,344 - INFO - Compute reading order on 2 lines in lr direction
2025-12-12 19:08:29,344 - INFO - Perform topological sort on partially ordered lines
2025-12-12 19:08:29,347 - INFO - Found 16 lines.
2025-12-12 19:08:29,348 - INFO - Initializing Gemini model: gemini-3-pro-preview
2025-12-12 19:08:29,360 - INFO - Annotating 16 regions for Visual Tagging...
2025-12-12 19:08:29,387 - INFO - Saved debug image to /app/documents/eluhrs@gmail.com/north-71fa33ce/north02-debug.jpg
2025-12-12 19:08:29,387 - INFO - Sending annotated image to Gemini...
2025-12-12 19:09:33,207 - INFO - Received JSON response from Gemini.
2025-12-12 19:09:33,348 - INFO - SUBSCRIPT OUTPUT for 5:

------------- gemini-pro-3 output for north02.jpg -------------
all ye euells yt may be, ar crept so near vntous.
Zeland is full, France not free, & Scotland
vnclensid: the Common people spoyled, theyr
Commonwelths racked, theyr Nobilitie
murtherid, the Councell contemnid and
theyr Kyngs disobeyed: For dissention, sedici-
on Ciuell slaughtar, & rebellion, is ye onlie
argument entreatid of among them .
If therfore it pleasid her Hyghnes, to vse ye
benefit of present tyme: to bend her browe
vpon ye disobedient: to hold vp her threatning
hand ouer them, and to aduance her pusant
arme towards them: the verie shadoe of her
sworde, wold feare and vanquyshe ye prow-
dest of them .
but
----------------------------------------------------------------

Saved PageXML to /app/documents/eluhrs@gmail.com/north-71fa33ce/north02.xml
Saved TXT to /app/documents/eluhrs@gmail.com/north-71fa33ce/north02.txt
Saved PDF to /app/documents/eluhrs@gmail.com/north-71fa33ce/north02.pdf

Time:   00:01:14
Input:  1273 tokens
Output: 284 tokens
Cost:   $0.0060

----------------------------------------------------------------


2025-12-12 19:09:33,348 - INFO - Task Complete: north02.jpg
2025-12-12 19:09:33,360 - INFO - Task server.tasks.process_document_task[e56c77f0-3e8f-42f7-86b9-58edb66f4243] succeeded in 78.39572199399117s: None
2025-12-12 19:10:26,458 - INFO - Received JSON response from Gemini.
2025-12-12 19:10:26,459 - WARNING - Gemini did not return text for box 9
2025-12-12 19:10:26,589 - INFO - SUBSCRIPT OUTPUT for 4:

------------- gemini-pro-3 output for north01.jpg -------------
glad aspects were present (confirming her
Maiestie wth THEODOSIES dylligence, ARETAPHE=
LIS constancie, and ANTIGONYS clemencie)
setlinge them selues euar sence, in her Princelie
brest: as ye rarenes and greatnes of her Gracis
vertuse declare. Whom God presaruid from
formar perell, to rule & reygne ouer us, in
this last leaden adge: wherin Iniquitie hath

sought to surmount ye glorie of his Deitie, and
so presumed to suppresse his professors: As if
y Shylde of her Souerayntie (for worldlie
Quens
Ma:tie is ye par
fect protector
What Scisme or sect wold not assawte us.
What treason wold not entrapp us? When
all
----------------------------------------------------------------

Saved PageXML to /app/documents/eluhrs@gmail.com/north-71fa33ce/north01.xml
Saved TXT to /app/documents/eluhrs@gmail.com/north-71fa33ce/north01.txt
Saved PDF to /app/documents/eluhrs@gmail.com/north-71fa33ce/north01.pdf

Time:   00:02:11
Input:  1285 tokens
Output: 306 tokens
Cost:   $0.0062

----------------------------------------------------------------


2025-12-12 19:10:26,590 - INFO - Task Complete: north01.jpg
2025-12-12 19:10:26,602 - INFO - All 2 pages for parent 3 are done. Triggering merge.
2025-12-12 19:10:26,615 - INFO - Task server.tasks.process_document_task[ddc6157c-d4dc-43dd-8985-a54a49567c49] succeeded in 131.67423526896164s: None
2025-12-12 19:10:26,615 - INFO - Task server.tasks.merge_document_task[124d2c8d-9963-48ac-a1ae-67352e640b3f] received
2025-12-12 19:10:26,620 - INFO - Starting merge for parent 3: north.pdf
2025-12-12 19:10:26,625 - INFO - Running subscript command: ['subscript', '--combine', '/app/documents/eluhrs@gmail.com/north-71fa33ce/north.pdf', '/app/documents/eluhrs@gmail.com/north-71fa33ce/north01.jpg', '/app/documents/eluhrs@gmail.com/north-71fa33ce/north02.jpg']
2025-12-12 19:10:26,636 - INFO - Running from: /app
2025-12-12 19:10:26,636 - INFO - Using config: /app/config.yml
2025-12-12 19:10:26,636 - INFO - Output directory: /app/output
2025-12-12 19:10:26,636 - INFO - ----------------------------------------
2025-12-12 19:10:26,637 - INFO - 
Subscript.py initialized segmentation provider: historical-manuscript
2025-12-12 19:10:26,637 - INFO - Subscript.py Initialized transcription provider: gemini-pro-3
2025-12-12 19:10:26,638 - INFO - Processing 2 files...
2025-12-12 19:10:26,638 - INFO - Processing /app/documents/eluhrs@gmail.com/north-71fa33ce/north01.jpg...
2025-12-12 19:10:26,638 - INFO - Segmenting /app/documents/eluhrs@gmail.com/north-71fa33ce/north01.jpg with Kraken...
2025-12-12 19:10:26,640 - INFO - Loading segmentation model from /usr/local/lib/python3.10/site-packages/kraken/blla.mlmodel...
2025-12-12 19:10:26,992 - INFO - Segmenting /app/documents/eluhrs@gmail.com/north-71fa33ce/north01.jpg
2025-12-12 19:10:29,891 - INFO - Vectorizing regions
2025-12-12 19:10:30,004 - INFO - Vectorizing regions
2025-12-12 19:10:30,112 - INFO - Vectorizing baselines
2025-12-12 19:10:35,555 - INFO - Compute reading order on 18 lines in lr direction
2025-12-12 19:10:35,558 - INFO - Perform topological sort on partially ordered lines
2025-12-12 19:10:35,559 - INFO - Compute reading order on 1 lines in lr direction
2025-12-12 19:10:35,559 - INFO - Perform topological sort on partially ordered lines
2025-12-12 19:10:35,561 - INFO - Found 18 lines.
2025-12-12 19:10:35,565 - INFO - Initializing Gemini model: gemini-3-pro-preview
2025-12-12 19:10:35,582 - INFO - Annotating 18 regions for Visual Tagging...
2025-12-12 19:10:35,611 - INFO - Saved debug image to output/north01-debug.jpg
2025-12-12 19:10:35,611 - INFO - Sending annotated image to Gemini...
2025-12-12 19:12:33,723 - INFO - Task server.tasks.process_document_task[54c9daf1-f56d-439a-b753-b032b9a69da8] received
2025-12-12 19:12:33,730 - INFO - Task 4 received options raw: {"transcription":{"temperature":0.8}}
2025-12-12 19:12:33,731 - INFO - Task 4 parsed options: {'transcription': {'temperature': 0.8}}
2025-12-12 19:12:33,732 - INFO - TASK START: Processing north-01.jpg (ID: 4)
2025-12-12 19:12:33,732 - INFO - Command: subscript historical-manuscript gemini-pro-3 /app/documents/eluhrs@gmail.com/north-01-09a3bda6/north-01.jpg --output /app/documents/eluhrs@gmail.com/north-01-09a3bda6
2025-12-12 19:12:33,742 - INFO - Task server.tasks.process_document_task[9c5e43cd-d90b-4e3a-aeab-238217df7f53] received
2025-12-12 19:12:33,742 - INFO - Running from: /app
2025-12-12 19:12:33,743 - INFO - Using config: /app/config.yml
2025-12-12 19:12:33,743 - INFO - Output directory: /app/documents/eluhrs@gmail.com/north-01-09a3bda6
2025-12-12 19:12:33,743 - INFO - ----------------------------------------
2025-12-12 19:12:33,745 - INFO - 
Subscript.py initialized segmentation provider: historical-manuscript
2025-12-12 19:12:33,745 - INFO - Subscript.py Initialized transcription provider: gemini-pro-3
2025-12-12 19:12:33,745 - INFO - Processing 1 files...
2025-12-12 19:12:33,746 - INFO - Processing /app/documents/eluhrs@gmail.com/north-01-09a3bda6/north-01.jpg...
2025-12-12 19:12:33,746 - INFO - Segmenting /app/documents/eluhrs@gmail.com/north-01-09a3bda6/north-01.jpg with Kraken...
2025-12-12 19:12:33,748 - INFO - Loading segmentation model from /usr/local/lib/python3.10/site-packages/kraken/blla.mlmodel...
2025-12-12 19:12:33,767 - INFO - Task 5 received options raw: {"transcription":{"temperature":0.8}}
2025-12-12 19:12:33,768 - INFO - Task 5 parsed options: {'transcription': {'temperature': 0.8}}
2025-12-12 19:12:33,770 - INFO - TASK START: Processing north-02.jpg (ID: 5)
2025-12-12 19:12:33,770 - INFO - Command: subscript historical-manuscript gemini-pro-3 /app/documents/eluhrs@gmail.com/north-01-09a3bda6/north-02.jpg --output /app/documents/eluhrs@gmail.com/north-01-09a3bda6
2025-12-12 19:12:33,781 - INFO - Running from: /app
2025-12-12 19:12:33,781 - INFO - Using config: /app/config.yml
2025-12-12 19:12:33,782 - INFO - Output directory: /app/documents/eluhrs@gmail.com/north-01-09a3bda6
2025-12-12 19:12:33,782 - INFO - ----------------------------------------
2025-12-12 19:12:33,785 - INFO - 
Subscript.py initialized segmentation provider: historical-manuscript
2025-12-12 19:12:33,786 - INFO - Subscript.py Initialized transcription provider: gemini-pro-3
2025-12-12 19:12:33,787 - INFO - Processing 1 files...
2025-12-12 19:12:33,787 - INFO - Processing /app/documents/eluhrs@gmail.com/north-01-09a3bda6/north-02.jpg...
2025-12-12 19:12:33,788 - INFO - Segmenting /app/documents/eluhrs@gmail.com/north-01-09a3bda6/north-02.jpg with Kraken...
2025-12-12 19:12:33,790 - INFO - Loading segmentation model from /usr/local/lib/python3.10/site-packages/kraken/blla.mlmodel...
2025-12-12 19:12:34,295 - INFO - Segmenting /app/documents/eluhrs@gmail.com/north-01-09a3bda6/north-01.jpg
2025-12-12 19:12:34,331 - INFO - Segmenting /app/documents/eluhrs@gmail.com/north-01-09a3bda6/north-02.jpg
2025-12-12 19:12:41,308 - INFO - Vectorizing regions
2025-12-12 19:12:41,422 - INFO - Vectorizing regions
2025-12-12 19:12:41,533 - INFO - Vectorizing baselines
2025-12-12 19:12:41,545 - INFO - Vectorizing regions
2025-12-12 19:12:41,665 - INFO - Vectorizing regions
2025-12-12 19:12:41,808 - INFO - Vectorizing baselines
2025-12-12 19:12:46,988 - INFO - Compute reading order on 15 lines in lr direction
2025-12-12 19:12:46,989 - INFO - Perform topological sort on partially ordered lines
2025-12-12 19:12:46,989 - INFO - Compute reading order on 1 lines in lr direction
2025-12-12 19:12:46,992 - INFO - Perform topological sort on partially ordered lines
2025-12-12 19:12:46,993 - INFO - Compute reading order on 2 lines in lr direction
2025-12-12 19:12:46,993 - INFO - Perform topological sort on partially ordered lines
2025-12-12 19:12:46,994 - INFO - Found 16 lines.
2025-12-12 19:12:46,996 - INFO - Initializing Gemini model: gemini-3-pro-preview
2025-12-12 19:12:47,012 - INFO - Annotating 16 regions for Visual Tagging...
2025-12-12 19:12:47,039 - INFO - Saved debug image to /app/documents/eluhrs@gmail.com/north-01-09a3bda6/north-02-debug.jpg
2025-12-12 19:12:47,039 - INFO - Sending annotated image to Gemini...
2025-12-12 19:12:47,675 - INFO - Compute reading order on 18 lines in lr direction
2025-12-12 19:12:47,679 - INFO - Perform topological sort on partially ordered lines
2025-12-12 19:12:47,689 - INFO - Compute reading order on 1 lines in lr direction
2025-12-12 19:12:47,691 - INFO - Perform topological sort on partially ordered lines
2025-12-12 19:12:47,693 - INFO - Found 18 lines.
2025-12-12 19:12:47,693 - INFO - Initializing Gemini model: gemini-3-pro-preview
2025-12-12 19:12:47,705 - INFO - Annotating 18 regions for Visual Tagging...
2025-12-12 19:12:47,737 - INFO - Saved debug image to /app/documents/eluhrs@gmail.com/north-01-09a3bda6/north-01-debug.jpg
2025-12-12 19:12:47,738 - INFO - Sending annotated image to Gemini...
2025-12-12 19:12:57,996 - INFO - Received JSON response from Gemini.
2025-12-12 19:12:58,003 - ERROR - Failed to generate PDF: [Errno 2] No such file or directory: '/app/documents/eluhrs@gmail.com/north-71fa33ce/north01.jpg'
2025-12-12 19:12:58,004 - ERROR - Failed to process /app/documents/eluhrs@gmail.com/north-71fa33ce/north01.jpg: [Errno 2] No such file or directory: '/app/documents/eluhrs@gmail.com/north-71fa33ce/north01.jpg'
2025-12-12 19:12:58,006 - WARNING - Traceback (most recent call last):
2025-12-12 19:12:58,007 - WARNING -   File "/usr/local/lib/python3.10/site-packages/subscript/__main__.py", line 300, in main
    output_engine.generate(image_path, regions, config.get('output_dir', 'output'), config)
2025-12-12 19:12:58,007 - WARNING -   File "/usr/local/lib/python3.10/site-packages/subscript/modules/output.py", line 32, in generate
    self._generate_xml(image_path, regions, xml_path)
2025-12-12 19:12:58,007 - WARNING -   File "/usr/local/lib/python3.10/site-packages/subscript/modules/output.py", line 52, in _generate_xml
    with Image.open(image_path) as im:
2025-12-12 19:12:58,008 - WARNING -   File "/usr/local/lib/python3.10/site-packages/PIL/Image.py", line 3493, in open
    fp = builtins.open(filename, "rb")
2025-12-12 19:12:58,008 - WARNING - FileNotFoundError: [Errno 2] No such file or directory: '/app/documents/eluhrs@gmail.com/north-71fa33ce/north01.jpg'
2025-12-12 19:12:58,008 - INFO - Processing /app/documents/eluhrs@gmail.com/north-71fa33ce/north02.jpg...
2025-12-12 19:12:58,009 - INFO - Segmenting /app/documents/eluhrs@gmail.com/north-71fa33ce/north02.jpg with Kraken...
2025-12-12 19:12:58,009 - ERROR - Failed to process /app/documents/eluhrs@gmail.com/north-71fa33ce/north02.jpg: [Errno 2] No such file or directory: '/app/documents/eluhrs@gmail.com/north-71fa33ce/north02.jpg'
2025-12-12 19:12:58,010 - WARNING - Traceback (most recent call last):
2025-12-12 19:12:58,010 - WARNING -   File "/usr/local/lib/python3.10/site-packages/subscript/__main__.py", line 284, in main
    regions = segmentation_engine.analyze(image_path, config)
2025-12-12 19:12:58,010 - WARNING -   File "/usr/local/lib/python3.10/site-packages/subscript/modules/segmentation.py", line 34, in analyze
    im = Image.open(image_path)
2025-12-12 19:12:58,011 - WARNING -   File "/usr/local/lib/python3.10/site-packages/PIL/Image.py", line 3493, in open
    fp = builtins.open(filename, "rb")
2025-12-12 19:12:58,011 - WARNING - FileNotFoundError: [Errno 2] No such file or directory: '/app/documents/eluhrs@gmail.com/north-71fa33ce/north02.jpg'
2025-12-12 19:12:58,028 - INFO - Task server.tasks.merge_document_task[124d2c8d-9963-48ac-a1ae-67352e640b3f] succeeded in 151.40856056904886s: None
2025-12-12 19:13:24,483 - INFO - Task server.tasks.process_document_task[ea0e3d70-93f9-4005-acea-494a6db147e6] received
2025-12-12 19:13:24,490 - INFO - Task 7 received options raw: {"transcription":{"temperature":0.8}}
2025-12-12 19:13:24,491 - INFO - Task 7 parsed options: {'transcription': {'temperature': 0.8}}
2025-12-12 19:13:24,492 - INFO - TASK START: Processing north-01.jpg (ID: 7)
2025-12-12 19:13:24,493 - INFO - Command: subscript historical-manuscript gemini-pro-3 /app/documents/eluhrs@gmail.com/north-01-6db5dd69/north-01.jpg --output /app/documents/eluhrs@gmail.com/north-01-6db5dd69
2025-12-12 19:13:24,499 - INFO - Running from: /app
2025-12-12 19:13:24,499 - INFO - Using config: /app/config.yml
2025-12-12 19:13:24,499 - INFO - Output directory: /app/documents/eluhrs@gmail.com/north-01-6db5dd69
2025-12-12 19:13:24,500 - INFO - ----------------------------------------
2025-12-12 19:13:24,500 - INFO - 
Subscript.py initialized segmentation provider: historical-manuscript
2025-12-12 19:13:24,500 - INFO - Subscript.py Initialized transcription provider: gemini-pro-3
2025-12-12 19:13:24,501 - INFO - Processing 1 files...
2025-12-12 19:13:24,501 - INFO - Processing /app/documents/eluhrs@gmail.com/north-01-6db5dd69/north-01.jpg...
2025-12-12 19:13:24,501 - INFO - Segmenting /app/documents/eluhrs@gmail.com/north-01-6db5dd69/north-01.jpg with Kraken...
2025-12-12 19:13:24,502 - INFO - Loading segmentation model from /usr/local/lib/python3.10/site-packages/kraken/blla.mlmodel...
2025-12-12 19:13:24,507 - INFO - Task server.tasks.process_document_task[4bc79d2b-429f-4d48-bb01-0ca18561aac1] received
2025-12-12 19:13:24,569 - INFO - Task 8 received options raw: {"transcription":{"temperature":0.8}}
2025-12-12 19:13:24,570 - INFO - Task 8 parsed options: {'transcription': {'temperature': 0.8}}
2025-12-12 19:13:24,573 - INFO - TASK START: Processing north-02.jpg (ID: 8)
2025-12-12 19:13:24,573 - INFO - Command: subscript historical-manuscript gemini-pro-3 /app/documents/eluhrs@gmail.com/north-01-6db5dd69/north-02.jpg --output /app/documents/eluhrs@gmail.com/north-01-6db5dd69
2025-12-12 19:13:24,583 - INFO - Running from: /app
2025-12-12 19:13:24,583 - INFO - Using config: /app/config.yml
2025-12-12 19:13:24,584 - INFO - Output directory: /app/documents/eluhrs@gmail.com/north-01-6db5dd69
2025-12-12 19:13:24,584 - INFO - ----------------------------------------
2025-12-12 19:13:25,033 - INFO - Segmenting /app/documents/eluhrs@gmail.com/north-01-6db5dd69/north-01.jpg
2025-12-12 19:13:28,711 - INFO - 
Subscript.py initialized segmentation provider: historical-manuscript
2025-12-12 19:13:28,712 - INFO - Subscript.py Initialized transcription provider: gemini-pro-3
2025-12-12 19:13:28,712 - INFO - Processing 1 files...
2025-12-12 19:13:28,713 - INFO - Processing /app/documents/eluhrs@gmail.com/north-01-6db5dd69/north-02.jpg...
2025-12-12 19:13:28,713 - INFO - Segmenting /app/documents/eluhrs@gmail.com/north-01-6db5dd69/north-02.jpg with Kraken...
2025-12-12 19:13:28,716 - INFO - Loading segmentation model from /usr/local/lib/python3.10/site-packages/kraken/blla.mlmodel...
2025-12-12 19:13:29,240 - INFO - Segmenting /app/documents/eluhrs@gmail.com/north-01-6db5dd69/north-02.jpg
2025-12-12 19:13:30,324 - INFO - Vectorizing regions
2025-12-12 19:13:30,449 - INFO - Vectorizing regions
2025-12-12 19:13:30,564 - INFO - Vectorizing baselines
2025-12-12 19:13:33,339 - INFO - Vectorizing regions
2025-12-12 19:13:33,443 - INFO - Vectorizing regions
2025-12-12 19:13:33,549 - INFO - Vectorizing baselines
2025-12-12 19:13:36,333 - INFO - Compute reading order on 18 lines in lr direction
2025-12-12 19:13:36,337 - INFO - Perform topological sort on partially ordered lines
2025-12-12 19:13:36,343 - INFO - Compute reading order on 1 lines in lr direction
2025-12-12 19:13:36,343 - INFO - Perform topological sort on partially ordered lines
2025-12-12 19:13:36,345 - INFO - Found 18 lines.
2025-12-12 19:13:36,346 - INFO - Initializing Gemini model: gemini-3-pro-preview
2025-12-12 19:13:36,358 - INFO - Annotating 18 regions for Visual Tagging...
2025-12-12 19:13:36,387 - INFO - Saved debug image to /app/documents/eluhrs@gmail.com/north-01-6db5dd69/north-01-debug.jpg
2025-12-12 19:13:36,389 - INFO - Sending annotated image to Gemini...
2025-12-12 19:13:39,881 - INFO - Compute reading order on 15 lines in lr direction
2025-12-12 19:13:39,882 - INFO - Perform topological sort on partially ordered lines
2025-12-12 19:13:39,882 - INFO - Compute reading order on 1 lines in lr direction
2025-12-12 19:13:39,883 - INFO - Perform topological sort on partially ordered lines
2025-12-12 19:13:39,883 - INFO - Compute reading order on 2 lines in lr direction
2025-12-12 19:13:39,883 - INFO - Perform topological sort on partially ordered lines
2025-12-12 19:13:39,884 - INFO - Found 16 lines.
2025-12-12 19:13:39,885 - INFO - Initializing Gemini model: gemini-3-pro-preview
2025-12-12 19:13:39,896 - INFO - Annotating 16 regions for Visual Tagging...
2025-12-12 19:13:39,925 - INFO - Saved debug image to /app/documents/eluhrs@gmail.com/north-01-6db5dd69/north-02-debug.jpg
2025-12-12 19:13:39,926 - INFO - Sending annotated image to Gemini...
2025-12-12 19:14:02,941 - INFO - Received JSON response from Gemini.
2025-12-12 19:14:03,087 - INFO - SUBSCRIPT OUTPUT for 5:

------------- gemini-pro-3 output for north-02.jpg -------------
all ye euells ye maybe, ar crept so near vntous.
Zeland is full, France not free, & Scotland
vnclensid: the Common people spoyled, theyr
Commonwelths racked, theyr Nobilitie
murtherid, the Councell contemnid and
theyr Kyngs disobeyed: For dissention, sedici=
on Ciuell slaughtar, & rebellion, is ye onlie
argument entreatid of among them .
If therfore it pleasid her Hyghnes, to vse ye
benefit of present tyme: to bend her browe
vpon ye disobedient: to hold vp her threatning
hand ouer them, and to aduance her pusant
arme towards them; the verie shadoe of her
sworde, wold feare and vanquyshe ye prow=
dest of them .
but
----------------------------------------------------------------

Saved PageXML to /app/documents/eluhrs@gmail.com/north-01-09a3bda6/north-02.xml
Saved TXT to /app/documents/eluhrs@gmail.com/north-01-09a3bda6/north-02.txt
Saved PDF to /app/documents/eluhrs@gmail.com/north-01-09a3bda6/north-02.pdf

Time:   00:01:29
Input:  1273 tokens
Output: 297 tokens
Cost:   $0.0061

----------------------------------------------------------------


2025-12-12 19:14:03,088 - INFO - Task Complete: north-02.jpg
2025-12-12 19:14:03,102 - INFO - Task server.tasks.process_document_task[9c5e43cd-d90b-4e3a-aeab-238217df7f53] succeeded in 89.35404441598803s: None
2025-12-12 19:14:22,012 - INFO - Received JSON response from Gemini.
2025-12-12 19:14:22,177 - INFO - SUBSCRIPT OUTPUT for 4:

------------- gemini-pro-3 output for north-01.jpg -------------
glad aspects were present (confirming her
Maiestie wth THEODOSIES dylligence, ARETAPHE-
LIS constancie, and ANTIGONVS clemencie)
setlinge them selues euar sence, in her Princelie
brest: as ye rarenes and greatnes of her Gracis
vertuse declare. Whom God presaruid from
formar perell, to rule & reygne ouer us, in
this last leaden adge: wherin Iniquitie hath
sought to surmount ye glorie of his Deitie, and
so presumed to suppresse his professors: As if
ye Shylde of her Souerayntie (for worldlie
force) did not protect his poore membars a=
Quens
Ma:tie is ye par
fect protector
of Religion
mong us: What error wold not inuade us?
What Scisme or sect wold not assawte us?
----------------------------------------------------------------

Saved PageXML to /app/documents/eluhrs@gmail.com/north-01-09a3bda6/north-01.xml
Saved TXT to /app/documents/eluhrs@gmail.com/north-01-09a3bda6/north-01.txt
Saved PDF to /app/documents/eluhrs@gmail.com/north-01-09a3bda6/north-01.pdf

Time:   00:01:48
Input:  1285 tokens
Output: 355 tokens
Cost:   $0.0068

----------------------------------------------------------------


2025-12-12 19:14:22,178 - INFO - Task Complete: north-01.jpg
2025-12-12 19:14:22,191 - INFO - All 2 pages for parent 3 are done. Triggering merge.
2025-12-12 19:14:22,199 - INFO - Task server.tasks.process_document_task[54c9daf1-f56d-439a-b753-b032b9a69da8] succeeded in 108.47397567494772s: None
2025-12-12 19:14:22,198 - INFO - Task server.tasks.merge_document_task[ed13a3f1-cbc4-4497-a66f-61153120b618] received
2025-12-12 19:14:22,202 - INFO - Starting merge for parent 3: north-01.pdf
2025-12-12 19:14:22,209 - INFO - Running subscript command: ['subscript', '--combine', '/app/documents/eluhrs@gmail.com/north-01-09a3bda6/north-01.pdf', '/app/documents/eluhrs@gmail.com/north-01-09a3bda6/north-01.jpg', '/app/documents/eluhrs@gmail.com/north-01-09a3bda6/north-02.jpg']
2025-12-12 19:14:22,219 - INFO - Running from: /app
2025-12-12 19:14:22,219 - INFO - Using config: /app/config.yml
2025-12-12 19:14:22,220 - INFO - Output directory: /app/output
2025-12-12 19:14:22,220 - INFO - ----------------------------------------
2025-12-12 19:14:22,221 - INFO - 
Subscript.py initialized segmentation provider: historical-manuscript
2025-12-12 19:14:22,221 - INFO - Subscript.py Initialized transcription provider: gemini-pro-3
2025-12-12 19:14:22,221 - INFO - Processing 2 files...
2025-12-12 19:14:22,222 - INFO - Processing /app/documents/eluhrs@gmail.com/north-01-09a3bda6/north-01.jpg...
2025-12-12 19:14:22,222 - INFO - Segmenting /app/documents/eluhrs@gmail.com/north-01-09a3bda6/north-01.jpg with Kraken...
2025-12-12 19:14:22,223 - INFO - Loading segmentation model from /usr/local/lib/python3.10/site-packages/kraken/blla.mlmodel...
2025-12-12 19:14:22,692 - INFO - Segmenting /app/documents/eluhrs@gmail.com/north-01-09a3bda6/north-01.jpg
2025-12-12 19:14:26,436 - INFO - Vectorizing regions
2025-12-12 19:14:26,550 - INFO - Vectorizing regions
2025-12-12 19:14:26,658 - INFO - Vectorizing baselines
2025-12-12 19:14:30,343 - INFO - Received JSON response from Gemini.
2025-12-12 19:14:30,473 - INFO - SUBSCRIPT OUTPUT for 8:

------------- gemini-pro-3 output for north-02.jpg -------------
all ye euells yt may be, ar crept so near vntous.
Zeland is full, France not free, & Scotland
vnclensid: the Common people spoyled, theyr
Commonwelths racked, theyr Nobilitie
murtherid, the Councell contemnd and
theyr Kyngs disobeyed: For dissention, sedici=
on Ciuell slaughtar, & rebellion, is ye onlie
argument entreatid of among them .
If therfore it pleasid her Hyghnes, to vse ye
benefit of present tyme: to bend her browe
vpon ye disobedient: to hold vp her threatning
hand ouer them, and to aduance her pusant
arme towards them: the verie shadoe of her
sworde, wold feare and vanquyshe ye prow=
dest of them .
but
----------------------------------------------------------------

Saved PageXML to /app/documents/eluhrs@gmail.com/north-01-6db5dd69/north-02.xml
Saved TXT to /app/documents/eluhrs@gmail.com/north-01-6db5dd69/north-02.txt
Saved PDF to /app/documents/eluhrs@gmail.com/north-01-6db5dd69/north-02.pdf

Time:   00:01:01
Input:  1273 tokens
Output: 282 tokens
Cost:   $0.0059

----------------------------------------------------------------


2025-12-12 19:14:30,474 - INFO - Task Complete: north-02.jpg
2025-12-12 19:14:30,496 - INFO - Task server.tasks.process_document_task[4bc79d2b-429f-4d48-bb01-0ca18561aac1] succeeded in 65.98401719599497s: None
2025-12-12 19:14:32,070 - INFO - Compute reading order on 18 lines in lr direction
2025-12-12 19:14:32,071 - INFO - Perform topological sort on partially ordered lines
2025-12-12 19:14:32,072 - INFO - Compute reading order on 1 lines in lr direction
2025-12-12 19:14:32,072 - INFO - Perform topological sort on partially ordered lines
2025-12-12 19:14:32,077 - INFO - Found 18 lines.
2025-12-12 19:14:32,078 - INFO - Initializing Gemini model: gemini-3-pro-preview
2025-12-12 19:14:32,091 - INFO - Annotating 18 regions for Visual Tagging...
2025-12-12 19:14:32,120 - INFO - Saved debug image to output/north-01-debug.jpg
2025-12-12 19:14:32,121 - INFO - Sending annotated image to Gemini...
2025-12-12 19:14:36,156 - INFO - SYSTEM: Server module initialized at 2025-12-12 19:14:36.156217
2025-12-12 19:14:45,070 - INFO - SYSTEM: Server module initialized at 2025-12-12 19:14:45.070107
2025-12-12 19:15:35,004 - INFO - Received JSON response from Gemini.
2025-12-12 19:15:35,182 - INFO - SUBSCRIPT OUTPUT for 7:

------------- gemini-pro-3 output for north-01.jpg -------------
glad aspects were present (confirming her
Maiestie wth THEODOSIES dylligence, ARETAPHE=
LIS constancie, and ANTIGONVS clemencie)
setlinge them selues euar sence, in her Princelie
brest: as ye rarenes and greatnes of her Gracis
vertuse declare. Whom God presaruid from
formar perell, to rule & reygne ouer us, in
this last leaden adge: wherin Iniquitie hath
sought to surmount ye glorie of his Deitie, and
so presumed to suppresse his professors: As if
ye Shylde of her Souerayntie (for worldlie
force) did not protect his poore membars a=
Quens
Ma:tie is ye p
fect protector
What Scisme or sect wold not assawte us?
What treason wold not entrapp us? When
all
----------------------------------------------------------------

Saved PageXML to /app/documents/eluhrs@gmail.com/north-01-6db5dd69/north-01.xml
Saved TXT to /app/documents/eluhrs@gmail.com/north-01-6db5dd69/north-01.txt
Saved PDF to /app/documents/eluhrs@gmail.com/north-01-6db5dd69/north-01.pdf

Time:   00:02:10
Input:  1285 tokens
Output: 324 tokens
Cost:   $0.0065

----------------------------------------------------------------


2025-12-12 19:15:35,183 - INFO - Task Complete: north-01.jpg
2025-12-12 19:15:35,199 - INFO - All 2 pages for parent 6 are done. Triggering merge.
2025-12-12 19:15:35,206 - INFO - Task server.tasks.merge_document_task[4034fd9c-f297-4ec8-8192-2648e168b0c2] received
2025-12-12 19:15:35,207 - INFO - Task server.tasks.process_document_task[ea0e3d70-93f9-4005-acea-494a6db147e6] succeeded in 130.72271389199886s: None
2025-12-12 19:15:35,216 - INFO - Starting merge for parent 6: north-01.pdf
2025-12-12 19:15:35,236 - INFO - Running subscript command: ['subscript', '--combine', '/app/documents/eluhrs@gmail.com/north-01-6db5dd69/north-01.pdf', '/app/documents/eluhrs@gmail.com/north-01-6db5dd69/north-01.jpg', '/app/documents/eluhrs@gmail.com/north-01-6db5dd69/north-02.jpg']
2025-12-12 19:15:35,251 - INFO - Running from: /app
2025-12-12 19:15:35,252 - INFO - Using config: /app/config.yml
2025-12-12 19:15:35,252 - INFO - Output directory: /app/output
2025-12-12 19:15:35,252 - INFO - ----------------------------------------
2025-12-12 19:15:35,254 - INFO - 
Subscript.py initialized segmentation provider: historical-manuscript
2025-12-12 19:15:35,254 - INFO - Subscript.py Initialized transcription provider: gemini-pro-3
2025-12-12 19:15:35,255 - INFO - Processing 2 files...
2025-12-12 19:15:35,255 - INFO - Processing /app/documents/eluhrs@gmail.com/north-01-6db5dd69/north-01.jpg...
2025-12-12 19:15:35,255 - INFO - Segmenting /app/documents/eluhrs@gmail.com/north-01-6db5dd69/north-01.jpg with Kraken...
2025-12-12 19:15:35,257 - INFO - Loading segmentation model from /usr/local/lib/python3.10/site-packages/kraken/blla.mlmodel...
2025-12-12 19:15:35,697 - INFO - Segmenting /app/documents/eluhrs@gmail.com/north-01-6db5dd69/north-01.jpg
2025-12-12 19:15:38,475 - INFO - Vectorizing regions
2025-12-12 19:15:38,586 - INFO - Vectorizing regions
2025-12-12 19:15:38,694 - INFO - Vectorizing baselines
2025-12-12 19:15:43,878 - INFO - Compute reading order on 18 lines in lr direction
2025-12-12 19:15:43,879 - INFO - Perform topological sort on partially ordered lines
2025-12-12 19:15:43,881 - INFO - Compute reading order on 1 lines in lr direction
2025-12-12 19:15:43,881 - INFO - Perform topological sort on partially ordered lines
2025-12-12 19:15:43,885 - INFO - Found 18 lines.
2025-12-12 19:15:43,888 - INFO - Initializing Gemini model: gemini-3-pro-preview
2025-12-12 19:15:43,902 - INFO - Annotating 18 regions for Visual Tagging...
2025-12-12 19:15:43,932 - INFO - Saved debug image to output/north-01-debug.jpg
2025-12-12 19:15:43,932 - INFO - Sending annotated image to Gemini...
2025-12-12 19:16:26,472 - INFO - Received JSON response from Gemini.
2025-12-12 19:16:26,484 - ERROR - Failed to generate PDF: [Errno 2] No such file or directory: '/app/documents/eluhrs@gmail.com/north-01-09a3bda6/north-01.jpg'
2025-12-12 19:16:26,486 - ERROR - Failed to process /app/documents/eluhrs@gmail.com/north-01-09a3bda6/north-01.jpg: [Errno 2] No such file or directory: '/app/documents/eluhrs@gmail.com/north-01-09a3bda6/north-01.jpg'
2025-12-12 19:16:26,490 - WARNING - Traceback (most recent call last):
2025-12-12 19:16:26,491 - WARNING -   File "/usr/local/lib/python3.10/site-packages/subscript/__main__.py", line 300, in main
    output_engine.generate(image_path, regions, config.get('output_dir', 'output'), config)
2025-12-12 19:16:26,491 - WARNING -   File "/usr/local/lib/python3.10/site-packages/subscript/modules/output.py", line 32, in generate
    self._generate_xml(image_path, regions, xml_path)
2025-12-12 19:16:26,491 - WARNING -   File "/usr/local/lib/python3.10/site-packages/subscript/modules/output.py", line 52, in _generate_xml
    with Image.open(image_path) as im:
2025-12-12 19:16:26,492 - WARNING -   File "/usr/local/lib/python3.10/site-packages/PIL/Image.py", line 3493, in open
    fp = builtins.open(filename, "rb")
2025-12-12 19:16:26,492 - WARNING - FileNotFoundError: [Errno 2] No such file or directory: '/app/documents/eluhrs@gmail.com/north-01-09a3bda6/north-01.jpg'
2025-12-12 19:16:26,492 - INFO - Processing /app/documents/eluhrs@gmail.com/north-01-09a3bda6/north-02.jpg...
2025-12-12 19:16:26,493 - INFO - Segmenting /app/documents/eluhrs@gmail.com/north-01-09a3bda6/north-02.jpg with Kraken...
2025-12-12 19:16:26,493 - ERROR - Failed to process /app/documents/eluhrs@gmail.com/north-01-09a3bda6/north-02.jpg: [Errno 2] No such file or directory: '/app/documents/eluhrs@gmail.com/north-01-09a3bda6/north-02.jpg'
2025-12-12 19:16:26,493 - WARNING - Traceback (most recent call last):
2025-12-12 19:16:26,494 - WARNING -   File "/usr/local/lib/python3.10/site-packages/subscript/__main__.py", line 284, in main
    regions = segmentation_engine.analyze(image_path, config)
2025-12-12 19:16:26,494 - WARNING -   File "/usr/local/lib/python3.10/site-packages/subscript/modules/segmentation.py", line 34, in analyze
    im = Image.open(image_path)
2025-12-12 19:16:26,495 - WARNING -   File "/usr/local/lib/python3.10/site-packages/PIL/Image.py", line 3493, in open
    fp = builtins.open(filename, "rb")
2025-12-12 19:16:26,495 - WARNING - FileNotFoundError: [Errno 2] No such file or directory: '/app/documents/eluhrs@gmail.com/north-01-09a3bda6/north-02.jpg'
2025-12-12 19:16:26,523 - ERROR - Task server.tasks.merge_document_task[ed13a3f1-cbc4-4497-a66f-61153120b618] raised unexpected: StaleDataError("UPDATE statement on table 'documents' expected to update 1 row(s); 0 were matched.")
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
  File "/app/server/tasks.py", line 342, in merge_document_task
    db.commit()
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2030, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1311, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1286, in _prepare_impl
    self.session.flush()
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4331, in flush
    self._flush(objects)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4466, in _flush
    with util.safe_reraise():
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4427, in _flush
    flush_context.execute()
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 85, in save_obj
    _emit_update_statements(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 948, in _emit_update_statements
    raise orm_exc.StaleDataError(
sqlalchemy.orm.exc.StaleDataError: UPDATE statement on table 'documents' expected to update 1 row(s); 0 were matched.
2025-12-12 19:17:21,358 - INFO - Received JSON response from Gemini.
2025-12-12 19:17:21,363 - ERROR - Failed to generate PDF: [Errno 2] No such file or directory: '/app/documents/eluhrs@gmail.com/north-01-6db5dd69/north-01.jpg'
2025-12-12 19:17:21,364 - ERROR - Failed to process /app/documents/eluhrs@gmail.com/north-01-6db5dd69/north-01.jpg: [Errno 2] No such file or directory: '/app/documents/eluhrs@gmail.com/north-01-6db5dd69/north-01.jpg'
2025-12-12 19:17:21,368 - WARNING - Traceback (most recent call last):
2025-12-12 19:17:21,369 - WARNING -   File "/usr/local/lib/python3.10/site-packages/subscript/__main__.py", line 300, in main
    output_engine.generate(image_path, regions, config.get('output_dir', 'output'), config)
2025-12-12 19:17:21,369 - WARNING -   File "/usr/local/lib/python3.10/site-packages/subscript/modules/output.py", line 32, in generate
    self._generate_xml(image_path, regions, xml_path)
2025-12-12 19:17:21,370 - WARNING -   File "/usr/local/lib/python3.10/site-packages/subscript/modules/output.py", line 52, in _generate_xml
    with Image.open(image_path) as im:
2025-12-12 19:17:21,370 - WARNING -   File "/usr/local/lib/python3.10/site-packages/PIL/Image.py", line 3493, in open
    fp = builtins.open(filename, "rb")
2025-12-12 19:17:21,371 - WARNING - FileNotFoundError: [Errno 2] No such file or directory: '/app/documents/eluhrs@gmail.com/north-01-6db5dd69/north-01.jpg'
2025-12-12 19:17:21,371 - INFO - Processing /app/documents/eluhrs@gmail.com/north-01-6db5dd69/north-02.jpg...
2025-12-12 19:17:21,372 - INFO - Segmenting /app/documents/eluhrs@gmail.com/north-01-6db5dd69/north-02.jpg with Kraken...
2025-12-12 19:17:21,372 - ERROR - Failed to process /app/documents/eluhrs@gmail.com/north-01-6db5dd69/north-02.jpg: [Errno 2] No such file or directory: '/app/documents/eluhrs@gmail.com/north-01-6db5dd69/north-02.jpg'
2025-12-12 19:17:21,373 - WARNING - Traceback (most recent call last):
2025-12-12 19:17:21,373 - WARNING -   File "/usr/local/lib/python3.10/site-packages/subscript/__main__.py", line 284, in main
    regions = segmentation_engine.analyze(image_path, config)
2025-12-12 19:17:21,374 - WARNING -   File "/usr/local/lib/python3.10/site-packages/subscript/modules/segmentation.py", line 34, in analyze
    im = Image.open(image_path)
2025-12-12 19:17:21,374 - WARNING -   File "/usr/local/lib/python3.10/site-packages/PIL/Image.py", line 3493, in open
    fp = builtins.open(filename, "rb")
2025-12-12 19:17:21,374 - WARNING - FileNotFoundError: [Errno 2] No such file or directory: '/app/documents/eluhrs@gmail.com/north-01-6db5dd69/north-02.jpg'
2025-12-12 19:17:21,388 - ERROR - Task server.tasks.merge_document_task[4034fd9c-f297-4ec8-8192-2648e168b0c2] raised unexpected: StaleDataError("UPDATE statement on table 'documents' expected to update 1 row(s); 0 were matched.")
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
  File "/app/server/tasks.py", line 342, in merge_document_task
    db.commit()
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2030, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1311, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1286, in _prepare_impl
    self.session.flush()
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4331, in flush
    self._flush(objects)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4466, in _flush
    with util.safe_reraise():
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4427, in _flush
    flush_context.execute()
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 85, in save_obj
    _emit_update_statements(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 948, in _emit_update_statements
    raise orm_exc.StaleDataError(
sqlalchemy.orm.exc.StaleDataError: UPDATE statement on table 'documents' expected to update 1 row(s); 0 were matched.
2025-12-12 19:19:11,909 - INFO - Task server.tasks.process_document_task[f8e5ad5c-dfdd-47c3-b9fe-641534bbf102] received
2025-12-12 19:19:11,922 - INFO - Task 2 received options raw: {"transcription":{"temperature":0.8}}
2025-12-12 19:19:11,922 - INFO - Task 2 parsed options: {'transcription': {'temperature': 0.8}}
2025-12-12 19:19:11,924 - INFO - TASK START: Processing north-01.jpg (ID: 2)
2025-12-12 19:19:11,925 - INFO - Command: subscript historical-manuscript gemini-pro-3 /app/documents/eluhrs@gmail.com/test-01-9d81bf7a/north-01.jpg --output /app/documents/eluhrs@gmail.com/test-01-9d81bf7a
2025-12-12 19:19:11,935 - INFO - Running from: /app
2025-12-12 19:19:11,935 - INFO - Using config: /app/config.yml
2025-12-12 19:19:11,936 - INFO - Output directory: /app/documents/eluhrs@gmail.com/test-01-9d81bf7a
2025-12-12 19:19:11,936 - INFO - ----------------------------------------
2025-12-12 19:19:11,937 - INFO - Task server.tasks.process_document_task[81b0a51d-5527-46c2-9bbd-837c8031adb5] received
2025-12-12 19:19:11,938 - INFO - 
Subscript.py initialized segmentation provider: historical-manuscript
2025-12-12 19:19:11,939 - INFO - Created parent thumbnail at /app/documents/eluhrs@gmail.com/test-01-9d81bf7a/test-01-thumb.jpg
2025-12-12 19:19:11,940 - INFO - Subscript.py Initialized transcription provider: gemini-pro-3
2025-12-12 19:19:11,940 - INFO - Processing 1 files...
2025-12-12 19:19:11,940 - INFO - Processing /app/documents/eluhrs@gmail.com/test-01-9d81bf7a/north-01.jpg...
2025-12-12 19:19:11,940 - INFO - Segmenting /app/documents/eluhrs@gmail.com/test-01-9d81bf7a/north-01.jpg with Kraken...
2025-12-12 19:19:11,942 - INFO - Loading segmentation model from /usr/local/lib/python3.10/site-packages/kraken/blla.mlmodel...
2025-12-12 19:19:11,950 - INFO - Task 3 received options raw: {"transcription":{"temperature":0.8}}
2025-12-12 19:19:11,951 - INFO - Task 3 parsed options: {'transcription': {'temperature': 0.8}}
2025-12-12 19:19:11,952 - INFO - TASK START: Processing north-02.jpg (ID: 3)
2025-12-12 19:19:11,953 - INFO - Command: subscript historical-manuscript gemini-pro-3 /app/documents/eluhrs@gmail.com/test-01-9d81bf7a/north-02.jpg --output /app/documents/eluhrs@gmail.com/test-01-9d81bf7a
2025-12-12 19:19:11,968 - INFO - Running from: /app
2025-12-12 19:19:11,968 - INFO - Using config: /app/config.yml
2025-12-12 19:19:11,968 - INFO - Output directory: /app/documents/eluhrs@gmail.com/test-01-9d81bf7a
2025-12-12 19:19:11,969 - INFO - ----------------------------------------
2025-12-12 19:19:11,970 - INFO - 
Subscript.py initialized segmentation provider: historical-manuscript
2025-12-12 19:19:11,971 - INFO - Subscript.py Initialized transcription provider: gemini-pro-3
2025-12-12 19:19:11,972 - INFO - Processing 1 files...
2025-12-12 19:19:11,972 - INFO - Processing /app/documents/eluhrs@gmail.com/test-01-9d81bf7a/north-02.jpg...
2025-12-12 19:19:11,973 - INFO - Segmenting /app/documents/eluhrs@gmail.com/test-01-9d81bf7a/north-02.jpg with Kraken...
2025-12-12 19:19:11,974 - INFO - Loading segmentation model from /usr/local/lib/python3.10/site-packages/kraken/blla.mlmodel...
2025-12-12 19:19:12,505 - INFO - Segmenting /app/documents/eluhrs@gmail.com/test-01-9d81bf7a/north-01.jpg
2025-12-12 19:19:12,580 - INFO - Segmenting /app/documents/eluhrs@gmail.com/test-01-9d81bf7a/north-02.jpg
2025-12-12 19:19:21,663 - INFO - Vectorizing regions
2025-12-12 19:19:21,795 - INFO - Vectorizing regions
2025-12-12 19:19:21,905 - INFO - Vectorizing baselines
2025-12-12 19:19:21,993 - INFO - Vectorizing regions
2025-12-12 19:19:22,108 - INFO - Vectorizing regions
2025-12-12 19:19:22,216 - INFO - Vectorizing baselines
2025-12-12 19:19:28,454 - INFO - Compute reading order on 15 lines in lr direction
2025-12-12 19:19:28,455 - INFO - Perform topological sort on partially ordered lines
2025-12-12 19:19:28,455 - INFO - Compute reading order on 1 lines in lr direction
2025-12-12 19:19:28,455 - INFO - Perform topological sort on partially ordered lines
2025-12-12 19:19:28,455 - INFO - Compute reading order on 2 lines in lr direction
2025-12-12 19:19:28,455 - INFO - Perform topological sort on partially ordered lines
2025-12-12 19:19:28,459 - INFO - Found 16 lines.
2025-12-12 19:19:28,461 - INFO - Initializing Gemini model: gemini-3-pro-preview
2025-12-12 19:19:28,472 - INFO - Annotating 16 regions for Visual Tagging...
2025-12-12 19:19:28,500 - INFO - Saved debug image to /app/documents/eluhrs@gmail.com/test-01-9d81bf7a/north-02-debug.jpg
2025-12-12 19:19:28,500 - INFO - Sending annotated image to Gemini...
2025-12-12 19:19:28,788 - INFO - Compute reading order on 18 lines in lr direction
2025-12-12 19:19:28,792 - INFO - Perform topological sort on partially ordered lines
2025-12-12 19:19:28,801 - INFO - Compute reading order on 1 lines in lr direction
2025-12-12 19:19:28,801 - INFO - Perform topological sort on partially ordered lines
2025-12-12 19:19:28,802 - INFO - Found 18 lines.
2025-12-12 19:19:28,803 - INFO - Initializing Gemini model: gemini-3-pro-preview
2025-12-12 19:19:28,815 - INFO - Annotating 18 regions for Visual Tagging...
2025-12-12 19:19:28,851 - INFO - Saved debug image to /app/documents/eluhrs@gmail.com/test-01-9d81bf7a/north-01-debug.jpg
2025-12-12 19:19:28,851 - INFO - Sending annotated image to Gemini...
2025-12-12 19:20:30,464 - INFO - Received JSON response from Gemini.
2025-12-12 19:20:30,634 - INFO - SUBSCRIPT OUTPUT for 3:

------------- gemini-pro-3 output for north-02.jpg -------------
all ye euells yt may be, ar crept so near vntous.
Zeland is full, France not free, & Scotland
vnclensid: the Common people spoyled, theyr
Commonwelths racked, theyr Nobilitie
murtherid, the Councell contemnid and
theyr Kyngs disobeyed: For dissention, sedici=
on Ciuell slaughtar, & rebellion, is ye onlie
argument entreatid of among them .
If therfore it pleasid her Hyghnes, to vse ye
benefit of present tyme: to bend her browe
vpon ye disobedient: to hold vp her threatning
hand ouer them, and to aduance her pusant
arme towards them: the verie shadoe of her
sworde, wold feare and vanquyshe yt prow=
dest of them .
but
----------------------------------------------------------------

Saved PageXML to /app/documents/eluhrs@gmail.com/test-01-9d81bf7a/north-02.xml
Saved TXT to /app/documents/eluhrs@gmail.com/test-01-9d81bf7a/north-02.txt
Saved PDF to /app/documents/eluhrs@gmail.com/test-01-9d81bf7a/north-02.pdf

Time:   00:01:18
Input:  1273 tokens
Output: 283 tokens
Cost:   $0.0059

----------------------------------------------------------------


2025-12-12 19:20:30,634 - INFO - Task Complete: north-02.jpg
2025-12-12 19:20:30,650 - INFO - Task server.tasks.process_document_task[81b0a51d-5527-46c2-9bbd-837c8031adb5] succeeded in 78.71236878598575s: None
2025-12-12 19:22:14,632 - INFO - Received JSON response from Gemini.
2025-12-12 19:22:14,636 - WARNING - Gemini did not return text for box 9
2025-12-12 19:22:14,791 - INFO - SUBSCRIPT OUTPUT for 2:

------------- gemini-pro-3 output for north-01.jpg -------------
glad aspects were present (confirming her
Maiestie wth THEODOSIES dylligence, ARETAPHE=
LIS constancie, and ANTIGONVS clemencie)
setlinge them selues euar sence, in her Princelie
brest: as ye rarenes and greatnes of her Gracis
vertuse declare. Whom God presaruid from
formar perell, to rule & reygne ouer us, in
this last leaden adge: wherin Iniquitie hath

sought to surmount ye glorie of his Deitie, and
so presumed to suppresse his professors: As if
ye Shylde of her Souerayntie (for worldlie
Quens
Ma:tie is ye per
fect protector
of Religion
What treason wold not entrapp us? When
all
----------------------------------------------------------------

Saved PageXML to /app/documents/eluhrs@gmail.com/test-01-9d81bf7a/north-01.xml
Saved TXT to /app/documents/eluhrs@gmail.com/test-01-9d81bf7a/north-01.txt
Saved PDF to /app/documents/eluhrs@gmail.com/test-01-9d81bf7a/north-01.pdf

Time:   00:03:02
Input:  1285 tokens
Output: 296 tokens
Cost:   $0.0061

----------------------------------------------------------------


2025-12-12 19:22:14,792 - INFO - Task Complete: north-01.jpg
2025-12-12 19:22:14,804 - INFO - All 2 pages for parent 1 are done. Triggering merge.
2025-12-12 19:22:14,811 - INFO - Task server.tasks.process_document_task[f8e5ad5c-dfdd-47c3-b9fe-641534bbf102] succeeded in 182.89794116606936s: None
2025-12-12 19:22:14,811 - INFO - Task server.tasks.merge_document_task[3f00ad09-cccc-4d27-917c-83cee0d48d06] received
2025-12-12 19:22:14,817 - INFO - Starting merge for parent 1: test-01.pdf
2025-12-12 19:22:14,821 - INFO - Running subscript command: ['subscript', '--combine', '/app/documents/eluhrs@gmail.com/test-01-9d81bf7a/test-01.pdf', '/app/documents/eluhrs@gmail.com/test-01-9d81bf7a/north-01.jpg', '/app/documents/eluhrs@gmail.com/test-01-9d81bf7a/north-02.jpg']
2025-12-12 19:22:14,829 - INFO - Running from: /app
2025-12-12 19:22:14,830 - INFO - Using config: /app/config.yml
2025-12-12 19:22:14,830 - INFO - Output directory: /app/output
2025-12-12 19:22:14,830 - INFO - ----------------------------------------
2025-12-12 19:22:14,834 - INFO - 
Subscript.py initialized segmentation provider: historical-manuscript
2025-12-12 19:22:14,834 - INFO - Subscript.py Initialized transcription provider: gemini-pro-3
2025-12-12 19:22:14,835 - INFO - Processing 2 files...
2025-12-12 19:22:14,838 - INFO - Processing /app/documents/eluhrs@gmail.com/test-01-9d81bf7a/north-01.jpg...
2025-12-12 19:22:14,840 - INFO - Segmenting /app/documents/eluhrs@gmail.com/test-01-9d81bf7a/north-01.jpg with Kraken...
2025-12-12 19:22:14,841 - INFO - Loading segmentation model from /usr/local/lib/python3.10/site-packages/kraken/blla.mlmodel...
2025-12-12 19:22:15,237 - INFO - Segmenting /app/documents/eluhrs@gmail.com/test-01-9d81bf7a/north-01.jpg
2025-12-12 19:22:18,068 - INFO - Vectorizing regions
2025-12-12 19:22:18,181 - INFO - Vectorizing regions
2025-12-12 19:22:18,289 - INFO - Vectorizing baselines
2025-12-12 19:22:23,517 - INFO - Compute reading order on 18 lines in lr direction
2025-12-12 19:22:23,518 - INFO - Perform topological sort on partially ordered lines
2025-12-12 19:22:23,519 - INFO - Compute reading order on 1 lines in lr direction
2025-12-12 19:22:23,519 - INFO - Perform topological sort on partially ordered lines
2025-12-12 19:22:23,520 - INFO - Found 18 lines.
2025-12-12 19:22:23,521 - INFO - Initializing Gemini model: gemini-3-pro-preview
2025-12-12 19:22:23,533 - INFO - Annotating 18 regions for Visual Tagging...
2025-12-12 19:22:23,561 - INFO - Saved debug image to output/north-01-debug.jpg
2025-12-12 19:22:23,562 - INFO - Sending annotated image to Gemini...
2025-12-12 19:23:25,098 - INFO - JOB SUBMITTED: User eluhrs@gmail.com uploaded north-01.jpg
2025-12-12 19:23:25,126 - INFO - Task server.tasks.process_document_task[e708be99-5ea5-4e26-9ae6-05fac0bc88b3] received
2025-12-12 19:23:25,137 - INFO - Task 4 received options raw: {"transcription":{"temperature":0.8}}
2025-12-12 19:23:25,138 - INFO - Task 4 parsed options: {'transcription': {'temperature': 0.8}}
2025-12-12 19:23:25,140 - INFO - TASK START: Processing north-01.jpg (ID: 4)
2025-12-12 19:23:25,140 - INFO - Command: subscript historical-manuscript gemini-pro-3 /app/documents/eluhrs@gmail.com/north-01-68551b25/north-01.jpg --output /app/documents/eluhrs@gmail.com/north-01-68551b25
2025-12-12 19:23:25,144 - INFO - JOB SUBMITTED: User eluhrs@gmail.com uploaded north-02.jpg
2025-12-12 19:23:25,145 - INFO - Task server.tasks.process_document_task[3e4b226c-bf3e-45c8-8238-f4beb89dca4e] received
2025-12-12 19:23:25,152 - INFO - Running from: /app
2025-12-12 19:23:25,153 - INFO - Using config: /app/config.yml
2025-12-12 19:23:25,153 - INFO - Output directory: /app/documents/eluhrs@gmail.com/north-01-68551b25
2025-12-12 19:23:25,153 - INFO - ----------------------------------------
2025-12-12 19:23:25,158 - INFO - 
Subscript.py initialized segmentation provider: historical-manuscript
2025-12-12 19:23:25,158 - INFO - Subscript.py Initialized transcription provider: gemini-pro-3
2025-12-12 19:23:25,159 - INFO - Processing 1 files...
2025-12-12 19:23:25,159 - INFO - Processing /app/documents/eluhrs@gmail.com/north-01-68551b25/north-01.jpg...
2025-12-12 19:23:25,160 - INFO - Segmenting /app/documents/eluhrs@gmail.com/north-01-68551b25/north-01.jpg with Kraken...
2025-12-12 19:23:25,161 - INFO - Loading segmentation model from /usr/local/lib/python3.10/site-packages/kraken/blla.mlmodel...
2025-12-12 19:23:25,179 - INFO - Task 5 received options raw: {"transcription":{"temperature":0.8}}
2025-12-12 19:23:25,180 - INFO - Task 5 parsed options: {'transcription': {'temperature': 0.8}}
2025-12-12 19:23:25,182 - INFO - TASK START: Processing north-02.jpg (ID: 5)
2025-12-12 19:23:25,182 - INFO - Command: subscript historical-manuscript gemini-pro-3 /app/documents/eluhrs@gmail.com/north-02-c95e782d/north-02.jpg --output /app/documents/eluhrs@gmail.com/north-02-c95e782d
2025-12-12 19:23:25,194 - INFO - Running from: /app
2025-12-12 19:23:25,195 - INFO - Using config: /app/config.yml
2025-12-12 19:23:25,195 - INFO - Output directory: /app/documents/eluhrs@gmail.com/north-02-c95e782d
2025-12-12 19:23:25,196 - INFO - ----------------------------------------
2025-12-12 19:23:25,203 - INFO - 
Subscript.py initialized segmentation provider: historical-manuscript
2025-12-12 19:23:25,205 - INFO - Subscript.py Initialized transcription provider: gemini-pro-3
2025-12-12 19:23:25,205 - INFO - Processing 1 files...
2025-12-12 19:23:25,205 - INFO - Processing /app/documents/eluhrs@gmail.com/north-02-c95e782d/north-02.jpg...
2025-12-12 19:23:25,206 - INFO - Segmenting /app/documents/eluhrs@gmail.com/north-02-c95e782d/north-02.jpg with Kraken...
2025-12-12 19:23:25,212 - INFO - Loading segmentation model from /usr/local/lib/python3.10/site-packages/kraken/blla.mlmodel...
2025-12-12 19:23:25,683 - INFO - Segmenting /app/documents/eluhrs@gmail.com/north-01-68551b25/north-01.jpg
2025-12-12 19:23:25,694 - INFO - Segmenting /app/documents/eluhrs@gmail.com/north-02-c95e782d/north-02.jpg
2025-12-12 19:23:32,235 - INFO - Vectorizing regions
2025-12-12 19:23:32,281 - INFO - Vectorizing regions
2025-12-12 19:23:32,359 - INFO - Vectorizing regions
2025-12-12 19:23:32,390 - INFO - Vectorizing regions
2025-12-12 19:23:32,470 - INFO - Vectorizing baselines
2025-12-12 19:23:32,494 - INFO - Vectorizing baselines
2025-12-12 19:23:38,636 - INFO - Compute reading order on 15 lines in lr direction
2025-12-12 19:23:38,637 - INFO - Perform topological sort on partially ordered lines
2025-12-12 19:23:38,637 - INFO - Compute reading order on 1 lines in lr direction
2025-12-12 19:23:38,638 - INFO - Perform topological sort on partially ordered lines
2025-12-12 19:23:38,638 - INFO - Compute reading order on 2 lines in lr direction
2025-12-12 19:23:38,638 - INFO - Perform topological sort on partially ordered lines
2025-12-12 19:23:38,640 - INFO - Found 16 lines.
2025-12-12 19:23:38,640 - INFO - Initializing Gemini model: gemini-3-pro-preview
2025-12-12 19:23:38,651 - INFO - Annotating 16 regions for Visual Tagging...
2025-12-12 19:23:38,678 - INFO - Saved debug image to /app/documents/eluhrs@gmail.com/north-02-c95e782d/north-02-debug.jpg
2025-12-12 19:23:38,679 - INFO - Sending annotated image to Gemini...
2025-12-12 19:23:38,973 - INFO - Compute reading order on 18 lines in lr direction
2025-12-12 19:23:38,975 - INFO - Perform topological sort on partially ordered lines
2025-12-12 19:23:38,986 - INFO - Compute reading order on 1 lines in lr direction
2025-12-12 19:23:38,989 - INFO - Perform topological sort on partially ordered lines
2025-12-12 19:23:38,991 - INFO - Found 18 lines.
2025-12-12 19:23:38,991 - INFO - Initializing Gemini model: gemini-3-pro-preview
2025-12-12 19:23:39,003 - INFO - Annotating 18 regions for Visual Tagging...
2025-12-12 19:23:39,034 - INFO - Saved debug image to /app/documents/eluhrs@gmail.com/north-01-68551b25/north-01-debug.jpg
2025-12-12 19:23:39,034 - INFO - Sending annotated image to Gemini...
2025-12-12 19:24:42,335 - INFO - Received JSON response from Gemini.
2025-12-12 19:24:42,493 - WARNING - 
------------- gemini-pro-3 output for north-01.jpg -------------
2025-12-12 19:24:42,494 - WARNING - glad aspects were present (confirming her
2025-12-12 19:24:42,494 - WARNING - Maiestie wth THEODOSIES dylligence, ARETAPHE=
2025-12-12 19:24:42,494 - WARNING - LIS constancie, and ANTIGONVS clemencie)
2025-12-12 19:24:42,494 - WARNING - setlinge them selues euar sence, in her Princelie
2025-12-12 19:24:42,495 - WARNING - brest: as ye rarenes and greatnes of her Gracis
2025-12-12 19:24:42,495 - WARNING - vertuse declare . Whom God presaruid from
2025-12-12 19:24:42,495 - WARNING - formar perell, to rule & reygne ouer us, in
2025-12-12 19:24:42,495 - WARNING - this last leaden adge: wherin Iniquitie hath
2025-12-12 19:24:42,495 - WARNING - sought to surmount ye glorie of his Deitie, and
2025-12-12 19:24:42,495 - WARNING - so presumed to suppresse his professors: As if
2025-12-12 19:24:42,496 - WARNING - ye Shylde of her Souerayntie (for worldlie
2025-12-12 19:24:42,496 - WARNING - force) did not protect his poore membars a=
2025-12-12 19:24:42,496 - WARNING - Quiens
2025-12-12 19:24:42,496 - WARNING - Ma:tie
2025-12-12 19:24:42,496 - WARNING - is ye per
2025-12-12 19:24:42,496 - WARNING - What Scisme or sect wold not assawte us?
2025-12-12 19:24:42,497 - WARNING - What treason wold not entrapp us? When
2025-12-12 19:24:42,497 - WARNING - all
2025-12-12 19:24:42,497 - WARNING - ----------------------------------------------------------------
2025-12-12 19:24:42,497 - WARNING - Saved PageXML to output/north-01.xml
2025-12-12 19:24:42,497 - WARNING - Saved TXT to output/north-01.txt
2025-12-12 19:24:42,498 - WARNING - Saved PDF to output/north-01.pdf
2025-12-12 19:24:42,498 - WARNING - Time:   00:02:27
2025-12-12 19:24:42,498 - WARNING - Input:  1285 tokens
2025-12-12 19:24:42,498 - WARNING - Output: 304 tokens
2025-12-12 19:24:42,499 - WARNING - Cost:   $0.0062
2025-12-12 19:24:42,499 - WARNING - ----------------------------------------------------------------
2025-12-12 19:24:42,499 - INFO - Processing /app/documents/eluhrs@gmail.com/test-01-9d81bf7a/north-02.jpg...
2025-12-12 19:24:42,499 - INFO - Segmenting /app/documents/eluhrs@gmail.com/test-01-9d81bf7a/north-02.jpg with Kraken...
2025-12-12 19:24:42,500 - INFO - Loading segmentation model from /usr/local/lib/python3.10/site-packages/kraken/blla.mlmodel...
2025-12-12 19:24:42,850 - INFO - Segmenting /app/documents/eluhrs@gmail.com/test-01-9d81bf7a/north-02.jpg
2025-12-12 19:24:45,375 - INFO - Vectorizing regions
2025-12-12 19:24:45,481 - INFO - Vectorizing regions
2025-12-12 19:24:45,586 - INFO - Vectorizing baselines
2025-12-12 19:24:49,647 - INFO - Received JSON response from Gemini.
2025-12-12 19:24:49,780 - INFO - SUBSCRIPT OUTPUT for 5:

------------- gemini-pro-3 output for north-02.jpg -------------
all y euells y may be, ar crept so near vntous.
Zeland is full, France not free, & Scotland
vnclensid: the Common people spoyled, theyr
Commonwelths racked, theyr Nobilitie
murtherid, the Councell contemnid and
theyr Kyngs disobeyed: For dissention, sedici=
on Ciuell slaughtar, & rebellion, is y onlie
argument entreatid of among them .
If therfore it pleasid her Hyghnes, to vse y
benefit of present tyme: to bend her browe
vpon y disobedient: to hold vp her threatning
hand ouer them, and to aduance her pusant
arme towards them: the verie shadoe of her
sworde, wold feare and vanquyshe y prow=
dist of them .
but
----------------------------------------------------------------

Saved PageXML to /app/documents/eluhrs@gmail.com/north-02-c95e782d/north-02.xml
Saved TXT to /app/documents/eluhrs@gmail.com/north-02-c95e782d/north-02.txt
Saved PDF to /app/documents/eluhrs@gmail.com/north-02-c95e782d/north-02.pdf

Time:   00:01:24
Input:  1273 tokens
Output: 288 tokens
Cost:   $0.0060

----------------------------------------------------------------


2025-12-12 19:24:49,781 - INFO - Task Complete: north-02.jpg
2025-12-12 19:24:49,792 - INFO - Task server.tasks.process_document_task[3e4b226c-bf3e-45c8-8238-f4beb89dca4e] succeeded in 84.64197274798062s: None
2025-12-12 19:24:50,725 - INFO - Compute reading order on 15 lines in lr direction
2025-12-12 19:24:50,725 - INFO - Perform topological sort on partially ordered lines
2025-12-12 19:24:50,726 - INFO - Compute reading order on 1 lines in lr direction
2025-12-12 19:24:50,726 - INFO - Perform topological sort on partially ordered lines
2025-12-12 19:24:50,726 - INFO - Compute reading order on 2 lines in lr direction
2025-12-12 19:24:50,727 - INFO - Perform topological sort on partially ordered lines
2025-12-12 19:24:50,728 - INFO - Found 16 lines.
2025-12-12 19:24:50,729 - INFO - Initializing Gemini model: gemini-3-pro-preview
2025-12-12 19:24:50,739 - INFO - Annotating 16 regions for Visual Tagging...
2025-12-12 19:24:50,764 - INFO - Saved debug image to output/north-02-debug.jpg
2025-12-12 19:24:50,764 - INFO - Sending annotated image to Gemini...
2025-12-12 19:26:02,959 - INFO - Received JSON response from Gemini.
2025-12-12 19:26:03,096 - WARNING - 
------------- gemini-pro-3 output for north-02.jpg -------------
2025-12-12 19:26:03,096 - WARNING - all ye euells yt maybe, ar crept so near vntous.
2025-12-12 19:26:03,097 - WARNING - Zeland is full, France not free, & Scotland
2025-12-12 19:26:03,097 - WARNING - vnclensid: the Common people spoyled, theyr
2025-12-12 19:26:03,097 - WARNING - Commonwelths racked, theyr Nobilitie
2025-12-12 19:26:03,097 - WARNING - murtherid, the Councell contemnid and
2025-12-12 19:26:03,098 - WARNING - theyr Kyngs disobeyed: For dissention, sedici=
2025-12-12 19:26:03,098 - WARNING - on Ciuell slaughtar, & rebellion, is ye onlie
2025-12-12 19:26:03,098 - WARNING - argument entreatid of among them.
2025-12-12 19:26:03,098 - WARNING - If therfore it pleasid her Hyghnes, to vse ye
2025-12-12 19:26:03,098 - WARNING - benefit of present tyme: to bend her browe
2025-12-12 19:26:03,098 - WARNING - vpon ye disobedient: to hold vp her threatning
2025-12-12 19:26:03,099 - WARNING - hand ouer them, and to aduance her pusant
2025-12-12 19:26:03,099 - WARNING - arme towards them: the verie shadoe of her
2025-12-12 19:26:03,099 - WARNING - sworde, wold feare and vanquyshe ye prow=
2025-12-12 19:26:03,099 - WARNING - dest of them.
2025-12-12 19:26:03,099 - WARNING - but
2025-12-12 19:26:03,100 - WARNING - ----------------------------------------------------------------
2025-12-12 19:26:03,100 - WARNING - Saved PageXML to output/north-02.xml
2025-12-12 19:26:03,100 - WARNING - Saved TXT to output/north-02.txt
2025-12-12 19:26:03,100 - WARNING - Saved PDF to output/north-02.pdf
2025-12-12 19:26:03,100 - WARNING - Time:   00:01:20
2025-12-12 19:26:03,100 - WARNING - Input:  1273 tokens
2025-12-12 19:26:03,101 - WARNING - Output: 279 tokens
2025-12-12 19:26:03,101 - WARNING - Cost:   $0.0059
2025-12-12 19:26:03,101 - WARNING - Total time:   00:03:48
2025-12-12 19:26:03,101 - WARNING - Total input:  2558 tokens
2025-12-12 19:26:03,101 - WARNING - Total output: 583 tokens
2025-12-12 19:26:03,101 - WARNING - Total cost:   $0.0121
2025-12-12 19:26:03,102 - WARNING - ----------------------------------------------------------------
2025-12-12 19:26:03,102 - INFO - Combining 2 PDFs into /app/documents/eluhrs@gmail.com/test-01-9d81bf7a/test-01.pdf...
2025-12-12 19:26:03,172 - INFO - Saved Combined PDF to /app/documents/eluhrs@gmail.com/test-01-9d81bf7a/test-01.pdf
2025-12-12 19:26:03,173 - INFO - Combining 2 TXTs into /app/documents/eluhrs@gmail.com/test-01-9d81bf7a/test-01.txt...
2025-12-12 19:26:03,174 - INFO - Saved Combined TXT to /app/documents/eluhrs@gmail.com/test-01-9d81bf7a/test-01.txt
2025-12-12 19:26:03,186 - INFO - Task server.tasks.merge_document_task[3f00ad09-cccc-4d27-917c-83cee0d48d06] succeeded in 228.3680742289871s: None
2025-12-12 19:26:29,320 - INFO - Received JSON response from Gemini.
2025-12-12 19:26:29,501 - INFO - SUBSCRIPT OUTPUT for 4:

------------- gemini-pro-3 output for north-01.jpg -------------
glad aspects were present (confirming her
Maiestie w^th THEODOSIES dylligence, ARETAPHE=
LIS constancie, and ANTIGONVS clemencie)
setlinge them selues euar sence, in her Princelie
brest: as y^e rarenes and greatnes of her Gracis
vertuse declare. Whom God presaruid from
formar perell, to rule & reygne ouer us, in
this last leaden adge: wherin Iniquitie hath
sought to surmount y^e glorie of his Deitie, and
so presumed to suppresse his professors: As if
y^e Shylde of her Souerayntie (for worldlie
force) did not protect his poore membars a=
Quens
Ma:tie is y^e per
fect protector mong us: What error wold not inuade us?
of Religion What Scisme or sect wold not assawte us?
What treason wold not entrapp us? When
all
----------------------------------------------------------------

Saved PageXML to /app/documents/eluhrs@gmail.com/north-01-68551b25/north-01.xml
Saved TXT to /app/documents/eluhrs@gmail.com/north-01-68551b25/north-01.txt
Saved PDF to /app/documents/eluhrs@gmail.com/north-01-68551b25/north-01.pdf

Time:   00:03:04
Input:  1285 tokens
Output: 347 tokens
Cost:   $0.0067

----------------------------------------------------------------


2025-12-12 19:26:29,502 - INFO - Task Complete: north-01.jpg
2025-12-12 19:26:29,521 - INFO - Task server.tasks.process_document_task[e708be99-5ea5-4e26-9ae6-05fac0bc88b3] succeeded in 184.39070254203398s: None
2025-12-12 19:27:40,670 - INFO - Task server.tasks.process_document_task[bbf777ae-e9cc-462e-9437-8e85e5fdb24c] received
2025-12-12 19:27:40,682 - INFO - Task 7 received options raw: {"transcription":{"temperature":0.8}}
2025-12-12 19:27:40,683 - INFO - Task 7 parsed options: {'transcription': {'temperature': 0.8}}
2025-12-12 19:27:40,684 - INFO - TASK START: Processing north-01.jpg (ID: 7)
2025-12-12 19:27:40,684 - INFO - Command: subscript historical-manuscript gemini-pro-3 /app/documents/eluhrs@gmail.com/multiple-9285e520/north-01.jpg --output /app/documents/eluhrs@gmail.com/multiple-9285e520
2025-12-12 19:27:40,693 - INFO - Running from: /app
2025-12-12 19:27:40,693 - INFO - Using config: /app/config.yml
2025-12-12 19:27:40,693 - INFO - Task server.tasks.process_document_task[39b1f31a-63a0-47ce-b194-4a6c11126c2f] received
2025-12-12 19:27:40,693 - INFO - Output directory: /app/documents/eluhrs@gmail.com/multiple-9285e520
2025-12-12 19:27:40,694 - INFO - ----------------------------------------
2025-12-12 19:27:40,695 - INFO - Created parent thumbnail at /app/documents/eluhrs@gmail.com/multiple-9285e520/multiple-thumb.jpg
2025-12-12 19:27:40,696 - INFO - 
Subscript.py initialized segmentation provider: historical-manuscript
2025-12-12 19:27:40,697 - INFO - Subscript.py Initialized transcription provider: gemini-pro-3
2025-12-12 19:27:40,698 - INFO - Processing 1 files...
2025-12-12 19:27:40,698 - INFO - Processing /app/documents/eluhrs@gmail.com/multiple-9285e520/north-01.jpg...
2025-12-12 19:27:40,698 - INFO - Segmenting /app/documents/eluhrs@gmail.com/multiple-9285e520/north-01.jpg with Kraken...
2025-12-12 19:27:40,700 - INFO - Loading segmentation model from /usr/local/lib/python3.10/site-packages/kraken/blla.mlmodel...
2025-12-12 19:27:40,701 - INFO - Task 8 received options raw: {"transcription":{"temperature":0.8}}
2025-12-12 19:27:40,701 - INFO - Task 8 parsed options: {'transcription': {'temperature': 0.8}}
2025-12-12 19:27:40,702 - INFO - TASK START: Processing north-02.jpg (ID: 8)
2025-12-12 19:27:40,702 - INFO - Command: subscript historical-manuscript gemini-pro-3 /app/documents/eluhrs@gmail.com/multiple-9285e520/north-02.jpg --output /app/documents/eluhrs@gmail.com/multiple-9285e520
2025-12-12 19:27:40,715 - INFO - Running from: /app
2025-12-12 19:27:40,715 - INFO - Using config: /app/config.yml
2025-12-12 19:27:40,716 - INFO - Output directory: /app/documents/eluhrs@gmail.com/multiple-9285e520
2025-12-12 19:27:40,716 - INFO - ----------------------------------------
2025-12-12 19:27:40,717 - INFO - 
Subscript.py initialized segmentation provider: historical-manuscript
2025-12-12 19:27:40,717 - INFO - Subscript.py Initialized transcription provider: gemini-pro-3
2025-12-12 19:27:40,718 - INFO - Processing 1 files...
2025-12-12 19:27:40,718 - INFO - Processing /app/documents/eluhrs@gmail.com/multiple-9285e520/north-02.jpg...
2025-12-12 19:27:40,718 - INFO - Segmenting /app/documents/eluhrs@gmail.com/multiple-9285e520/north-02.jpg with Kraken...
2025-12-12 19:27:40,719 - INFO - Loading segmentation model from /usr/local/lib/python3.10/site-packages/kraken/blla.mlmodel...
2025-12-12 19:27:41,188 - INFO - Segmenting /app/documents/eluhrs@gmail.com/multiple-9285e520/north-01.jpg
2025-12-12 19:27:41,229 - INFO - Segmenting /app/documents/eluhrs@gmail.com/multiple-9285e520/north-02.jpg
2025-12-12 19:27:48,360 - INFO - Vectorizing regions
2025-12-12 19:27:48,478 - INFO - Vectorizing regions
2025-12-12 19:27:48,488 - INFO - Vectorizing regions
2025-12-12 19:27:48,590 - INFO - Vectorizing baselines
2025-12-12 19:27:48,604 - INFO - Vectorizing regions
2025-12-12 19:27:48,713 - INFO - Vectorizing baselines
2025-12-12 19:27:54,210 - INFO - Compute reading order on 15 lines in lr direction
2025-12-12 19:27:54,210 - INFO - Perform topological sort on partially ordered lines
2025-12-12 19:27:54,211 - INFO - Compute reading order on 1 lines in lr direction
2025-12-12 19:27:54,211 - INFO - Perform topological sort on partially ordered lines
2025-12-12 19:27:54,211 - INFO - Compute reading order on 2 lines in lr direction
2025-12-12 19:27:54,211 - INFO - Perform topological sort on partially ordered lines
2025-12-12 19:27:54,212 - INFO - Found 16 lines.
2025-12-12 19:27:54,213 - INFO - Initializing Gemini model: gemini-3-pro-preview
2025-12-12 19:27:54,224 - INFO - Annotating 16 regions for Visual Tagging...
2025-12-12 19:27:54,250 - INFO - Saved debug image to /app/documents/eluhrs@gmail.com/multiple-9285e520/north-02-debug.jpg
2025-12-12 19:27:54,251 - INFO - Sending annotated image to Gemini...
2025-12-12 19:27:54,495 - INFO - Compute reading order on 18 lines in lr direction
2025-12-12 19:27:54,496 - INFO - Perform topological sort on partially ordered lines
2025-12-12 19:27:54,496 - INFO - Compute reading order on 1 lines in lr direction
2025-12-12 19:27:54,496 - INFO - Perform topological sort on partially ordered lines
2025-12-12 19:27:54,498 - INFO - Found 18 lines.
2025-12-12 19:27:54,499 - INFO - Initializing Gemini model: gemini-3-pro-preview
2025-12-12 19:27:54,511 - INFO - Annotating 18 regions for Visual Tagging...
2025-12-12 19:27:54,542 - INFO - Saved debug image to /app/documents/eluhrs@gmail.com/multiple-9285e520/north-01-debug.jpg
2025-12-12 19:27:54,542 - INFO - Sending annotated image to Gemini...
2025-12-12 19:29:09,935 - INFO - Received JSON response from Gemini.
2025-12-12 19:29:10,087 - INFO - SUBSCRIPT OUTPUT for 8:

------------- gemini-pro-3 output for north-02.jpg -------------
all ye euells yt may be, ar crept so near vnto vs.
Zeland is full, France not free, & Scotland
vnclensid: the Common people spoyled, theyr
Commonwelths racked, theyr Nobilitie
murtherid, the Councell contemnd and
theyr Kyngs disobeyed: For dissention, sedici=
on Ciuell slaughtar, & rebellion, is ye onlie
argument entreatid of among them .
If therfore it pleasid her Hyghnes, to vse ye
benefit of present tyme: to bend her browe
vpon ye disobedient: to hold vp her threatning
hand ouer them, and to aduance her pusant
arme towards them; the verie shadoe of her
sworde, wold feare and vanquyshe ye prow=
dest of them .
but
----------------------------------------------------------------

Saved PageXML to /app/documents/eluhrs@gmail.com/multiple-9285e520/north-02.xml
Saved TXT to /app/documents/eluhrs@gmail.com/multiple-9285e520/north-02.txt
Saved PDF to /app/documents/eluhrs@gmail.com/multiple-9285e520/north-02.pdf

Time:   00:01:29
Input:  1273 tokens
Output: 282 tokens
Cost:   $0.0059

----------------------------------------------------------------


2025-12-12 19:29:10,087 - INFO - Task Complete: north-02.jpg
2025-12-12 19:29:10,093 - INFO - Task server.tasks.process_document_task[39b1f31a-63a0-47ce-b194-4a6c11126c2f] succeeded in 89.39721091592219s: None
2025-12-12 19:30:04,755 - INFO - Received JSON response from Gemini.
2025-12-12 19:30:04,756 - WARNING - Gemini did not return text for box 9
2025-12-12 19:30:04,906 - INFO - SUBSCRIPT OUTPUT for 7:

------------- gemini-pro-3 output for north-01.jpg -------------
glad aspects were present (confirming her
Maiestie wth THEODOSIES dylligence, ARETAPHE-
LIS constancie, and ANTIGONVS clemencie)
setlinge them selues euar sence, in her Princelie
brest: as ye rarenes and greatnes of her Gracis
vertuse declare . Whom God presaruid from
formar perell, to rule & reygne ouer us, in
this last leaden adge: wherin Iniquitie hath

sought to surmount ye glorie of his Deitie, and
so presumed to suppresse his professors: As if
ye Shylde of her Souerayntie (for worldlie
Queens
Ma: tie
is ye par
What Scisme or sect wold not assawte us?
What treason wold not entrapp us? When
all
----------------------------------------------------------------

Saved PageXML to /app/documents/eluhrs@gmail.com/multiple-9285e520/north-01.xml
Saved TXT to /app/documents/eluhrs@gmail.com/multiple-9285e520/north-01.txt
Saved PDF to /app/documents/eluhrs@gmail.com/multiple-9285e520/north-01.pdf

Time:   00:02:24
Input:  1285 tokens
Output: 287 tokens
Cost:   $0.0060

----------------------------------------------------------------


2025-12-12 19:30:04,907 - INFO - Task Complete: north-01.jpg
2025-12-12 19:30:04,917 - INFO - All 2 pages for parent 6 are done. Triggering merge.
2025-12-12 19:30:04,923 - INFO - Task server.tasks.merge_document_task[1f325b24-aa46-4556-8184-a18358356bca] received
2025-12-12 19:30:04,924 - INFO - Task server.tasks.process_document_task[bbf777ae-e9cc-462e-9437-8e85e5fdb24c] succeeded in 144.24767714901827s: None
2025-12-12 19:30:04,932 - INFO - Starting merge for parent 6: multiple.pdf
2025-12-12 19:30:04,939 - INFO - Running subscript command: ['subscript', '--combine', '/app/documents/eluhrs@gmail.com/multiple-9285e520/multiple.pdf', '/app/documents/eluhrs@gmail.com/multiple-9285e520/north-01.jpg', '/app/documents/eluhrs@gmail.com/multiple-9285e520/north-02.jpg']
2025-12-12 19:30:04,946 - INFO - Running from: /app
2025-12-12 19:30:04,946 - INFO - Using config: /app/config.yml
2025-12-12 19:30:04,947 - INFO - Output directory: /app/output
2025-12-12 19:30:04,947 - INFO - ----------------------------------------
2025-12-12 19:30:04,948 - INFO - 
Subscript.py initialized segmentation provider: historical-manuscript
2025-12-12 19:30:04,948 - INFO - Subscript.py Initialized transcription provider: gemini-pro-3
2025-12-12 19:30:04,949 - INFO - Processing 2 files...
2025-12-12 19:30:04,949 - INFO - Processing /app/documents/eluhrs@gmail.com/multiple-9285e520/north-01.jpg...
2025-12-12 19:30:04,949 - INFO - Segmenting /app/documents/eluhrs@gmail.com/multiple-9285e520/north-01.jpg with Kraken...
2025-12-12 19:30:04,950 - INFO - Loading segmentation model from /usr/local/lib/python3.10/site-packages/kraken/blla.mlmodel...
2025-12-12 19:30:05,301 - INFO - Segmenting /app/documents/eluhrs@gmail.com/multiple-9285e520/north-01.jpg
2025-12-12 19:30:07,409 - INFO - Vectorizing regions
2025-12-12 19:30:07,521 - INFO - Vectorizing regions
2025-12-12 19:30:07,651 - INFO - Vectorizing baselines
2025-12-12 19:30:12,752 - INFO - Compute reading order on 18 lines in lr direction
2025-12-12 19:30:12,757 - INFO - Perform topological sort on partially ordered lines
2025-12-12 19:30:12,758 - INFO - Compute reading order on 1 lines in lr direction
2025-12-12 19:30:12,758 - INFO - Perform topological sort on partially ordered lines
2025-12-12 19:30:12,765 - INFO - Found 18 lines.
2025-12-12 19:30:12,765 - INFO - Initializing Gemini model: gemini-3-pro-preview
2025-12-12 19:30:12,777 - INFO - Annotating 18 regions for Visual Tagging...
2025-12-12 19:30:12,806 - INFO - Saved debug image to output/north-01-debug.jpg
2025-12-12 19:30:12,806 - INFO - Sending annotated image to Gemini...
2025-12-12 19:32:35,173 - INFO - Received JSON response from Gemini.
2025-12-12 19:32:35,325 - WARNING - 
------------- gemini-pro-3 output for north-01.jpg -------------
2025-12-12 19:32:35,325 - WARNING - glad aspects were present (confirming her
2025-12-12 19:32:35,325 - WARNING - MaiesTie wth THEODOSIES dylligence, ARETAPHE=
2025-12-12 19:32:35,326 - WARNING - LIS constancie, and ANTIGONVS clemencie)
2025-12-12 19:32:35,326 - WARNING - setlinge them selues euar sence, in her Princelie
2025-12-12 19:32:35,326 - WARNING - brest: as ye rarenes and greatnes of her Gracis
2025-12-12 19:32:35,326 - WARNING - vertuse declare . Whom God presaruid from
2025-12-12 19:32:35,326 - WARNING - formar perell, to rule & reygne ouer us, in
2025-12-12 19:32:35,327 - WARNING - this last leaden adge: wherin Iniquitie hath
2025-12-12 19:32:35,327 - WARNING - sought to surmount ye glorie of his Deitie, and
2025-12-12 19:32:35,327 - WARNING - so presumed to suppresse his professors: As if
2025-12-12 19:32:35,327 - WARNING - ye Shylde of her Souerayntie (for worldlie
2025-12-12 19:32:35,327 - WARNING - force) did not protect his poore membars a=
2025-12-12 19:32:35,327 - WARNING - Quens
2025-12-12 19:32:35,328 - WARNING - Ma:tie is ye per
2025-12-12 19:32:35,328 - WARNING - fect protector
2025-12-12 19:32:35,328 - WARNING - What Scisme or sect wold not assawte us?
2025-12-12 19:32:35,328 - WARNING - What treason wold not entrapp us? When
2025-12-12 19:32:35,328 - WARNING - all
2025-12-12 19:32:35,328 - WARNING - ----------------------------------------------------------------
2025-12-12 19:32:35,329 - WARNING - Saved PageXML to output/north-01.xml
2025-12-12 19:32:35,329 - WARNING - Saved TXT to output/north-01.txt
2025-12-12 19:32:35,329 - WARNING - Saved PDF to output/north-01.pdf
2025-12-12 19:32:35,329 - WARNING - Time:   00:02:30
2025-12-12 19:32:35,329 - WARNING - Input:  1285 tokens
2025-12-12 19:32:35,330 - WARNING - Output: 312 tokens
2025-12-12 19:32:35,330 - WARNING - Cost:   $0.0063
2025-12-12 19:32:35,330 - WARNING - ----------------------------------------------------------------
2025-12-12 19:32:35,330 - INFO - Processing /app/documents/eluhrs@gmail.com/multiple-9285e520/north-02.jpg...
2025-12-12 19:32:35,330 - INFO - Segmenting /app/documents/eluhrs@gmail.com/multiple-9285e520/north-02.jpg with Kraken...
2025-12-12 19:32:35,331 - INFO - Loading segmentation model from /usr/local/lib/python3.10/site-packages/kraken/blla.mlmodel...
2025-12-12 19:32:35,775 - INFO - Segmenting /app/documents/eluhrs@gmail.com/multiple-9285e520/north-02.jpg
2025-12-12 19:32:37,982 - INFO - Vectorizing regions
2025-12-12 19:32:38,088 - INFO - Vectorizing regions
2025-12-12 19:32:38,191 - INFO - Vectorizing baselines
2025-12-12 19:32:43,089 - INFO - Compute reading order on 15 lines in lr direction
2025-12-12 19:32:43,090 - INFO - Perform topological sort on partially ordered lines
2025-12-12 19:32:43,090 - INFO - Compute reading order on 1 lines in lr direction
2025-12-12 19:32:43,090 - INFO - Perform topological sort on partially ordered lines
2025-12-12 19:32:43,090 - INFO - Compute reading order on 2 lines in lr direction
2025-12-12 19:32:43,090 - INFO - Perform topological sort on partially ordered lines
2025-12-12 19:32:43,094 - INFO - Found 16 lines.
2025-12-12 19:32:43,095 - INFO - Initializing Gemini model: gemini-3-pro-preview
2025-12-12 19:32:43,105 - INFO - Annotating 16 regions for Visual Tagging...
2025-12-12 19:32:43,130 - INFO - Saved debug image to output/north-02-debug.jpg
2025-12-12 19:32:43,131 - INFO - Sending annotated image to Gemini...
2025-12-12 19:34:10,820 - INFO - Received JSON response from Gemini.
2025-12-12 19:34:10,977 - WARNING - 
------------- gemini-pro-3 output for north-02.jpg -------------
2025-12-12 19:34:10,978 - WARNING - all ye euells ye may be, ar crept so near vntous.
2025-12-12 19:34:10,978 - WARNING - Zeland is full, France not free, & Scotland
2025-12-12 19:34:10,978 - WARNING - vnclensid: the Common people spoyled, theyr
2025-12-12 19:34:10,978 - WARNING - Commonwelths racked, theyr Nobilitie
2025-12-12 19:34:10,978 - WARNING - murtherid, the Councell contemnid and
2025-12-12 19:34:10,978 - WARNING - theyr Kyngs disobeyed: For dissention, sedici=
2025-12-12 19:34:10,979 - WARNING - on Ciuell slaughtar, & rebellion, is ye onlie
2025-12-12 19:34:10,979 - WARNING - argument entreatid of among them.
2025-12-12 19:34:10,979 - WARNING - If therfore it pleasid her Hyghnes, to vse ye
2025-12-12 19:34:10,979 - WARNING - benefit of present tyme: to bend her browe
2025-12-12 19:34:10,979 - WARNING - vpon ye disobedient: to hold vp her threatning
2025-12-12 19:34:10,979 - WARNING - hand ouer them, and to aduance her pusant
2025-12-12 19:34:10,980 - WARNING - arme towards them: the verie shadoe of her
2025-12-12 19:34:10,980 - WARNING - sworde, wold feare and vanquyshe ye prow=
2025-12-12 19:34:10,980 - WARNING - dest of them.
2025-12-12 19:34:10,980 - WARNING - but
2025-12-12 19:34:10,980 - WARNING - ----------------------------------------------------------------
2025-12-12 19:34:10,980 - WARNING - Saved PageXML to output/north-02.xml
2025-12-12 19:34:10,980 - WARNING - Saved TXT to output/north-02.txt
2025-12-12 19:34:10,980 - WARNING - Saved PDF to output/north-02.pdf
2025-12-12 19:34:10,981 - WARNING - Time:   00:01:35
2025-12-12 19:34:10,981 - WARNING - Input:  1273 tokens
2025-12-12 19:34:10,981 - WARNING - Output: 280 tokens
2025-12-12 19:34:10,981 - WARNING - Cost:   $0.0059
2025-12-12 19:34:10,981 - WARNING - Total time:   00:04:06
2025-12-12 19:34:10,981 - WARNING - Total input:  2558 tokens
2025-12-12 19:34:10,981 - WARNING - Total output: 592 tokens
2025-12-12 19:34:10,982 - WARNING - Total cost:   $0.0122
2025-12-12 19:34:10,982 - WARNING - ----------------------------------------------------------------
2025-12-12 19:34:10,982 - INFO - Combining 2 PDFs into /app/documents/eluhrs@gmail.com/multiple-9285e520/multiple.pdf...
2025-12-12 19:34:11,042 - INFO - Saved Combined PDF to /app/documents/eluhrs@gmail.com/multiple-9285e520/multiple.pdf
2025-12-12 19:34:11,043 - INFO - Combining 2 TXTs into /app/documents/eluhrs@gmail.com/multiple-9285e520/multiple.txt...
2025-12-12 19:34:11,044 - INFO - Saved Combined TXT to /app/documents/eluhrs@gmail.com/multiple-9285e520/multiple.txt
2025-12-12 19:34:11,050 - INFO - Task server.tasks.merge_document_task[1f325b24-aa46-4556-8184-a18358356bca] succeeded in 246.1211027780082s: None
2025-12-12 19:35:41,007 - INFO - Task server.tasks.process_document_task[d6a5d7fe-429c-4099-ab7a-2cedffac5423] received
2025-12-12 19:35:41,029 - INFO - Task 10 received options raw: {"transcription":{"temperature":0.8}}
2025-12-12 19:35:41,031 - INFO - Task 10 parsed options: {'transcription': {'temperature': 0.8}}
2025-12-12 19:35:41,034 - INFO - TASK START: Processing north-01.jpg (ID: 10)
2025-12-12 19:35:41,034 - INFO - Command: subscript historical-manuscript gemini-pro-3 /app/documents/eluhrs@gmail.com/second-copy-0b439444/north-01.jpg --output /app/documents/eluhrs@gmail.com/second-copy-0b439444
2025-12-12 19:35:41,035 - INFO - Task server.tasks.process_document_task[2b7619c5-1946-46aa-a373-cce7c0026732] received
2025-12-12 19:35:41,037 - INFO - Created parent thumbnail at /app/documents/eluhrs@gmail.com/second-copy-0b439444/second-copy-thumb.jpg
2025-12-12 19:35:41,047 - INFO - Task 11 received options raw: {"transcription":{"temperature":0.8}}
2025-12-12 19:35:41,048 - INFO - Task 11 parsed options: {'transcription': {'temperature': 0.8}}
2025-12-12 19:35:41,051 - INFO - TASK START: Processing north-02.jpg (ID: 11)
2025-12-12 19:35:41,051 - INFO - Command: subscript historical-manuscript gemini-pro-3 /app/documents/eluhrs@gmail.com/second-copy-0b439444/north-02.jpg --output /app/documents/eluhrs@gmail.com/second-copy-0b439444
2025-12-12 19:35:41,051 - INFO - Running from: /app
2025-12-12 19:35:41,052 - INFO - Using config: /app/config.yml
2025-12-12 19:35:41,052 - INFO - Output directory: /app/documents/eluhrs@gmail.com/second-copy-0b439444
2025-12-12 19:35:41,052 - INFO - ----------------------------------------
2025-12-12 19:35:41,055 - INFO - 
Subscript.py initialized segmentation provider: historical-manuscript
2025-12-12 19:35:41,056 - INFO - Subscript.py Initialized transcription provider: gemini-pro-3
2025-12-12 19:35:41,056 - INFO - Processing 1 files...
2025-12-12 19:35:41,056 - INFO - Processing /app/documents/eluhrs@gmail.com/second-copy-0b439444/north-01.jpg...
2025-12-12 19:35:41,057 - INFO - Segmenting /app/documents/eluhrs@gmail.com/second-copy-0b439444/north-01.jpg with Kraken...
2025-12-12 19:35:41,059 - INFO - Loading segmentation model from /usr/local/lib/python3.10/site-packages/kraken/blla.mlmodel...
2025-12-12 19:35:41,061 - INFO - Running from: /app
2025-12-12 19:35:41,062 - INFO - Using config: /app/config.yml
2025-12-12 19:35:41,062 - INFO - Output directory: /app/documents/eluhrs@gmail.com/second-copy-0b439444
2025-12-12 19:35:41,062 - INFO - ----------------------------------------
2025-12-12 19:35:41,066 - INFO - 
Subscript.py initialized segmentation provider: historical-manuscript
2025-12-12 19:35:41,066 - INFO - Subscript.py Initialized transcription provider: gemini-pro-3
2025-12-12 19:35:41,067 - INFO - Processing 1 files...
2025-12-12 19:35:41,067 - INFO - Processing /app/documents/eluhrs@gmail.com/second-copy-0b439444/north-02.jpg...
2025-12-12 19:35:41,067 - INFO - Segmenting /app/documents/eluhrs@gmail.com/second-copy-0b439444/north-02.jpg with Kraken...
2025-12-12 19:35:41,069 - INFO - Loading segmentation model from /usr/local/lib/python3.10/site-packages/kraken/blla.mlmodel...
2025-12-12 19:35:41,585 - INFO - Segmenting /app/documents/eluhrs@gmail.com/second-copy-0b439444/north-02.jpg
2025-12-12 19:35:41,589 - INFO - Segmenting /app/documents/eluhrs@gmail.com/second-copy-0b439444/north-01.jpg
2025-12-12 19:35:48,640 - INFO - Vectorizing regions
2025-12-12 19:35:48,713 - INFO - Vectorizing regions
2025-12-12 19:35:48,760 - INFO - Vectorizing regions
2025-12-12 19:35:48,821 - INFO - Vectorizing regions
2025-12-12 19:35:48,869 - INFO - Vectorizing baselines
2025-12-12 19:35:48,927 - INFO - Vectorizing baselines
2025-12-12 19:35:54,608 - INFO - Compute reading order on 15 lines in lr direction
2025-12-12 19:35:54,615 - INFO - Perform topological sort on partially ordered lines
2025-12-12 19:35:54,628 - INFO - Compute reading order on 1 lines in lr direction
2025-12-12 19:35:54,633 - INFO - Perform topological sort on partially ordered lines
2025-12-12 19:35:54,641 - INFO - Compute reading order on 2 lines in lr direction
2025-12-12 19:35:54,652 - INFO - Perform topological sort on partially ordered lines
2025-12-12 19:35:54,669 - INFO - Found 16 lines.
2025-12-12 19:35:54,682 - INFO - Initializing Gemini model: gemini-3-pro-preview
2025-12-12 19:35:54,709 - INFO - Annotating 16 regions for Visual Tagging...
2025-12-12 19:35:54,737 - INFO - Saved debug image to /app/documents/eluhrs@gmail.com/second-copy-0b439444/north-02-debug.jpg
2025-12-12 19:35:54,737 - INFO - Sending annotated image to Gemini...
2025-12-12 19:35:54,847 - INFO - Compute reading order on 18 lines in lr direction
2025-12-12 19:35:54,852 - INFO - Perform topological sort on partially ordered lines
2025-12-12 19:35:54,852 - INFO - Compute reading order on 1 lines in lr direction
2025-12-12 19:35:54,852 - INFO - Perform topological sort on partially ordered lines
2025-12-12 19:35:54,854 - INFO - Found 18 lines.
2025-12-12 19:35:54,855 - INFO - Initializing Gemini model: gemini-3-pro-preview
2025-12-12 19:35:54,866 - INFO - Annotating 18 regions for Visual Tagging...
2025-12-12 19:35:54,896 - INFO - Saved debug image to /app/documents/eluhrs@gmail.com/second-copy-0b439444/north-01-debug.jpg
2025-12-12 19:35:54,897 - INFO - Sending annotated image to Gemini...
2025-12-12 19:37:29,557 - INFO - Received JSON response from Gemini.
2025-12-12 19:37:29,713 - INFO - SUBSCRIPT OUTPUT for 11:

------------- gemini-pro-3 output for north-02.jpg -------------
all ye euells yt may be, ar crept so near vntous.
Zeland is full, France not free, & Scotland
vnclensid: the Common people spoyled, theyr
Commonwelths racked, theyr Nobilitie
murtherid, the Councell contemnid and
theyr Kyngs disobeyed: For dissention, sedici=
on Ciuell slaughtar, & rebellion, is ye onlie
argument entreatid of among them .
If therfore it pleasid her Hyghnes, to vse ye
benefit of present tyme: to bend her browe
vpon ye disobedient: to hold vp her threatning
hand ouer them, and to aduance her pusant
arme towards them; the verie shadoe of her
worde, wold feare and vanquyshe ye prow=
dest of them .
but
----------------------------------------------------------------

Saved PageXML to /app/documents/eluhrs@gmail.com/second-copy-0b439444/north-02.xml
Saved TXT to /app/documents/eluhrs@gmail.com/second-copy-0b439444/north-02.txt
Saved PDF to /app/documents/eluhrs@gmail.com/second-copy-0b439444/north-02.pdf

Time:   00:01:48
Input:  1273 tokens
Output: 282 tokens
Cost:   $0.0059

----------------------------------------------------------------


2025-12-12 19:37:29,713 - INFO - Task Complete: north-02.jpg
2025-12-12 19:37:29,720 - INFO - Task server.tasks.process_document_task[2b7619c5-1946-46aa-a373-cce7c0026732] succeeded in 108.68120850797277s: None
2025-12-12 19:39:22,337 - INFO - Received JSON response from Gemini.
2025-12-12 19:39:22,489 - INFO - SUBSCRIPT OUTPUT for 10:

------------- gemini-pro-3 output for north-01.jpg -------------
glad aspects were present (confirming her
Maiestie wth THEODOSIES dylligence, ARETAPHE=
LIS constancie; and ANTIGONVS clemencie)
setlinge them selues euar sence, in her Princelie
brest: as ye rarenes and greatnes of her Gracis
vertuse declare. Whom God presaruid from
formar perell, to rule & reygne ouer us, in
this last leaden adge: wherin Iniquitie hath
Quiens
sought to surmount ye glorie of his Deitie, and
so presumed to suppresse his professors: As if
ye Shylde of her Souerayntie (for worldlie
Ma:tie is ye per
force) did not protect his poore membars a=
fect protector
What Scisme or sect wold not assawte us?
What treason wold not entrapp us? When
all
----------------------------------------------------------------

Saved PageXML to /app/documents/eluhrs@gmail.com/second-copy-0b439444/north-01.xml
Saved TXT to /app/documents/eluhrs@gmail.com/second-copy-0b439444/north-01.txt
Saved PDF to /app/documents/eluhrs@gmail.com/second-copy-0b439444/north-01.pdf

Time:   00:03:41
Input:  1285 tokens
Output: 324 tokens
Cost:   $0.0065

----------------------------------------------------------------


2025-12-12 19:39:22,489 - INFO - Task Complete: north-01.jpg
2025-12-12 19:39:22,494 - INFO - All 2 pages for parent 9 are done. Triggering merge.
2025-12-12 19:39:22,498 - INFO - Task server.tasks.merge_document_task[c2c074db-4b9c-4f8d-94f3-1da7bf8ef100] received
2025-12-12 19:39:22,499 - INFO - Task server.tasks.process_document_task[d6a5d7fe-429c-4099-ab7a-2cedffac5423] succeeded in 221.4830178100383s: None
2025-12-12 19:39:22,500 - INFO - Starting merge for parent 9: second-copy.pdf
2025-12-12 19:39:22,504 - INFO - Running subscript command: ['subscript', '--combine', '/app/documents/eluhrs@gmail.com/second-copy-0b439444/second-copy.pdf', '/app/documents/eluhrs@gmail.com/second-copy-0b439444/north-01.jpg', '/app/documents/eluhrs@gmail.com/second-copy-0b439444/north-02.jpg']
2025-12-12 19:39:22,510 - INFO - Running from: /app
2025-12-12 19:39:22,510 - INFO - Using config: /app/config.yml
2025-12-12 19:39:22,510 - INFO - Output directory: /app/output
2025-12-12 19:39:22,510 - INFO - ----------------------------------------
2025-12-12 19:39:22,510 - INFO - 
Subscript.py initialized segmentation provider: historical-manuscript
2025-12-12 19:39:22,511 - INFO - Subscript.py Initialized transcription provider: gemini-pro-3
2025-12-12 19:39:22,511 - INFO - Processing 2 files...
2025-12-12 19:39:22,511 - INFO - Processing /app/documents/eluhrs@gmail.com/second-copy-0b439444/north-01.jpg...
2025-12-12 19:39:22,512 - INFO - Segmenting /app/documents/eluhrs@gmail.com/second-copy-0b439444/north-01.jpg with Kraken...
2025-12-12 19:39:22,512 - INFO - Loading segmentation model from /usr/local/lib/python3.10/site-packages/kraken/blla.mlmodel...
2025-12-12 19:39:22,889 - INFO - Segmenting /app/documents/eluhrs@gmail.com/second-copy-0b439444/north-01.jpg
2025-12-12 19:39:25,438 - INFO - Vectorizing regions
2025-12-12 19:39:25,548 - INFO - Vectorizing regions
2025-12-12 19:39:25,655 - INFO - Vectorizing baselines
2025-12-12 19:39:30,689 - INFO - Compute reading order on 18 lines in lr direction
2025-12-12 19:39:30,692 - INFO - Perform topological sort on partially ordered lines
2025-12-12 19:39:30,696 - INFO - Compute reading order on 1 lines in lr direction
2025-12-12 19:39:30,696 - INFO - Perform topological sort on partially ordered lines
2025-12-12 19:39:30,700 - INFO - Found 18 lines.
2025-12-12 19:39:30,701 - INFO - Initializing Gemini model: gemini-3-pro-preview
2025-12-12 19:39:30,712 - INFO - Annotating 18 regions for Visual Tagging...
2025-12-12 19:39:30,741 - INFO - Saved debug image to output/north-01-debug.jpg
2025-12-12 19:39:30,741 - INFO - Sending annotated image to Gemini...
2025-12-12 19:41:49,194 - INFO - Received JSON response from Gemini.
2025-12-12 19:41:49,199 - WARNING - Gemini did not return text for box 9
2025-12-12 19:41:49,361 - WARNING - 
------------- gemini-pro-3 output for north-01.jpg -------------
2025-12-12 19:41:49,361 - WARNING - glad aspects were present (confirming her
2025-12-12 19:41:49,362 - WARNING - MaiesTie wth THEODOSIES dylligence, ARETAPHE=
2025-12-12 19:41:49,362 - WARNING - LIS constancie; and ANTIGONVS clemencie)
2025-12-12 19:41:49,362 - WARNING - setlinge them selues euar sence, in her Princelie
2025-12-12 19:41:49,362 - WARNING - brest: as ye rarenes and greatnes of her Gracis
2025-12-12 19:41:49,362 - WARNING - vertuse declare. Whom God presaruid from
2025-12-12 19:41:49,363 - WARNING - formar perell, to rule & reygne ouer us, in
2025-12-12 19:41:49,363 - WARNING - this last leaden adge: wherin Iniquitie hath
2025-12-12 19:41:49,363 - WARNING - sought to surmount ye glorie of his Deitie, and
2025-12-12 19:41:49,363 - WARNING - so presumed to suppresse his professors: As if
2025-12-12 19:41:49,363 - WARNING - ye Shylde of her Souerayntie (for worldlie
2025-12-12 19:41:49,363 - WARNING - Quiens
2025-12-12 19:41:49,364 - WARNING - Ma:tie is ye per
2025-12-12 19:41:49,364 - WARNING - fect protector
2025-12-12 19:41:49,364 - WARNING - mong us: what error wold not inuade us?
2025-12-12 19:41:49,364 - WARNING - What Scisme or sect wold not assawte us?
2025-12-12 19:41:49,364 - WARNING - all
2025-12-12 19:41:49,365 - WARNING - ----------------------------------------------------------------
2025-12-12 19:41:49,365 - WARNING - Saved PageXML to output/north-01.xml
2025-12-12 19:41:49,365 - WARNING - Saved TXT to output/north-01.txt
2025-12-12 19:41:49,365 - WARNING - Saved PDF to output/north-01.pdf
2025-12-12 19:41:49,365 - WARNING - Time:   00:02:26
2025-12-12 19:41:49,365 - WARNING - Input:  1285 tokens
2025-12-12 19:41:49,366 - WARNING - Output: 300 tokens
2025-12-12 19:41:49,366 - WARNING - Cost:   $0.0062
2025-12-12 19:41:49,366 - WARNING - ----------------------------------------------------------------
2025-12-12 19:41:49,366 - INFO - Processing /app/documents/eluhrs@gmail.com/second-copy-0b439444/north-02.jpg...
2025-12-12 19:41:49,366 - INFO - Segmenting /app/documents/eluhrs@gmail.com/second-copy-0b439444/north-02.jpg with Kraken...
2025-12-12 19:41:49,367 - INFO - Loading segmentation model from /usr/local/lib/python3.10/site-packages/kraken/blla.mlmodel...
2025-12-12 19:41:49,729 - INFO - Segmenting /app/documents/eluhrs@gmail.com/second-copy-0b439444/north-02.jpg
2025-12-12 19:41:51,853 - INFO - Vectorizing regions
2025-12-12 19:41:51,958 - INFO - Vectorizing regions
2025-12-12 19:41:52,061 - INFO - Vectorizing baselines
2025-12-12 19:41:56,945 - INFO - Compute reading order on 15 lines in lr direction
2025-12-12 19:41:56,945 - INFO - Perform topological sort on partially ordered lines
2025-12-12 19:41:56,946 - INFO - Compute reading order on 1 lines in lr direction
2025-12-12 19:41:56,947 - INFO - Perform topological sort on partially ordered lines
2025-12-12 19:41:56,947 - INFO - Compute reading order on 2 lines in lr direction
2025-12-12 19:41:56,947 - INFO - Perform topological sort on partially ordered lines
2025-12-12 19:41:56,949 - INFO - Found 16 lines.
2025-12-12 19:41:56,950 - INFO - Initializing Gemini model: gemini-3-pro-preview
2025-12-12 19:41:56,960 - INFO - Annotating 16 regions for Visual Tagging...
2025-12-12 19:41:56,985 - INFO - Saved debug image to output/north-02-debug.jpg
2025-12-12 19:41:56,985 - INFO - Sending annotated image to Gemini...
2025-12-12 19:43:03,017 - INFO - Received JSON response from Gemini.
2025-12-12 19:43:03,154 - WARNING - 
------------- gemini-pro-3 output for north-02.jpg -------------
2025-12-12 19:43:03,154 - WARNING - all ye euells yt maybe, ar crept so near vntous.
2025-12-12 19:43:03,155 - WARNING - Zeland is full, France not free, & Scotland
2025-12-12 19:43:03,155 - WARNING - vnclensid: the Common people spoyled, theyr
2025-12-12 19:43:03,155 - WARNING - Commonwelths racked, theyr Nobilitie
2025-12-12 19:43:03,155 - WARNING - murtherid, the Councell contemnid and
2025-12-12 19:43:03,155 - WARNING - theyr Kyngs disobeyed: For dissention, sedici=
2025-12-12 19:43:03,156 - WARNING - on Ciuell slaughtar, & rebellion, is ye onlie
2025-12-12 19:43:03,156 - WARNING - argument entreatid of among them .
2025-12-12 19:43:03,156 - WARNING - & If therfore it pleasid her Hyghnes, to vse ye
2025-12-12 19:43:03,156 - WARNING - benefit of present tyme: to bend her browe
2025-12-12 19:43:03,156 - WARNING - vpon ye disobedient: to hold vp her threatning
2025-12-12 19:43:03,156 - WARNING - hand ouer them, and to aduance her pusant
2025-12-12 19:43:03,157 - WARNING - arme towards them; the verie shadoe of her
2025-12-12 19:43:03,157 - WARNING - sworde, wold feare and vanquyshe yt prow=
2025-12-12 19:43:03,157 - WARNING - dest of them .
2025-12-12 19:43:03,157 - WARNING - but
2025-12-12 19:43:03,157 - WARNING - ----------------------------------------------------------------
2025-12-12 19:43:03,157 - WARNING - Saved PageXML to output/north-02.xml
2025-12-12 19:43:03,157 - WARNING - Saved TXT to output/north-02.txt
2025-12-12 19:43:03,158 - WARNING - Saved PDF to output/north-02.pdf
2025-12-12 19:43:03,158 - WARNING - Time:   00:01:13
2025-12-12 19:43:03,158 - WARNING - Input:  1273 tokens
2025-12-12 19:43:03,158 - WARNING - Output: 297 tokens
2025-12-12 19:43:03,158 - WARNING - Cost:   $0.0061
2025-12-12 19:43:03,159 - WARNING - Total time:   00:03:40
2025-12-12 19:43:03,159 - WARNING - Total input:  2558 tokens
2025-12-12 19:43:03,159 - WARNING - Total output: 597 tokens
2025-12-12 19:43:03,159 - WARNING - Total cost:   $0.0123
2025-12-12 19:43:03,159 - WARNING - ----------------------------------------------------------------
2025-12-12 19:43:03,160 - INFO - Combining 2 PDFs into /app/documents/eluhrs@gmail.com/second-copy-0b439444/second-copy.pdf...
2025-12-12 19:43:03,186 - INFO - Saved Combined PDF to /app/documents/eluhrs@gmail.com/second-copy-0b439444/second-copy.pdf
2025-12-12 19:43:03,187 - INFO - Combining 2 TXTs into /app/documents/eluhrs@gmail.com/second-copy-0b439444/second-copy.txt...
2025-12-12 19:43:03,187 - INFO - Saved Combined TXT to /app/documents/eluhrs@gmail.com/second-copy-0b439444/second-copy.txt
2025-12-12 19:43:03,199 - INFO - Task server.tasks.merge_document_task[c2c074db-4b9c-4f8d-94f3-1da7bf8ef100] succeeded in 220.6984320989577s: None
2025-12-12 20:19:26,673 - INFO - SYSTEM: Server module initialized at 2025-12-12 20:19:26.673078
2025-12-12 20:19:58,458 - INFO - SYSTEM: Server module initialized at 2025-12-12 20:19:58.458667
2025-12-12 20:20:29,837 - INFO - SYSTEM: Server module initialized at 2025-12-12 20:20:29.837632
2025-12-12 20:20:41,378 - INFO - SYSTEM: Server module initialized at 2025-12-12 20:20:41.378118
2025-12-12 20:20:42,204 - INFO - SYSTEM: Server module initialized at 2025-12-12 20:20:42.204486
2025-12-12 20:20:43,159 - INFO - Connected to redis://redis:6379/0
2025-12-12 20:20:43,163 - INFO - mingle: searching for neighbors
2025-12-12 20:20:44,179 - INFO - mingle: all alone
2025-12-12 20:20:44,195 - INFO - celery@43cc669a147a ready.
2025-12-12 20:22:01,592 - INFO - Created parent thumbnail at /app/documents/eluhrs@gmail.com/test-31a91460/test-thumb.jpg
2025-12-12 20:22:01,642 - INFO - Task server.tasks.process_batch_task[b9e30c13-866b-4ef7-a9b2-61a360799ab0] received
2025-12-12 20:22:01,693 - INFO - BATCH TASK START: Parent test.pdf (ID: 12)
2025-12-12 20:22:01,694 - INFO - Command: subscript historical-manuscript gemini-pro-3 /app/documents/eluhrs@gmail.com/test-31a91460/rock01.jpg /app/documents/eluhrs@gmail.com/test-31a91460/rock01_copy.jpg --combine /app/documents/eluhrs@gmail.com/test-31a91460/test.pdf --output /app/documents/eluhrs@gmail.com/test-31a91460
2025-12-12 20:22:01,701 - INFO - Running from: /app
2025-12-12 20:22:01,701 - INFO - Using config: /app/config.yml
2025-12-12 20:22:01,702 - INFO - Output directory: /app/documents/eluhrs@gmail.com/test-31a91460
2025-12-12 20:22:01,702 - INFO - ----------------------------------------
2025-12-12 20:22:04,500 - INFO - 
Subscript.py initialized segmentation provider: historical-manuscript
2025-12-12 20:22:04,500 - INFO - Subscript.py Initialized transcription provider: gemini-pro-3
2025-12-12 20:22:04,501 - INFO - Processing 2 files...
2025-12-12 20:22:04,501 - INFO - Processing /app/documents/eluhrs@gmail.com/test-31a91460/rock01.jpg...
2025-12-12 20:22:04,501 - INFO - Segmenting /app/documents/eluhrs@gmail.com/test-31a91460/rock01.jpg with Kraken...
2025-12-12 20:22:04,504 - INFO - Loading segmentation model from /usr/local/lib/python3.10/site-packages/kraken/blla.mlmodel...
2025-12-12 20:22:04,857 - INFO - Segmenting /app/documents/eluhrs@gmail.com/test-31a91460/rock01.jpg
2025-12-12 20:22:07,523 - INFO - Vectorizing regions
2025-12-12 20:22:07,670 - INFO - Vectorizing regions
2025-12-12 20:22:07,813 - INFO - Vectorizing baselines
2025-12-12 20:22:14,310 - INFO - Compute reading order on 23 lines in lr direction
2025-12-12 20:22:14,311 - INFO - Perform topological sort on partially ordered lines
2025-12-12 20:22:14,312 - INFO - Compute reading order on 1 lines in lr direction
2025-12-12 20:22:14,312 - INFO - Perform topological sort on partially ordered lines
2025-12-12 20:22:14,313 - INFO - Compute reading order on 2 lines in lr direction
2025-12-12 20:22:14,313 - INFO - Perform topological sort on partially ordered lines
2025-12-12 20:22:14,317 - INFO - Found 24 lines.
2025-12-12 20:22:14,320 - INFO - Initializing Gemini model: gemini-3-pro-preview
2025-12-12 20:22:14,465 - INFO - Resized image to (2289, 3000)
2025-12-12 20:22:14,472 - INFO - Annotating 24 regions for Visual Tagging...
2025-12-12 20:22:14,546 - INFO - Saved debug image to /app/documents/eluhrs@gmail.com/test-31a91460/rock01-debug.jpg
2025-12-12 20:22:14,546 - INFO - Sending annotated image to Gemini...
2025-12-12 20:24:20,404 - INFO - Received JSON response from Gemini.
2025-12-12 20:24:20,693 - INFO - Processing /app/documents/eluhrs@gmail.com/test-31a91460/rock01_copy.jpg...
2025-12-12 20:24:20,693 - INFO - Segmenting /app/documents/eluhrs@gmail.com/test-31a91460/rock01_copy.jpg with Kraken...
2025-12-12 20:24:20,693 - INFO - Loading segmentation model from /usr/local/lib/python3.10/site-packages/kraken/blla.mlmodel...
2025-12-12 20:24:21,013 - INFO - Segmenting /app/documents/eluhrs@gmail.com/test-31a91460/rock01_copy.jpg
2025-12-12 20:24:23,802 - INFO - Vectorizing regions
2025-12-12 20:24:23,948 - INFO - Vectorizing regions
2025-12-12 20:24:24,097 - INFO - Vectorizing baselines
2025-12-12 20:24:30,529 - INFO - Compute reading order on 23 lines in lr direction
2025-12-12 20:24:30,532 - INFO - Perform topological sort on partially ordered lines
2025-12-12 20:24:30,533 - INFO - Compute reading order on 1 lines in lr direction
2025-12-12 20:24:30,534 - INFO - Perform topological sort on partially ordered lines
2025-12-12 20:24:30,534 - INFO - Compute reading order on 2 lines in lr direction
2025-12-12 20:24:30,535 - INFO - Perform topological sort on partially ordered lines
2025-12-12 20:24:30,539 - INFO - Found 24 lines.
2025-12-12 20:24:30,543 - INFO - Initializing Gemini model: gemini-3-pro-preview
2025-12-12 20:24:30,683 - INFO - Resized image to (2289, 3000)
2025-12-12 20:24:30,689 - INFO - Annotating 24 regions for Visual Tagging...
2025-12-12 20:24:30,764 - INFO - Saved debug image to /app/documents/eluhrs@gmail.com/test-31a91460/rock01_copy-debug.jpg
2025-12-12 20:24:30,764 - INFO - Sending annotated image to Gemini...
2025-12-12 20:25:41,741 - INFO - Received JSON response from Gemini.
2025-12-12 20:25:42,053 - INFO - Combining 2 PDFs into /app/documents/eluhrs@gmail.com/test-31a91460/test.pdf...
2025-12-12 20:25:42,098 - INFO - Saved Combined PDF to /app/documents/eluhrs@gmail.com/test-31a91460/test.pdf
2025-12-12 20:25:42,099 - INFO - Combining 2 TXTs into /app/documents/eluhrs@gmail.com/test-31a91460/test.txt...
2025-12-12 20:25:42,099 - INFO - Saved Combined TXT to /app/documents/eluhrs@gmail.com/test-31a91460/test.txt
2025-12-12 20:25:42,100 - INFO - BATCH OUTPUT:

------------- gemini-pro-3 output for rock01.jpg -------------
74
Panama, Dec. 29. 1874
My dear Capt. Green,-
Your favor by Dr. Boyd duly came.
We observed our latitude stars on Sunday night, and
of course last night again. The instrument behaves well.
Yesterday morning (before your letter came) & this morn.
we observed for azimuth & variation. Though heavily on
our minds we couldn't accomplish it earlier, while the
longitude work lasted. On Sat. night we observed 24 stars.
I will enclose your signals. I think our work is a success.
To-day Mr. Spencer dismounts the telegraph line. We hope to
very steady,
come over on Sat. Morn. - I do not think the pier is
I think some one hit an arm of the instrument unconsciously
each time I found it out of meridian.
The vernier trouble is due to that arm making an angle
with the vertical. I am convinced that most of the register
troubles are due to bad quality of the fillet paper. It is gen=
equal thickness at two edges and also varies in thickness
lengthwise, so as to require frequent readjustment of
rollers & stylet.
Very truly Yrs.
Miles Rock
----------------------------------------------------------------

Saved PageXML to /app/documents/eluhrs@gmail.com/test-31a91460/rock01.xml
Saved TXT to /app/documents/eluhrs@gmail.com/test-31a91460/rock01.txt
Saved PDF to /app/documents/eluhrs@gmail.com/test-31a91460/rock01.pdf

Time:   00:02:16
Input:  1295 tokens
Output: 418 tokens
Cost:   $0.0076

----------------------------------------------------------------


------------- gemini-pro-3 output for rock01_copy.jpg -------------
74
Panama, Dec. 29. 1874
My dear Capt. Green,-
Your favor by Dr. Boyd duly came.
We observed our latitude stars on Sunday night, and
of course last night again. The instrument behaves well.
Yesterday morning (before your letter came) & this morn.
we observed for azimuth & variation. Though heavily on
our minds we couldn't accomplish it earlier, while the
longitude work lasted. On Sat. night we observed 24 stars.
I will enclose your signals. I think our work is a success.
To-day Mr. Spencer dismounts the telegraph line. We hope to
steady
come over on Sat. Morn. - I do not think the pier is
I think some one hit an arm of the instrument unconsciously
each time I found it out of meridian.
The vernier trouble is due to that arm making an angle
with the vertical. I am convinced that most of the register
troubles are due to bad quality of the fillet paper. It is un=
equal thickness at two edges and also varies in thickness
lengthwise, so as to require frequent readjustment of
rollers & stylet.
Very truly Yrs.
Miles Rock
----------------------------------------------------------------

Saved PageXML to /app/documents/eluhrs@gmail.com/test-31a91460/rock01_copy.xml
Saved TXT to /app/documents/eluhrs@gmail.com/test-31a91460/rock01_copy.txt
Saved PDF to /app/documents/eluhrs@gmail.com/test-31a91460/rock01_copy.pdf

Time:   00:01:21
Input:  1295 tokens
Output: 417 tokens
Cost:   $0.0076

Total time:   00:03:37
Total input:  2590 tokens
Total output: 835 tokens
Total cost:   $0.0152

----------------------------------------------------------------


2025-12-12 20:25:42,113 - ERROR - Task server.tasks.process_batch_task[b9e30c13-866b-4ef7-a9b2-61a360799ab0] raised unexpected: NameError("name 'doc_id' is not defined")
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
  File "/app/server/tasks.py", line 310, in process_batch_task
    doc = db.query(Document).filter(Document.id == doc_id).first()
NameError: name 'doc_id' is not defined
2025-12-12 20:27:27,550 - INFO - SYSTEM: Server module initialized at 2025-12-12 20:27:27.550227
2025-12-12 20:27:39,197 - INFO - SYSTEM: Server module initialized at 2025-12-12 20:27:39.197929
2025-12-12 20:27:40,056 - INFO - Connected to redis://redis:6379/0
2025-12-12 20:27:40,058 - INFO - mingle: searching for neighbors
2025-12-12 20:27:41,074 - INFO - mingle: all alone
2025-12-12 20:27:41,096 - INFO - celery@43cc669a147a ready.
2025-12-12 20:27:43,294 - INFO - SYSTEM: Server module initialized at 2025-12-12 20:27:43.294837
2025-12-12 20:32:06,269 - INFO - Created parent thumbnail at /app/documents/eluhrs@gmail.com/test2-00e2b325/test2-thumb.jpg
2025-12-12 20:32:06,318 - INFO - Task server.tasks.process_batch_task[9dae5a47-8de8-46aa-b70e-d3f792364f04] received
2025-12-12 20:32:06,384 - INFO - BATCH TASK START: Parent test2.pdf (ID: 1)
2025-12-12 20:32:06,385 - INFO - Command: subscript historical-manuscript gemini-pro-3 /app/documents/eluhrs@gmail.com/test2-00e2b325/rock01.jpg /app/documents/eluhrs@gmail.com/test2-00e2b325/rock01_copy.jpg --combine /app/documents/eluhrs@gmail.com/test2-00e2b325/test2.pdf --output /app/documents/eluhrs@gmail.com/test2-00e2b325
2025-12-12 20:32:06,397 - INFO - Running from: /app
2025-12-12 20:32:06,397 - INFO - Using config: /app/config.yml
2025-12-12 20:32:06,397 - INFO - Output directory: /app/documents/eluhrs@gmail.com/test2-00e2b325
2025-12-12 20:32:06,397 - INFO - ----------------------------------------
2025-12-12 20:32:09,677 - INFO - 
Subscript.py initialized segmentation provider: historical-manuscript
2025-12-12 20:32:09,677 - INFO - Subscript.py Initialized transcription provider: gemini-pro-3
2025-12-12 20:32:09,677 - INFO - Processing 2 files...
2025-12-12 20:32:09,678 - INFO - Processing /app/documents/eluhrs@gmail.com/test2-00e2b325/rock01.jpg...
2025-12-12 20:32:09,678 - INFO - Segmenting /app/documents/eluhrs@gmail.com/test2-00e2b325/rock01.jpg with Kraken...
2025-12-12 20:32:09,682 - INFO - Loading segmentation model from /usr/local/lib/python3.10/site-packages/kraken/blla.mlmodel...
2025-12-12 20:32:10,062 - INFO - Segmenting /app/documents/eluhrs@gmail.com/test2-00e2b325/rock01.jpg
2025-12-12 20:32:12,930 - INFO - Vectorizing regions
2025-12-12 20:32:13,075 - INFO - Vectorizing regions
2025-12-12 20:32:13,218 - INFO - Vectorizing baselines
2025-12-12 20:32:19,766 - INFO - Compute reading order on 23 lines in lr direction
2025-12-12 20:32:19,767 - INFO - Perform topological sort on partially ordered lines
2025-12-12 20:32:19,767 - INFO - Compute reading order on 1 lines in lr direction
2025-12-12 20:32:19,770 - INFO - Perform topological sort on partially ordered lines
2025-12-12 20:32:19,771 - INFO - Compute reading order on 2 lines in lr direction
2025-12-12 20:32:19,772 - INFO - Perform topological sort on partially ordered lines
2025-12-12 20:32:19,775 - INFO - Found 24 lines.
2025-12-12 20:32:19,777 - INFO - Initializing Gemini model: gemini-3-pro-preview
2025-12-12 20:32:19,922 - INFO - Resized image to (2289, 3000)
2025-12-12 20:32:19,929 - INFO - Annotating 24 regions for Visual Tagging...
2025-12-12 20:32:20,004 - INFO - Saved debug image to /app/documents/eluhrs@gmail.com/test2-00e2b325/rock01-debug.jpg
2025-12-12 20:32:20,005 - INFO - Sending annotated image to Gemini...
2025-12-12 20:33:11,153 - INFO - Received JSON response from Gemini.
2025-12-12 20:33:11,430 - INFO - Processing /app/documents/eluhrs@gmail.com/test2-00e2b325/rock01_copy.jpg...
2025-12-12 20:33:11,430 - INFO - Segmenting /app/documents/eluhrs@gmail.com/test2-00e2b325/rock01_copy.jpg with Kraken...
2025-12-12 20:33:11,430 - INFO - Loading segmentation model from /usr/local/lib/python3.10/site-packages/kraken/blla.mlmodel...
2025-12-12 20:33:11,777 - INFO - Segmenting /app/documents/eluhrs@gmail.com/test2-00e2b325/rock01_copy.jpg
2025-12-12 20:33:14,658 - INFO - Vectorizing regions
2025-12-12 20:33:14,808 - INFO - Vectorizing regions
2025-12-12 20:33:14,958 - INFO - Vectorizing baselines
2025-12-12 20:33:21,369 - INFO - Compute reading order on 23 lines in lr direction
2025-12-12 20:33:21,370 - INFO - Perform topological sort on partially ordered lines
2025-12-12 20:33:21,371 - INFO - Compute reading order on 1 lines in lr direction
2025-12-12 20:33:21,371 - INFO - Perform topological sort on partially ordered lines
2025-12-12 20:33:21,372 - INFO - Compute reading order on 2 lines in lr direction
2025-12-12 20:33:21,372 - INFO - Perform topological sort on partially ordered lines
2025-12-12 20:33:21,380 - INFO - Found 24 lines.
2025-12-12 20:33:21,382 - INFO - Initializing Gemini model: gemini-3-pro-preview
2025-12-12 20:33:21,524 - INFO - Resized image to (2289, 3000)
2025-12-12 20:33:21,530 - INFO - Annotating 24 regions for Visual Tagging...
2025-12-12 20:33:21,605 - INFO - Saved debug image to /app/documents/eluhrs@gmail.com/test2-00e2b325/rock01_copy-debug.jpg
2025-12-12 20:33:21,607 - INFO - Sending annotated image to Gemini...
2025-12-12 20:35:43,740 - INFO - Received JSON response from Gemini.
2025-12-12 20:35:44,056 - INFO - Combining 2 PDFs into /app/documents/eluhrs@gmail.com/test2-00e2b325/test2.pdf...
2025-12-12 20:35:44,138 - INFO - Saved Combined PDF to /app/documents/eluhrs@gmail.com/test2-00e2b325/test2.pdf
2025-12-12 20:35:44,138 - INFO - Combining 2 TXTs into /app/documents/eluhrs@gmail.com/test2-00e2b325/test2.txt...
2025-12-12 20:35:44,139 - INFO - Saved Combined TXT to /app/documents/eluhrs@gmail.com/test2-00e2b325/test2.txt
2025-12-12 20:35:44,140 - INFO - BATCH OUTPUT:

------------- gemini-pro-3 output for rock01.jpg -------------
74
Panama, Dec. 29. 1874
My dear Capt. Green,-
Your favor by Dr. Boyd duly came.
We observed our latitude stars on Sunday night, and
of course last night again. The instrument behaves well.
Yesterday morning (before your letter came) & this morn.
we observed for azimuth & variation. Though heavily on
our minds we couldn't accomplish it earlier, while the
longitude work lasted. On Sat. night we observed 24 stars.
I will enclose your signals. I think our work is a success.
To-day Mr. Spencer dismounts the telegraph line. We hope to
un
come over on Sat. Morn. - I do not think the pier is steady,
I think some one hit an arm of the instrument unconsciously
each time I found it out of meridian.
The vernier trouble is due to that arm making an angle
with the vertical. I am convinced that most of the register
troubles are due to bad quality of the fillet paper. It is un=
equal thickness at two edges and also varies in thickness
lengthwise, so as to require frequent readjustment of
rollers & stylet.
Very truly Yrs.
Miles Rock
----------------------------------------------------------------

Saved PageXML to /app/documents/eluhrs@gmail.com/test2-00e2b325/rock01.xml
Saved TXT to /app/documents/eluhrs@gmail.com/test2-00e2b325/rock01.txt
Saved PDF to /app/documents/eluhrs@gmail.com/test2-00e2b325/rock01.pdf

Time:   00:01:01
Input:  1295 tokens
Output: 418 tokens
Cost:   $0.0076

----------------------------------------------------------------


------------- gemini-pro-3 output for rock01_copy.jpg -------------
4
Panama, Dec. 29. 1874
My dear Capt. Green,-
Your favor by Dr. Boyd duly came.
We observed our latitude stars on Sunday night, and
of course last night again. The instrument behaves well.
Yesterday morning (before your letter came) & this morn.
we observed for azimuth & variation. Though heavily on
our minds we couldn't accomplish it earlier, while the
longitude work lasted. On Sat. night we observed 24 stars.
I will enclose your signals. I think our work is a success.
To-day Mr. Spencer dismounts the telegraph line. We hope to
un
come over on Sat. Morn. - I do not think the pier is steady,
I think some one hit an arm of the instrument unconsciously
each time I found it out of meridian.
The vernier trouble is due to that arm making an angle
with the vertical. I am convinced that most of the register
troubles are due to bad quality of the fillet paper. It is gen=
equal thickness at two edges and also varies in thickness
lengthwise, so as to require frequent readjustment of
rollers & styles.
Very truly Yrs.
Miles Rock
----------------------------------------------------------------

Saved PageXML to /app/documents/eluhrs@gmail.com/test2-00e2b325/rock01_copy.xml
Saved TXT to /app/documents/eluhrs@gmail.com/test2-00e2b325/rock01_copy.txt
Saved PDF to /app/documents/eluhrs@gmail.com/test2-00e2b325/rock01_copy.pdf

Time:   00:02:32
Input:  1295 tokens
Output: 416 tokens
Cost:   $0.0076

Total time:   00:03:34
Total input:  2590 tokens
Total output: 834 tokens
Total cost:   $0.0152

----------------------------------------------------------------


2025-12-12 20:35:44,168 - INFO - Task server.tasks.process_batch_task[9dae5a47-8de8-46aa-b70e-d3f792364f04] succeeded in 217.8482224730542s: None
2025-12-12 20:41:37,034 - INFO - SYSTEM: Server module initialized at 2025-12-12 20:41:37.034257
2025-12-12 20:41:45,899 - INFO - SYSTEM: Server module initialized at 2025-12-12 20:41:45.899332
2025-12-12 20:41:46,924 - INFO - Connected to redis://redis:6379/0
2025-12-12 20:41:46,928 - INFO - mingle: searching for neighbors
2025-12-12 20:41:47,942 - INFO - mingle: all alone
2025-12-12 20:41:47,957 - INFO - celery@43cc669a147a ready.
2025-12-12 20:55:16,057 - INFO - JOB SUBMITTED: User eluhrs@gmail.com uploaded north-01.jpg
2025-12-12 20:55:16,236 - INFO - Task server.tasks.process_document_task[ac829fe5-65c8-4fc5-b150-426987ff2e6a] received
2025-12-12 20:55:16,340 - INFO - Task 4 received options raw: {"transcription":{"temperature":0.2}}
2025-12-12 20:55:16,341 - INFO - Task 4 parsed options: {'transcription': {'temperature': 0.2}}
2025-12-12 20:55:16,342 - INFO - TASK START: Processing north-01.jpg (ID: 4)
2025-12-12 20:55:16,343 - INFO - Command: subscript historical-manuscript gemini-pro-3 /app/documents/eluhrs@gmail.com/north-01-a3209158/north-01.jpg --output /app/documents/eluhrs@gmail.com/north-01-a3209158
2025-12-12 20:55:16,352 - INFO - Running from: /app
2025-12-12 20:55:16,352 - INFO - Using config: /app/config.yml
2025-12-12 20:55:16,352 - INFO - Output directory: /app/documents/eluhrs@gmail.com/north-01-a3209158
2025-12-12 20:55:16,353 - INFO - ----------------------------------------
2025-12-12 20:55:19,673 - INFO - 
Subscript.py initialized segmentation provider: historical-manuscript
2025-12-12 20:55:19,673 - INFO - Subscript.py Initialized transcription provider: gemini-pro-3
2025-12-12 20:55:19,673 - INFO - Processing 1 files...
2025-12-12 20:55:19,673 - INFO - Processing /app/documents/eluhrs@gmail.com/north-01-a3209158/north-01.jpg...
2025-12-12 20:55:19,674 - INFO - Segmenting /app/documents/eluhrs@gmail.com/north-01-a3209158/north-01.jpg with Kraken...
2025-12-12 20:55:19,677 - INFO - Loading segmentation model from /usr/local/lib/python3.10/site-packages/kraken/blla.mlmodel...
2025-12-12 20:55:20,047 - INFO - Segmenting /app/documents/eluhrs@gmail.com/north-01-a3209158/north-01.jpg
2025-12-12 20:55:22,192 - INFO - Vectorizing regions
2025-12-12 20:55:22,300 - INFO - Vectorizing regions
2025-12-12 20:55:22,406 - INFO - Vectorizing baselines
2025-12-12 20:55:27,484 - INFO - Compute reading order on 18 lines in lr direction
2025-12-12 20:55:27,487 - INFO - Perform topological sort on partially ordered lines
2025-12-12 20:55:27,489 - INFO - Compute reading order on 1 lines in lr direction
2025-12-12 20:55:27,489 - INFO - Perform topological sort on partially ordered lines
2025-12-12 20:55:27,490 - INFO - Found 18 lines.
2025-12-12 20:55:27,492 - INFO - Initializing Gemini model: gemini-3-pro-preview
2025-12-12 20:55:27,519 - INFO - Annotating 18 regions for Visual Tagging...
2025-12-12 20:55:27,548 - INFO - Saved debug image to /app/documents/eluhrs@gmail.com/north-01-a3209158/north-01-debug.jpg
2025-12-12 20:55:27,549 - INFO - Sending annotated image to Gemini...
2025-12-12 20:57:07,904 - INFO - Received JSON response from Gemini.
2025-12-12 20:57:08,055 - INFO - SUBSCRIPT OUTPUT for 4:

------------- gemini-pro-3 output for north-01.jpg -------------
glad aspects were present (confirming her
Maiestie wth THEODOSIES dylligence, ARETAPHE=
LIS constancie, and ANTIGONVS clemencie)
setlinge them selues euar sence, in her Princelie
brest: as ye rarenes and greatnes of her Gracis
vertuse declare . Whom God presaruid from
formar perell, to rule & reygne ouer us, in
this last leaden adge : wherin Iniquitie hath
sought to surmount ye glorie of his Deitie, and
so presumed to suppresse his professors: As if
ye Shylde of her Souerayntie (for worldlie
force) did not protect his poore membars a=
Quie:ns
Ma:tie
self protector
of Religion
mong us: What error wold not inuade us?
What Scisme or sect wold not assawte us?
----------------------------------------------------------------

Saved PageXML to /app/documents/eluhrs@gmail.com/north-01-a3209158/north-01.xml
Saved TXT to /app/documents/eluhrs@gmail.com/north-01-a3209158/north-01.txt
Saved PDF to /app/documents/eluhrs@gmail.com/north-01-a3209158/north-01.pdf

Time:   00:01:48
Input:  1285 tokens
Output: 353 tokens
Cost:   $0.0068

----------------------------------------------------------------


2025-12-12 20:57:08,055 - INFO - Task Complete: north-01.jpg
2025-12-12 20:57:08,061 - INFO - Task server.tasks.process_document_task[ac829fe5-65c8-4fc5-b150-426987ff2e6a] succeeded in 111.80797275900841s: None
2025-12-12 21:11:58,059 - INFO - SYSTEM: Server module initialized at 2025-12-12 21:11:58.059125
2025-12-12 21:12:45,960 - INFO - SYSTEM: Server module initialized at 2025-12-12 21:12:45.960319
2025-12-12 21:12:55,504 - INFO - SYSTEM: Server module initialized at 2025-12-12 21:12:55.504182
2025-12-12 21:12:57,413 - INFO - SYSTEM: Server module initialized at 2025-12-12 21:12:57.413464
2025-12-12 21:12:58,412 - INFO - Connected to redis://redis:6379/0
2025-12-12 21:12:58,415 - INFO - mingle: searching for neighbors
2025-12-12 21:12:59,428 - INFO - mingle: all alone
2025-12-12 21:12:59,447 - INFO - celery@43cc669a147a ready.
2025-12-12 21:14:20,962 - INFO - JOB SUBMITTED: User eluhrs@gmail.com uploaded rock01.jpg
2025-12-12 21:14:21,110 - INFO - Task server.tasks.process_document_task[6a6a5cbb-6e7b-461e-aedd-d5e2fb88e77f] received
2025-12-12 21:14:21,178 - INFO - Task 1 received options raw: {"transcription":{"temperature":0.2}}
2025-12-12 21:14:21,179 - INFO - Task 1 parsed options: {'transcription': {'temperature': 0.2}}
2025-12-12 21:14:21,182 - INFO - TASK START: Processing rock01.jpg (ID: 1)
2025-12-12 21:14:21,182 - INFO - Command: subscript historical-manuscript gemini-pro-3 /app/documents/eluhrs@gmail.com/rock01-ae0302bf/rock01.jpg --output /app/documents/eluhrs@gmail.com/rock01-ae0302bf
2025-12-12 21:14:21,192 - INFO - Running from: /app
2025-12-12 21:14:21,192 - INFO - Using config: /app/config.yml
2025-12-12 21:14:21,192 - INFO - Output directory: /app/documents/eluhrs@gmail.com/rock01-ae0302bf
2025-12-12 21:14:21,192 - INFO - ----------------------------------------
2025-12-12 21:14:24,072 - INFO - 
Subscript.py initialized segmentation provider: historical-manuscript
2025-12-12 21:14:24,072 - INFO - Subscript.py Initialized transcription provider: gemini-pro-3
2025-12-12 21:14:24,072 - INFO - Processing 1 files...
2025-12-12 21:14:24,072 - INFO - Processing /app/documents/eluhrs@gmail.com/rock01-ae0302bf/rock01.jpg...
2025-12-12 21:14:24,073 - INFO - Segmenting /app/documents/eluhrs@gmail.com/rock01-ae0302bf/rock01.jpg with Kraken...
2025-12-12 21:14:24,077 - INFO - Loading segmentation model from /usr/local/lib/python3.10/site-packages/kraken/blla.mlmodel...
2025-12-12 21:14:24,428 - INFO - Segmenting /app/documents/eluhrs@gmail.com/rock01-ae0302bf/rock01.jpg
2025-12-12 21:14:27,359 - INFO - Vectorizing regions
2025-12-12 21:14:27,507 - INFO - Vectorizing regions
2025-12-12 21:14:27,662 - INFO - Vectorizing baselines
2025-12-12 21:14:34,433 - INFO - Compute reading order on 23 lines in lr direction
2025-12-12 21:14:34,436 - INFO - Perform topological sort on partially ordered lines
2025-12-12 21:14:34,437 - INFO - Compute reading order on 1 lines in lr direction
2025-12-12 21:14:34,437 - INFO - Perform topological sort on partially ordered lines
2025-12-12 21:14:34,438 - INFO - Compute reading order on 2 lines in lr direction
2025-12-12 21:14:34,445 - INFO - Perform topological sort on partially ordered lines
2025-12-12 21:14:34,448 - INFO - Found 24 lines.
2025-12-12 21:14:34,453 - INFO - Initializing Gemini model: gemini-3-pro-preview
2025-12-12 21:14:34,548 - INFO - Created parent thumbnail at /app/documents/eluhrs@gmail.com/north-e5dafc2a/north-thumb.jpg
2025-12-12 21:14:34,553 - INFO - Task server.tasks.process_batch_task[a675d716-6a1b-4c18-bb29-05fe6bdde0cc] received
2025-12-12 21:14:34,617 - INFO - BATCH TASK START: Parent north.pdf (ID: 2)
2025-12-12 21:14:34,618 - INFO - Command: subscript historical-manuscript gemini-pro-3 /app/documents/eluhrs@gmail.com/north-e5dafc2a/north-01.jpg /app/documents/eluhrs@gmail.com/north-e5dafc2a/north-02.jpg --combine /app/documents/eluhrs@gmail.com/north-e5dafc2a/north.pdf --output /app/documents/eluhrs@gmail.com/north-e5dafc2a
2025-12-12 21:14:34,622 - INFO - Resized image to (2289, 3000)
2025-12-12 21:14:34,626 - INFO - Running from: /app
2025-12-12 21:14:34,627 - INFO - Using config: /app/config.yml
2025-12-12 21:14:34,627 - INFO - Output directory: /app/documents/eluhrs@gmail.com/north-e5dafc2a
2025-12-12 21:14:34,627 - INFO - ----------------------------------------
2025-12-12 21:14:34,630 - INFO - Annotating 24 regions for Visual Tagging...
2025-12-12 21:14:34,779 - INFO - Saved debug image to /app/documents/eluhrs@gmail.com/rock01-ae0302bf/rock01-debug.jpg
2025-12-12 21:14:34,780 - INFO - Sending annotated image to Gemini...
2025-12-12 21:14:37,340 - INFO - 
Subscript.py initialized segmentation provider: historical-manuscript
2025-12-12 21:14:37,341 - INFO - Subscript.py Initialized transcription provider: gemini-pro-3
2025-12-12 21:14:37,342 - INFO - Processing 2 files...
2025-12-12 21:14:37,342 - INFO - Processing /app/documents/eluhrs@gmail.com/north-e5dafc2a/north-01.jpg...
2025-12-12 21:14:37,342 - INFO - Segmenting /app/documents/eluhrs@gmail.com/north-e5dafc2a/north-01.jpg with Kraken...
2025-12-12 21:14:37,345 - INFO - Loading segmentation model from /usr/local/lib/python3.10/site-packages/kraken/blla.mlmodel...
2025-12-12 21:14:37,759 - INFO - Segmenting /app/documents/eluhrs@gmail.com/north-e5dafc2a/north-01.jpg
2025-12-12 21:14:40,048 - INFO - Vectorizing regions
2025-12-12 21:14:40,151 - INFO - Vectorizing regions
2025-12-12 21:14:40,251 - INFO - Vectorizing baselines
2025-12-12 21:14:45,242 - INFO - Compute reading order on 18 lines in lr direction
2025-12-12 21:14:45,245 - INFO - Perform topological sort on partially ordered lines
2025-12-12 21:14:45,246 - INFO - Compute reading order on 1 lines in lr direction
2025-12-12 21:14:45,247 - INFO - Perform topological sort on partially ordered lines
2025-12-12 21:14:45,250 - INFO - Found 18 lines.
2025-12-12 21:14:45,252 - INFO - Initializing Gemini model: gemini-3-pro-preview
2025-12-12 21:14:45,270 - INFO - Annotating 18 regions for Visual Tagging...
2025-12-12 21:14:45,299 - INFO - Saved debug image to /app/documents/eluhrs@gmail.com/north-e5dafc2a/north-01-debug.jpg
2025-12-12 21:14:45,300 - INFO - Sending annotated image to Gemini...
2025-12-12 21:15:38,110 - INFO - Received JSON response from Gemini.
2025-12-12 21:15:38,433 - INFO - SUBSCRIPT OUTPUT for 1:

------------- gemini-pro-3 output for rock01.jpg -------------
4
Panama, Dec. 29. 1874
My dear Capt. Green,-
Your favor by Dr. Boyd duly came.
We observed our latitude stars on Sunday night, and
of course last night again. The instrument behaves well.
Yesterday morning (before your letter came) & this morn.
we observed for azimuth & variation. Though heavily on
our minds we couldn't accomplish it earlier, while the
longitude work lasted. On Sat. night we observed 24 stars.
I will enclose your signals. I think our work is a success.
To-day Mr. Spencer dismounts the telegraph line. We hope to
un
come over on Sat. Morn. - I do not think the pier is steady,
I think some one hit an arm of the instrument unconsciously
each time I found it out of meridian.
The vernier trouble is due to that arm making an angle
with the vertical. I am convinced that most of the register
troubles are due to bad quality of the fillet paper. It is un=
equal thicknes at two edges and also varies in thickness
lengthwise, so as to require frequent readjustment of
rollers & stylet.
Very truly Yrs.
Miles Rock
----------------------------------------------------------------

Saved PageXML to /app/documents/eluhrs@gmail.com/rock01-ae0302bf/rock01.xml
Saved TXT to /app/documents/eluhrs@gmail.com/rock01-ae0302bf/rock01.txt
Saved PDF to /app/documents/eluhrs@gmail.com/rock01-ae0302bf/rock01.pdf

Time:   00:01:14
Input:  1295 tokens
Output: 418 tokens
Cost:   $0.0076

----------------------------------------------------------------


2025-12-12 21:15:38,434 - WARNING - Thumbnail missing for rock01.jpg, regenerating...
2025-12-12 21:15:38,465 - INFO - Task Complete: rock01.jpg
2025-12-12 21:15:38,494 - INFO - Task server.tasks.process_document_task[6a6a5cbb-6e7b-461e-aedd-d5e2fb88e77f] succeeded in 77.38081065996084s: None
2025-12-12 21:17:11,893 - INFO - Received JSON response from Gemini.
2025-12-12 21:17:11,896 - WARNING - Gemini did not return text for box 9
2025-12-12 21:17:12,052 - INFO - Processing /app/documents/eluhrs@gmail.com/north-e5dafc2a/north-02.jpg...
2025-12-12 21:17:12,052 - INFO - Segmenting /app/documents/eluhrs@gmail.com/north-e5dafc2a/north-02.jpg with Kraken...
2025-12-12 21:17:12,053 - INFO - Loading segmentation model from /usr/local/lib/python3.10/site-packages/kraken/blla.mlmodel...
2025-12-12 21:17:12,398 - INFO - Segmenting /app/documents/eluhrs@gmail.com/north-e5dafc2a/north-02.jpg
2025-12-12 21:17:16,995 - INFO - Vectorizing regions
2025-12-12 21:17:17,102 - INFO - Vectorizing regions
2025-12-12 21:17:17,204 - INFO - Vectorizing baselines
2025-12-12 21:17:23,400 - INFO - Compute reading order on 15 lines in lr direction
2025-12-12 21:17:23,402 - INFO - Perform topological sort on partially ordered lines
2025-12-12 21:17:23,402 - INFO - Compute reading order on 1 lines in lr direction
2025-12-12 21:17:23,403 - INFO - Perform topological sort on partially ordered lines
2025-12-12 21:17:23,403 - INFO - Compute reading order on 2 lines in lr direction
2025-12-12 21:17:23,403 - INFO - Perform topological sort on partially ordered lines
2025-12-12 21:17:23,405 - INFO - Found 16 lines.
2025-12-12 21:17:23,406 - INFO - Initializing Gemini model: gemini-3-pro-preview
2025-12-12 21:17:23,422 - INFO - Annotating 16 regions for Visual Tagging...
2025-12-12 21:17:23,451 - INFO - Saved debug image to /app/documents/eluhrs@gmail.com/north-e5dafc2a/north-02-debug.jpg
2025-12-12 21:17:23,451 - INFO - Sending annotated image to Gemini...
2025-12-12 21:18:50,608 - INFO - Received JSON response from Gemini.
2025-12-12 21:18:50,750 - INFO - Combining 2 PDFs into /app/documents/eluhrs@gmail.com/north-e5dafc2a/north.pdf...
2025-12-12 21:18:50,813 - INFO - Saved Combined PDF to /app/documents/eluhrs@gmail.com/north-e5dafc2a/north.pdf
2025-12-12 21:18:50,814 - INFO - Combining 2 TXTs into /app/documents/eluhrs@gmail.com/north-e5dafc2a/north.txt...
2025-12-12 21:18:50,815 - INFO - Saved Combined TXT to /app/documents/eluhrs@gmail.com/north-e5dafc2a/north.txt
2025-12-12 21:18:50,816 - INFO - BATCH OUTPUT:

------------- gemini-pro-3 output for north-01.jpg -------------
glad aspects were present (confirming her
Maiestie wth THEODOSIES dylligence, ARETAPHE=
LIS constancie, and ANTIGONVS clemencie)
setlinge them selues euar sence, in her Princelie
brest: as ye rarenes and greatnes of her Gracis
vertuse declare. Whom God presaruid from
formar perell, to rule & reygne ouer us, in
this last leaden adge: wherin Iniquitie hath

sought to surmount ye glorie of his Deitie, and
so presumed to suppresse his professors: As if
ye Shylde of her Souerayntie (for worldlie
Quens
Ma:tie is ye per force) did not protect his poore membars a=
fect protector mong us: What error wold not inuade us?
of Religion What Scisme or sect wold not assawte us?
What treason wold not entrapp us? When
all
----------------------------------------------------------------

Saved PageXML to /app/documents/eluhrs@gmail.com/north-e5dafc2a/north-01.xml
Saved TXT to /app/documents/eluhrs@gmail.com/north-e5dafc2a/north-01.txt
Saved PDF to /app/documents/eluhrs@gmail.com/north-e5dafc2a/north-01.pdf

Time:   00:02:34
Input:  1285 tokens
Output: 314 tokens
Cost:   $0.0063

----------------------------------------------------------------


------------- gemini-pro-3 output for north-02.jpg -------------
all ye euells yt may be, ar crept so near vnto us.
Zeland is full, France not free, & Scotland
vnclensid: the Common people spoyled, theyr
Commonwelths racked, theyr Nobilitie
murtherid, the Councell contemnid and
theyr Kyngs disobeyed: For dissention, sedici=
on Ciuell slaughtar, & rebellion, is ye onlie
argument entreatid of among them .
If therfore it pleasid her Hyghnes, to vse ye
benefit of present tyme: to bend her browe
vpon ye disobedient: to hold vp her threatning
hand ouer them, and to aduance her pusant
arme towards them; the verie shadoe of her
sworde, wold feare and vanquyshe ye prow=
dest of them .
but
----------------------------------------------------------------

Saved PageXML to /app/documents/eluhrs@gmail.com/north-e5dafc2a/north-02.xml
Saved TXT to /app/documents/eluhrs@gmail.com/north-e5dafc2a/north-02.txt
Saved PDF to /app/documents/eluhrs@gmail.com/north-e5dafc2a/north-02.pdf

Time:   00:01:38
Input:  1273 tokens
Output: 282 tokens
Cost:   $0.0059

Total time:   00:04:13
Total input:  2558 tokens
Total output: 596 tokens
Total cost:   $0.0123

----------------------------------------------------------------


2025-12-12 21:18:50,863 - ERROR - Task server.tasks.process_batch_task[a675d716-6a1b-4c18-bb29-05fe6bdde0cc] raised unexpected: NameError("name 'doc_id' is not defined")
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
  File "/app/server/tasks.py", line 316, in process_batch_task
    doc = db.query(Document).filter(Document.id == doc_id).first()
NameError: name 'doc_id' is not defined
2025-12-12 21:23:31,345 - INFO - SYSTEM: Server module initialized at 2025-12-12 21:23:31.345163
2025-12-12 21:23:42,260 - INFO - SYSTEM: Server module initialized at 2025-12-12 21:23:42.260622
2025-12-12 21:24:38,289 - INFO - JOB SUBMITTED: User eluhrs@gmail.com uploaded rock01.jpg
2025-12-12 21:24:38,405 - INFO - Task server.tasks.process_document_task[2448a15e-cd8d-4d1e-92ec-170db4615cf7] received
2025-12-12 21:24:38,450 - INFO - Task 1 received options raw: {"transcription":{"temperature":0.2}}
2025-12-12 21:24:38,451 - INFO - Task 1 parsed options: {'transcription': {'temperature': 0.2}}
2025-12-12 21:24:38,452 - INFO - TASK START: Processing rock01.jpg (ID: 1)
2025-12-12 21:24:38,453 - INFO - Command: subscript historical-manuscript gemini-pro-3 /app/documents/eluhrs@gmail.com/rock01-bd22c7e1/rock01.jpg --output /app/documents/eluhrs@gmail.com/rock01-bd22c7e1
2025-12-12 21:24:38,462 - INFO - Running from: /app
2025-12-12 21:24:38,463 - INFO - Using config: /app/config.yml
2025-12-12 21:24:38,463 - INFO - Output directory: /app/documents/eluhrs@gmail.com/rock01-bd22c7e1
2025-12-12 21:24:38,463 - INFO - ----------------------------------------
2025-12-12 21:24:38,465 - INFO - 
Subscript.py initialized segmentation provider: historical-manuscript
2025-12-12 21:24:38,465 - INFO - Subscript.py Initialized transcription provider: gemini-pro-3
2025-12-12 21:24:38,466 - INFO - Processing 1 files...
2025-12-12 21:24:38,466 - INFO - Processing /app/documents/eluhrs@gmail.com/rock01-bd22c7e1/rock01.jpg...
2025-12-12 21:24:38,466 - INFO - Segmenting /app/documents/eluhrs@gmail.com/rock01-bd22c7e1/rock01.jpg with Kraken...
2025-12-12 21:24:38,468 - INFO - Loading segmentation model from /usr/local/lib/python3.10/site-packages/kraken/blla.mlmodel...
2025-12-12 21:24:38,891 - INFO - Segmenting /app/documents/eluhrs@gmail.com/rock01-bd22c7e1/rock01.jpg
2025-12-12 21:24:41,702 - INFO - Vectorizing regions
2025-12-12 21:24:41,852 - INFO - Vectorizing regions
2025-12-12 21:24:41,994 - INFO - Vectorizing baselines
2025-12-12 21:24:48,639 - INFO - Compute reading order on 23 lines in lr direction
2025-12-12 21:24:48,643 - INFO - Perform topological sort on partially ordered lines
2025-12-12 21:24:48,645 - INFO - Compute reading order on 1 lines in lr direction
2025-12-12 21:24:48,645 - INFO - Perform topological sort on partially ordered lines
2025-12-12 21:24:48,646 - INFO - Compute reading order on 2 lines in lr direction
2025-12-12 21:24:48,647 - INFO - Perform topological sort on partially ordered lines
2025-12-12 21:24:48,654 - INFO - Found 24 lines.
2025-12-12 21:24:48,658 - INFO - Initializing Gemini model: gemini-3-pro-preview
2025-12-12 21:24:48,793 - INFO - Resized image to (2289, 3000)
2025-12-12 21:24:48,800 - INFO - Annotating 24 regions for Visual Tagging...
2025-12-12 21:24:48,877 - INFO - Saved debug image to /app/documents/eluhrs@gmail.com/rock01-bd22c7e1/rock01-debug.jpg
2025-12-12 21:24:48,878 - INFO - Sending annotated image to Gemini...
2025-12-12 21:24:49,785 - INFO - Thumbnail missing for doc 1, attempting to regenerate from /app/documents/eluhrs@gmail.com/rock01-bd22c7e1/rock01-debug.jpg
2025-12-12 21:24:51,093 - INFO - JOB SUBMITTED: User eluhrs@gmail.com uploaded north-01.jpg
2025-12-12 21:24:51,095 - INFO - Task server.tasks.process_document_task[147d01b3-5a77-447d-a620-f64bd254fce4] received
2025-12-12 21:24:51,120 - INFO - JOB SUBMITTED: User eluhrs@gmail.com uploaded north-02.jpg
2025-12-12 21:24:51,122 - INFO - Task server.tasks.process_document_task[bfa15dc9-f0c5-4820-a1f4-a974fdae4051] received
2025-12-12 21:24:51,134 - INFO - Task 2 received options raw: {"transcription":{"temperature":0.2}}
2025-12-12 21:24:51,135 - INFO - Task 2 parsed options: {'transcription': {'temperature': 0.2}}
2025-12-12 21:24:51,137 - INFO - TASK START: Processing north-01.jpg (ID: 2)
2025-12-12 21:24:51,137 - INFO - Command: subscript historical-manuscript gemini-pro-3 /app/documents/eluhrs@gmail.com/north-01-3a713c5e/north-01.jpg --output /app/documents/eluhrs@gmail.com/north-01-3a713c5e
2025-12-12 21:24:51,151 - INFO - Running from: /app
2025-12-12 21:24:51,151 - INFO - Using config: /app/config.yml
2025-12-12 21:24:51,152 - INFO - Output directory: /app/documents/eluhrs@gmail.com/north-01-3a713c5e
2025-12-12 21:24:51,152 - INFO - ----------------------------------------
2025-12-12 21:24:51,154 - INFO - 
Subscript.py initialized segmentation provider: historical-manuscript
2025-12-12 21:24:51,155 - INFO - Subscript.py Initialized transcription provider: gemini-pro-3
2025-12-12 21:24:51,156 - INFO - Processing 1 files...
2025-12-12 21:24:51,156 - INFO - Processing /app/documents/eluhrs@gmail.com/north-01-3a713c5e/north-01.jpg...
2025-12-12 21:24:51,157 - INFO - Segmenting /app/documents/eluhrs@gmail.com/north-01-3a713c5e/north-01.jpg with Kraken...
2025-12-12 21:24:51,158 - INFO - Loading segmentation model from /usr/local/lib/python3.10/site-packages/kraken/blla.mlmodel...
2025-12-12 21:24:51,206 - INFO - Task 3 received options raw: {"transcription":{"temperature":0.2}}
2025-12-12 21:24:51,207 - INFO - Task 3 parsed options: {'transcription': {'temperature': 0.2}}
2025-12-12 21:24:51,209 - INFO - TASK START: Processing north-02.jpg (ID: 3)
2025-12-12 21:24:51,210 - INFO - Command: subscript historical-manuscript gemini-pro-3 /app/documents/eluhrs@gmail.com/north-02-3858c708/north-02.jpg --output /app/documents/eluhrs@gmail.com/north-02-3858c708
2025-12-12 21:24:51,218 - INFO - Running from: /app
2025-12-12 21:24:51,218 - INFO - Using config: /app/config.yml
2025-12-12 21:24:51,219 - INFO - Output directory: /app/documents/eluhrs@gmail.com/north-02-3858c708
2025-12-12 21:24:51,219 - INFO - ----------------------------------------
2025-12-12 21:24:51,727 - INFO - Segmenting /app/documents/eluhrs@gmail.com/north-01-3a713c5e/north-01.jpg
2025-12-12 21:24:54,545 - INFO - 
Subscript.py initialized segmentation provider: historical-manuscript
2025-12-12 21:24:54,546 - INFO - Subscript.py Initialized transcription provider: gemini-pro-3
2025-12-12 21:24:54,547 - INFO - Processing 1 files...
2025-12-12 21:24:54,547 - INFO - Processing /app/documents/eluhrs@gmail.com/north-02-3858c708/north-02.jpg...
2025-12-12 21:24:54,548 - INFO - Segmenting /app/documents/eluhrs@gmail.com/north-02-3858c708/north-02.jpg with Kraken...
2025-12-12 21:24:54,551 - INFO - Loading segmentation model from /usr/local/lib/python3.10/site-packages/kraken/blla.mlmodel...
2025-12-12 21:24:55,077 - INFO - Segmenting /app/documents/eluhrs@gmail.com/north-02-3858c708/north-02.jpg
2025-12-12 21:24:57,513 - INFO - Vectorizing regions
2025-12-12 21:24:57,625 - INFO - Vectorizing regions
2025-12-12 21:24:57,732 - INFO - Vectorizing baselines
2025-12-12 21:24:59,608 - INFO - Vectorizing regions
2025-12-12 21:24:59,711 - INFO - Vectorizing regions
2025-12-12 21:24:59,815 - INFO - Vectorizing baselines
2025-12-12 21:25:03,097 - INFO - Compute reading order on 18 lines in lr direction
2025-12-12 21:25:03,100 - INFO - Perform topological sort on partially ordered lines
2025-12-12 21:25:03,103 - INFO - Compute reading order on 1 lines in lr direction
2025-12-12 21:25:03,104 - INFO - Perform topological sort on partially ordered lines
2025-12-12 21:25:03,111 - INFO - Found 18 lines.
2025-12-12 21:25:03,115 - INFO - Initializing Gemini model: gemini-3-pro-preview
2025-12-12 21:25:03,127 - INFO - Annotating 18 regions for Visual Tagging...
2025-12-12 21:25:03,155 - INFO - Saved debug image to /app/documents/eluhrs@gmail.com/north-01-3a713c5e/north-01-debug.jpg
2025-12-12 21:25:03,156 - INFO - Sending annotated image to Gemini...
2025-12-12 21:25:03,821 - INFO - Thumbnail missing for doc 2, attempting to regenerate from /app/documents/eluhrs@gmail.com/north-01-3a713c5e/north-01-debug.jpg
2025-12-12 21:25:05,209 - INFO - Compute reading order on 15 lines in lr direction
2025-12-12 21:25:05,210 - INFO - Perform topological sort on partially ordered lines
2025-12-12 21:25:05,210 - INFO - Compute reading order on 1 lines in lr direction
2025-12-12 21:25:05,210 - INFO - Perform topological sort on partially ordered lines
2025-12-12 21:25:05,210 - INFO - Compute reading order on 2 lines in lr direction
2025-12-12 21:25:05,211 - INFO - Perform topological sort on partially ordered lines
2025-12-12 21:25:05,213 - INFO - Found 16 lines.
2025-12-12 21:25:05,214 - INFO - Initializing Gemini model: gemini-3-pro-preview
2025-12-12 21:25:05,224 - INFO - Annotating 16 regions for Visual Tagging...
2025-12-12 21:25:05,251 - INFO - Saved debug image to /app/documents/eluhrs@gmail.com/north-02-3858c708/north-02-debug.jpg
2025-12-12 21:25:05,252 - INFO - Sending annotated image to Gemini...
2025-12-12 21:25:05,794 - INFO - Thumbnail missing for doc 3, attempting to regenerate from /app/documents/eluhrs@gmail.com/north-02-3858c708/north-02-debug.jpg
2025-12-12 21:25:36,772 - INFO - Received JSON response from Gemini.
2025-12-12 21:25:36,782 - ERROR - Failed to generate PDF: [Errno 2] No such file or directory: '/app/documents/eluhrs@gmail.com/rock01-bd22c7e1/rock01.jpg'
2025-12-12 21:25:36,783 - ERROR - Failed to process /app/documents/eluhrs@gmail.com/rock01-bd22c7e1/rock01.jpg: [Errno 2] No such file or directory: '/app/documents/eluhrs@gmail.com/rock01-bd22c7e1/rock01.jpg'
2025-12-12 21:25:36,789 - INFO - SUBSCRIPT OUTPUT for 1:
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/subscript/__main__.py", line 300, in main
    output_engine.generate(image_path, regions, config.get('output_dir', 'output'), config)
  File "/usr/local/lib/python3.10/site-packages/subscript/modules/output.py", line 32, in generate
    self._generate_xml(image_path, regions, xml_path)
  File "/usr/local/lib/python3.10/site-packages/subscript/modules/output.py", line 52, in _generate_xml
    with Image.open(image_path) as im:
  File "/usr/local/lib/python3.10/site-packages/PIL/Image.py", line 3493, in open
    fp = builtins.open(filename, "rb")
FileNotFoundError: [Errno 2] No such file or directory: '/app/documents/eluhrs@gmail.com/rock01-bd22c7e1/rock01.jpg'

2025-12-12 21:25:36,791 - WARNING - Thumbnail missing for rock01.jpg, regenerating...
2025-12-12 21:25:36,792 - ERROR - Error generating thumbnail for /app/documents/eluhrs@gmail.com/rock01-bd22c7e1/rock01.jpg: [Errno 2] No such file or directory: '/app/documents/eluhrs@gmail.com/rock01-bd22c7e1/rock01.jpg'
2025-12-12 21:25:36,793 - INFO - Task Complete: rock01.jpg
2025-12-12 21:25:36,799 - WARNING - Document 1 deleted during processing. Suppressing error.
2025-12-12 21:25:36,807 - INFO - Task server.tasks.process_document_task[2448a15e-cd8d-4d1e-92ec-170db4615cf7] succeeded in 58.395470276940614s: None
2025-12-12 21:29:07,579 - INFO - Received JSON response from Gemini.
2025-12-12 21:29:07,588 - ERROR - Failed to generate PDF: [Errno 2] No such file or directory: '/app/documents/eluhrs@gmail.com/north-02-3858c708/north-02.jpg'
2025-12-12 21:29:07,590 - ERROR - Failed to process /app/documents/eluhrs@gmail.com/north-02-3858c708/north-02.jpg: [Errno 2] No such file or directory: '/app/documents/eluhrs@gmail.com/north-02-3858c708/north-02.jpg'
2025-12-12 21:29:07,596 - INFO - SUBSCRIPT OUTPUT for 3:
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/subscript/__main__.py", line 300, in main
    output_engine.generate(image_path, regions, config.get('output_dir', 'output'), config)
  File "/usr/local/lib/python3.10/site-packages/subscript/modules/output.py", line 32, in generate
    self._generate_xml(image_path, regions, xml_path)
  File "/usr/local/lib/python3.10/site-packages/subscript/modules/output.py", line 52, in _generate_xml
    with Image.open(image_path) as im:
  File "/usr/local/lib/python3.10/site-packages/PIL/Image.py", line 3493, in open
    fp = builtins.open(filename, "rb")
FileNotFoundError: [Errno 2] No such file or directory: '/app/documents/eluhrs@gmail.com/north-02-3858c708/north-02.jpg'

2025-12-12 21:29:07,599 - WARNING - Thumbnail missing for north-02.jpg, regenerating...
2025-12-12 21:29:07,600 - ERROR - Error generating thumbnail for /app/documents/eluhrs@gmail.com/north-02-3858c708/north-02.jpg: [Errno 2] No such file or directory: '/app/documents/eluhrs@gmail.com/north-02-3858c708/north-02.jpg'
2025-12-12 21:29:07,600 - INFO - Task Complete: north-02.jpg
2025-12-12 21:29:07,613 - WARNING - Document 3 deleted during processing. Suppressing error.
2025-12-12 21:29:07,626 - INFO - Task server.tasks.process_document_task[bfa15dc9-f0c5-4820-a1f4-a974fdae4051] succeeded in 256.4676382410107s: None
2025-12-12 21:29:50,964 - INFO - JOB SUBMITTED: User eluhrs@gmail.com uploaded rock01.jpg
2025-12-12 21:29:50,990 - INFO - Task server.tasks.process_document_task[d441db49-b396-4a12-ae5f-5935660140a0] received
2025-12-12 21:29:51,014 - INFO - Task 1 received options raw: {"transcription":{"temperature":0.2}}
2025-12-12 21:29:51,016 - INFO - Task 1 parsed options: {'transcription': {'temperature': 0.2}}
2025-12-12 21:29:51,018 - INFO - TASK START: Processing rock01.jpg (ID: 1)
2025-12-12 21:29:51,018 - INFO - Command: subscript historical-manuscript gemini-pro-3 /app/documents/eluhrs@gmail.com/rock01-51ec8ba1/rock01.jpg --output /app/documents/eluhrs@gmail.com/rock01-51ec8ba1
2025-12-12 21:29:51,032 - INFO - Running from: /app
2025-12-12 21:29:51,032 - INFO - Using config: /app/config.yml
2025-12-12 21:29:51,032 - INFO - Output directory: /app/documents/eluhrs@gmail.com/rock01-51ec8ba1
2025-12-12 21:29:51,033 - INFO - ----------------------------------------
2025-12-12 21:29:51,034 - INFO - 
Subscript.py initialized segmentation provider: historical-manuscript
2025-12-12 21:29:51,035 - INFO - Subscript.py Initialized transcription provider: gemini-pro-3
2025-12-12 21:29:51,035 - INFO - Processing 1 files...
2025-12-12 21:29:51,036 - INFO - Processing /app/documents/eluhrs@gmail.com/rock01-51ec8ba1/rock01.jpg...
2025-12-12 21:29:51,036 - INFO - Segmenting /app/documents/eluhrs@gmail.com/rock01-51ec8ba1/rock01.jpg with Kraken...
2025-12-12 21:29:51,039 - INFO - Loading segmentation model from /usr/local/lib/python3.10/site-packages/kraken/blla.mlmodel...
2025-12-12 21:29:51,588 - INFO - Segmenting /app/documents/eluhrs@gmail.com/rock01-51ec8ba1/rock01.jpg
2025-12-12 21:29:54,808 - INFO - Received JSON response from Gemini.
2025-12-12 21:29:54,816 - ERROR - Failed to generate PDF: [Errno 2] No such file or directory: '/app/documents/eluhrs@gmail.com/north-01-3a713c5e/north-01.jpg'
2025-12-12 21:29:54,818 - ERROR - Failed to process /app/documents/eluhrs@gmail.com/north-01-3a713c5e/north-01.jpg: [Errno 2] No such file or directory: '/app/documents/eluhrs@gmail.com/north-01-3a713c5e/north-01.jpg'
2025-12-12 21:29:54,824 - INFO - SUBSCRIPT OUTPUT for 2:
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/subscript/__main__.py", line 300, in main
    output_engine.generate(image_path, regions, config.get('output_dir', 'output'), config)
  File "/usr/local/lib/python3.10/site-packages/subscript/modules/output.py", line 32, in generate
    self._generate_xml(image_path, regions, xml_path)
  File "/usr/local/lib/python3.10/site-packages/subscript/modules/output.py", line 52, in _generate_xml
    with Image.open(image_path) as im:
  File "/usr/local/lib/python3.10/site-packages/PIL/Image.py", line 3493, in open
    fp = builtins.open(filename, "rb")
FileNotFoundError: [Errno 2] No such file or directory: '/app/documents/eluhrs@gmail.com/north-01-3a713c5e/north-01.jpg'

2025-12-12 21:29:54,828 - WARNING - Thumbnail missing for north-01.jpg, regenerating...
2025-12-12 21:29:54,829 - ERROR - Error generating thumbnail for /app/documents/eluhrs@gmail.com/north-01-3a713c5e/north-01.jpg: [Errno 2] No such file or directory: '/app/documents/eluhrs@gmail.com/north-01-3a713c5e/north-01.jpg'
2025-12-12 21:29:54,830 - INFO - Task Complete: north-01.jpg
2025-12-12 21:29:54,840 - WARNING - Document 2 deleted during processing. Suppressing error.
2025-12-12 21:29:54,847 - INFO - Task server.tasks.process_document_task[147d01b3-5a77-447d-a620-f64bd254fce4] succeeded in 303.7152875959873s: None
2025-12-12 21:29:55,831 - INFO - Vectorizing regions
2025-12-12 21:29:56,027 - INFO - Vectorizing regions
2025-12-12 21:29:56,217 - INFO - Vectorizing baselines
2025-12-12 21:30:04,823 - INFO - Compute reading order on 23 lines in lr direction
2025-12-12 21:30:04,829 - INFO - Perform topological sort on partially ordered lines
2025-12-12 21:30:04,833 - INFO - Compute reading order on 1 lines in lr direction
2025-12-12 21:30:04,833 - INFO - Perform topological sort on partially ordered lines
2025-12-12 21:30:04,835 - INFO - Compute reading order on 2 lines in lr direction
2025-12-12 21:30:04,837 - INFO - Perform topological sort on partially ordered lines
2025-12-12 21:30:04,840 - INFO - Found 24 lines.
2025-12-12 21:30:04,842 - INFO - Initializing Gemini model: gemini-3-pro-preview
2025-12-12 21:30:05,015 - INFO - Resized image to (2289, 3000)
2025-12-12 21:30:05,025 - INFO - Annotating 24 regions for Visual Tagging...
2025-12-12 21:30:05,125 - INFO - Saved debug image to /app/documents/eluhrs@gmail.com/rock01-51ec8ba1/rock01-debug.jpg
2025-12-12 21:30:05,126 - INFO - Sending annotated image to Gemini...
2025-12-12 21:30:07,407 - INFO - Created parent thumbnail at /app/documents/eluhrs@gmail.com/testadsfadsf-c5fe1748/testadsfadsf-thumb.jpg
2025-12-12 21:30:07,415 - INFO - Task server.tasks.process_batch_task[4c547729-425b-4996-9c3d-c03c989bfac5] received
2025-12-12 21:30:07,438 - INFO - BATCH TASK START: Parent testadsfadsf.pdf (ID: 2)
2025-12-12 21:30:07,438 - INFO - Command: subscript historical-manuscript gemini-pro-3 /app/documents/eluhrs@gmail.com/testadsfadsf-c5fe1748/north-01.jpg /app/documents/eluhrs@gmail.com/testadsfadsf-c5fe1748/north-02.jpg --combine /app/documents/eluhrs@gmail.com/testadsfadsf-c5fe1748/testadsfadsf.pdf --output /app/documents/eluhrs@gmail.com/testadsfadsf-c5fe1748
2025-12-12 21:30:07,447 - INFO - Running from: /app
2025-12-12 21:30:07,447 - INFO - Using config: /app/config.yml
2025-12-12 21:30:07,447 - INFO - Output directory: /app/documents/eluhrs@gmail.com/testadsfadsf-c5fe1748
2025-12-12 21:30:07,448 - INFO - ----------------------------------------
2025-12-12 21:30:07,449 - INFO - 
Subscript.py initialized segmentation provider: historical-manuscript
2025-12-12 21:30:07,449 - INFO - Subscript.py Initialized transcription provider: gemini-pro-3
2025-12-12 21:30:07,450 - INFO - Processing 2 files...
2025-12-12 21:30:07,450 - INFO - Processing /app/documents/eluhrs@gmail.com/testadsfadsf-c5fe1748/north-01.jpg...
2025-12-12 21:30:07,451 - INFO - Segmenting /app/documents/eluhrs@gmail.com/testadsfadsf-c5fe1748/north-01.jpg with Kraken...
2025-12-12 21:30:07,452 - INFO - Loading segmentation model from /usr/local/lib/python3.10/site-packages/kraken/blla.mlmodel...
2025-12-12 21:30:07,992 - INFO - Segmenting /app/documents/eluhrs@gmail.com/testadsfadsf-c5fe1748/north-01.jpg
2025-12-12 21:30:08,478 - INFO - Thumbnail missing for doc 1, attempting to regenerate from /app/documents/eluhrs@gmail.com/rock01-51ec8ba1/rock01-debug.jpg
2025-12-12 21:30:11,619 - INFO - Vectorizing regions
2025-12-12 21:30:11,757 - INFO - Vectorizing regions
2025-12-12 21:30:11,892 - INFO - Vectorizing baselines
2025-12-12 21:30:18,504 - INFO - Compute reading order on 18 lines in lr direction
2025-12-12 21:30:18,506 - INFO - Perform topological sort on partially ordered lines
2025-12-12 21:30:18,506 - INFO - Compute reading order on 1 lines in lr direction
2025-12-12 21:30:18,506 - INFO - Perform topological sort on partially ordered lines
2025-12-12 21:30:18,508 - INFO - Found 18 lines.
2025-12-12 21:30:18,509 - INFO - Initializing Gemini model: gemini-3-pro-preview
2025-12-12 21:30:18,524 - INFO - Annotating 18 regions for Visual Tagging...
2025-12-12 21:30:18,561 - INFO - Saved debug image to /app/documents/eluhrs@gmail.com/testadsfadsf-c5fe1748/north-01-debug.jpg
2025-12-12 21:30:18,561 - INFO - Sending annotated image to Gemini...
2025-12-12 21:31:40,085 - INFO - Received JSON response from Gemini.
2025-12-12 21:31:40,507 - INFO - SUBSCRIPT OUTPUT for 1:

------------- gemini-pro-3 output for rock01.jpg -------------
74
Panama, Dec. 29. 1874
My dear Capt. Green,-
Your favor by Dr. Boyd duly came.
We observed our latitude stars on Sunday night, and
of course last night again. The instrument behaves well.
Yesterday morning (before your letter came) & this morn.
we observed for azimuth & variation. Though heavily on
our minds we couldn't accomplish it earlier, while the
longitude work lasted. On Sat. night we observed Z.P. stars.
I will enclose your signals. I think our work is a success.
To-day Mr. Spencer dismounts the telegraph line. We hope to
un
come over on Sat. Morn. - I do not think the pier is steady,
I think some one hit an arm of the instrument unconsciously
each time I found it out of meridian.
The vernier trouble is due to that arm making an angle
with the vertical. I am convinced that most of the register
troubles are due to bad quality of the fillet paper. It is un-
equal thickness at two edges and also varies in thickness
lengthwise, so as to require frequent readjustment of
rollers & stylet.
Very truly Yrs.
Miles Rock
----------------------------------------------------------------

Saved PageXML to /app/documents/eluhrs@gmail.com/rock01-51ec8ba1/rock01.xml
Saved TXT to /app/documents/eluhrs@gmail.com/rock01-51ec8ba1/rock01.txt
Saved PDF to /app/documents/eluhrs@gmail.com/rock01-51ec8ba1/rock01.pdf

Time:   00:01:49
Input:  1295 tokens
Output: 420 tokens
Cost:   $0.0076

----------------------------------------------------------------


2025-12-12 21:31:40,508 - INFO - Task Complete: rock01.jpg
2025-12-12 21:31:40,528 - INFO - Task server.tasks.process_document_task[d441db49-b396-4a12-ae5f-5935660140a0] succeeded in 109.53100171708502s: None
2025-12-12 21:32:17,943 - INFO - Received JSON response from Gemini.
2025-12-12 21:32:18,139 - INFO - Processing /app/documents/eluhrs@gmail.com/testadsfadsf-c5fe1748/north-02.jpg...
2025-12-12 21:32:18,139 - INFO - Segmenting /app/documents/eluhrs@gmail.com/testadsfadsf-c5fe1748/north-02.jpg with Kraken...
2025-12-12 21:32:18,140 - INFO - Loading segmentation model from /usr/local/lib/python3.10/site-packages/kraken/blla.mlmodel...
2025-12-12 21:32:18,719 - INFO - Segmenting /app/documents/eluhrs@gmail.com/testadsfadsf-c5fe1748/north-02.jpg
2025-12-12 21:32:21,980 - INFO - Vectorizing regions
2025-12-12 21:32:22,114 - INFO - Vectorizing regions
2025-12-12 21:32:22,240 - INFO - Vectorizing baselines
2025-12-12 21:32:28,563 - INFO - Compute reading order on 15 lines in lr direction
2025-12-12 21:32:28,565 - INFO - Perform topological sort on partially ordered lines
2025-12-12 21:32:28,565 - INFO - Compute reading order on 1 lines in lr direction
2025-12-12 21:32:28,565 - INFO - Perform topological sort on partially ordered lines
2025-12-12 21:32:28,565 - INFO - Compute reading order on 2 lines in lr direction
2025-12-12 21:32:28,566 - INFO - Perform topological sort on partially ordered lines
2025-12-12 21:32:28,567 - INFO - Found 16 lines.
2025-12-12 21:32:28,568 - INFO - Initializing Gemini model: gemini-3-pro-preview
2025-12-12 21:32:28,583 - INFO - Annotating 16 regions for Visual Tagging...
2025-12-12 21:32:28,617 - INFO - Saved debug image to /app/documents/eluhrs@gmail.com/testadsfadsf-c5fe1748/north-02-debug.jpg
2025-12-12 21:32:28,618 - INFO - Sending annotated image to Gemini...
2025-12-12 21:34:06,174 - INFO - Received JSON response from Gemini.
2025-12-12 21:34:06,341 - INFO - Combining 2 PDFs into /app/documents/eluhrs@gmail.com/testadsfadsf-c5fe1748/testadsfadsf.pdf...
2025-12-12 21:34:06,402 - INFO - Saved Combined PDF to /app/documents/eluhrs@gmail.com/testadsfadsf-c5fe1748/testadsfadsf.pdf
2025-12-12 21:34:06,402 - INFO - Combining 2 TXTs into /app/documents/eluhrs@gmail.com/testadsfadsf-c5fe1748/testadsfadsf.txt...
2025-12-12 21:34:06,405 - INFO - Saved Combined TXT to /app/documents/eluhrs@gmail.com/testadsfadsf-c5fe1748/testadsfadsf.txt
2025-12-12 21:34:06,405 - INFO - BATCH OUTPUT:

------------- gemini-pro-3 output for north-01.jpg -------------
glad aspects were present (confirming her
Maies Tie wth THEODOSIES dylligence, ARETAPHE-
LIS constancie, and ANTIGONVS clemencie)
setlinge them selues euar sence, in her Princelie
brest: as ye rarenes and greatnes of her Gracis
vertuse declare . Whom God presaruid from
formar perell, to rule & reygne ouer us, in
this last leaden adge: wherin Iniquitie hath
sought to surmount ye glorie of his Deitie, and
so presumed to suppresse his professors: As if
ye
Shylde of her Souerayntie (for worldlie
Quiens
Ma:tie is ye per force) did not protect his poore membars a=
fect protector mong us: What error wold not inuade us?
What Scisme or sect wold not assawte us?
What treason wold not entrapp us? When
all
----------------------------------------------------------------

Saved PageXML to /app/documents/eluhrs@gmail.com/testadsfadsf-c5fe1748/north-01.xml
Saved TXT to /app/documents/eluhrs@gmail.com/testadsfadsf-c5fe1748/north-01.txt
Saved PDF to /app/documents/eluhrs@gmail.com/testadsfadsf-c5fe1748/north-01.pdf

Time:   00:02:10
Input:  1285 tokens
Output: 338 tokens
Cost:   $0.0066

----------------------------------------------------------------


------------- gemini-pro-3 output for north-02.jpg -------------
all y^e euells y^t may be, ar crept so near vntous.
Zeland is full, France not free, & Scotland
vnclensid: the Common people spoyled, theyr
Commonwelths racked, theyr Nobilitie
murtherid, the Councell contemnid and
theyr Kyngs disobeyed: For dissention, sedici=
on, Ciuell slaughtar, & rebellion, is y^e onlie
argument entreatid of among them.
If therfore it pleasid her Hyghnes, to vse y^e
benefit of present tyme: to bend her browe
vpon y^e disobedient: to hold vp her threatning
hand ouer them, and to aduance her pusant
arme towards them; the verie shadoe of her
sworde, wold feare and vanquyshe y^e prow=
dist of them.
but
----------------------------------------------------------------

Saved PageXML to /app/documents/eluhrs@gmail.com/testadsfadsf-c5fe1748/north-02.xml
Saved TXT to /app/documents/eluhrs@gmail.com/testadsfadsf-c5fe1748/north-02.txt
Saved PDF to /app/documents/eluhrs@gmail.com/testadsfadsf-c5fe1748/north-02.pdf

Time:   00:01:48
Input:  1273 tokens
Output: 293 tokens
Cost:   $0.0061

Total time:   00:03:58
Total input:  2558 tokens
Total output: 631 tokens
Total cost:   $0.0127

----------------------------------------------------------------


2025-12-12 21:34:06,439 - ERROR - Task server.tasks.process_batch_task[4c547729-425b-4996-9c3d-c03c989bfac5] raised unexpected: NameError("name 'doc_id' is not defined")
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
  File "/app/server/tasks.py", line 316, in process_batch_task
    doc = db.query(Document).filter(Document.id == doc_id).first()
NameError: name 'doc_id' is not defined
2025-12-12 23:59:42,861 - INFO - SYSTEM: Server module initialized at 2025-12-12 23:59:42.860980
2025-12-12 23:59:57,307 - INFO - SYSTEM: Server module initialized at 2025-12-12 23:59:57.307711
2025-12-13 00:00:23,292 - INFO - SYSTEM: Server module initialized at 2025-12-13 00:00:23.292118
2025-12-13 00:00:57,885 - INFO - JOB SUBMITTED: User eluhrs@gmail.com uploaded rock01.jpg
2025-12-13 00:00:58,031 - INFO - Task server.tasks.process_document_task[25f18625-b7fc-4cb9-88f8-e5294043b52d] received
2025-12-13 00:00:58,059 - INFO - Task 1 received options raw: {"transcription":{"temperature":0.2}}
2025-12-13 00:00:58,061 - INFO - Task 1 parsed options: {'transcription': {'temperature': 0.2}}
2025-12-13 00:00:58,063 - INFO - TASK START: Processing rock01.jpg (ID: 1)
2025-12-13 00:00:58,063 - INFO - Command: subscript historical-manuscript gemini-pro-3 /app/documents/eluhrs@gmail.com/rock01-059581ca/rock01.jpg --output /app/documents/eluhrs@gmail.com/rock01-059581ca
2025-12-13 00:00:58,077 - INFO - Running from: /app
2025-12-13 00:00:58,077 - INFO - Using config: /app/config.yml
2025-12-13 00:00:58,078 - INFO - Output directory: /app/documents/eluhrs@gmail.com/rock01-059581ca
2025-12-13 00:00:58,078 - INFO - ----------------------------------------
2025-12-13 00:00:58,081 - INFO - 
Subscript.py initialized segmentation provider: historical-manuscript
2025-12-13 00:00:58,081 - INFO - Subscript.py Initialized transcription provider: gemini-pro-3
2025-12-13 00:00:58,082 - INFO - Processing 1 files...
2025-12-13 00:00:58,083 - INFO - Processing /app/documents/eluhrs@gmail.com/rock01-059581ca/rock01.jpg...
2025-12-13 00:00:58,083 - INFO - Segmenting /app/documents/eluhrs@gmail.com/rock01-059581ca/rock01.jpg with Kraken...
2025-12-13 00:00:58,086 - INFO - Loading segmentation model from /usr/local/lib/python3.10/site-packages/kraken/blla.mlmodel...
2025-12-13 00:00:58,638 - INFO - Segmenting /app/documents/eluhrs@gmail.com/rock01-059581ca/rock01.jpg
2025-12-13 00:01:01,627 - INFO - Vectorizing regions
2025-12-13 00:01:01,824 - INFO - Vectorizing regions
2025-12-13 00:01:02,010 - INFO - Vectorizing baselines
2025-12-13 00:01:10,211 - INFO - JOB SUBMITTED: User eluhrs@gmail.com uploaded north-01.jpg
2025-12-13 00:01:10,213 - INFO - Task server.tasks.process_document_task[2573f2fa-c211-4810-a4fa-d28e0bba8f5e] received
2025-12-13 00:01:10,346 - INFO - JOB SUBMITTED: User eluhrs@gmail.com uploaded north-02.jpg
2025-12-13 00:01:10,327 - INFO - Task 2 received options raw: {"transcription":{"temperature":0.2}}
2025-12-13 00:01:10,359 - INFO - Task 2 parsed options: {'transcription': {'temperature': 0.2}}
2025-12-13 00:01:10,367 - INFO - Task server.tasks.process_document_task[e6ec5d12-237a-4484-a675-86950d674dfb] received
2025-12-13 00:01:10,366 - INFO - TASK START: Processing north-01.jpg (ID: 2)
2025-12-13 00:01:10,368 - INFO - Command: subscript historical-manuscript gemini-pro-3 /app/documents/eluhrs@gmail.com/north-01-eae4f632/north-01.jpg --output /app/documents/eluhrs@gmail.com/north-01-eae4f632
2025-12-13 00:01:10,387 - INFO - Running from: /app
2025-12-13 00:01:10,387 - INFO - Using config: /app/config.yml
2025-12-13 00:01:10,388 - INFO - Output directory: /app/documents/eluhrs@gmail.com/north-01-eae4f632
2025-12-13 00:01:10,388 - INFO - ----------------------------------------
2025-12-13 00:01:10,391 - INFO - 
Subscript.py initialized segmentation provider: historical-manuscript
2025-12-13 00:01:10,391 - INFO - Subscript.py Initialized transcription provider: gemini-pro-3
2025-12-13 00:01:10,392 - INFO - Processing 1 files...
2025-12-13 00:01:10,392 - INFO - Processing /app/documents/eluhrs@gmail.com/north-01-eae4f632/north-01.jpg...
2025-12-13 00:01:10,394 - INFO - Segmenting /app/documents/eluhrs@gmail.com/north-01-eae4f632/north-01.jpg with Kraken...
2025-12-13 00:01:10,397 - INFO - Loading segmentation model from /usr/local/lib/python3.10/site-packages/kraken/blla.mlmodel...
2025-12-13 00:01:10,404 - INFO - Task 3 received options raw: {"transcription":{"temperature":0.2}}
2025-12-13 00:01:10,407 - INFO - Task 3 parsed options: {'transcription': {'temperature': 0.2}}
2025-12-13 00:01:10,409 - INFO - TASK START: Processing north-02.jpg (ID: 3)
2025-12-13 00:01:10,409 - INFO - Command: subscript historical-manuscript gemini-pro-3 /app/documents/eluhrs@gmail.com/north-02-e4f47e33/north-02.jpg --output /app/documents/eluhrs@gmail.com/north-02-e4f47e33
2025-12-13 00:01:10,422 - INFO - Running from: /app
2025-12-13 00:01:10,423 - INFO - Using config: /app/config.yml
2025-12-13 00:01:10,423 - INFO - Output directory: /app/documents/eluhrs@gmail.com/north-02-e4f47e33
2025-12-13 00:01:10,423 - INFO - ----------------------------------------
2025-12-13 00:01:10,425 - INFO - 
Subscript.py initialized segmentation provider: historical-manuscript
2025-12-13 00:01:10,425 - INFO - Subscript.py Initialized transcription provider: gemini-pro-3
2025-12-13 00:01:10,425 - INFO - Processing 1 files...
2025-12-13 00:01:10,426 - INFO - Processing /app/documents/eluhrs@gmail.com/north-02-e4f47e33/north-02.jpg...
2025-12-13 00:01:10,426 - INFO - Segmenting /app/documents/eluhrs@gmail.com/north-02-e4f47e33/north-02.jpg with Kraken...
2025-12-13 00:01:10,428 - INFO - Loading segmentation model from /usr/local/lib/python3.10/site-packages/kraken/blla.mlmodel...
2025-12-13 00:01:11,032 - INFO - Compute reading order on 23 lines in lr direction
2025-12-13 00:01:11,034 - INFO - Perform topological sort on partially ordered lines
2025-12-13 00:01:11,043 - INFO - Compute reading order on 1 lines in lr direction
2025-12-13 00:01:11,048 - INFO - Perform topological sort on partially ordered lines
2025-12-13 00:01:11,056 - INFO - Compute reading order on 2 lines in lr direction
2025-12-13 00:01:11,058 - INFO - Perform topological sort on partially ordered lines
2025-12-13 00:01:11,065 - INFO - Found 24 lines.
2025-12-13 00:01:11,073 - INFO - Initializing Gemini model: gemini-3-pro-preview
2025-12-13 00:01:11,244 - INFO - Resized image to (2289, 3000)
2025-12-13 00:01:11,253 - INFO - Annotating 24 regions for Visual Tagging...
2025-12-13 00:01:11,338 - INFO - Segmenting /app/documents/eluhrs@gmail.com/north-01-eae4f632/north-01.jpg
2025-12-13 00:01:11,353 - INFO - Saved debug image to /app/documents/eluhrs@gmail.com/rock01-059581ca/rock01-debug.jpg
2025-12-13 00:01:11,353 - INFO - Sending annotated image to Gemini...
2025-12-13 00:01:11,407 - INFO - Segmenting /app/documents/eluhrs@gmail.com/north-02-e4f47e33/north-02.jpg
2025-12-13 00:01:20,591 - INFO - Vectorizing regions
2025-12-13 00:01:20,723 - INFO - Vectorizing regions
2025-12-13 00:01:20,809 - INFO - Vectorizing regions
2025-12-13 00:01:20,859 - INFO - Vectorizing baselines
2025-12-13 00:01:20,948 - INFO - Vectorizing regions
2025-12-13 00:01:21,085 - INFO - Vectorizing baselines
2025-12-13 00:01:27,550 - INFO - Compute reading order on 15 lines in lr direction
2025-12-13 00:01:27,550 - INFO - Perform topological sort on partially ordered lines
2025-12-13 00:01:27,551 - INFO - Compute reading order on 1 lines in lr direction
2025-12-13 00:01:27,551 - INFO - Perform topological sort on partially ordered lines
2025-12-13 00:01:27,552 - INFO - Compute reading order on 2 lines in lr direction
2025-12-13 00:01:27,553 - INFO - Perform topological sort on partially ordered lines
2025-12-13 00:01:27,556 - INFO - Found 16 lines.
2025-12-13 00:01:27,557 - INFO - Initializing Gemini model: gemini-3-pro-preview
2025-12-13 00:01:27,570 - INFO - Annotating 16 regions for Visual Tagging...
2025-12-13 00:01:27,605 - INFO - Saved debug image to /app/documents/eluhrs@gmail.com/north-02-e4f47e33/north-02-debug.jpg
2025-12-13 00:01:27,605 - INFO - Sending annotated image to Gemini...
2025-12-13 00:01:28,286 - INFO - Compute reading order on 18 lines in lr direction
2025-12-13 00:01:28,287 - INFO - Perform topological sort on partially ordered lines
2025-12-13 00:01:28,287 - INFO - Compute reading order on 1 lines in lr direction
2025-12-13 00:01:28,288 - INFO - Perform topological sort on partially ordered lines
2025-12-13 00:01:28,291 - INFO - Found 18 lines.
2025-12-13 00:01:28,292 - INFO - Initializing Gemini model: gemini-3-pro-preview
2025-12-13 00:01:28,308 - INFO - Annotating 18 regions for Visual Tagging...
2025-12-13 00:01:28,346 - INFO - Saved debug image to /app/documents/eluhrs@gmail.com/north-01-eae4f632/north-01-debug.jpg
2025-12-13 00:01:28,347 - INFO - Sending annotated image to Gemini...
2025-12-13 00:02:16,858 - INFO - Received JSON response from Gemini.
2025-12-13 00:02:17,241 - INFO - SUBSCRIPT OUTPUT for 1:

------------- gemini-pro-3 output for rock01.jpg -------------
74
Panama, Dec. 29. 1874
My dear Capt. Green,-
Your favor by Dr. Boyd duly came.
We observed our latitude stars on Sunday night, and
of course last night again. The instrument behaves well.
Yesterday morning (before your letter came) & this morn,
we observed for azimuth & variation. Though heavily on
our minds we couldn't accomplish it earlier, while the
longitude work lasted. On Sat. night we observed 24 stars.
I will enclose your signals. I think our work is a success.
To-day Mr. Spencer dismounts the telegraph line. We hope to
un
come over on Sat. Morn. - I do not think the pier is steady,
I think some one hit an arm of the instrument unconsciously
each time I found it out of meridian.
The vernier trouble is due to that arm making an angle
with the vertical. I am convinced that most of the register
troubles are due to bad quality of the fillet paper. It is un=
equal thickness at two edges and also varies in thickness
lengthwise, so as to require frequent readjustment of
rollers & stylet.
Very truly Yrs.
Miles Rock
----------------------------------------------------------------

Saved PageXML to /app/documents/eluhrs@gmail.com/rock01-059581ca/rock01.xml
Saved TXT to /app/documents/eluhrs@gmail.com/rock01-059581ca/rock01.txt
Saved PDF to /app/documents/eluhrs@gmail.com/rock01-059581ca/rock01.pdf

Time:   00:01:19
Input:  1295 tokens
Output: 418 tokens
Cost:   $0.0076

----------------------------------------------------------------


2025-12-13 00:02:17,242 - WARNING - Thumbnail missing for rock01.jpg, regenerating...
2025-12-13 00:02:17,279 - INFO - Task Complete: rock01.jpg
2025-12-13 00:02:17,287 - INFO - Task server.tasks.process_document_task[25f18625-b7fc-4cb9-88f8-e5294043b52d] succeeded in 79.24848928593565s: None
2025-12-13 00:02:30,104 - INFO - Received JSON response from Gemini.
2025-12-13 00:02:30,275 - INFO - SUBSCRIPT OUTPUT for 3:

------------- gemini-pro-3 output for north-02.jpg -------------
all ye euells yt may be, ar crept so near vntous.
Zeland is full, France not free, & Scotland
vnclensid: the Common people spoyled, theyr
Commonwelths racked, theyr Nobilitie
murtherid, the Councell contemnid and
theyr Kyngs disobeyed: For dissention, sedici=
on Ciuell slaughtar, & rebellion, is ye onlie
argument entreatid of among them .
If therfore it pleasid her Hyghnes, to vse ye
benefit of present tyme: to bend her browe
vpon ye disobedient: to hold vp her threatning
hand ouer them, and to aduance her pusant
arme towards them: the verie shadoe of her
sworde, wold feare and vanquyshe ye prow=
dest of them .
but
----------------------------------------------------------------

Saved PageXML to /app/documents/eluhrs@gmail.com/north-02-e4f47e33/north-02.xml
Saved TXT to /app/documents/eluhrs@gmail.com/north-02-e4f47e33/north-02.txt
Saved PDF to /app/documents/eluhrs@gmail.com/north-02-e4f47e33/north-02.pdf

Time:   00:01:19
Input:  1273 tokens
Output: 282 tokens
Cost:   $0.0059

----------------------------------------------------------------


2025-12-13 00:02:30,275 - WARNING - Thumbnail missing for north-02.jpg, regenerating...
2025-12-13 00:02:30,288 - INFO - Task Complete: north-02.jpg
2025-12-13 00:02:30,295 - INFO - Task server.tasks.process_document_task[e6ec5d12-237a-4484-a675-86950d674dfb] succeeded in 79.9230605349876s: None
2025-12-13 00:02:42,691 - INFO - Received JSON response from Gemini.
2025-12-13 00:02:42,870 - INFO - SUBSCRIPT OUTPUT for 2:

------------- gemini-pro-3 output for north-01.jpg -------------
glad aspects were present (confirming her
Ma:tie wth THEODOSIES dylligence, ARETAPHE=
LIS constancie, and ANTIGONVS clemencie)
setlinge them selues euar sence, in her Princelie
brest: as ye rarenes and greatnes of her Gracis
vertuse declare . Whom God presaruid from
formar perell, to rule & reygne ouer us, in
this last leaden adge: wherin Iniquitie hath
sought to surmount ye glorie of his Deitie, and
so presumed to suppresse his professors: As if
ye Shylde of her Souerayntie (for worldlie
force) did not protect his poore membars a=
Quens
Ma:tie
is ye per
fect protector
of Religion
mong us: What error wold not inuade us?
----------------------------------------------------------------

Saved PageXML to /app/documents/eluhrs@gmail.com/north-01-eae4f632/north-01.xml
Saved TXT to /app/documents/eluhrs@gmail.com/north-01-eae4f632/north-01.txt
Saved PDF to /app/documents/eluhrs@gmail.com/north-01-eae4f632/north-01.pdf

Time:   00:01:32
Input:  1285 tokens
Output: 362 tokens
Cost:   $0.0069

----------------------------------------------------------------


2025-12-13 00:02:42,871 - WARNING - Thumbnail missing for north-01.jpg, regenerating...
2025-12-13 00:02:42,884 - INFO - Task Complete: north-01.jpg
2025-12-13 00:02:42,891 - INFO - Task server.tasks.process_document_task[2573f2fa-c211-4810-a4fa-d28e0bba8f5e] succeeded in 92.66774241696112s: None
2025-12-13 00:07:00,353 - INFO - SYSTEM: Server module initialized at 2025-12-13 00:07:00.353284
2025-12-13 00:07:54,331 - INFO - JOB SUBMITTED: User eluhrs@gmail.com uploaded rock01.jpg
2025-12-13 00:07:54,477 - INFO - Task server.tasks.process_document_task[6dc46ab6-1bba-4d9f-afde-bf6111c83d04] received
2025-12-13 00:07:54,499 - INFO - Task 1 received options raw: {"transcription":{"temperature":0.2}}
2025-12-13 00:07:54,500 - INFO - Task 1 parsed options: {'transcription': {'temperature': 0.2}}
2025-12-13 00:07:54,502 - INFO - TASK START: Processing rock01.jpg (ID: 1)
2025-12-13 00:07:54,502 - INFO - Command: subscript historical-manuscript gemini-pro-3 /app/documents/eluhrs@gmail.com/rock01-3b7dd987/rock01.jpg --output /app/documents/eluhrs@gmail.com/rock01-3b7dd987
2025-12-13 00:07:54,519 - INFO - Running from: /app
2025-12-13 00:07:54,519 - INFO - Using config: /app/config.yml
2025-12-13 00:07:54,519 - INFO - Output directory: /app/documents/eluhrs@gmail.com/rock01-3b7dd987
2025-12-13 00:07:54,520 - INFO - ----------------------------------------
2025-12-13 00:07:54,526 - INFO - 
Subscript.py initialized segmentation provider: historical-manuscript
2025-12-13 00:07:54,527 - INFO - Subscript.py Initialized transcription provider: gemini-pro-3
2025-12-13 00:07:54,528 - INFO - Processing 1 files...
2025-12-13 00:07:54,529 - INFO - Processing /app/documents/eluhrs@gmail.com/rock01-3b7dd987/rock01.jpg...
2025-12-13 00:07:54,529 - INFO - Segmenting /app/documents/eluhrs@gmail.com/rock01-3b7dd987/rock01.jpg with Kraken...
2025-12-13 00:07:54,534 - INFO - Loading segmentation model from /usr/local/lib/python3.10/site-packages/kraken/blla.mlmodel...
2025-12-13 00:07:55,093 - INFO - Segmenting /app/documents/eluhrs@gmail.com/rock01-3b7dd987/rock01.jpg
2025-12-13 00:07:58,440 - INFO - Vectorizing regions
2025-12-13 00:07:58,637 - INFO - Vectorizing regions
2025-12-13 00:07:58,822 - INFO - Vectorizing baselines
2025-12-13 00:08:03,257 - INFO - JOB SUBMITTED: User eluhrs@gmail.com uploaded north-01.jpg
2025-12-13 00:08:03,259 - INFO - Task server.tasks.process_document_task[c287b88e-e66f-4392-90a6-e1d7d668ec8e] received
2025-12-13 00:08:03,291 - INFO - JOB SUBMITTED: User eluhrs@gmail.com uploaded north-02.jpg
2025-12-13 00:08:03,293 - INFO - Task server.tasks.process_document_task[22daa635-703f-495c-b559-5a1332124e5e] received
2025-12-13 00:08:03,296 - INFO - Task 2 received options raw: {"transcription":{"temperature":0.2}}
2025-12-13 00:08:03,297 - INFO - Task 2 parsed options: {'transcription': {'temperature': 0.2}}
2025-12-13 00:08:03,299 - INFO - TASK START: Processing north-01.jpg (ID: 2)
2025-12-13 00:08:03,300 - INFO - Command: subscript historical-manuscript gemini-pro-3 /app/documents/eluhrs@gmail.com/north-01-eb2fdbd5/north-01.jpg --output /app/documents/eluhrs@gmail.com/north-01-eb2fdbd5
2025-12-13 00:08:03,318 - INFO - Running from: /app
2025-12-13 00:08:03,318 - INFO - Using config: /app/config.yml
2025-12-13 00:08:03,320 - INFO - Output directory: /app/documents/eluhrs@gmail.com/north-01-eb2fdbd5
2025-12-13 00:08:03,320 - INFO - ----------------------------------------
2025-12-13 00:08:03,324 - INFO - Task 3 received options raw: {"transcription":{"temperature":0.2}}
2025-12-13 00:08:03,328 - INFO - 
Subscript.py initialized segmentation provider: historical-manuscript
2025-12-13 00:08:03,329 - INFO - Task 3 parsed options: {'transcription': {'temperature': 0.2}}
2025-12-13 00:08:03,330 - INFO - Subscript.py Initialized transcription provider: gemini-pro-3
2025-12-13 00:08:03,331 - INFO - Processing 1 files...
2025-12-13 00:08:03,332 - INFO - Processing /app/documents/eluhrs@gmail.com/north-01-eb2fdbd5/north-01.jpg...
2025-12-13 00:08:03,333 - INFO - TASK START: Processing north-02.jpg (ID: 3)
2025-12-13 00:08:03,333 - INFO - Segmenting /app/documents/eluhrs@gmail.com/north-01-eb2fdbd5/north-01.jpg with Kraken...
2025-12-13 00:08:03,333 - INFO - Command: subscript historical-manuscript gemini-pro-3 /app/documents/eluhrs@gmail.com/north-02-e8008a51/north-02.jpg --output /app/documents/eluhrs@gmail.com/north-02-e8008a51
2025-12-13 00:08:03,336 - INFO - Loading segmentation model from /usr/local/lib/python3.10/site-packages/kraken/blla.mlmodel...
2025-12-13 00:08:03,349 - INFO - Running from: /app
2025-12-13 00:08:03,349 - INFO - Using config: /app/config.yml
2025-12-13 00:08:03,350 - INFO - Output directory: /app/documents/eluhrs@gmail.com/north-02-e8008a51
2025-12-13 00:08:03,351 - INFO - ----------------------------------------
2025-12-13 00:08:03,354 - INFO - 
Subscript.py initialized segmentation provider: historical-manuscript
2025-12-13 00:08:03,355 - INFO - Subscript.py Initialized transcription provider: gemini-pro-3
2025-12-13 00:08:03,356 - INFO - Processing 1 files...
2025-12-13 00:08:03,356 - INFO - Processing /app/documents/eluhrs@gmail.com/north-02-e8008a51/north-02.jpg...
2025-12-13 00:08:03,356 - INFO - Segmenting /app/documents/eluhrs@gmail.com/north-02-e8008a51/north-02.jpg with Kraken...
2025-12-13 00:08:03,357 - INFO - Loading segmentation model from /usr/local/lib/python3.10/site-packages/kraken/blla.mlmodel...
2025-12-13 00:08:04,037 - INFO - Segmenting /app/documents/eluhrs@gmail.com/north-01-eb2fdbd5/north-01.jpg
2025-12-13 00:08:04,043 - INFO - Segmenting /app/documents/eluhrs@gmail.com/north-02-e8008a51/north-02.jpg
2025-12-13 00:08:09,068 - INFO - Compute reading order on 23 lines in lr direction
2025-12-13 00:08:09,071 - INFO - Perform topological sort on partially ordered lines
2025-12-13 00:08:09,076 - INFO - Compute reading order on 1 lines in lr direction
2025-12-13 00:08:09,089 - INFO - Perform topological sort on partially ordered lines
2025-12-13 00:08:09,090 - INFO - Compute reading order on 2 lines in lr direction
2025-12-13 00:08:09,090 - INFO - Perform topological sort on partially ordered lines
2025-12-13 00:08:09,092 - INFO - Found 24 lines.
2025-12-13 00:08:09,102 - INFO - Initializing Gemini model: gemini-3-pro-preview
2025-12-13 00:08:09,273 - INFO - Resized image to (2289, 3000)
2025-12-13 00:08:09,282 - INFO - Annotating 24 regions for Visual Tagging...
2025-12-13 00:08:09,387 - INFO - Saved debug image to /app/documents/eluhrs@gmail.com/rock01-3b7dd987/rock01-debug.jpg
2025-12-13 00:08:09,388 - INFO - Sending annotated image to Gemini...
2025-12-13 00:08:14,009 - INFO - Vectorizing regions
2025-12-13 00:08:14,144 - INFO - Vectorizing regions
2025-12-13 00:08:14,272 - INFO - Vectorizing baselines
2025-12-13 00:08:14,463 - INFO - Vectorizing regions
2025-12-13 00:08:14,599 - INFO - Vectorizing regions
2025-12-13 00:08:14,731 - INFO - Vectorizing baselines
2025-12-13 00:08:20,830 - INFO - Compute reading order on 15 lines in lr direction
2025-12-13 00:08:20,831 - INFO - Perform topological sort on partially ordered lines
2025-12-13 00:08:20,831 - INFO - Compute reading order on 1 lines in lr direction
2025-12-13 00:08:20,832 - INFO - Perform topological sort on partially ordered lines
2025-12-13 00:08:20,832 - INFO - Compute reading order on 2 lines in lr direction
2025-12-13 00:08:20,832 - INFO - Perform topological sort on partially ordered lines
2025-12-13 00:08:20,834 - INFO - Found 16 lines.
2025-12-13 00:08:20,834 - INFO - Initializing Gemini model: gemini-3-pro-preview
2025-12-13 00:08:20,848 - INFO - Annotating 16 regions for Visual Tagging...
2025-12-13 00:08:20,883 - INFO - Saved debug image to /app/documents/eluhrs@gmail.com/north-02-e8008a51/north-02-debug.jpg
2025-12-13 00:08:20,883 - INFO - Sending annotated image to Gemini...
2025-12-13 00:08:21,787 - INFO - Compute reading order on 18 lines in lr direction
2025-12-13 00:08:21,788 - INFO - Perform topological sort on partially ordered lines
2025-12-13 00:08:21,788 - INFO - Compute reading order on 1 lines in lr direction
2025-12-13 00:08:21,788 - INFO - Perform topological sort on partially ordered lines
2025-12-13 00:08:21,790 - INFO - Found 18 lines.
2025-12-13 00:08:21,791 - INFO - Initializing Gemini model: gemini-3-pro-preview
2025-12-13 00:08:21,805 - INFO - Annotating 18 regions for Visual Tagging...
2025-12-13 00:08:21,842 - INFO - Saved debug image to /app/documents/eluhrs@gmail.com/north-01-eb2fdbd5/north-01-debug.jpg
2025-12-13 00:08:21,843 - INFO - Sending annotated image to Gemini...
2025-12-13 00:09:37,741 - INFO - Received JSON response from Gemini.
2025-12-13 00:09:37,915 - INFO - SUBSCRIPT OUTPUT for 3:

------------- gemini-pro-3 output for north-02.jpg -------------
all ye euells yt may be, ar crept so near vntous.
Zeland is full, France not free, & Scotland
vnclensid; the Common people spoyled, theyr
CommonWelths racked, theyr Nobilitie
murtherid, the Councell contemnd and
theyr Kyngs disobeyed: For dissention, sedici=
on Ciuell slaughtar, & rebellion, is ye onlie
argument entreatid of among them .
If therfore it pleasid her Hyghnes, to vse ye
benefit of present tyme: to bend her browe
vpon ye disobedient: to hold vp her threatning
hand ouer them, and to aduance her pusant
arme towards them; the verie shadoe of her
worde, wold feare and vanquyshe ye prow=
dest of them .
but
----------------------------------------------------------------

Saved PageXML to /app/documents/eluhrs@gmail.com/north-02-e8008a51/north-02.xml
Saved TXT to /app/documents/eluhrs@gmail.com/north-02-e8008a51/north-02.txt
Saved PDF to /app/documents/eluhrs@gmail.com/north-02-e8008a51/north-02.pdf

Time:   00:01:34
Input:  1273 tokens
Output: 283 tokens
Cost:   $0.0059

----------------------------------------------------------------


2025-12-13 00:09:37,915 - WARNING - Thumbnail missing for north-02.jpg, regenerating...
2025-12-13 00:09:37,928 - INFO - Task Complete: north-02.jpg
2025-12-13 00:09:37,934 - INFO - Task server.tasks.process_document_task[22daa635-703f-495c-b559-5a1332124e5e] succeeded in 94.63693570997566s: None
2025-12-13 00:09:57,812 - INFO - Received JSON response from Gemini.
2025-12-13 00:09:58,193 - INFO - SUBSCRIPT OUTPUT for 1:

------------- gemini-pro-3 output for rock01.jpg -------------
74
Panama, Dec. 29. 1874
My dear Capt. Green, -
Your favor by Dr. Boyd duly came.
We observed our latitude stars on Sunday night, and
of course last night again. The instrument behaves well.
Yesterday morning (before your letter came) & this morn,
we observed for azimuth & variation. Though heavily on
our minds we couldn't accomplish it earlier, while the
longitude work lasted. On Sat. night we observed 24 stars.
I will enclose your signals. I think our work is a success.
To-day Mr. Spencer dismounts the telegraph line. We hope to
steady,
come over on Sat. Morn. - I do not think the pier is
I think some one hit an arm of the instrument unconsciously
each time I found it out of meridian.
The vernier trouble is due to that arm making an angle
with the vertical. I am convinced that most of the register
troubles are due to bad quality of the fillet paper. It is given
equal thickness at two edges and also varies in thickness
lengthwise, so as to require frequent readjustment of
rollers & stylet.
Very truly Yrs.
Miles Rock
----------------------------------------------------------------

Saved PageXML to /app/documents/eluhrs@gmail.com/rock01-3b7dd987/rock01.xml
Saved TXT to /app/documents/eluhrs@gmail.com/rock01-3b7dd987/rock01.txt
Saved PDF to /app/documents/eluhrs@gmail.com/rock01-3b7dd987/rock01.pdf

Time:   00:02:03
Input:  1295 tokens
Output: 418 tokens
Cost:   $0.0076

----------------------------------------------------------------


2025-12-13 00:09:58,193 - WARNING - Thumbnail missing for rock01.jpg, regenerating...
2025-12-13 00:09:58,233 - INFO - Task Complete: rock01.jpg
2025-12-13 00:09:58,241 - INFO - Task server.tasks.process_document_task[6dc46ab6-1bba-4d9f-afde-bf6111c83d04] succeeded in 123.75831830594689s: None
2025-12-13 00:10:11,659 - INFO - Received JSON response from Gemini.
2025-12-13 00:10:11,840 - INFO - SUBSCRIPT OUTPUT for 2:

------------- gemini-pro-3 output for north-01.jpg -------------
glad aspects were present (confirming her
Maiestie wth THEODOSIES dylligence, ARETAPHE=
LIS constancie, and ANTIGONVS clemencie)
setlinge them selues euar sence, in her Princelie
brest: as ye rarenes and greatnes of her Gracis
vertuse declare. Whom God presaruid from
formar perell, to rule & reygne ouer us, in
this last leaden adge: wherin Iniquitie hath
sought to surmount ye glorie of his Deitie, and
so presumed to suppresse his professors: As if
ye Shylde of her Souerayntie (for worldlie
force) did not protect his poore membars a=
Quie:ns
Ma:tie is ye per
fect protector
mong us: What error wold not inuade us?
What Scisme or sect wold not assawte us?
What treason wold not entrapp us? When
----------------------------------------------------------------

Saved PageXML to /app/documents/eluhrs@gmail.com/north-01-eb2fdbd5/north-01.xml
Saved TXT to /app/documents/eluhrs@gmail.com/north-01-eb2fdbd5/north-01.txt
Saved PDF to /app/documents/eluhrs@gmail.com/north-01-eb2fdbd5/north-01.pdf

Time:   00:02:08
Input:  1285 tokens
Output: 327 tokens
Cost:   $0.0065

----------------------------------------------------------------


2025-12-13 00:10:11,841 - WARNING - Thumbnail missing for north-01.jpg, regenerating...
2025-12-13 00:10:11,854 - INFO - Task Complete: north-01.jpg
2025-12-13 00:10:11,862 - INFO - Task server.tasks.process_document_task[c287b88e-e66f-4392-90a6-e1d7d668ec8e] succeeded in 128.598692266969s: None
2025-12-13 00:12:05,043 - INFO - Task server.tasks.process_batch_task[4a43a6de-b09c-48e7-9dd6-fbc01a7a4394] received
2025-12-13 00:12:05,072 - INFO - BATCH TASK START: Parent test.pdf (ID: 4)
2025-12-13 00:12:05,073 - INFO - Command: subscript historical-manuscript gemini-pro-3 /app/documents/eluhrs@gmail.com/test-5f016a6e/north-01.jpg /app/documents/eluhrs@gmail.com/test-5f016a6e/north-02.jpg --combine /app/documents/eluhrs@gmail.com/test-5f016a6e/test.pdf --output /app/documents/eluhrs@gmail.com/test-5f016a6e
2025-12-13 00:12:05,082 - INFO - Running from: /app
2025-12-13 00:12:05,082 - INFO - Using config: /app/config.yml
2025-12-13 00:12:05,083 - INFO - Output directory: /app/documents/eluhrs@gmail.com/test-5f016a6e
2025-12-13 00:12:05,083 - INFO - ----------------------------------------
2025-12-13 00:12:05,084 - INFO - 
Subscript.py initialized segmentation provider: historical-manuscript
2025-12-13 00:12:05,084 - INFO - Subscript.py Initialized transcription provider: gemini-pro-3
2025-12-13 00:12:05,085 - INFO - Processing 2 files...
2025-12-13 00:12:05,085 - INFO - Processing /app/documents/eluhrs@gmail.com/test-5f016a6e/north-01.jpg...
2025-12-13 00:12:05,085 - INFO - Segmenting /app/documents/eluhrs@gmail.com/test-5f016a6e/north-01.jpg with Kraken...
2025-12-13 00:12:05,087 - INFO - Loading segmentation model from /usr/local/lib/python3.10/site-packages/kraken/blla.mlmodel...
2025-12-13 00:12:05,582 - INFO - Segmenting /app/documents/eluhrs@gmail.com/test-5f016a6e/north-01.jpg
2025-12-13 00:12:09,679 - INFO - Vectorizing regions
2025-12-13 00:12:09,819 - INFO - Vectorizing regions
2025-12-13 00:12:09,959 - INFO - Vectorizing baselines
2025-12-13 00:12:16,483 - INFO - Compute reading order on 18 lines in lr direction
2025-12-13 00:12:16,484 - INFO - Perform topological sort on partially ordered lines
2025-12-13 00:12:16,485 - INFO - Compute reading order on 1 lines in lr direction
2025-12-13 00:12:16,485 - INFO - Perform topological sort on partially ordered lines
2025-12-13 00:12:16,488 - INFO - Found 18 lines.
2025-12-13 00:12:16,488 - INFO - Initializing Gemini model: gemini-3-pro-preview
2025-12-13 00:12:16,503 - INFO - Annotating 18 regions for Visual Tagging...
2025-12-13 00:12:16,540 - INFO - Saved debug image to /app/documents/eluhrs@gmail.com/test-5f016a6e/north-01-debug.jpg
2025-12-13 00:12:16,540 - INFO - Sending annotated image to Gemini...
2025-12-13 00:15:28,392 - INFO - Received JSON response from Gemini.
2025-12-13 00:15:28,582 - INFO - Processing /app/documents/eluhrs@gmail.com/test-5f016a6e/north-02.jpg...
2025-12-13 00:15:28,582 - INFO - Segmenting /app/documents/eluhrs@gmail.com/test-5f016a6e/north-02.jpg with Kraken...
2025-12-13 00:15:28,582 - INFO - Loading segmentation model from /usr/local/lib/python3.10/site-packages/kraken/blla.mlmodel...
2025-12-13 00:15:29,086 - INFO - Segmenting /app/documents/eluhrs@gmail.com/test-5f016a6e/north-02.jpg
2025-12-13 00:15:31,650 - INFO - Vectorizing regions
2025-12-13 00:15:31,779 - INFO - Vectorizing regions
2025-12-13 00:15:31,906 - INFO - Vectorizing baselines
2025-12-13 00:15:38,065 - INFO - Compute reading order on 15 lines in lr direction
2025-12-13 00:15:38,066 - INFO - Perform topological sort on partially ordered lines
2025-12-13 00:15:38,066 - INFO - Compute reading order on 1 lines in lr direction
2025-12-13 00:15:38,066 - INFO - Perform topological sort on partially ordered lines
2025-12-13 00:15:38,067 - INFO - Compute reading order on 2 lines in lr direction
2025-12-13 00:15:38,067 - INFO - Perform topological sort on partially ordered lines
2025-12-13 00:15:38,069 - INFO - Found 16 lines.
2025-12-13 00:15:38,070 - INFO - Initializing Gemini model: gemini-3-pro-preview
2025-12-13 00:15:38,083 - INFO - Annotating 16 regions for Visual Tagging...
2025-12-13 00:15:38,118 - INFO - Saved debug image to /app/documents/eluhrs@gmail.com/test-5f016a6e/north-02-debug.jpg
2025-12-13 00:15:38,119 - INFO - Sending annotated image to Gemini...
2025-12-13 00:17:09,848 - INFO - Received JSON response from Gemini.
2025-12-13 00:17:10,013 - INFO - Combining 2 PDFs into /app/documents/eluhrs@gmail.com/test-5f016a6e/test.pdf...
2025-12-13 00:17:10,082 - INFO - Saved Combined PDF to /app/documents/eluhrs@gmail.com/test-5f016a6e/test.pdf
2025-12-13 00:17:10,083 - INFO - Combining 2 TXTs into /app/documents/eluhrs@gmail.com/test-5f016a6e/test.txt...
2025-12-13 00:17:10,084 - INFO - Saved Combined TXT to /app/documents/eluhrs@gmail.com/test-5f016a6e/test.txt
2025-12-13 00:17:10,085 - INFO - BATCH OUTPUT:

------------- gemini-pro-3 output for north-01.jpg -------------
glad aspects were present (confirming her
Maiestie wth THEODOSIES dylligence, ARETAPHE=
LIS constancie, and ANTIGONVS clemencie)
setllinge them selues euar sence, in her Princelie
brest: as ye rarenes and greatnes of her Gracis
vertuse declare. Whom God presaruid from
formar perell, to rule & reygne ouer us, in
this last leaden adge: wherin Iniquitie hath
sought to surmount ye glorie of his Deitie, and
so presumed to suppresse his professors: As if
ye Shylde of her Souerayntie (for worldlie
force) did not protect his poore membars a=
Quie:ns
Ma:tie ye par
fect protector
What Scisme or sect wold not assawte us?
What treason wold not entrapp us? When
all
----------------------------------------------------------------

Saved PageXML to /app/documents/eluhrs@gmail.com/test-5f016a6e/north-01.xml
Saved TXT to /app/documents/eluhrs@gmail.com/test-5f016a6e/north-01.txt
Saved PDF to /app/documents/eluhrs@gmail.com/test-5f016a6e/north-01.pdf

Time:   00:03:23
Input:  1285 tokens
Output: 308 tokens
Cost:   $0.0063

----------------------------------------------------------------


------------- gemini-pro-3 output for north-02.jpg -------------
all ye euells yt maybe, ar crept so near vntous.
Zeland is full, France not free, & Scotland
vnclensid: the Common people spoyled, theyr
Commonwelths racked, theyr Nobilitie
murtherid, the Councell contemnid and
theyr Kyngs disobeyed: For dissention, sedici=
on, Ciuell slaughtar, & rebellion, is ye onlie
argument entreatid of among them.
If therfore it pleasid her Hyghnes, to vse ye
benefit of present tyme: to bend her browe
vpon ye disobedient: to hold vp her threatning
hand ouer them, and to aduance her pusant
arme towards them; the verie shadoe of her
sworde, wold feare and vanquyshe yt prow=
dest of them.
but
----------------------------------------------------------------

Saved PageXML to /app/documents/eluhrs@gmail.com/test-5f016a6e/north-02.xml
Saved TXT to /app/documents/eluhrs@gmail.com/test-5f016a6e/north-02.txt
Saved PDF to /app/documents/eluhrs@gmail.com/test-5f016a6e/north-02.pdf

Time:   00:01:41
Input:  1273 tokens
Output: 280 tokens
Cost:   $0.0059

Total time:   00:05:04
Total input:  2558 tokens
Total output: 588 tokens
Total cost:   $0.0122

----------------------------------------------------------------


2025-12-13 00:17:10,097 - ERROR - Task server.tasks.process_batch_task[4a43a6de-b09c-48e7-9dd6-fbc01a7a4394] raised unexpected: NameError("name 'doc_id' is not defined")
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
  File "/app/server/tasks.py", line 316, in process_batch_task
    # Store previous status in case of failure?
NameError: name 'doc_id' is not defined
2025-12-13 00:20:00,707 - INFO - SYSTEM: Server module initialized at 2025-12-13 00:20:00.707670
2025-12-13 00:20:12,979 - INFO - SYSTEM: Server module initialized at 2025-12-13 00:20:12.979954
2025-12-13 00:20:14,242 - INFO - Connected to redis://redis:6379/0
2025-12-13 00:20:14,244 - INFO - mingle: searching for neighbors
2025-12-13 00:20:15,260 - INFO - mingle: all alone
2025-12-13 00:20:15,272 - INFO - celery@43cc669a147a ready.
2025-12-13 00:22:43,094 - INFO - SYSTEM: Server module initialized at 2025-12-13 00:22:43.094652
2025-12-13 00:22:54,510 - INFO - SYSTEM: Server module initialized at 2025-12-13 00:22:54.510682
2025-12-13 00:42:02,986 - INFO - SYSTEM: Server module initialized at 2025-12-13 00:42:02.986637
2025-12-13 00:42:03,239 - INFO - SYSTEM: Server module initialized at 2025-12-13 00:42:03.239618
2025-12-13 00:42:04,394 - INFO - Connected to redis://redis:6379/0
2025-12-13 00:42:04,397 - INFO - mingle: searching for neighbors
2025-12-13 00:42:05,414 - INFO - mingle: all alone
2025-12-13 00:42:05,434 - INFO - celery@07851f2fd0aa ready.
2025-12-13 00:43:30,220 - INFO - JOB SUBMITTED: User eluhrs@gmail.com uploaded rock01.jpg
2025-12-13 00:43:30,382 - INFO - Task server.tasks.process_document_task[41e613e1-bac6-4496-afa8-942aef0edec0] received
2025-12-13 00:43:30,457 - INFO - Task 1 received options raw: {"transcription":{"temperature":0.2}}
2025-12-13 00:43:30,458 - INFO - Task 1 parsed options: {'transcription': {'temperature': 0.2}}
2025-12-13 00:43:30,461 - INFO - TASK START: Processing rock01.jpg (ID: 1)
2025-12-13 00:43:30,461 - INFO - Command: subscript historical-manuscript gemini-pro-3 /app/documents/eluhrs@gmail.com/rock01-42a66c8b/rock01.jpg --output /app/documents/eluhrs@gmail.com/rock01-42a66c8b
2025-12-13 00:43:30,471 - INFO - Running from: /app
2025-12-13 00:43:30,472 - INFO - Using config: /app/config.yml
2025-12-13 00:43:30,472 - INFO - Output directory: /app/documents/eluhrs@gmail.com/rock01-42a66c8b
2025-12-13 00:43:30,472 - INFO - ----------------------------------------
2025-12-13 00:43:34,817 - INFO - 
Subscript.py initialized segmentation provider: historical-manuscript
2025-12-13 00:43:34,818 - INFO - Subscript.py Initialized transcription provider: gemini-pro-3
2025-12-13 00:43:34,818 - INFO - Processing 1 files...
2025-12-13 00:43:34,818 - INFO - Processing /app/documents/eluhrs@gmail.com/rock01-42a66c8b/rock01.jpg...
2025-12-13 00:43:34,818 - INFO - Segmenting /app/documents/eluhrs@gmail.com/rock01-42a66c8b/rock01.jpg with Kraken...
2025-12-13 00:43:34,824 - INFO - Loading segmentation model from /usr/local/lib/python3.10/site-packages/kraken/blla.mlmodel...
2025-12-13 00:43:35,307 - INFO - Segmenting /app/documents/eluhrs@gmail.com/rock01-42a66c8b/rock01.jpg
2025-12-13 00:43:39,425 - INFO - Vectorizing regions
2025-12-13 00:43:39,633 - INFO - Vectorizing regions
2025-12-13 00:43:39,824 - INFO - Vectorizing baselines
2025-12-13 00:43:40,538 - INFO - JOB SUBMITTED: User eluhrs@gmail.com uploaded north-01.jpg
2025-12-13 00:43:40,541 - INFO - Task server.tasks.process_document_task[c341a1a9-a0ef-473a-819f-b8355b1fe000] received
2025-12-13 00:43:40,571 - INFO - JOB SUBMITTED: User eluhrs@gmail.com uploaded north-02.jpg
2025-12-13 00:43:40,573 - INFO - Task server.tasks.process_document_task[bd211dd9-8692-4729-997d-9cd8b43c6ebb] received
2025-12-13 00:43:40,631 - INFO - Task 2 received options raw: {"transcription":{"temperature":0.2}}
2025-12-13 00:43:40,634 - INFO - Task 2 parsed options: {'transcription': {'temperature': 0.2}}
2025-12-13 00:43:40,636 - INFO - TASK START: Processing north-01.jpg (ID: 2)
2025-12-13 00:43:40,637 - INFO - Command: subscript historical-manuscript gemini-pro-3 /app/documents/eluhrs@gmail.com/north-01-fafd86b4/north-01.jpg --output /app/documents/eluhrs@gmail.com/north-01-fafd86b4
2025-12-13 00:43:40,651 - INFO - Running from: /app
2025-12-13 00:43:40,651 - INFO - Using config: /app/config.yml
2025-12-13 00:43:40,651 - INFO - Output directory: /app/documents/eluhrs@gmail.com/north-01-fafd86b4
2025-12-13 00:43:40,652 - INFO - ----------------------------------------
2025-12-13 00:43:40,691 - INFO - Task 3 received options raw: {"transcription":{"temperature":0.2}}
2025-12-13 00:43:40,697 - INFO - Task 3 parsed options: {'transcription': {'temperature': 0.2}}
2025-12-13 00:43:40,714 - INFO - TASK START: Processing north-02.jpg (ID: 3)
2025-12-13 00:43:40,720 - INFO - Command: subscript historical-manuscript gemini-pro-3 /app/documents/eluhrs@gmail.com/north-02-5980aec9/north-02.jpg --output /app/documents/eluhrs@gmail.com/north-02-5980aec9
2025-12-13 00:43:40,752 - INFO - Running from: /app
2025-12-13 00:43:40,752 - INFO - Using config: /app/config.yml
2025-12-13 00:43:40,752 - INFO - Output directory: /app/documents/eluhrs@gmail.com/north-02-5980aec9
2025-12-13 00:43:40,753 - INFO - ----------------------------------------
2025-12-13 00:43:43,894 - INFO - 
Subscript.py initialized segmentation provider: historical-manuscript
2025-12-13 00:43:43,894 - INFO - Subscript.py Initialized transcription provider: gemini-pro-3
2025-12-13 00:43:43,894 - INFO - Processing 1 files...
2025-12-13 00:43:43,895 - INFO - Processing /app/documents/eluhrs@gmail.com/north-01-fafd86b4/north-01.jpg...
2025-12-13 00:43:43,895 - INFO - Segmenting /app/documents/eluhrs@gmail.com/north-01-fafd86b4/north-01.jpg with Kraken...
2025-12-13 00:43:43,900 - INFO - Loading segmentation model from /usr/local/lib/python3.10/site-packages/kraken/blla.mlmodel...
2025-12-13 00:43:44,073 - INFO - 
Subscript.py initialized segmentation provider: historical-manuscript
2025-12-13 00:43:44,073 - INFO - Subscript.py Initialized transcription provider: gemini-pro-3
2025-12-13 00:43:44,074 - INFO - Processing 1 files...
2025-12-13 00:43:44,074 - INFO - Processing /app/documents/eluhrs@gmail.com/north-02-5980aec9/north-02.jpg...
2025-12-13 00:43:44,074 - INFO - Segmenting /app/documents/eluhrs@gmail.com/north-02-5980aec9/north-02.jpg with Kraken...
2025-12-13 00:43:44,078 - INFO - Loading segmentation model from /usr/local/lib/python3.10/site-packages/kraken/blla.mlmodel...
2025-12-13 00:43:44,436 - INFO - Segmenting /app/documents/eluhrs@gmail.com/north-01-fafd86b4/north-01.jpg
2025-12-13 00:43:44,620 - INFO - Segmenting /app/documents/eluhrs@gmail.com/north-02-5980aec9/north-02.jpg
2025-12-13 00:43:49,958 - INFO - Compute reading order on 23 lines in lr direction
2025-12-13 00:43:49,962 - INFO - Perform topological sort on partially ordered lines
2025-12-13 00:43:49,971 - INFO - Compute reading order on 1 lines in lr direction
2025-12-13 00:43:49,979 - INFO - Perform topological sort on partially ordered lines
2025-12-13 00:43:49,979 - INFO - Compute reading order on 2 lines in lr direction
2025-12-13 00:43:49,981 - INFO - Perform topological sort on partially ordered lines
2025-12-13 00:43:49,999 - INFO - Found 24 lines.
2025-12-13 00:43:50,004 - INFO - Initializing Gemini model: gemini-3-pro-preview
2025-12-13 00:43:50,181 - INFO - Resized image to (2289, 3000)
2025-12-13 00:43:50,190 - INFO - Annotating 24 regions for Visual Tagging...
2025-12-13 00:43:50,373 - INFO - Saved debug image to /app/documents/eluhrs@gmail.com/rock01-42a66c8b/rock01-debug.jpg
2025-12-13 00:43:50,387 - INFO - Sending annotated image to Gemini...
2025-12-13 00:43:55,237 - INFO - Vectorizing regions
2025-12-13 00:43:55,372 - INFO - Vectorizing regions
2025-12-13 00:43:55,401 - INFO - Vectorizing regions
2025-12-13 00:43:55,507 - INFO - Vectorizing baselines
2025-12-13 00:43:55,538 - INFO - Vectorizing regions
2025-12-13 00:43:55,670 - INFO - Vectorizing baselines
2025-12-13 00:44:01,919 - INFO - Task server.tasks.process_batch_task[2d3e47b2-36ab-473b-9838-7afc9469714d] received
2025-12-13 00:44:02,003 - INFO - BATCH TASK START: Parent test.pdf (ID: 4)
2025-12-13 00:44:02,004 - INFO - Command: subscript historical-manuscript gemini-pro-3 /app/documents/eluhrs@gmail.com/test-9f9595be/north-01.jpg /app/documents/eluhrs@gmail.com/test-9f9595be/north-02.jpg --combine /app/documents/eluhrs@gmail.com/test-9f9595be/test.pdf --output /app/documents/eluhrs@gmail.com/test-9f9595be
2025-12-13 00:44:02,013 - INFO - Running from: /app
2025-12-13 00:44:02,014 - INFO - Using config: /app/config.yml
2025-12-13 00:44:02,014 - INFO - Output directory: /app/documents/eluhrs@gmail.com/test-9f9595be
2025-12-13 00:44:02,014 - INFO - ----------------------------------------
2025-12-13 00:44:02,540 - INFO - Compute reading order on 15 lines in lr direction
2025-12-13 00:44:02,541 - INFO - Perform topological sort on partially ordered lines
2025-12-13 00:44:02,542 - INFO - Compute reading order on 1 lines in lr direction
2025-12-13 00:44:02,542 - INFO - Perform topological sort on partially ordered lines
2025-12-13 00:44:02,543 - INFO - Compute reading order on 2 lines in lr direction
2025-12-13 00:44:02,544 - INFO - Perform topological sort on partially ordered lines
2025-12-13 00:44:02,546 - INFO - Found 16 lines.
2025-12-13 00:44:02,549 - INFO - Initializing Gemini model: gemini-3-pro-preview
2025-12-13 00:44:02,579 - INFO - Annotating 16 regions for Visual Tagging...
2025-12-13 00:44:02,663 - INFO - Saved debug image to /app/documents/eluhrs@gmail.com/north-02-5980aec9/north-02-debug.jpg
2025-12-13 00:44:02,664 - INFO - Sending annotated image to Gemini...
2025-12-13 00:44:02,849 - INFO - Compute reading order on 18 lines in lr direction
2025-12-13 00:44:02,850 - INFO - Perform topological sort on partially ordered lines
2025-12-13 00:44:02,851 - INFO - Compute reading order on 1 lines in lr direction
2025-12-13 00:44:02,851 - INFO - Perform topological sort on partially ordered lines
2025-12-13 00:44:02,853 - INFO - Found 18 lines.
2025-12-13 00:44:02,853 - INFO - Initializing Gemini model: gemini-3-pro-preview
2025-12-13 00:44:02,867 - INFO - Annotating 18 regions for Visual Tagging...
2025-12-13 00:44:02,906 - INFO - Saved debug image to /app/documents/eluhrs@gmail.com/north-01-fafd86b4/north-01-debug.jpg
2025-12-13 00:44:02,907 - INFO - Sending annotated image to Gemini...
2025-12-13 00:44:05,384 - INFO - 
Subscript.py initialized segmentation provider: historical-manuscript
2025-12-13 00:44:05,385 - INFO - Subscript.py Initialized transcription provider: gemini-pro-3
2025-12-13 00:44:05,385 - INFO - Processing 2 files...
2025-12-13 00:44:05,385 - INFO - Processing /app/documents/eluhrs@gmail.com/test-9f9595be/north-01.jpg...
2025-12-13 00:44:05,386 - INFO - Segmenting /app/documents/eluhrs@gmail.com/test-9f9595be/north-01.jpg with Kraken...
2025-12-13 00:44:05,389 - INFO - Loading segmentation model from /usr/local/lib/python3.10/site-packages/kraken/blla.mlmodel...
2025-12-13 00:44:05,955 - INFO - Segmenting /app/documents/eluhrs@gmail.com/test-9f9595be/north-01.jpg
2025-12-13 00:44:10,111 - INFO - Vectorizing regions
2025-12-13 00:44:10,245 - INFO - Vectorizing regions
2025-12-13 00:44:10,376 - INFO - Vectorizing baselines
2025-12-13 00:44:17,082 - INFO - Compute reading order on 18 lines in lr direction
2025-12-13 00:44:17,084 - INFO - Perform topological sort on partially ordered lines
2025-12-13 00:44:17,084 - INFO - Compute reading order on 1 lines in lr direction
2025-12-13 00:44:17,085 - INFO - Perform topological sort on partially ordered lines
2025-12-13 00:44:17,087 - INFO - Found 18 lines.
2025-12-13 00:44:17,088 - INFO - Initializing Gemini model: gemini-3-pro-preview
2025-12-13 00:44:17,101 - INFO - Annotating 18 regions for Visual Tagging...
2025-12-13 00:44:17,138 - INFO - Saved debug image to /app/documents/eluhrs@gmail.com/test-9f9595be/north-01-debug.jpg
2025-12-13 00:44:17,139 - INFO - Sending annotated image to Gemini...
2025-12-13 00:44:44,159 - INFO - Received JSON response from Gemini.
2025-12-13 00:44:44,555 - INFO - SUBSCRIPT OUTPUT for 1:

------------- gemini-pro-3 output for rock01.jpg -------------
74
Panama, Dec. 29. 1874
My Dear Capt. Green,-
Your favor by Dr. Boyd duly came.
We observed our latitude stars on Sunday night, and
of course last night again. The instrument behaves well.
Yesterday morning (before your letter came) & this morn.
we observed for azimuth & variation. Though heavily on
our minds we couldn't accomplish it earlier, while the
longitude work lasted. On Sat. night we observed 24 stars.
I will enclose your signals. I think our work is a success.
To-day Mr. Spencer dismounts the telegraph line. We hope to
un
come over on Sat. Morn. - I do not think the pier is steady,
I think some one hit an arm of the instrument unconsciously
each time I found it out of meridian.
The vernier trouble is due to that arm making an angle
with the vertical. I am convinced that most of the register
troubles are due to bad quality of the fillet paper. It is of un=
equal thickness at two edges and also varies in thickness
lengthwise, so as to require frequent readjustment of
rollers & stylet.
Very truly Yrs.
Miles Rock
----------------------------------------------------------------

Saved PageXML to /app/documents/eluhrs@gmail.com/rock01-42a66c8b/rock01.xml
Saved TXT to /app/documents/eluhrs@gmail.com/rock01-42a66c8b/rock01.txt
Saved PDF to /app/documents/eluhrs@gmail.com/rock01-42a66c8b/rock01.pdf

Time:   00:01:09
Input:  1295 tokens
Output: 419 tokens
Cost:   $0.0076

----------------------------------------------------------------


2025-12-13 00:44:44,583 - INFO - Task server.tasks.process_document_task[41e613e1-bac6-4496-afa8-942aef0edec0] succeeded in 74.19854949205182s: None
2025-12-13 00:45:20,209 - INFO - Received JSON response from Gemini.
2025-12-13 00:45:20,382 - INFO - SUBSCRIPT OUTPUT for 3:

------------- gemini-pro-3 output for north-02.jpg -------------
all ye euells yt maybe, ar crept so near vntous.
Zeland is full, France not free, & Scotland
vnclensid: the Common people spoyled, theyr
Commonwelths racked, theyr Nobilitie
murtherid, the Councell contemnid and
theyr Kyngs disobeyed: For dissention, sedici=
on Ciuell slaughtar, & rebellion, is ye onlie
argument entreatid of among them.
If therfore it pleasid her Hyghnes, to vse ye
benefit of present tyme: to bend her browe
vpon ye disobedient: to hold vp her threatning
hand ouer them, and to aduance her pusant
arme towards them: the verie shadoe of her
sworde, wold feare and vanquyshe ye prow=
dest of them.
but
----------------------------------------------------------------

Saved PageXML to /app/documents/eluhrs@gmail.com/north-02-5980aec9/north-02.xml
Saved TXT to /app/documents/eluhrs@gmail.com/north-02-5980aec9/north-02.txt
Saved PDF to /app/documents/eluhrs@gmail.com/north-02-5980aec9/north-02.pdf

Time:   00:01:36
Input:  1273 tokens
Output: 295 tokens
Cost:   $0.0061

----------------------------------------------------------------


2025-12-13 00:45:20,394 - INFO - Task server.tasks.process_document_task[bd211dd9-8692-4729-997d-9cd8b43c6ebb] succeeded in 99.8096466709394s: None
2025-12-13 00:46:00,601 - INFO - Received JSON response from Gemini.
2025-12-13 00:46:00,788 - INFO - SUBSCRIPT OUTPUT for 2:

------------- gemini-pro-3 output for north-01.jpg -------------
glad aspects were present (confirming her
Maiestie wth THEODOSIES dylligence, ARETAPHE=
LIS constancie, and ANTIGONVS clemencie)
setlinge them selues euar sence, in her Princelie
brest: as ye rarenes and greatnes of her Gracis
vertuse declare. Whom God presaruid from
formar perell, to rule & reygne over us, in
this last leaden adge: wherin Iniquitie hath
sought to surmount ye glorie of his Deitie, and
so presumed to suppresse his professors: As if
ye Shylde of her Souerayntie (for worldlie
force) did not protect his poore membars a=
Quens
Ma:tie
is ye per
What Scisme or sect wold not assawte us?
What treason wold not entrapp us? When
all
----------------------------------------------------------------

Saved PageXML to /app/documents/eluhrs@gmail.com/north-01-fafd86b4/north-01.xml
Saved TXT to /app/documents/eluhrs@gmail.com/north-01-fafd86b4/north-01.txt
Saved PDF to /app/documents/eluhrs@gmail.com/north-01-fafd86b4/north-01.pdf

Time:   00:02:16
Input:  1285 tokens
Output: 302 tokens
Cost:   $0.0062

----------------------------------------------------------------


2025-12-13 00:46:00,804 - INFO - Task server.tasks.process_document_task[c341a1a9-a0ef-473a-819f-b8355b1fe000] succeeded in 140.2583415650297s: None
2025-12-13 00:46:14,400 - INFO - Received JSON response from Gemini.
2025-12-13 00:46:14,587 - INFO - Processing /app/documents/eluhrs@gmail.com/test-9f9595be/north-02.jpg...
2025-12-13 00:46:14,587 - INFO - Segmenting /app/documents/eluhrs@gmail.com/test-9f9595be/north-02.jpg with Kraken...
2025-12-13 00:46:14,588 - INFO - Loading segmentation model from /usr/local/lib/python3.10/site-packages/kraken/blla.mlmodel...
2025-12-13 00:46:15,011 - INFO - Segmenting /app/documents/eluhrs@gmail.com/test-9f9595be/north-02.jpg
2025-12-13 00:46:17,771 - INFO - Vectorizing regions
2025-12-13 00:46:17,900 - INFO - Vectorizing regions
2025-12-13 00:46:18,025 - INFO - Vectorizing baselines
2025-12-13 00:46:24,272 - INFO - Compute reading order on 15 lines in lr direction
2025-12-13 00:46:24,272 - INFO - Perform topological sort on partially ordered lines
2025-12-13 00:46:24,273 - INFO - Compute reading order on 1 lines in lr direction
2025-12-13 00:46:24,273 - INFO - Perform topological sort on partially ordered lines
2025-12-13 00:46:24,273 - INFO - Compute reading order on 2 lines in lr direction
2025-12-13 00:46:24,273 - INFO - Perform topological sort on partially ordered lines
2025-12-13 00:46:24,275 - INFO - Found 16 lines.
2025-12-13 00:46:24,276 - INFO - Initializing Gemini model: gemini-3-pro-preview
2025-12-13 00:46:24,288 - INFO - Annotating 16 regions for Visual Tagging...
2025-12-13 00:46:24,324 - INFO - Saved debug image to /app/documents/eluhrs@gmail.com/test-9f9595be/north-02-debug.jpg
2025-12-13 00:46:24,324 - INFO - Sending annotated image to Gemini...
2025-12-13 00:47:28,424 - INFO - Received JSON response from Gemini.
2025-12-13 00:47:28,587 - INFO - Combining 2 PDFs into /app/documents/eluhrs@gmail.com/test-9f9595be/test.pdf...
2025-12-13 00:47:28,662 - INFO - Saved Combined PDF to /app/documents/eluhrs@gmail.com/test-9f9595be/test.pdf
2025-12-13 00:47:28,663 - INFO - Combining 2 TXTs into /app/documents/eluhrs@gmail.com/test-9f9595be/test.txt...
2025-12-13 00:47:28,664 - INFO - Saved Combined TXT to /app/documents/eluhrs@gmail.com/test-9f9595be/test.txt
2025-12-13 00:47:28,665 - INFO - BATCH OUTPUT:

------------- gemini-pro-3 output for north-01.jpg -------------
glad aspects were present (confirming her
Maiestie wth THEODOSIES dylligence, ARETAPHE=
LIS constancie, and ANTIGONVS clemencie)
setlinge them selues euar sence, in her Princelie
brest: as ye rarenes and greatnes of her Gracis
vertuse declare. Whom God presaruid from
formar perell, to rule & reygne ouer us, in
this last leaden adge: wherin Iniquitie hath
sought to surmount ye glorie of his Deitie, and
so presumed to suppresse his professors: As if
ye Shylde of her Souerayntie (for worldlie
force) did not protect his poore membars a=
Quiens
Ma:tie
is ye per
fect protector
of Religion
What Scisme or sect wold not assawte us?
What treason wold not entrapp us? When
all
----------------------------------------------------------------

Saved PageXML to /app/documents/eluhrs@gmail.com/test-9f9595be/north-01.xml
Saved TXT to /app/documents/eluhrs@gmail.com/test-9f9595be/north-01.txt
Saved PDF to /app/documents/eluhrs@gmail.com/test-9f9595be/north-01.pdf

Time:   00:02:09
Input:  1285 tokens
Output: 310 tokens
Cost:   $0.0063

----------------------------------------------------------------


------------- gemini-pro-3 output for north-02.jpg -------------
all ye euells yt maybe, ar crept so near vntous.
Zeland is full, France not free, & Scotland
vnclensid; the Common people spoyled, theyr
CommonWelths racked, theyr Nobilitie
murtherid, the Councell contemd and
theyr Kyngs disobeyed: For dissention, sedici=
on Ciuell slaughtar, & rebellion, is ye onlie
argument entreatid of among them .
If therfore it pleasid her Hyghnes, to vse ye
benefit of present tyme: to bend her browe
vpon ye disobedient: to hold vp her threatning
hand ouer them, and to aduance her pusant
arme towards them; the verie shadoe of her
sworde, wold feare and vanquyshe yt prow=
dest of them .
but
----------------------------------------------------------------

Saved PageXML to /app/documents/eluhrs@gmail.com/test-9f9595be/north-02.xml
Saved TXT to /app/documents/eluhrs@gmail.com/test-9f9595be/north-02.txt
Saved PDF to /app/documents/eluhrs@gmail.com/test-9f9595be/north-02.pdf

Time:   00:01:14
Input:  1273 tokens
Output: 280 tokens
Cost:   $0.0059

Total time:   00:03:23
Total input:  2558 tokens
Total output: 590 tokens
Total cost:   $0.0122

----------------------------------------------------------------


2025-12-13 00:47:28,681 - INFO - Task server.tasks.process_batch_task[2d3e47b2-36ab-473b-9838-7afc9469714d] succeeded in 206.75754792802036s: None
2025-12-13 01:15:21,827 - INFO - SYSTEM: Server module initialized at 2025-12-13 01:15:21.827319
2025-12-13 01:15:44,891 - INFO - SYSTEM: Server module initialized at 2025-12-13 01:15:44.891292
2025-12-13 01:16:07,137 - INFO - SYSTEM: Server module initialized at 2025-12-13 01:16:07.137386
2025-12-13 01:16:53,669 - INFO - SYSTEM: Server module initialized at 2025-12-13 01:16:53.669373
2025-12-13 01:16:53,914 - INFO - SYSTEM: Server module initialized at 2025-12-13 01:16:53.914564
2025-12-13 01:19:32,241 - INFO - SYSTEM: Server module initialized at 2025-12-13 01:19:32.241352
2025-12-13 01:19:43,420 - INFO - SYSTEM: Server module initialized at 2025-12-13 01:19:43.420552
2025-12-13 01:22:34,438 - INFO - SYSTEM: Server module initialized at 2025-12-13 01:22:34.438381
2025-12-13 01:24:29,491 - INFO - SYSTEM: Server module initialized at 2025-12-13 01:24:29.491475
2025-12-13 01:24:29,726 - INFO - SYSTEM: Server module initialized at 2025-12-13 01:24:29.725971
2025-12-13 01:27:13,890 - INFO - SYSTEM: Server module initialized at 2025-12-13 01:27:13.890038
2025-12-13 01:27:14,113 - INFO - SYSTEM: Server module initialized at 2025-12-13 01:27:14.113883
2025-12-13 01:28:37,460 - INFO - SYSTEM: Server module initialized at 2025-12-13 01:28:37.460525
2025-12-13 01:29:02,786 - INFO - SYSTEM: Server module initialized at 2025-12-13 01:29:02.786444
2025-12-13 01:29:02,809 - INFO - SYSTEM: Server module initialized at 2025-12-13 01:29:02.809001
2025-12-13 01:30:47,873 - INFO - JOB SUBMITTED: User eluhrs@gmail.com uploaded rock01.jpg
2025-12-13 01:30:59,127 - INFO - JOB SUBMITTED: User eluhrs@gmail.com uploaded north-01.jpg
2025-12-13 01:30:59,157 - INFO - JOB SUBMITTED: User eluhrs@gmail.com uploaded north-02.jpg
2025-12-13 01:34:50,786 - INFO - SYSTEM: Server module initialized at 2025-12-13 01:34:50.786705
2025-12-13 01:34:52,132 - INFO - Connected to redis://redis:6379/0
2025-12-13 01:34:52,134 - INFO - mingle: searching for neighbors
2025-12-13 01:34:53,148 - INFO - mingle: all alone
2025-12-13 01:34:53,176 - INFO - celery@79f8ea9e01aa ready.
2025-12-13 01:34:53,183 - INFO - Task server.tasks.process_document_task[b3f9c5c3-99eb-438a-b55d-58133b9f06b5] received
2025-12-13 01:34:53,186 - INFO - Task server.tasks.process_document_task[26b21267-dcff-41eb-b005-fc4bcc350e7a] received
2025-12-13 01:34:53,189 - INFO - Task server.tasks.process_document_task[89b0edb6-9098-4d77-a3e2-3aa8d33a9719] received
2025-12-13 01:34:53,192 - INFO - Task server.tasks.process_batch_task[a4b2e95d-17a4-4db6-8083-2ff41252e0cc] received
2025-12-13 01:34:53,288 - INFO - Task 2 received options raw: {"transcription":{"temperature":0.2}}
2025-12-13 01:34:53,293 - INFO - Task 2 parsed options: {'transcription': {'temperature': 0.2}}
2025-12-13 01:34:53,298 - INFO - Task 1 received options raw: {"transcription":{"temperature":0.2}}
2025-12-13 01:34:53,301 - INFO - Task 1 parsed options: {'transcription': {'temperature': 0.2}}
2025-12-13 01:34:53,301 - INFO - BATCH TASK START: Parent test.pdf (ID: 4)
2025-12-13 01:34:53,306 - INFO - Command: subscript historical-manuscript gemini-pro-3 /app/documents/eluhrs@gmail.com/test-1f610141/north-01.jpg /app/documents/eluhrs@gmail.com/test-1f610141/north-02.jpg --combine /app/documents/eluhrs@gmail.com/test-1f610141/test.pdf --output /app/documents/eluhrs@gmail.com/test-1f610141
2025-12-13 01:34:53,316 - INFO - TASK START: Processing rock01.jpg (ID: 1)
2025-12-13 01:34:53,318 - INFO - Running from: /app
2025-12-13 01:34:53,319 - INFO - Command: subscript historical-manuscript gemini-pro-3 /app/documents/eluhrs@gmail.com/rock01-30bebebb/rock01.jpg --output /app/documents/eluhrs@gmail.com/rock01-30bebebb
2025-12-13 01:34:53,320 - INFO - Using config: /app/config.yml
2025-12-13 01:34:53,321 - INFO - TASK START: Processing north-01.jpg (ID: 2)
2025-12-13 01:34:53,324 - INFO - Output directory: /app/documents/eluhrs@gmail.com/test-1f610141
2025-12-13 01:34:53,326 - INFO - Command: subscript historical-manuscript gemini-pro-3 /app/documents/eluhrs@gmail.com/north-01-5b57e4da/north-01.jpg --output /app/documents/eluhrs@gmail.com/north-01-5b57e4da
2025-12-13 01:34:53,336 - INFO - ----------------------------------------
2025-12-13 01:34:53,363 - INFO - Running from: /app
2025-12-13 01:34:53,363 - INFO - Running from: /app
2025-12-13 01:34:53,363 - INFO - Task 3 received options raw: {"transcription":{"temperature":0.2}}
2025-12-13 01:34:53,366 - INFO - Using config: /app/config.yml
2025-12-13 01:34:53,368 - INFO - Using config: /app/config.yml
2025-12-13 01:34:53,380 - INFO - Task 3 parsed options: {'transcription': {'temperature': 0.2}}
2025-12-13 01:34:53,383 - INFO - Output directory: /app/documents/eluhrs@gmail.com/north-01-5b57e4da
2025-12-13 01:34:53,385 - INFO - ----------------------------------------
2025-12-13 01:34:53,383 - INFO - Output directory: /app/documents/eluhrs@gmail.com/rock01-30bebebb
2025-12-13 01:34:53,390 - INFO - ----------------------------------------
2025-12-13 01:34:53,393 - INFO - TASK START: Processing north-02.jpg (ID: 3)
2025-12-13 01:34:53,408 - INFO - Command: subscript historical-manuscript gemini-pro-3 /app/documents/eluhrs@gmail.com/north-02-31da1e2a/north-02.jpg --output /app/documents/eluhrs@gmail.com/north-02-31da1e2a
2025-12-13 01:34:53,455 - INFO - Running from: /app
2025-12-13 01:34:53,458 - INFO - Using config: /app/config.yml
2025-12-13 01:34:53,458 - INFO - Output directory: /app/documents/eluhrs@gmail.com/north-02-31da1e2a
2025-12-13 01:34:53,459 - INFO - ----------------------------------------
2025-12-13 01:34:58,088 - INFO - 
Subscript.py initialized segmentation provider: historical-manuscript
2025-12-13 01:34:58,088 - INFO - 
Subscript.py initialized segmentation provider: historical-manuscript
2025-12-13 01:34:58,089 - INFO - Subscript.py Initialized transcription provider: gemini-pro-3
2025-12-13 01:34:58,089 - INFO - 
Subscript.py initialized segmentation provider: historical-manuscript
2025-12-13 01:34:58,089 - INFO - Subscript.py Initialized transcription provider: gemini-pro-3
2025-12-13 01:34:58,089 - INFO - Processing 1 files...
2025-12-13 01:34:58,089 - INFO - Subscript.py Initialized transcription provider: gemini-pro-3
2025-12-13 01:34:58,089 - INFO - Processing 1 files...
2025-12-13 01:34:58,090 - INFO - Processing /app/documents/eluhrs@gmail.com/north-01-5b57e4da/north-01.jpg...
2025-12-13 01:34:58,090 - INFO - Processing 1 files...
2025-12-13 01:34:58,089 - INFO - 
Subscript.py initialized segmentation provider: historical-manuscript
2025-12-13 01:34:58,090 - INFO - Processing /app/documents/eluhrs@gmail.com/north-02-31da1e2a/north-02.jpg...
2025-12-13 01:34:58,090 - INFO - Processing /app/documents/eluhrs@gmail.com/rock01-30bebebb/rock01.jpg...
2025-12-13 01:34:58,090 - INFO - Segmenting /app/documents/eluhrs@gmail.com/north-01-5b57e4da/north-01.jpg with Kraken...
2025-12-13 01:34:58,090 - INFO - Subscript.py Initialized transcription provider: gemini-pro-3
2025-12-13 01:34:58,090 - INFO - Segmenting /app/documents/eluhrs@gmail.com/rock01-30bebebb/rock01.jpg with Kraken...
2025-12-13 01:34:58,090 - INFO - Segmenting /app/documents/eluhrs@gmail.com/north-02-31da1e2a/north-02.jpg with Kraken...
2025-12-13 01:34:58,091 - INFO - Processing 2 files...
2025-12-13 01:34:58,092 - INFO - Processing /app/documents/eluhrs@gmail.com/test-1f610141/north-01.jpg...
2025-12-13 01:34:58,092 - INFO - Segmenting /app/documents/eluhrs@gmail.com/test-1f610141/north-01.jpg with Kraken...
2025-12-13 01:34:58,095 - INFO - Loading segmentation model from /usr/local/lib/python3.10/site-packages/kraken/blla.mlmodel...
2025-12-13 01:34:58,095 - INFO - Loading segmentation model from /usr/local/lib/python3.10/site-packages/kraken/blla.mlmodel...
2025-12-13 01:34:58,096 - INFO - Loading segmentation model from /usr/local/lib/python3.10/site-packages/kraken/blla.mlmodel...
2025-12-13 01:34:58,097 - INFO - Loading segmentation model from /usr/local/lib/python3.10/site-packages/kraken/blla.mlmodel...
2025-12-13 01:34:59,092 - INFO - Segmenting /app/documents/eluhrs@gmail.com/north-01-5b57e4da/north-01.jpg
2025-12-13 01:34:59,098 - INFO - Segmenting /app/documents/eluhrs@gmail.com/north-02-31da1e2a/north-02.jpg
2025-12-13 01:34:59,109 - INFO - Segmenting /app/documents/eluhrs@gmail.com/rock01-30bebebb/rock01.jpg
2025-12-13 01:34:59,141 - INFO - Segmenting /app/documents/eluhrs@gmail.com/test-1f610141/north-01.jpg
2025-12-13 01:35:19,667 - INFO - Vectorizing regions
2025-12-13 01:35:19,804 - INFO - Vectorizing regions
2025-12-13 01:35:19,860 - INFO - Vectorizing regions
2025-12-13 01:35:19,921 - INFO - Vectorizing regions
2025-12-13 01:35:19,992 - INFO - Vectorizing regions
2025-12-13 01:35:20,020 - INFO - Vectorizing baselines
2025-12-13 01:35:20,124 - INFO - Vectorizing regions
2025-12-13 01:35:20,148 - INFO - Vectorizing regions
2025-12-13 01:35:20,173 - INFO - Vectorizing baselines
2025-12-13 01:35:20,288 - INFO - Vectorizing baselines
2025-12-13 01:35:20,408 - INFO - Vectorizing regions
2025-12-13 01:35:20,603 - INFO - Vectorizing baselines
2025-12-13 01:35:28,523 - INFO - Compute reading order on 18 lines in lr direction
2025-12-13 01:35:28,530 - INFO - Perform topological sort on partially ordered lines
2025-12-13 01:35:28,530 - INFO - Compute reading order on 1 lines in lr direction
2025-12-13 01:35:28,531 - INFO - Perform topological sort on partially ordered lines
2025-12-13 01:35:28,532 - INFO - Found 18 lines.
2025-12-13 01:35:28,535 - INFO - Initializing Gemini model: gemini-3-pro-preview
2025-12-13 01:35:28,563 - INFO - Annotating 18 regions for Visual Tagging...
2025-12-13 01:35:28,702 - INFO - Compute reading order on 15 lines in lr direction
2025-12-13 01:35:28,705 - INFO - Perform topological sort on partially ordered lines
2025-12-13 01:35:28,707 - INFO - Compute reading order on 1 lines in lr direction
2025-12-13 01:35:28,708 - INFO - Perform topological sort on partially ordered lines
2025-12-13 01:35:28,708 - INFO - Compute reading order on 2 lines in lr direction
2025-12-13 01:35:28,708 - INFO - Perform topological sort on partially ordered lines
2025-12-13 01:35:28,715 - INFO - Found 16 lines.
2025-12-13 01:35:28,733 - INFO - Initializing Gemini model: gemini-3-pro-preview
2025-12-13 01:35:28,737 - INFO - Saved debug image to /app/documents/eluhrs@gmail.com/north-01-5b57e4da/north-01-debug.jpg
2025-12-13 01:35:28,739 - INFO - Sending annotated image to Gemini...
2025-12-13 01:35:28,752 - INFO - Annotating 16 regions for Visual Tagging...
2025-12-13 01:35:28,861 - INFO - Saved debug image to /app/documents/eluhrs@gmail.com/north-02-31da1e2a/north-02-debug.jpg
2025-12-13 01:35:28,864 - INFO - Sending annotated image to Gemini...
2025-12-13 01:35:29,197 - INFO - Compute reading order on 18 lines in lr direction
2025-12-13 01:35:29,199 - INFO - Perform topological sort on partially ordered lines
2025-12-13 01:35:29,201 - INFO - Compute reading order on 1 lines in lr direction
2025-12-13 01:35:29,201 - INFO - Perform topological sort on partially ordered lines
2025-12-13 01:35:29,204 - INFO - Found 18 lines.
2025-12-13 01:35:29,208 - INFO - Initializing Gemini model: gemini-3-pro-preview
2025-12-13 01:35:29,228 - INFO - Annotating 18 regions for Visual Tagging...
2025-12-13 01:35:29,278 - INFO - Saved debug image to /app/documents/eluhrs@gmail.com/test-1f610141/north-01-debug.jpg
2025-12-13 01:35:29,278 - INFO - Sending annotated image to Gemini...
2025-12-13 01:35:32,484 - INFO - Compute reading order on 23 lines in lr direction
2025-12-13 01:35:32,485 - INFO - Perform topological sort on partially ordered lines
2025-12-13 01:35:32,486 - INFO - Compute reading order on 1 lines in lr direction
2025-12-13 01:35:32,487 - INFO - Perform topological sort on partially ordered lines
2025-12-13 01:35:32,487 - INFO - Compute reading order on 2 lines in lr direction
2025-12-13 01:35:32,487 - INFO - Perform topological sort on partially ordered lines
2025-12-13 01:35:32,489 - INFO - Found 24 lines.
2025-12-13 01:35:32,492 - INFO - Initializing Gemini model: gemini-3-pro-preview
2025-12-13 01:35:32,674 - INFO - Resized image to (2289, 3000)
2025-12-13 01:35:32,683 - INFO - Annotating 24 regions for Visual Tagging...
2025-12-13 01:35:32,790 - INFO - Saved debug image to /app/documents/eluhrs@gmail.com/rock01-30bebebb/rock01-debug.jpg
2025-12-13 01:35:32,791 - INFO - Sending annotated image to Gemini...
2025-12-13 01:36:01,974 - INFO - Received JSON response from Gemini.
2025-12-13 01:36:02,354 - INFO - SUBSCRIPT OUTPUT for 1:

------------- gemini-pro-3 output for rock01.jpg -------------
74
Panama, Dec. 29. 1874
My dear Capt. Green.-
Your favor by Dr. Boyd duly came.
We observed our latitude stars on Sunday night, and
of course last night again. The instrument behaves well.
Yesterday morning (before your letter came) & this morn,
we observed for azimuth & variation. Though heavily on
our minds we couldn't accomplish it earlier, while the
longitude work lasted. On Sat. night we observed 24 stars.
I will enclose your signals. I think our work is a success.
To-day Mr. Spencer dismounts the telegraph line. We hope to
un
come over on Sat. Morn. - I do not think the pier is steady,
I think some one hit an arm of the instrument unconsciously
each time I found it out of meridian.
The vernier trouble is due to that arm making an angle
with the vertical. I am convinced that most of the register
troubles are due to bad quality of the fillet paper. It is un=
equal thickness at two edges and also varies in thickness
lengthwise, so as to require frequent readjustment of
rollers & stylet.
Very truly Yrs.
Miles Rock
----------------------------------------------------------------

Saved PageXML to /app/documents/eluhrs@gmail.com/rock01-30bebebb/rock01.xml
Saved TXT to /app/documents/eluhrs@gmail.com/rock01-30bebebb/rock01.txt
Saved PDF to /app/documents/eluhrs@gmail.com/rock01-30bebebb/rock01.pdf

Time:   00:01:04
Input:  1295 tokens
Output: 418 tokens
Cost:   $0.0076

----------------------------------------------------------------


2025-12-13 01:36:02,390 - INFO - Task server.tasks.process_document_task[b3f9c5c3-99eb-438a-b55d-58133b9f06b5] succeeded in 69.20370373991318s: None
2025-12-13 01:36:03,416 - INFO - SYSTEM: Server module initialized at 2025-12-13 01:36:03.416911
2025-12-13 01:36:30,114 - INFO - Received JSON response from Gemini.
2025-12-13 01:36:30,288 - INFO - SUBSCRIPT OUTPUT for 3:

------------- gemini-pro-3 output for north-02.jpg -------------
all ye euells yt may be, ar crept so near vntous.
Zeland is full, France not free, & Scotland
vnclensid: the Common people spoyled, theyr
Commonwelths racked, theyr Nobilitie
murtherid, the Councell contemnid and
theyr Kyngs disobeyed: For dissention, sedici=
on Ciuell slaughtar, & rebellion, is ye onlie
argument entreatid of among them .
If therfore it pleasid her Hyghnes, to vse ye
benefit of present tyme: to bend her browe
vpon ye disobedient: to hold vp her threatning
hand ouer them, and to aduance her pusant
arme towards them: the verie shadoe of her
sworde, wold feare and vanquyshe yt prow=
dest of them .
but
----------------------------------------------------------------

Saved PageXML to /app/documents/eluhrs@gmail.com/north-02-31da1e2a/north-02.xml
Saved TXT to /app/documents/eluhrs@gmail.com/north-02-31da1e2a/north-02.txt
Saved PDF to /app/documents/eluhrs@gmail.com/north-02-31da1e2a/north-02.pdf

Time:   00:01:32
Input:  1273 tokens
Output: 282 tokens
Cost:   $0.0059

----------------------------------------------------------------


2025-12-13 01:36:30,318 - INFO - Task server.tasks.process_document_task[89b0edb6-9098-4d77-a3e2-3aa8d33a9719] succeeded in 97.12415100203361s: None
2025-12-13 01:37:31,604 - INFO - Received JSON response from Gemini.
2025-12-13 01:37:31,611 - ERROR - Failed to generate PDF: [Errno 2] No such file or directory: '/app/documents/eluhrs@gmail.com/north-01-5b57e4da/north-01.jpg'
2025-12-13 01:37:31,613 - ERROR - Failed to process /app/documents/eluhrs@gmail.com/north-01-5b57e4da/north-01.jpg: [Errno 2] No such file or directory: '/app/documents/eluhrs@gmail.com/north-01-5b57e4da/north-01.jpg'
2025-12-13 01:37:31,619 - INFO - SUBSCRIPT OUTPUT for 2:
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/subscript/__main__.py", line 300, in main
    output_engine.generate(image_path, regions, config.get('output_dir', 'output'), config)
  File "/usr/local/lib/python3.10/site-packages/subscript/modules/output.py", line 32, in generate
    self._generate_xml(image_path, regions, xml_path)
  File "/usr/local/lib/python3.10/site-packages/subscript/modules/output.py", line 52, in _generate_xml
    with Image.open(image_path) as im:
  File "/usr/local/lib/python3.10/site-packages/PIL/Image.py", line 3493, in open
    fp = builtins.open(filename, "rb")
FileNotFoundError: [Errno 2] No such file or directory: '/app/documents/eluhrs@gmail.com/north-01-5b57e4da/north-01.jpg'

2025-12-13 01:37:31,660 - INFO - Task server.tasks.process_document_task[26b21267-dcff-41eb-b005-fc4bcc350e7a] succeeded in 158.46933503099717s: None
2025-12-13 01:37:45,225 - INFO - Received JSON response from Gemini.
2025-12-13 01:37:45,233 - ERROR - Failed to generate PDF: [Errno 2] No such file or directory: '/app/documents/eluhrs@gmail.com/test-1f610141/north-01.jpg'
2025-12-13 01:37:45,235 - ERROR - Failed to process /app/documents/eluhrs@gmail.com/test-1f610141/north-01.jpg: [Errno 2] No such file or directory: '/app/documents/eluhrs@gmail.com/test-1f610141/north-01.jpg'
2025-12-13 01:37:45,238 - INFO - Processing /app/documents/eluhrs@gmail.com/test-1f610141/north-02.jpg...
2025-12-13 01:37:45,238 - INFO - Segmenting /app/documents/eluhrs@gmail.com/test-1f610141/north-02.jpg with Kraken...
2025-12-13 01:37:45,239 - ERROR - Failed to process /app/documents/eluhrs@gmail.com/test-1f610141/north-02.jpg: [Errno 2] No such file or directory: '/app/documents/eluhrs@gmail.com/test-1f610141/north-02.jpg'
2025-12-13 01:37:45,241 - INFO - BATCH OUTPUT:
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/subscript/__main__.py", line 300, in main
    output_engine.generate(image_path, regions, config.get('output_dir', 'output'), config)
  File "/usr/local/lib/python3.10/site-packages/subscript/modules/output.py", line 32, in generate
    self._generate_xml(image_path, regions, xml_path)
  File "/usr/local/lib/python3.10/site-packages/subscript/modules/output.py", line 52, in _generate_xml
    with Image.open(image_path) as im:
  File "/usr/local/lib/python3.10/site-packages/PIL/Image.py", line 3493, in open
    fp = builtins.open(filename, "rb")
FileNotFoundError: [Errno 2] No such file or directory: '/app/documents/eluhrs@gmail.com/test-1f610141/north-01.jpg'
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/subscript/__main__.py", line 284, in main
    regions = segmentation_engine.analyze(image_path, config)
  File "/usr/local/lib/python3.10/site-packages/subscript/modules/segmentation.py", line 34, in analyze
    im = Image.open(image_path)
  File "/usr/local/lib/python3.10/site-packages/PIL/Image.py", line 3493, in open
    fp = builtins.open(filename, "rb")
FileNotFoundError: [Errno 2] No such file or directory: '/app/documents/eluhrs@gmail.com/test-1f610141/north-02.jpg'

2025-12-13 01:37:45,272 - INFO - Task server.tasks.process_batch_task[a4b2e95d-17a4-4db6-8083-2ff41252e0cc] succeeded in 172.07452049606945s: None
2025-12-13 01:38:00,290 - INFO - SYSTEM: Server module initialized at 2025-12-13 01:38:00.290924
2025-12-13 01:38:01,381 - INFO - SYSTEM: Server module initialized at 2025-12-13 01:38:01.381517
2025-12-13 01:38:01,483 - INFO - SYSTEM: Server module initialized at 2025-12-13 01:38:01.483374
2025-12-13 01:38:02,623 - INFO - Connected to redis://redis:6379/0
2025-12-13 01:38:02,630 - INFO - mingle: searching for neighbors
2025-12-13 01:38:03,647 - INFO - mingle: all alone
2025-12-13 01:38:03,659 - INFO - celery@79f8ea9e01aa ready.
2025-12-13 01:39:07,317 - INFO - JOB SUBMITTED: User eluhrs@gmail.com uploaded rock01.jpg
2025-12-13 01:39:07,453 - INFO - Task server.tasks.process_document_task[68e3ce24-b5fc-4786-a062-a2b77e8df06d] received
2025-12-13 01:39:07,514 - INFO - Task 1 received options raw: {"transcription":{"temperature":0.2}}
2025-12-13 01:39:07,515 - INFO - Task 1 parsed options: {'transcription': {'temperature': 0.2}}
2025-12-13 01:39:07,517 - INFO - TASK START: Processing rock01.jpg (ID: 1)
2025-12-13 01:39:07,518 - INFO - Command: subscript historical-manuscript gemini-pro-3 /app/documents/eluhrs@gmail.com/rock01-e61d1c8a/rock01.jpg --output /app/documents/eluhrs@gmail.com/rock01-e61d1c8a
2025-12-13 01:39:07,527 - INFO - Running from: /app
2025-12-13 01:39:07,527 - INFO - Using config: /app/config.yml
2025-12-13 01:39:07,528 - INFO - Output directory: /app/documents/eluhrs@gmail.com/rock01-e61d1c8a
2025-12-13 01:39:07,528 - INFO - ----------------------------------------
2025-12-13 01:39:11,212 - INFO - 
Subscript.py initialized segmentation provider: historical-manuscript
2025-12-13 01:39:11,213 - INFO - Subscript.py Initialized transcription provider: gemini-pro-3
2025-12-13 01:39:11,213 - INFO - Processing 1 files...
2025-12-13 01:39:11,213 - INFO - Processing /app/documents/eluhrs@gmail.com/rock01-e61d1c8a/rock01.jpg...
2025-12-13 01:39:11,213 - INFO - Segmenting /app/documents/eluhrs@gmail.com/rock01-e61d1c8a/rock01.jpg with Kraken...
2025-12-13 01:39:11,219 - INFO - Loading segmentation model from /usr/local/lib/python3.10/site-packages/kraken/blla.mlmodel...
2025-12-13 01:39:11,684 - INFO - Segmenting /app/documents/eluhrs@gmail.com/rock01-e61d1c8a/rock01.jpg
2025-12-13 01:39:15,717 - INFO - Vectorizing regions
2025-12-13 01:39:15,904 - INFO - Vectorizing regions
2025-12-13 01:39:16,088 - INFO - Vectorizing baselines
2025-12-13 01:39:24,450 - INFO - Compute reading order on 23 lines in lr direction
2025-12-13 01:39:24,452 - INFO - Perform topological sort on partially ordered lines
2025-12-13 01:39:24,462 - INFO - Compute reading order on 1 lines in lr direction
2025-12-13 01:39:24,463 - INFO - Perform topological sort on partially ordered lines
2025-12-13 01:39:24,463 - INFO - Compute reading order on 2 lines in lr direction
2025-12-13 01:39:24,464 - INFO - Perform topological sort on partially ordered lines
2025-12-13 01:39:24,469 - INFO - Found 24 lines.
2025-12-13 01:39:24,471 - INFO - Initializing Gemini model: gemini-3-pro-preview
2025-12-13 01:39:24,645 - INFO - Resized image to (2289, 3000)
2025-12-13 01:39:24,654 - INFO - Annotating 24 regions for Visual Tagging...
2025-12-13 01:39:24,753 - INFO - Saved debug image to /app/documents/eluhrs@gmail.com/rock01-e61d1c8a/rock01-debug.jpg
2025-12-13 01:39:24,753 - INFO - Sending annotated image to Gemini...
2025-12-13 01:39:52,157 - INFO - SYSTEM: Server module initialized at 2025-12-13 01:39:52.157733
2025-12-13 01:40:02,833 - INFO - SYSTEM: Server module initialized at 2025-12-13 01:40:02.833326
2025-12-13 01:40:08,559 - INFO - Received JSON response from Gemini.
2025-12-13 01:40:08,937 - INFO - SUBSCRIPT OUTPUT for 1:

------------- gemini-pro-3 output for rock01.jpg -------------
74
Panama, Dec. 29. 1874
My dear Capt. Green.-
Your favor by Dr. Boyd duly came.
We observed our latitude stars on Sunday night, and
of course last night again. The instrument behaves well.
Yesterday morning (before your letter came) & this morn.
we observed for azimuth & variation. Though heavily on
our minds we couldn't accomplish it earlier, while the
longitude work lasted. On Sat. night we observed 24 stars.
I will enclose your signals. I think our work is a success.
To-day Mr. Spencer dismounts the telegraph line. We hope to
un
come over on Sat. Morn. - I do not think the pier is steady,
I think some one hit an arm of the instrument unconsciously
each time I found it out of meridian.
The vernier trouble is due to that arm making an angle
with the vertical. I am convinced that most of the register
troubles are due to bad quality of the fillet paper. It is un=
equal thickness at two edges and also varies in thickness
lengthwise, so as to require frequent readjustment of
rollers & stylet.
Very truly Yrs.
Miles Rock
----------------------------------------------------------------

Saved PageXML to /app/documents/eluhrs@gmail.com/rock01-e61d1c8a/rock01.xml
Saved TXT to /app/documents/eluhrs@gmail.com/rock01-e61d1c8a/rock01.txt
Saved PDF to /app/documents/eluhrs@gmail.com/rock01-e61d1c8a/rock01.pdf

Time:   00:00:57
Input:  1295 tokens
Output: 418 tokens
Cost:   $0.0076

----------------------------------------------------------------


2025-12-13 01:40:08,957 - INFO - Task server.tasks.process_document_task[68e3ce24-b5fc-4786-a062-a2b77e8df06d] succeeded in 61.49968777701724s: None
2025-12-13 01:40:16,950 - INFO - SYSTEM: Server module initialized at 2025-12-13 01:40:16.950017
2025-12-13 01:40:28,680 - INFO - SYSTEM: Server module initialized at 2025-12-13 01:40:28.680763
2025-12-13 01:40:42,713 - INFO - SYSTEM: Server module initialized at 2025-12-13 01:40:42.713657
2025-12-13 01:40:55,688 - INFO - SYSTEM: Server module initialized at 2025-12-13 01:40:55.688905
2025-12-13 01:44:02,123 - INFO - SYSTEM: Server module initialized at 2025-12-13 01:44:02.123490
2025-12-13 01:44:12,399 - INFO - SYSTEM: Server module initialized at 2025-12-13 01:44:12.399301
2025-12-13 01:45:57,424 - INFO - JOB SUBMITTED: User eluhrs@gmail.com uploaded rock01.jpg
2025-12-13 01:45:57,582 - INFO - Task server.tasks.process_document_task[377273c4-a6b0-403b-9e09-d82617b0544c] received
2025-12-13 01:45:57,622 - INFO - Task 1 received options raw: {"transcription":{"temperature":0.2}}
2025-12-13 01:45:57,623 - INFO - Task 1 parsed options: {'transcription': {'temperature': 0.2}}
2025-12-13 01:45:57,625 - INFO - TASK START: Processing rock01.jpg (ID: 1)
2025-12-13 01:45:57,626 - INFO - Command: subscript historical-manuscript gemini-pro-3 /app/documents/eluhrs@gmail.com/rock01-8a4da3ef/rock01.jpg --output /app/documents/eluhrs@gmail.com/rock01-8a4da3ef
2025-12-13 01:45:57,638 - INFO - Running from: /app
2025-12-13 01:45:57,638 - INFO - Using config: /app/config.yml
2025-12-13 01:45:57,638 - INFO - Output directory: /app/documents/eluhrs@gmail.com/rock01-8a4da3ef
2025-12-13 01:45:57,639 - INFO - ----------------------------------------
2025-12-13 01:45:57,641 - INFO - 
Subscript.py initialized segmentation provider: historical-manuscript
2025-12-13 01:45:57,642 - INFO - Subscript.py Initialized transcription provider: gemini-pro-3
2025-12-13 01:45:57,642 - INFO - Processing 1 files...
2025-12-13 01:45:57,643 - INFO - Processing /app/documents/eluhrs@gmail.com/rock01-8a4da3ef/rock01.jpg...
2025-12-13 01:45:57,643 - INFO - Segmenting /app/documents/eluhrs@gmail.com/rock01-8a4da3ef/rock01.jpg with Kraken...
2025-12-13 01:45:57,645 - INFO - Loading segmentation model from /usr/local/lib/python3.10/site-packages/kraken/blla.mlmodel...
2025-12-13 01:45:58,191 - INFO - Segmenting /app/documents/eluhrs@gmail.com/rock01-8a4da3ef/rock01.jpg
2025-12-13 01:46:01,778 - INFO - Vectorizing regions
2025-12-13 01:46:01,971 - INFO - Vectorizing regions
2025-12-13 01:46:02,154 - INFO - Vectorizing baselines
2025-12-13 01:46:05,805 - INFO - JOB SUBMITTED: User eluhrs@gmail.com uploaded north-01.jpg
2025-12-13 01:46:05,807 - INFO - Task server.tasks.process_document_task[fe0fc9ba-968b-449c-9606-e4b6423c4bee] received
2025-12-13 01:46:05,831 - INFO - JOB SUBMITTED: User eluhrs@gmail.com uploaded north-02.jpg
2025-12-13 01:46:05,833 - INFO - Task server.tasks.process_document_task[8a06167f-5a5d-47bb-bf37-b77f9d298a51] received
2025-12-13 01:46:05,947 - INFO - Task 2 received options raw: {"transcription":{"temperature":0.2}}
2025-12-13 01:46:05,948 - INFO - Task 2 parsed options: {'transcription': {'temperature': 0.2}}
2025-12-13 01:46:05,951 - INFO - TASK START: Processing north-01.jpg (ID: 2)
2025-12-13 01:46:05,951 - INFO - Command: subscript historical-manuscript gemini-pro-3 /app/documents/eluhrs@gmail.com/north-01-4fa45599/north-01.jpg --output /app/documents/eluhrs@gmail.com/north-01-4fa45599
2025-12-13 01:46:05,951 - INFO - Task 3 received options raw: {"transcription":{"temperature":0.2}}
2025-12-13 01:46:05,952 - INFO - Task 3 parsed options: {'transcription': {'temperature': 0.2}}
2025-12-13 01:46:05,955 - INFO - TASK START: Processing north-02.jpg (ID: 3)
2025-12-13 01:46:05,956 - INFO - Command: subscript historical-manuscript gemini-pro-3 /app/documents/eluhrs@gmail.com/north-02-c035ccf3/north-02.jpg --output /app/documents/eluhrs@gmail.com/north-02-c035ccf3
2025-12-13 01:46:05,963 - INFO - Running from: /app
2025-12-13 01:46:05,963 - INFO - Using config: /app/config.yml
2025-12-13 01:46:05,964 - INFO - Output directory: /app/documents/eluhrs@gmail.com/north-01-4fa45599
2025-12-13 01:46:05,964 - INFO - ----------------------------------------
2025-12-13 01:46:05,966 - INFO - Running from: /app
2025-12-13 01:46:05,967 - INFO - Using config: /app/config.yml
2025-12-13 01:46:05,967 - INFO - Output directory: /app/documents/eluhrs@gmail.com/north-02-c035ccf3
2025-12-13 01:46:05,967 - INFO - ----------------------------------------
2025-12-13 01:46:09,953 - INFO - 
Subscript.py initialized segmentation provider: historical-manuscript
2025-12-13 01:46:09,954 - INFO - Subscript.py Initialized transcription provider: gemini-pro-3
2025-12-13 01:46:09,954 - INFO - Processing 1 files...
2025-12-13 01:46:09,954 - INFO - Processing /app/documents/eluhrs@gmail.com/north-02-c035ccf3/north-02.jpg...
2025-12-13 01:46:09,955 - INFO - Segmenting /app/documents/eluhrs@gmail.com/north-02-c035ccf3/north-02.jpg with Kraken...
2025-12-13 01:46:09,959 - INFO - Loading segmentation model from /usr/local/lib/python3.10/site-packages/kraken/blla.mlmodel...
2025-12-13 01:46:09,959 - INFO - 
Subscript.py initialized segmentation provider: historical-manuscript
2025-12-13 01:46:09,959 - INFO - Subscript.py Initialized transcription provider: gemini-pro-3
2025-12-13 01:46:09,960 - INFO - Processing 1 files...
2025-12-13 01:46:09,960 - INFO - Processing /app/documents/eluhrs@gmail.com/north-01-4fa45599/north-01.jpg...
2025-12-13 01:46:09,960 - INFO - Segmenting /app/documents/eluhrs@gmail.com/north-01-4fa45599/north-01.jpg with Kraken...
2025-12-13 01:46:09,964 - INFO - Loading segmentation model from /usr/local/lib/python3.10/site-packages/kraken/blla.mlmodel...
2025-12-13 01:46:11,225 - INFO - Segmenting /app/documents/eluhrs@gmail.com/north-02-c035ccf3/north-02.jpg
2025-12-13 01:46:11,260 - INFO - Segmenting /app/documents/eluhrs@gmail.com/north-01-4fa45599/north-01.jpg
2025-12-13 01:46:12,272 - INFO - Compute reading order on 23 lines in lr direction
2025-12-13 01:46:12,291 - INFO - Perform topological sort on partially ordered lines
2025-12-13 01:46:12,294 - INFO - Compute reading order on 1 lines in lr direction
2025-12-13 01:46:12,295 - INFO - Perform topological sort on partially ordered lines
2025-12-13 01:46:12,307 - INFO - Compute reading order on 2 lines in lr direction
2025-12-13 01:46:12,315 - INFO - Perform topological sort on partially ordered lines
2025-12-13 01:46:12,317 - INFO - Found 24 lines.
2025-12-13 01:46:12,340 - INFO - Initializing Gemini model: gemini-3-pro-preview
2025-12-13 01:46:12,764 - INFO - Resized image to (2289, 3000)
2025-12-13 01:46:12,784 - INFO - Annotating 24 regions for Visual Tagging...
2025-12-13 01:46:12,979 - INFO - Saved debug image to /app/documents/eluhrs@gmail.com/rock01-8a4da3ef/rock01-debug.jpg
2025-12-13 01:46:12,980 - INFO - Sending annotated image to Gemini...
2025-12-13 01:46:17,089 - INFO - Task server.tasks.process_batch_task[794f3680-e57e-4260-a0d3-d41c615b33e6] received
2025-12-13 01:46:17,171 - INFO - BATCH TASK START: Parent merged.pdf (ID: 4)
2025-12-13 01:46:17,172 - INFO - Command: subscript historical-manuscript gemini-pro-3 /app/documents/eluhrs@gmail.com/merged-3fb4088d/north-01.jpg /app/documents/eluhrs@gmail.com/merged-3fb4088d/north-02.jpg --combine /app/documents/eluhrs@gmail.com/merged-3fb4088d/merged.pdf --output /app/documents/eluhrs@gmail.com/merged-3fb4088d
2025-12-13 01:46:17,181 - INFO - Running from: /app
2025-12-13 01:46:17,182 - INFO - Using config: /app/config.yml
2025-12-13 01:46:17,182 - INFO - Output directory: /app/documents/eluhrs@gmail.com/merged-3fb4088d
2025-12-13 01:46:17,182 - INFO - ----------------------------------------
2025-12-13 01:46:20,414 - INFO - 
Subscript.py initialized segmentation provider: historical-manuscript
2025-12-13 01:46:20,415 - INFO - Subscript.py Initialized transcription provider: gemini-pro-3
2025-12-13 01:46:20,415 - INFO - Processing 2 files...
2025-12-13 01:46:20,416 - INFO - Processing /app/documents/eluhrs@gmail.com/merged-3fb4088d/north-01.jpg...
2025-12-13 01:46:20,417 - INFO - Segmenting /app/documents/eluhrs@gmail.com/merged-3fb4088d/north-01.jpg with Kraken...
2025-12-13 01:46:20,422 - INFO - Loading segmentation model from /usr/local/lib/python3.10/site-packages/kraken/blla.mlmodel...
2025-12-13 01:46:21,136 - INFO - Segmenting /app/documents/eluhrs@gmail.com/merged-3fb4088d/north-01.jpg
2025-12-13 01:46:22,424 - INFO - Vectorizing regions
2025-12-13 01:46:22,458 - INFO - Vectorizing regions
2025-12-13 01:46:22,567 - INFO - Vectorizing regions
2025-12-13 01:46:22,614 - INFO - Vectorizing regions
2025-12-13 01:46:22,695 - INFO - Vectorizing baselines
2025-12-13 01:46:22,748 - INFO - Vectorizing baselines
2025-12-13 01:46:26,460 - INFO - Vectorizing regions
2025-12-13 01:46:26,602 - INFO - Vectorizing regions
2025-12-13 01:46:26,742 - INFO - Vectorizing baselines
2025-12-13 01:46:30,285 - INFO - Compute reading order on 15 lines in lr direction
2025-12-13 01:46:30,286 - INFO - Perform topological sort on partially ordered lines
2025-12-13 01:46:30,286 - INFO - Compute reading order on 1 lines in lr direction
2025-12-13 01:46:30,286 - INFO - Perform topological sort on partially ordered lines
2025-12-13 01:46:30,287 - INFO - Compute reading order on 2 lines in lr direction
2025-12-13 01:46:30,287 - INFO - Perform topological sort on partially ordered lines
2025-12-13 01:46:30,288 - INFO - Found 16 lines.
2025-12-13 01:46:30,289 - INFO - Initializing Gemini model: gemini-3-pro-preview
2025-12-13 01:46:30,300 - INFO - Compute reading order on 18 lines in lr direction
2025-12-13 01:46:30,301 - INFO - Perform topological sort on partially ordered lines
2025-12-13 01:46:30,301 - INFO - Compute reading order on 1 lines in lr direction
2025-12-13 01:46:30,302 - INFO - Perform topological sort on partially ordered lines
2025-12-13 01:46:30,303 - INFO - Annotating 16 regions for Visual Tagging...
2025-12-13 01:46:30,303 - INFO - Found 18 lines.
2025-12-13 01:46:30,306 - INFO - Initializing Gemini model: gemini-3-pro-preview
2025-12-13 01:46:30,325 - INFO - Annotating 18 regions for Visual Tagging...
2025-12-13 01:46:30,345 - INFO - Saved debug image to /app/documents/eluhrs@gmail.com/north-02-c035ccf3/north-02-debug.jpg
2025-12-13 01:46:30,345 - INFO - Sending annotated image to Gemini...
2025-12-13 01:46:30,370 - INFO - Saved debug image to /app/documents/eluhrs@gmail.com/north-01-4fa45599/north-01-debug.jpg
2025-12-13 01:46:30,370 - INFO - Sending annotated image to Gemini...
2025-12-13 01:46:33,938 - INFO - Compute reading order on 18 lines in lr direction
2025-12-13 01:46:33,939 - INFO - Perform topological sort on partially ordered lines
2025-12-13 01:46:33,939 - INFO - Compute reading order on 1 lines in lr direction
2025-12-13 01:46:33,939 - INFO - Perform topological sort on partially ordered lines
2025-12-13 01:46:33,941 - INFO - Found 18 lines.
2025-12-13 01:46:33,941 - INFO - Initializing Gemini model: gemini-3-pro-preview
2025-12-13 01:46:33,955 - INFO - Annotating 18 regions for Visual Tagging...
2025-12-13 01:46:33,992 - INFO - Saved debug image to /app/documents/eluhrs@gmail.com/merged-3fb4088d/north-01-debug.jpg
2025-12-13 01:46:33,993 - INFO - Sending annotated image to Gemini...
2025-12-13 01:46:59,393 - INFO - Received JSON response from Gemini.
2025-12-13 01:46:59,787 - INFO - SUBSCRIPT OUTPUT for 1:

------------- gemini-pro-3 output for rock01.jpg -------------
74
Panama, Dec. 29. 1874
My dear Capt. Green,-
Your favor by Dr. Boyd duly came.
We observed our latitude stars on Sunday night, and
of course last night again. The instrument behaves well.
Yesterday morning (before your letter came) & this morn.
we observed for azimuth & variation. Though heavily on
our minds we couldn't accomplish it earlier, while the
longitude work lasted. On Sat. night we observed 24 stars.
I will enclose your signals. I think our work is a success.
To-day Mr. Spencer dismounts the telegraph line. We hope to
un
come over on Sat. Morn. - I do not think the pier is steady,
I think some one hit an arm of the instrument unconsciously
each time I found it out of meridian.
The vernier trouble is due to that arm making an angle
with the vertical. I am convinced that most of the register
troubles are due to bad quality of the fillet paper. It is un=
equal thickness at two edges and also varies in thickness
lengthwise, so as to require frequent readjustment of
rollers & stylet.
Very truly Yrs.
Miles Rock
----------------------------------------------------------------

Saved PageXML to /app/documents/eluhrs@gmail.com/rock01-8a4da3ef/rock01.xml
Saved TXT to /app/documents/eluhrs@gmail.com/rock01-8a4da3ef/rock01.txt
Saved PDF to /app/documents/eluhrs@gmail.com/rock01-8a4da3ef/rock01.pdf

Time:   00:01:02
Input:  1295 tokens
Output: 418 tokens
Cost:   $0.0076

----------------------------------------------------------------


2025-12-13 01:46:59,810 - INFO - Task server.tasks.process_document_task[377273c4-a6b0-403b-9e09-d82617b0544c] succeeded in 62.213852111948654s: None
2025-12-13 01:47:51,820 - INFO - Received JSON response from Gemini.
2025-12-13 01:47:52,011 - INFO - SUBSCRIPT OUTPUT for 2:

------------- gemini-pro-3 output for north-01.jpg -------------
glad aspects were present (confirming her
Maiestie wth THEODOSIES dylligence, ARETAPHE=
LIS constancie, and ANTIGONVS clemencie)
setlinge them selues euar sence, in her Princelie
brest: as ye rarenes and greatnes of her Gracis
vertuse declare . Whom God presaruid from
formar perell, to rule & reygne ouer us, in
this last leaden adge: wherin Iniquitie hath
sought to surmount ye glorie of his Deitie, and
so presumed to suppresse his professors: As if
ye Shylde of her Souerayntie (for worldlie
force) did not protect his poore membars a=
Quens
Ma:tie is ye per
fect protector
of Religion
mong us: what error wold not inuade us?
what Scisme or sect wold not assawte us?
----------------------------------------------------------------

Saved PageXML to /app/documents/eluhrs@gmail.com/north-01-4fa45599/north-01.xml
Saved TXT to /app/documents/eluhrs@gmail.com/north-01-4fa45599/north-01.txt
Saved PDF to /app/documents/eluhrs@gmail.com/north-01-4fa45599/north-01.pdf

Time:   00:01:42
Input:  1285 tokens
Output: 334 tokens
Cost:   $0.0066

----------------------------------------------------------------


2025-12-13 01:47:52,027 - INFO - Task server.tasks.process_document_task[fe0fc9ba-968b-449c-9606-e4b6423c4bee] succeeded in 106.21305025590118s: None
2025-12-13 01:48:20,701 - INFO - Received JSON response from Gemini.
2025-12-13 01:48:20,871 - INFO - SUBSCRIPT OUTPUT for 3:

------------- gemini-pro-3 output for north-02.jpg -------------
all ye euells yt may be, ar crept so near vntous.
Zeland is full, France not free, & Scotland
vnclensid: the Common people spoyled, theyr
Commonwelths racked, theyr Nobilitie
murtherid, the Councell contemnd and
theyr Kyngs disobeyed: For dissention, sedici=
on Ciuell slaughtar, & rebellion, is ye onlie
argument entreatid of among them.
If therfore it pleasid her Hyghnes, to vse ye
benefit of present tyme: to bend her browe
vpon ye disobedient: to hold vp her threatning
hand ouer them, and to aduance her pusant
arme towards them: the verie shadoe of her
worde, wold feare and vanquyshe ye prow=
dest of them.
but
----------------------------------------------------------------

Saved PageXML to /app/documents/eluhrs@gmail.com/north-02-c035ccf3/north-02.xml
Saved TXT to /app/documents/eluhrs@gmail.com/north-02-c035ccf3/north-02.txt
Saved PDF to /app/documents/eluhrs@gmail.com/north-02-c035ccf3/north-02.pdf

Time:   00:02:10
Input:  1273 tokens
Output: 280 tokens
Cost:   $0.0059

----------------------------------------------------------------


2025-12-13 01:48:20,884 - INFO - Task server.tasks.process_document_task[8a06167f-5a5d-47bb-bf37-b77f9d298a51] succeeded in 135.04007168707903s: None
2025-12-13 01:48:32,535 - INFO - Received JSON response from Gemini.
2025-12-13 01:48:32,718 - INFO - Processing /app/documents/eluhrs@gmail.com/merged-3fb4088d/north-02.jpg...
2025-12-13 01:48:32,718 - INFO - Segmenting /app/documents/eluhrs@gmail.com/merged-3fb4088d/north-02.jpg with Kraken...
2025-12-13 01:48:32,719 - INFO - Loading segmentation model from /usr/local/lib/python3.10/site-packages/kraken/blla.mlmodel...
2025-12-13 01:48:33,152 - INFO - Segmenting /app/documents/eluhrs@gmail.com/merged-3fb4088d/north-02.jpg
2025-12-13 01:48:35,788 - INFO - Vectorizing regions
2025-12-13 01:48:35,917 - INFO - Vectorizing regions
2025-12-13 01:48:36,042 - INFO - Vectorizing baselines
2025-12-13 01:48:42,310 - INFO - Compute reading order on 15 lines in lr direction
2025-12-13 01:48:42,311 - INFO - Perform topological sort on partially ordered lines
2025-12-13 01:48:42,311 - INFO - Compute reading order on 1 lines in lr direction
2025-12-13 01:48:42,311 - INFO - Perform topological sort on partially ordered lines
2025-12-13 01:48:42,312 - INFO - Compute reading order on 2 lines in lr direction
2025-12-13 01:48:42,312 - INFO - Perform topological sort on partially ordered lines
2025-12-13 01:48:42,313 - INFO - Found 16 lines.
2025-12-13 01:48:42,314 - INFO - Initializing Gemini model: gemini-3-pro-preview
2025-12-13 01:48:42,328 - INFO - Annotating 16 regions for Visual Tagging...
2025-12-13 01:48:42,364 - INFO - Saved debug image to /app/documents/eluhrs@gmail.com/merged-3fb4088d/north-02-debug.jpg
2025-12-13 01:48:42,364 - INFO - Sending annotated image to Gemini...
2025-12-13 01:49:52,342 - INFO - Received JSON response from Gemini.
2025-12-13 01:49:52,507 - INFO - Combining 2 PDFs into /app/documents/eluhrs@gmail.com/merged-3fb4088d/merged.pdf...
2025-12-13 01:49:52,598 - INFO - Saved Combined PDF to /app/documents/eluhrs@gmail.com/merged-3fb4088d/merged.pdf
2025-12-13 01:49:52,599 - INFO - Combining 2 TXTs into /app/documents/eluhrs@gmail.com/merged-3fb4088d/merged.txt...
2025-12-13 01:49:52,602 - INFO - Saved Combined TXT to /app/documents/eluhrs@gmail.com/merged-3fb4088d/merged.txt
2025-12-13 01:49:52,604 - INFO - BATCH OUTPUT:

------------- gemini-pro-3 output for north-01.jpg -------------
glad aspects were present (confirming her
Maiestie wth THEODOSIES dyllygence, ARETAPHE=
LIS constancie, and ANTIGONVS clemencie)
setlinge them selues euar sence, in her Princelie
brest: as ye rarenes and greatnes of her Gracis
vertuse declare. Whom God presaruid from
formar perell, to rule & reygne ouer us, in
this last leaden adge: wherin Iniquitie hath
sought to surmount ye glorie of his Deitie, and
so presumed to suppresse his professors: As if
ye Shylde of her Souerayntie (for worldlie
force) did not protect his poore membars a=
Quie:ns
Ma:tie is ye per
fect protector of Religion
mong us: What error wold not inuade us?
What Scisme or sect wold not assawte us? What treason wold not entrapp us? When
all
----------------------------------------------------------------

Saved PageXML to /app/documents/eluhrs@gmail.com/merged-3fb4088d/north-01.xml
Saved TXT to /app/documents/eluhrs@gmail.com/merged-3fb4088d/north-01.txt
Saved PDF to /app/documents/eluhrs@gmail.com/merged-3fb4088d/north-01.pdf

Time:   00:02:12
Input:  1285 tokens
Output: 324 tokens
Cost:   $0.0065

----------------------------------------------------------------


------------- gemini-pro-3 output for north-02.jpg -------------
all ye euells yt may be, ar crept so near vnto us.
Zeland is full, France not free, & Scotland
vnclensid; the Common people spoyled, theyr
Commonwelths racked, theyr Nobilitie
murtherid, the Councell contemnid and
theyr Kyngs disobeyed: For dissention, sedici=
on Ciuell slaughtar, & rebellion, is ye onlie
argument entreatid of among them .
If therfore it pleasid her Hyghnes, to vse ye
benefit of present tyme: to bend her browe
vpon ye disobedient: to hold vp her threatning
hand ouer them, and to aduance her pusant
arme towards them; the verie shadoe of her
sworde, wold feare and vanquyshe ye prow=
dist of them .
but
----------------------------------------------------------------

Saved PageXML to /app/documents/eluhrs@gmail.com/merged-3fb4088d/north-02.xml
Saved TXT to /app/documents/eluhrs@gmail.com/merged-3fb4088d/north-02.txt
Saved PDF to /app/documents/eluhrs@gmail.com/merged-3fb4088d/north-02.pdf

Time:   00:01:19
Input:  1273 tokens
Output: 298 tokens
Cost:   $0.0061

Total time:   00:03:32
Total input:  2558 tokens
Total output: 622 tokens
Total cost:   $0.0126

----------------------------------------------------------------


2025-12-13 01:49:52,627 - INFO - Task server.tasks.process_batch_task[794f3680-e57e-4260-a0d3-d41c615b33e6] succeeded in 215.52959043101873s: None
2025-12-13 01:52:52,186 - INFO - SYSTEM: Server module initialized at 2025-12-13 01:52:52.186801
2025-12-13 01:53:02,271 - INFO - SYSTEM: Server module initialized at 2025-12-13 01:53:02.271960
2025-12-13 01:55:17,034 - INFO - JOB SUBMITTED: User eluhrs@gmail.com uploaded rock01.jpg
2025-12-13 01:55:17,201 - INFO - Task server.tasks.process_document_task[504ec6df-39c8-40dc-81be-4339f6f86f1a] received
2025-12-13 01:55:17,241 - INFO - Task 1 received options raw: {"transcription":{"temperature":0.2}}
2025-12-13 01:55:17,243 - INFO - Task 1 parsed options: {'transcription': {'temperature': 0.2}}
2025-12-13 01:55:17,245 - INFO - TASK START: Processing rock01.jpg (ID: 1)
2025-12-13 01:55:17,245 - INFO - Command: subscript historical-manuscript gemini-pro-3 /app/documents/eluhrs@gmail.com/rock01-6c3f62a8/rock01.jpg --output /app/documents/eluhrs@gmail.com/rock01-6c3f62a8
2025-12-13 01:55:17,262 - INFO - Running from: /app
2025-12-13 01:55:17,263 - INFO - Using config: /app/config.yml
2025-12-13 01:55:17,263 - INFO - Output directory: /app/documents/eluhrs@gmail.com/rock01-6c3f62a8
2025-12-13 01:55:17,263 - INFO - ----------------------------------------
2025-12-13 01:55:17,265 - INFO - 
Subscript.py initialized segmentation provider: historical-manuscript
2025-12-13 01:55:17,266 - INFO - Subscript.py Initialized transcription provider: gemini-pro-3
2025-12-13 01:55:17,266 - INFO - Processing 1 files...
2025-12-13 01:55:17,267 - INFO - Processing /app/documents/eluhrs@gmail.com/rock01-6c3f62a8/rock01.jpg...
2025-12-13 01:55:17,267 - INFO - Segmenting /app/documents/eluhrs@gmail.com/rock01-6c3f62a8/rock01.jpg with Kraken...
2025-12-13 01:55:17,269 - INFO - Loading segmentation model from /usr/local/lib/python3.10/site-packages/kraken/blla.mlmodel...
2025-12-13 01:55:17,835 - INFO - Segmenting /app/documents/eluhrs@gmail.com/rock01-6c3f62a8/rock01.jpg
2025-12-13 01:55:21,603 - INFO - Vectorizing regions
2025-12-13 01:55:21,797 - INFO - Vectorizing regions
2025-12-13 01:55:21,990 - INFO - Vectorizing baselines
2025-12-13 01:55:23,890 - INFO - JOB SUBMITTED: User eluhrs@gmail.com uploaded north-01.jpg
2025-12-13 01:55:23,893 - INFO - Task server.tasks.process_document_task[ce946eb3-c987-4fa0-93e8-7a5cc455d287] received
2025-12-13 01:55:23,935 - INFO - Task 2 received options raw: {"transcription":{"temperature":0.2}}
2025-12-13 01:55:23,938 - INFO - Task 2 parsed options: {'transcription': {'temperature': 0.2}}
2025-12-13 01:55:23,939 - INFO - JOB SUBMITTED: User eluhrs@gmail.com uploaded north-02.jpg
2025-12-13 01:55:23,942 - INFO - Task server.tasks.process_document_task[e2d5319d-1612-4320-9fdf-8fab1f282b4c] received
2025-12-13 01:55:23,942 - INFO - TASK START: Processing north-01.jpg (ID: 2)
2025-12-13 01:55:23,942 - INFO - Command: subscript historical-manuscript gemini-pro-3 /app/documents/eluhrs@gmail.com/north-01-af8ab3ad/north-01.jpg --output /app/documents/eluhrs@gmail.com/north-01-af8ab3ad
2025-12-13 01:55:23,963 - INFO - Running from: /app
2025-12-13 01:55:23,963 - INFO - Using config: /app/config.yml
2025-12-13 01:55:23,964 - INFO - Output directory: /app/documents/eluhrs@gmail.com/north-01-af8ab3ad
2025-12-13 01:55:23,964 - INFO - ----------------------------------------
2025-12-13 01:55:23,967 - INFO - 
Subscript.py initialized segmentation provider: historical-manuscript
2025-12-13 01:55:23,969 - INFO - Subscript.py Initialized transcription provider: gemini-pro-3
2025-12-13 01:55:23,969 - INFO - Processing 1 files...
2025-12-13 01:55:23,970 - INFO - Processing /app/documents/eluhrs@gmail.com/north-01-af8ab3ad/north-01.jpg...
2025-12-13 01:55:23,970 - INFO - Segmenting /app/documents/eluhrs@gmail.com/north-01-af8ab3ad/north-01.jpg with Kraken...
2025-12-13 01:55:23,972 - INFO - Loading segmentation model from /usr/local/lib/python3.10/site-packages/kraken/blla.mlmodel...
2025-12-13 01:55:23,981 - INFO - Task 3 received options raw: {"transcription":{"temperature":0.2}}
2025-12-13 01:55:23,985 - INFO - Task 3 parsed options: {'transcription': {'temperature': 0.2}}
2025-12-13 01:55:23,987 - INFO - TASK START: Processing north-02.jpg (ID: 3)
2025-12-13 01:55:23,987 - INFO - Command: subscript historical-manuscript gemini-pro-3 /app/documents/eluhrs@gmail.com/north-02-48ed574a/north-02.jpg --output /app/documents/eluhrs@gmail.com/north-02-48ed574a
2025-12-13 01:55:24,002 - INFO - Running from: /app
2025-12-13 01:55:24,002 - INFO - Using config: /app/config.yml
2025-12-13 01:55:24,003 - INFO - Output directory: /app/documents/eluhrs@gmail.com/north-02-48ed574a
2025-12-13 01:55:24,003 - INFO - ----------------------------------------
2025-12-13 01:55:24,010 - INFO - 
Subscript.py initialized segmentation provider: historical-manuscript
2025-12-13 01:55:24,012 - INFO - Subscript.py Initialized transcription provider: gemini-pro-3
2025-12-13 01:55:24,012 - INFO - Processing 1 files...
2025-12-13 01:55:24,013 - INFO - Processing /app/documents/eluhrs@gmail.com/north-02-48ed574a/north-02.jpg...
2025-12-13 01:55:24,013 - INFO - Segmenting /app/documents/eluhrs@gmail.com/north-02-48ed574a/north-02.jpg with Kraken...
2025-12-13 01:55:24,016 - INFO - Loading segmentation model from /usr/local/lib/python3.10/site-packages/kraken/blla.mlmodel...
2025-12-13 01:55:24,643 - INFO - Segmenting /app/documents/eluhrs@gmail.com/north-01-af8ab3ad/north-01.jpg
2025-12-13 01:55:24,709 - INFO - Segmenting /app/documents/eluhrs@gmail.com/north-02-48ed574a/north-02.jpg
2025-12-13 01:55:32,006 - INFO - Compute reading order on 23 lines in lr direction
2025-12-13 01:55:32,011 - INFO - Perform topological sort on partially ordered lines
2025-12-13 01:55:32,015 - INFO - Compute reading order on 1 lines in lr direction
2025-12-13 01:55:32,018 - INFO - Perform topological sort on partially ordered lines
2025-12-13 01:55:32,026 - INFO - Compute reading order on 2 lines in lr direction
2025-12-13 01:55:32,034 - INFO - Perform topological sort on partially ordered lines
2025-12-13 01:55:32,047 - INFO - Found 24 lines.
2025-12-13 01:55:32,054 - INFO - Initializing Gemini model: gemini-3-pro-preview
2025-12-13 01:55:32,223 - INFO - Resized image to (2289, 3000)
2025-12-13 01:55:32,233 - INFO - Annotating 24 regions for Visual Tagging...
2025-12-13 01:55:32,335 - INFO - Saved debug image to /app/documents/eluhrs@gmail.com/rock01-6c3f62a8/rock01-debug.jpg
2025-12-13 01:55:32,336 - INFO - Sending annotated image to Gemini...
2025-12-13 01:55:35,818 - INFO - Vectorizing regions
2025-12-13 01:55:35,867 - INFO - Vectorizing regions
2025-12-13 01:55:35,961 - INFO - Vectorizing regions
2025-12-13 01:55:36,004 - INFO - Vectorizing regions
2025-12-13 01:55:36,112 - INFO - Vectorizing baselines
2025-12-13 01:55:36,147 - INFO - Vectorizing baselines
2025-12-13 01:55:39,812 - INFO - Task server.tasks.process_batch_task[d23c83cf-ac94-45d3-9244-84b79a9573f0] received
2025-12-13 01:55:39,841 - INFO - BATCH TASK START: Parent test.pdf (ID: 4)
2025-12-13 01:55:39,842 - INFO - Command: subscript historical-manuscript gemini-pro-3 /app/documents/eluhrs@gmail.com/test-7c10b250/north-01.jpg /app/documents/eluhrs@gmail.com/test-7c10b250/north-02.jpg --combine /app/documents/eluhrs@gmail.com/test-7c10b250/test.pdf --output /app/documents/eluhrs@gmail.com/test-7c10b250
2025-12-13 01:55:39,855 - INFO - Running from: /app
2025-12-13 01:55:39,855 - INFO - Using config: /app/config.yml
2025-12-13 01:55:39,856 - INFO - Output directory: /app/documents/eluhrs@gmail.com/test-7c10b250
2025-12-13 01:55:39,856 - INFO - ----------------------------------------
2025-12-13 01:55:39,858 - INFO - 
Subscript.py initialized segmentation provider: historical-manuscript
2025-12-13 01:55:39,860 - INFO - Subscript.py Initialized transcription provider: gemini-pro-3
2025-12-13 01:55:39,860 - INFO - Processing 2 files...
2025-12-13 01:55:39,860 - INFO - Processing /app/documents/eluhrs@gmail.com/test-7c10b250/north-01.jpg...
2025-12-13 01:55:39,861 - INFO - Segmenting /app/documents/eluhrs@gmail.com/test-7c10b250/north-01.jpg with Kraken...
2025-12-13 01:55:39,862 - INFO - Loading segmentation model from /usr/local/lib/python3.10/site-packages/kraken/blla.mlmodel...
2025-12-13 01:55:40,451 - INFO - Segmenting /app/documents/eluhrs@gmail.com/test-7c10b250/north-01.jpg
2025-12-13 01:55:43,837 - INFO - Compute reading order on 15 lines in lr direction
2025-12-13 01:55:43,838 - INFO - Perform topological sort on partially ordered lines
2025-12-13 01:55:43,838 - INFO - Compute reading order on 1 lines in lr direction
2025-12-13 01:55:43,839 - INFO - Perform topological sort on partially ordered lines
2025-12-13 01:55:43,839 - INFO - Compute reading order on 2 lines in lr direction
2025-12-13 01:55:43,840 - INFO - Perform topological sort on partially ordered lines
2025-12-13 01:55:43,842 - INFO - Found 16 lines.
2025-12-13 01:55:43,843 - INFO - Initializing Gemini model: gemini-3-pro-preview
2025-12-13 01:55:43,857 - INFO - Annotating 16 regions for Visual Tagging...
2025-12-13 01:55:43,894 - INFO - Saved debug image to /app/documents/eluhrs@gmail.com/north-02-48ed574a/north-02-debug.jpg
2025-12-13 01:55:43,895 - INFO - Sending annotated image to Gemini...
2025-12-13 01:55:44,335 - INFO - Compute reading order on 18 lines in lr direction
2025-12-13 01:55:44,336 - INFO - Perform topological sort on partially ordered lines
2025-12-13 01:55:44,337 - INFO - Compute reading order on 1 lines in lr direction
2025-12-13 01:55:44,338 - INFO - Perform topological sort on partially ordered lines
2025-12-13 01:55:44,341 - INFO - Found 18 lines.
2025-12-13 01:55:44,342 - INFO - Initializing Gemini model: gemini-3-pro-preview
2025-12-13 01:55:44,359 - INFO - Annotating 18 regions for Visual Tagging...
2025-12-13 01:55:44,401 - INFO - Saved debug image to /app/documents/eluhrs@gmail.com/north-01-af8ab3ad/north-01-debug.jpg
2025-12-13 01:55:44,401 - INFO - Sending annotated image to Gemini...
2025-12-13 01:55:47,053 - INFO - Vectorizing regions
2025-12-13 01:55:47,190 - INFO - Vectorizing regions
2025-12-13 01:55:47,323 - INFO - Vectorizing baselines
2025-12-13 01:55:53,972 - INFO - Compute reading order on 18 lines in lr direction
2025-12-13 01:55:53,974 - INFO - Perform topological sort on partially ordered lines
2025-12-13 01:55:53,974 - INFO - Compute reading order on 1 lines in lr direction
2025-12-13 01:55:53,975 - INFO - Perform topological sort on partially ordered lines
2025-12-13 01:55:53,976 - INFO - Found 18 lines.
2025-12-13 01:55:53,977 - INFO - Initializing Gemini model: gemini-3-pro-preview
2025-12-13 01:55:53,992 - INFO - Annotating 18 regions for Visual Tagging...
2025-12-13 01:55:54,028 - INFO - Saved debug image to /app/documents/eluhrs@gmail.com/test-7c10b250/north-01-debug.jpg
2025-12-13 01:55:54,029 - INFO - Sending annotated image to Gemini...
2025-12-13 01:56:33,753 - INFO - Received JSON response from Gemini.
2025-12-13 01:56:34,110 - INFO - SUBSCRIPT OUTPUT for 1:

------------- gemini-pro-3 output for rock01.jpg -------------
74
Panama, Dec. 29. 1874
My dear Capt. Green, 
Your favor by Dr. Boyd duly came.
We observed our latitude stars on Sunday night, and
of course last night again. The instrument behaves well.
Yesterday morning (before your letter came) & this morn.
we observed for azimuth & variation. Though heavily on
our minds we couldn't accomplish it earlier, while the
longitude work lasted. On Sat. night we observed 24 stars.
I will enclose your signals. I think our work is a success.
To-day Mr. Spencer dismounted the telegraph line. We hope to
un
come over on Sat. Morn.  I do not think the pier is steady,
I think some one hit an arm of the instrument unconsciously
each time I found it out of meridian.
The vernier trouble is due to that arm making an angle
with the vertical. I am convinced that most of the register
troubles are due to bad quality of the fillet paper. It is un-
equal thickness at two edges and also varies in thickness
lengthwise, so as to require frequent readjustment of
rollers & stylet.
Very truly Yrs.
Miles Rock
----------------------------------------------------------------

Saved PageXML to /app/documents/eluhrs@gmail.com/rock01-6c3f62a8/rock01.xml
Saved TXT to /app/documents/eluhrs@gmail.com/rock01-6c3f62a8/rock01.txt
Saved PDF to /app/documents/eluhrs@gmail.com/rock01-6c3f62a8/rock01.pdf

Time:   00:01:16
Input:  1295 tokens
Output: 419 tokens
Cost:   $0.0076

----------------------------------------------------------------


2025-12-13 01:56:34,117 - INFO - Task server.tasks.process_document_task[504ec6df-39c8-40dc-81be-4339f6f86f1a] succeeded in 76.90387270203792s: None
2025-12-13 01:57:04,114 - INFO - Received JSON response from Gemini.
2025-12-13 01:57:04,275 - INFO - SUBSCRIPT OUTPUT for 3:

------------- gemini-pro-3 output for north-02.jpg -------------
all ye euells ye may be, ar crept so near vntous.
Zeland is full, France not free, & Scotland
vnclensid: the Common people spoyled, theyr
Commonwelths racked, theyr Nobilitie
murtherid, the Councell contemnid and
theyr Kyngs disobeyed: For dissention, sedici=
on Ciuell slaughtar, & rebellion, is ye onlie
argument entreatid of among them.
If therfore it pleasid her Hyghnes, to vse ye
benefit of present tyme: to bend her browe
vpon ye disobedient: to hold vp her threatning
hand ouer them, and to aduance her pusant
arme towards them; the verie shadoe of her
sworde, wold feare and vanquyshe ye prow=
dest of them.
but
----------------------------------------------------------------

Saved PageXML to /app/documents/eluhrs@gmail.com/north-02-48ed574a/north-02.xml
Saved TXT to /app/documents/eluhrs@gmail.com/north-02-48ed574a/north-02.txt
Saved PDF to /app/documents/eluhrs@gmail.com/north-02-48ed574a/north-02.pdf

Time:   00:01:40
Input:  1273 tokens
Output: 280 tokens
Cost:   $0.0059

----------------------------------------------------------------


2025-12-13 01:57:04,283 - INFO - Task server.tasks.process_document_task[e2d5319d-1612-4320-9fdf-8fab1f282b4c] succeeded in 100.33307192090433s: None
2025-12-13 01:57:53,959 - INFO - Received JSON response from Gemini.
2025-12-13 01:57:54,143 - INFO - Processing /app/documents/eluhrs@gmail.com/test-7c10b250/north-02.jpg...
2025-12-13 01:57:54,143 - INFO - Segmenting /app/documents/eluhrs@gmail.com/test-7c10b250/north-02.jpg with Kraken...
2025-12-13 01:57:54,144 - INFO - Loading segmentation model from /usr/local/lib/python3.10/site-packages/kraken/blla.mlmodel...
2025-12-13 01:57:54,620 - INFO - Segmenting /app/documents/eluhrs@gmail.com/test-7c10b250/north-02.jpg
2025-12-13 01:57:57,783 - INFO - Vectorizing regions
2025-12-13 01:57:57,913 - INFO - Vectorizing regions
2025-12-13 01:57:58,042 - INFO - Vectorizing baselines
2025-12-13 01:58:04,264 - INFO - Compute reading order on 15 lines in lr direction
2025-12-13 01:58:04,265 - INFO - Perform topological sort on partially ordered lines
2025-12-13 01:58:04,266 - INFO - Compute reading order on 1 lines in lr direction
2025-12-13 01:58:04,266 - INFO - Perform topological sort on partially ordered lines
2025-12-13 01:58:04,266 - INFO - Compute reading order on 2 lines in lr direction
2025-12-13 01:58:04,266 - INFO - Perform topological sort on partially ordered lines
2025-12-13 01:58:04,268 - INFO - Found 16 lines.
2025-12-13 01:58:04,269 - INFO - Initializing Gemini model: gemini-3-pro-preview
2025-12-13 01:58:04,283 - INFO - Annotating 16 regions for Visual Tagging...
2025-12-13 01:58:04,317 - INFO - Saved debug image to /app/documents/eluhrs@gmail.com/test-7c10b250/north-02-debug.jpg
2025-12-13 01:58:04,318 - INFO - Sending annotated image to Gemini...
2025-12-13 01:59:06,337 - INFO - Received JSON response from Gemini.
2025-12-13 01:59:06,527 - INFO - SUBSCRIPT OUTPUT for 2:

------------- gemini-pro-3 output for north-01.jpg -------------
glad aspects were present (confirming her
Maiestie wth THEODOSIES dylligence, ARETAPHE=
LIS constancie, and ANTIGONVS clemencie)
setlinge them selues euar sence, in her Princelie
brest: as ye rarenes and greatnes of her Gracis
vertuse declare. Whom God presaruid from
formar perell, to rule & reygne ouer us, in
this last leaden adge: wherin Iniquitie hath
sought to surmount ye glorie of his Deitie, and
so presumed to suppresse his professors: As if
Shylde of her Souerayntie (for worldlie
ye
Quens
Ma: tie is ye per force) did not protect his poore membars a=
fect protector of Religion mong us: What error wold not inuade us?
What Scisme or sect wold not assawte us?
What treason wold not entrapp us? When
all
----------------------------------------------------------------

Saved PageXML to /app/documents/eluhrs@gmail.com/north-01-af8ab3ad/north-01.xml
Saved TXT to /app/documents/eluhrs@gmail.com/north-01-af8ab3ad/north-01.txt
Saved PDF to /app/documents/eluhrs@gmail.com/north-01-af8ab3ad/north-01.pdf

Time:   00:03:42
Input:  1285 tokens
Output: 339 tokens
Cost:   $0.0066

----------------------------------------------------------------


2025-12-13 01:59:06,539 - INFO - Task server.tasks.process_document_task[ce946eb3-c987-4fa0-93e8-7a5cc455d287] succeeded in 222.63199406000786s: None
2025-12-13 01:59:13,603 - INFO - Received JSON response from Gemini.
2025-12-13 01:59:13,772 - INFO - Combining 2 PDFs into /app/documents/eluhrs@gmail.com/test-7c10b250/test.pdf...
2025-12-13 01:59:13,802 - INFO - Saved Combined PDF to /app/documents/eluhrs@gmail.com/test-7c10b250/test.pdf
2025-12-13 01:59:13,803 - INFO - Combining 2 TXTs into /app/documents/eluhrs@gmail.com/test-7c10b250/test.txt...
2025-12-13 01:59:13,804 - INFO - Saved Combined TXT to /app/documents/eluhrs@gmail.com/test-7c10b250/test.txt
2025-12-13 01:59:13,804 - INFO - BATCH OUTPUT:

------------- gemini-pro-3 output for north-01.jpg -------------
glad aspects were present (confirming her
Maiestie wth THEODOSIES dylligence, ARETAPHE=
LIS constancie, and ANTIGONVS clemencie)
setlinge them selues euar sence, in her Princelie
brest: as ye rarenes and greatnes of her Gracis
vertuse declare . Whom God presaruid from
formar perell, to rule & reygne ouer us, in
this last leaden adge: wherin iniquitie hath
sought to surmount ye glorie of his Deitie, and
so presumed to suppresse his professors: As if
ye Shylde of her Souerayntie (for worldlie
force) did not protect his poore membars a=
Quens
Matie is ye per
fect protector
what Scisme or sect wold not assawte us?
What treason wold not entrapp us? When
all
----------------------------------------------------------------

Saved PageXML to /app/documents/eluhrs@gmail.com/test-7c10b250/north-01.xml
Saved TXT to /app/documents/eluhrs@gmail.com/test-7c10b250/north-01.txt
Saved PDF to /app/documents/eluhrs@gmail.com/test-7c10b250/north-01.pdf

Time:   00:02:14
Input:  1285 tokens
Output: 305 tokens
Cost:   $0.0062

----------------------------------------------------------------


------------- gemini-pro-3 output for north-02.jpg -------------
all ye euells yt may be, ar crept so near vntous.
Zeland is full, France not free, & Scotland
vnclensid: the Common people spoyled, theyr
Commonwelths racked, theyr Nobilitie
murtherid, the Councell contemnid and
theyr Kyngs disobeyed: For dissention, sedici=
on Ciuell slaughtar, & rebellion, is yt onlie
argument entreatid of among them.
If therfore it pleasid her Hyghnes, to vse ye
benefit of present tyme: to bend her browe
vpon ye disobedient: to hold vp her threatning
hand ouer them, and to aduance her pusant
arme towards them; the verie shadoe of her
sworde, wold feare and vanquyshe ye prow=
dest of them.
but
----------------------------------------------------------------

Saved PageXML to /app/documents/eluhrs@gmail.com/test-7c10b250/north-02.xml
Saved TXT to /app/documents/eluhrs@gmail.com/test-7c10b250/north-02.txt
Saved PDF to /app/documents/eluhrs@gmail.com/test-7c10b250/north-02.pdf

Time:   00:01:19
Input:  1273 tokens
Output: 280 tokens
Cost:   $0.0059

Total time:   00:03:33
Total input:  2558 tokens
Total output: 585 tokens
Total cost:   $0.0121

----------------------------------------------------------------


2025-12-13 01:59:13,816 - INFO - Task server.tasks.process_batch_task[d23c83cf-ac94-45d3-9244-84b79a9573f0] succeeded in 213.99649909697473s: None
2025-12-13 02:00:33,819 - INFO - SYSTEM: Server module initialized at 2025-12-13 02:00:33.819295
2025-12-13 02:00:44,443 - INFO - SYSTEM: Server module initialized at 2025-12-13 02:00:44.443358
2025-12-13 02:01:33,797 - INFO - SYSTEM: Server module initialized at 2025-12-13 02:01:33.797833
2025-12-13 02:01:43,145 - INFO - SYSTEM: Server module initialized at 2025-12-13 02:01:43.145373
2025-12-13 02:02:15,967 - INFO - SYSTEM: Server module initialized at 2025-12-13 02:02:15.967909
2025-12-13 02:02:31,373 - INFO - SYSTEM: Server module initialized at 2025-12-13 02:02:31.373218
2025-12-13 02:03:24,786 - INFO - SYSTEM: Server module initialized at 2025-12-13 02:03:24.785470
2025-12-13 02:03:36,269 - INFO - SYSTEM: Server module initialized at 2025-12-13 02:03:36.269904
2025-12-13 02:04:13,090 - INFO - SYSTEM: Server module initialized at 2025-12-13 02:04:13.090926
2025-12-13 02:04:23,385 - INFO - SYSTEM: Server module initialized at 2025-12-13 02:04:23.385392
2025-12-13 02:04:47,829 - INFO - SYSTEM: Server module initialized at 2025-12-13 02:04:47.829490
2025-12-13 02:04:59,674 - INFO - SYSTEM: Server module initialized at 2025-12-13 02:04:59.674791
2025-12-13 02:11:45,557 - INFO - JOB SUBMITTED: User eluhrs@gmail.com uploaded rock01.jpg
2025-12-13 02:11:45,683 - INFO - Task server.tasks.process_document_task[1221b170-c806-479d-b74f-68dda5985f0a] received
2025-12-13 02:11:45,719 - INFO - Task 1 received options raw: {"transcription":{"temperature":0.2}}
2025-12-13 02:11:45,724 - INFO - Task 1 parsed options: {'transcription': {'temperature': 0.2}}
2025-12-13 02:11:45,730 - INFO - TASK START: Processing rock01.jpg (ID: 1)
2025-12-13 02:11:45,730 - INFO - Command: subscript historical-manuscript gemini-pro-3 /app/documents/eluhrs@gmail.com/rock01-aee2ce31/rock01.jpg --output /app/documents/eluhrs@gmail.com/rock01-aee2ce31
2025-12-13 02:11:45,746 - INFO - Running from: /app
2025-12-13 02:11:45,746 - INFO - Using config: /app/config.yml
2025-12-13 02:11:45,747 - INFO - Output directory: /app/documents/eluhrs@gmail.com/rock01-aee2ce31
2025-12-13 02:11:45,747 - INFO - ----------------------------------------
2025-12-13 02:11:45,750 - INFO - 
Subscript.py initialized segmentation provider: historical-manuscript
2025-12-13 02:11:45,751 - INFO - Subscript.py Initialized transcription provider: gemini-pro-3
2025-12-13 02:11:45,751 - INFO - Processing 1 files...
2025-12-13 02:11:45,751 - INFO - Processing /app/documents/eluhrs@gmail.com/rock01-aee2ce31/rock01.jpg...
2025-12-13 02:11:45,752 - INFO - Segmenting /app/documents/eluhrs@gmail.com/rock01-aee2ce31/rock01.jpg with Kraken...
2025-12-13 02:11:45,754 - INFO - Loading segmentation model from /usr/local/lib/python3.10/site-packages/kraken/blla.mlmodel...
2025-12-13 02:11:46,295 - INFO - Segmenting /app/documents/eluhrs@gmail.com/rock01-aee2ce31/rock01.jpg
2025-12-13 02:11:50,212 - INFO - Vectorizing regions
2025-12-13 02:11:50,409 - INFO - Vectorizing regions
2025-12-13 02:11:50,595 - INFO - Vectorizing baselines
2025-12-13 02:11:54,510 - INFO - JOB SUBMITTED: User eluhrs@gmail.com uploaded north-01.jpg
2025-12-13 02:11:54,512 - INFO - Task server.tasks.process_document_task[3ef80f60-1f72-4880-8c1b-235eaac18903] received
2025-12-13 02:11:54,538 - INFO - Task 2 received options raw: {"transcription":{"temperature":0.2}}
2025-12-13 02:11:54,541 - INFO - Task 2 parsed options: {'transcription': {'temperature': 0.2}}
2025-12-13 02:11:54,544 - INFO - TASK START: Processing north-01.jpg (ID: 2)
2025-12-13 02:11:54,546 - INFO - Command: subscript historical-manuscript gemini-pro-3 /app/documents/eluhrs@gmail.com/north-01-8987fbfa/north-01.jpg --output /app/documents/eluhrs@gmail.com/north-01-8987fbfa
2025-12-13 02:11:54,555 - INFO - JOB SUBMITTED: User eluhrs@gmail.com uploaded north-02.jpg
2025-12-13 02:11:54,557 - INFO - Task server.tasks.process_document_task[d4b5c28e-8c21-49a9-a7d6-e20c4916ea64] received
2025-12-13 02:11:54,563 - INFO - Running from: /app
2025-12-13 02:11:54,563 - INFO - Using config: /app/config.yml
2025-12-13 02:11:54,564 - INFO - Output directory: /app/documents/eluhrs@gmail.com/north-01-8987fbfa
2025-12-13 02:11:54,564 - INFO - ----------------------------------------
2025-12-13 02:11:54,568 - INFO - 
Subscript.py initialized segmentation provider: historical-manuscript
2025-12-13 02:11:54,569 - INFO - Subscript.py Initialized transcription provider: gemini-pro-3
2025-12-13 02:11:54,569 - INFO - Processing 1 files...
2025-12-13 02:11:54,569 - INFO - Processing /app/documents/eluhrs@gmail.com/north-01-8987fbfa/north-01.jpg...
2025-12-13 02:11:54,570 - INFO - Segmenting /app/documents/eluhrs@gmail.com/north-01-8987fbfa/north-01.jpg with Kraken...
2025-12-13 02:11:54,573 - INFO - Loading segmentation model from /usr/local/lib/python3.10/site-packages/kraken/blla.mlmodel...
2025-12-13 02:11:54,588 - INFO - Task 3 received options raw: {"transcription":{"temperature":0.2}}
2025-12-13 02:11:54,589 - INFO - Task 3 parsed options: {'transcription': {'temperature': 0.2}}
2025-12-13 02:11:54,591 - INFO - TASK START: Processing north-02.jpg (ID: 3)
2025-12-13 02:11:54,591 - INFO - Command: subscript historical-manuscript gemini-pro-3 /app/documents/eluhrs@gmail.com/north-02-e4c063e5/north-02.jpg --output /app/documents/eluhrs@gmail.com/north-02-e4c063e5
2025-12-13 02:11:54,602 - INFO - Running from: /app
2025-12-13 02:11:54,602 - INFO - Using config: /app/config.yml
2025-12-13 02:11:54,603 - INFO - Output directory: /app/documents/eluhrs@gmail.com/north-02-e4c063e5
2025-12-13 02:11:54,603 - INFO - ----------------------------------------
2025-12-13 02:11:54,606 - INFO - 
Subscript.py initialized segmentation provider: historical-manuscript
2025-12-13 02:11:54,607 - INFO - Subscript.py Initialized transcription provider: gemini-pro-3
2025-12-13 02:11:54,608 - INFO - Processing 1 files...
2025-12-13 02:11:54,609 - INFO - Processing /app/documents/eluhrs@gmail.com/north-02-e4c063e5/north-02.jpg...
2025-12-13 02:11:54,610 - INFO - Segmenting /app/documents/eluhrs@gmail.com/north-02-e4c063e5/north-02.jpg with Kraken...
2025-12-13 02:11:54,613 - INFO - Loading segmentation model from /usr/local/lib/python3.10/site-packages/kraken/blla.mlmodel...
2025-12-13 02:11:55,235 - INFO - Segmenting /app/documents/eluhrs@gmail.com/north-01-8987fbfa/north-01.jpg
2025-12-13 02:11:55,258 - INFO - Segmenting /app/documents/eluhrs@gmail.com/north-02-e4c063e5/north-02.jpg
2025-12-13 02:12:01,210 - INFO - Compute reading order on 23 lines in lr direction
2025-12-13 02:12:01,211 - INFO - Perform topological sort on partially ordered lines
2025-12-13 02:12:01,213 - INFO - Compute reading order on 1 lines in lr direction
2025-12-13 02:12:01,213 - INFO - Perform topological sort on partially ordered lines
2025-12-13 02:12:01,214 - INFO - Compute reading order on 2 lines in lr direction
2025-12-13 02:12:01,214 - INFO - Perform topological sort on partially ordered lines
2025-12-13 02:12:01,217 - INFO - Found 24 lines.
2025-12-13 02:12:01,223 - INFO - Initializing Gemini model: gemini-3-pro-preview
2025-12-13 02:12:01,400 - INFO - Resized image to (2289, 3000)
2025-12-13 02:12:01,410 - INFO - Annotating 24 regions for Visual Tagging...
2025-12-13 02:12:01,516 - INFO - Saved debug image to /app/documents/eluhrs@gmail.com/rock01-aee2ce31/rock01-debug.jpg
2025-12-13 02:12:01,516 - INFO - Sending annotated image to Gemini...
2025-12-13 02:12:06,385 - INFO - Vectorizing regions
2025-12-13 02:12:06,520 - INFO - Vectorizing regions
2025-12-13 02:12:06,648 - INFO - Vectorizing baselines
2025-12-13 02:12:06,737 - INFO - Vectorizing regions
2025-12-13 02:12:06,882 - INFO - Vectorizing regions
2025-12-13 02:12:07,024 - INFO - Vectorizing baselines
2025-12-13 02:12:09,110 - INFO - Task server.tasks.process_batch_task[4c90b8f9-c7a9-419a-b4b9-08a2a4685618] received
2025-12-13 02:12:09,134 - INFO - BATCH TASK START: Parent blah.pdf (ID: 4)
2025-12-13 02:12:09,135 - INFO - Command: subscript historical-manuscript gemini-pro-3 /app/documents/eluhrs@gmail.com/blah-9588d642/north-01.jpg /app/documents/eluhrs@gmail.com/blah-9588d642/north-02.jpg --combine /app/documents/eluhrs@gmail.com/blah-9588d642/blah.pdf --output /app/documents/eluhrs@gmail.com/blah-9588d642
2025-12-13 02:12:09,147 - INFO - Running from: /app
2025-12-13 02:12:09,148 - INFO - Using config: /app/config.yml
2025-12-13 02:12:09,148 - INFO - Output directory: /app/documents/eluhrs@gmail.com/blah-9588d642
2025-12-13 02:12:09,149 - INFO - ----------------------------------------
2025-12-13 02:12:09,151 - INFO - 
Subscript.py initialized segmentation provider: historical-manuscript
2025-12-13 02:12:09,152 - INFO - Subscript.py Initialized transcription provider: gemini-pro-3
2025-12-13 02:12:09,153 - INFO - Processing 2 files...
2025-12-13 02:12:09,153 - INFO - Processing /app/documents/eluhrs@gmail.com/blah-9588d642/north-01.jpg...
2025-12-13 02:12:09,153 - INFO - Segmenting /app/documents/eluhrs@gmail.com/blah-9588d642/north-01.jpg with Kraken...
2025-12-13 02:12:09,155 - INFO - Loading segmentation model from /usr/local/lib/python3.10/site-packages/kraken/blla.mlmodel...
2025-12-13 02:12:09,759 - INFO - Segmenting /app/documents/eluhrs@gmail.com/blah-9588d642/north-01.jpg
2025-12-13 02:12:14,462 - INFO - Compute reading order on 15 lines in lr direction
2025-12-13 02:12:14,463 - INFO - Perform topological sort on partially ordered lines
2025-12-13 02:12:14,464 - INFO - Compute reading order on 1 lines in lr direction
2025-12-13 02:12:14,464 - INFO - Perform topological sort on partially ordered lines
2025-12-13 02:12:14,465 - INFO - Compute reading order on 2 lines in lr direction
2025-12-13 02:12:14,466 - INFO - Perform topological sort on partially ordered lines
2025-12-13 02:12:14,467 - INFO - Found 16 lines.
2025-12-13 02:12:14,468 - INFO - Initializing Gemini model: gemini-3-pro-preview
2025-12-13 02:12:14,483 - INFO - Annotating 16 regions for Visual Tagging...
2025-12-13 02:12:14,523 - INFO - Saved debug image to /app/documents/eluhrs@gmail.com/north-02-e4c063e5/north-02-debug.jpg
2025-12-13 02:12:14,524 - INFO - Sending annotated image to Gemini...
2025-12-13 02:12:15,111 - INFO - Compute reading order on 18 lines in lr direction
2025-12-13 02:12:15,113 - INFO - Perform topological sort on partially ordered lines
2025-12-13 02:12:15,113 - INFO - Compute reading order on 1 lines in lr direction
2025-12-13 02:12:15,114 - INFO - Perform topological sort on partially ordered lines
2025-12-13 02:12:15,116 - INFO - Found 18 lines.
2025-12-13 02:12:15,117 - INFO - Initializing Gemini model: gemini-3-pro-preview
2025-12-13 02:12:15,136 - INFO - Annotating 18 regions for Visual Tagging...
2025-12-13 02:12:15,187 - INFO - Saved debug image to /app/documents/eluhrs@gmail.com/north-01-8987fbfa/north-01-debug.jpg
2025-12-13 02:12:15,187 - INFO - Sending annotated image to Gemini...
2025-12-13 02:12:17,477 - INFO - Vectorizing regions
2025-12-13 02:12:17,613 - INFO - Vectorizing regions
2025-12-13 02:12:17,745 - INFO - Vectorizing baselines
2025-12-13 02:12:24,273 - INFO - Compute reading order on 18 lines in lr direction
2025-12-13 02:12:24,275 - INFO - Perform topological sort on partially ordered lines
2025-12-13 02:12:24,275 - INFO - Compute reading order on 1 lines in lr direction
2025-12-13 02:12:24,276 - INFO - Perform topological sort on partially ordered lines
2025-12-13 02:12:24,278 - INFO - Found 18 lines.
2025-12-13 02:12:24,279 - INFO - Initializing Gemini model: gemini-3-pro-preview
2025-12-13 02:12:24,293 - INFO - Annotating 18 regions for Visual Tagging...
2025-12-13 02:12:24,331 - INFO - Saved debug image to /app/documents/eluhrs@gmail.com/blah-9588d642/north-01-debug.jpg
2025-12-13 02:12:24,332 - INFO - Sending annotated image to Gemini...
2025-12-13 02:12:59,359 - INFO - Received JSON response from Gemini.
2025-12-13 02:12:59,727 - INFO - SUBSCRIPT OUTPUT for 1:

------------- gemini-pro-3 output for rock01.jpg -------------
74
Panama, Dec. 29. 1874
My dear Capt. Green,-
Your favor by Dr. Boyd duly came.
We observed our latitude stars on Sunday night, and
of course last night again. The instrument behaves well.
Yesterday morning (before your letter came) & this morn.
we observed for azimuth & variation. Though heavily on
our minds we couldn't accomplish it earlier, while the
longitude work lasted. On Sat. night we observed 24 stars.
I will enclose your signals. I think our work is a success.
To-day Mr. Spencer dismounts the telegraph line. We hope to
un
come over on Sat. Morn. - I do not think the pier is steady,
I think some one hit an arm of the instrument unconsciously
each time I found it out of meridian.
The vernier trouble is due to that arm making an angle
with the vertical. I am convinced that most of the register
troubles are due to bad quality of the fillet paper. It is un=
equal thickness at two edges and also varies in thickness
lengthwise, so as to require frequent readjustment of
rollers & stylet.
Very truly Yrs.
Miles Rock
----------------------------------------------------------------

Saved PageXML to /app/documents/eluhrs@gmail.com/rock01-aee2ce31/rock01.xml
Saved TXT to /app/documents/eluhrs@gmail.com/rock01-aee2ce31/rock01.txt
Saved PDF to /app/documents/eluhrs@gmail.com/rock01-aee2ce31/rock01.pdf

Time:   00:01:13
Input:  1295 tokens
Output: 418 tokens
Cost:   $0.0076

----------------------------------------------------------------


2025-12-13 02:12:59,738 - INFO - Task server.tasks.process_document_task[1221b170-c806-479d-b74f-68dda5985f0a] succeeded in 74.04536332492717s: None
2025-12-13 02:13:32,551 - INFO - Received JSON response from Gemini.
2025-12-13 02:13:32,739 - INFO - SUBSCRIPT OUTPUT for 3:

------------- gemini-pro-3 output for north-02.jpg -------------
all ye euells yt may be, ar crept so near vntous.
Zeland is full, France not free, & Scotland
vnclensid: the Common people spoyled, theyr
Commonwelths racked, theyr Nobilitie
murtherid, the Councell contemnid and
theyr Kyngs disobeyed: For dissention, sedici=
on, Ciuell slaughtar, & rebellion, is ye onlie
argument entreatid of among them .
If therfore it pleasid her Hyghnes, to vse ye
benefit of present tyme: to bend her browe
vpon ye disobedient: to hold vp her threatning
hand ouer them, and to aduance her pusant
arme towards them: the verie shadoe of her
sworde, wold feare and vanquyshe yt prow-
dist of them .
but
----------------------------------------------------------------

Saved PageXML to /app/documents/eluhrs@gmail.com/north-02-e4c063e5/north-02.xml
Saved TXT to /app/documents/eluhrs@gmail.com/north-02-e4c063e5/north-02.txt
Saved PDF to /app/documents/eluhrs@gmail.com/north-02-e4c063e5/north-02.pdf

Time:   00:01:38
Input:  1273 tokens
Output: 284 tokens
Cost:   $0.0060

----------------------------------------------------------------


2025-12-13 02:13:32,761 - INFO - Task server.tasks.process_document_task[d4b5c28e-8c21-49a9-a7d6-e20c4916ea64] succeeded in 98.19845287909266s: None
2025-12-13 02:14:01,043 - INFO - Received JSON response from Gemini.
2025-12-13 02:14:01,255 - INFO - Processing /app/documents/eluhrs@gmail.com/blah-9588d642/north-02.jpg...
2025-12-13 02:14:01,255 - INFO - Segmenting /app/documents/eluhrs@gmail.com/blah-9588d642/north-02.jpg with Kraken...
2025-12-13 02:14:01,256 - INFO - Loading segmentation model from /usr/local/lib/python3.10/site-packages/kraken/blla.mlmodel...
2025-12-13 02:14:01,761 - INFO - Segmenting /app/documents/eluhrs@gmail.com/blah-9588d642/north-02.jpg
2025-12-13 02:14:06,120 - INFO - Vectorizing regions
2025-12-13 02:14:06,261 - INFO - Vectorizing regions
2025-12-13 02:14:06,387 - INFO - Vectorizing baselines
2025-12-13 02:14:13,054 - INFO - Compute reading order on 15 lines in lr direction
2025-12-13 02:14:13,055 - INFO - Perform topological sort on partially ordered lines
2025-12-13 02:14:13,055 - INFO - Compute reading order on 1 lines in lr direction
2025-12-13 02:14:13,055 - INFO - Perform topological sort on partially ordered lines
2025-12-13 02:14:13,056 - INFO - Compute reading order on 2 lines in lr direction
2025-12-13 02:14:13,056 - INFO - Perform topological sort on partially ordered lines
2025-12-13 02:14:13,058 - INFO - Found 16 lines.
2025-12-13 02:14:13,059 - INFO - Initializing Gemini model: gemini-3-pro-preview
2025-12-13 02:14:13,074 - INFO - Annotating 16 regions for Visual Tagging...
2025-12-13 02:14:13,110 - INFO - Saved debug image to /app/documents/eluhrs@gmail.com/blah-9588d642/north-02-debug.jpg
2025-12-13 02:14:13,111 - INFO - Sending annotated image to Gemini...
2025-12-13 02:15:01,916 - INFO - Received JSON response from Gemini.
2025-12-13 02:15:02,126 - INFO - SUBSCRIPT OUTPUT for 2:

------------- gemini-pro-3 output for north-01.jpg -------------
glad aspects were present (confirming her
Maiestie wth THEODOSIES dylligence, ARETAPHE=
LIS constancie, and ANTIGONVS clemencie)
setlinge them selues euar sence, in her Princelie
brest: as ye rarenes and greatnes of her Gracis
vertuse declare. Whom God presaruid from
formar perell, to rule & reygne ouer us, in
this last leaden adge: wherin Iniquitie hath
Quiens
sought to surmount ye glorie of his Deitie, and
so presumed to suppresse his professors: As if
ye Shylde of her Souerayntie (for worldlie
Ma:tie is ye per force) did not protect his poore membars a=
fect protector
of Religion mong us: What error wold not inuade us?
What Scisme or sect wold not assawte us?
What treason wold not entrapp us? When
all
----------------------------------------------------------------

Saved PageXML to /app/documents/eluhrs@gmail.com/north-01-8987fbfa/north-01.xml
Saved TXT to /app/documents/eluhrs@gmail.com/north-01-8987fbfa/north-01.txt
Saved PDF to /app/documents/eluhrs@gmail.com/north-01-8987fbfa/north-01.pdf

Time:   00:03:07
Input:  1285 tokens
Output: 338 tokens
Cost:   $0.0066

----------------------------------------------------------------


2025-12-13 02:15:02,162 - INFO - Task server.tasks.process_document_task[3ef80f60-1f72-4880-8c1b-235eaac18903] succeeded in 187.64259008597583s: None
2025-12-13 02:15:30,947 - INFO - Received JSON response from Gemini.
2025-12-13 02:15:31,130 - INFO - Combining 2 PDFs into /app/documents/eluhrs@gmail.com/blah-9588d642/blah.pdf...
2025-12-13 02:15:31,165 - INFO - Saved Combined PDF to /app/documents/eluhrs@gmail.com/blah-9588d642/blah.pdf
2025-12-13 02:15:31,166 - INFO - Combining 2 TXTs into /app/documents/eluhrs@gmail.com/blah-9588d642/blah.txt...
2025-12-13 02:15:31,167 - INFO - Saved Combined TXT to /app/documents/eluhrs@gmail.com/blah-9588d642/blah.txt
2025-12-13 02:15:31,168 - INFO - BATCH OUTPUT:

------------- gemini-pro-3 output for north-01.jpg -------------
glad aspects were present (confirming her
Maiestie w^th THEODOSIES dylligence, ARETAPHE=
LIS constancie, and ANTIGONYS clemencie)
setlinge them selues euar sence, in her Princelie
brest: as y^e rarenes and greatnes of her Gracis
vertuse declare. Whom God presaruid from
formar perell, to rule & reygne ouer us, in
this last leaden adge: wherin Iniquitie hath
sought to surmount y^e glorie of his Deitie, and
so presumed to suppresse his professors: As if
y^e Shylde of her Souerayntie (for worldlie
force) did not protect his poore membars a=
Quens
Ma^tie is y^e per
fect protector
of Religion
mong us: What error wold not inuade us?
What Scisme or sect wold not assawte us?
----------------------------------------------------------------

Saved PageXML to /app/documents/eluhrs@gmail.com/blah-9588d642/north-01.xml
Saved TXT to /app/documents/eluhrs@gmail.com/blah-9588d642/north-01.txt
Saved PDF to /app/documents/eluhrs@gmail.com/blah-9588d642/north-01.pdf

Time:   00:01:52
Input:  1285 tokens
Output: 343 tokens
Cost:   $0.0067

----------------------------------------------------------------


------------- gemini-pro-3 output for north-02.jpg -------------
all ye euells yt may be, ar crept so near vntous.
Zeland is full, France not free, & Scotland
vnclensid: the Common people spoyled, theyr
Commonwelths racked, theyr Nobilitie
murtherid, the Councell contemnd and
theyr Kyngs disobeyed: For dissention, sedici-
on Ciuell slaughtar, & rebellion, is ye onlie
argument entreatid of among them.
If therfore it pleasid her Hyghnes, to vse ye
benefit of present tyme: to bend her browe
vpon ye disobedient: to hold vp her threatning
hand ouer them, and to aduance her pusant
arme towards them; the verie shadoe of her
sworde, wold feare and vanquyshe ye prow-
dest of them.
but
----------------------------------------------------------------

Saved PageXML to /app/documents/eluhrs@gmail.com/blah-9588d642/north-02.xml
Saved TXT to /app/documents/eluhrs@gmail.com/blah-9588d642/north-02.txt
Saved PDF to /app/documents/eluhrs@gmail.com/blah-9588d642/north-02.pdf

Time:   00:01:29
Input:  1273 tokens
Output: 298 tokens
Cost:   $0.0061

Total time:   00:03:21
Total input:  2558 tokens
Total output: 641 tokens
Total cost:   $0.0128

----------------------------------------------------------------


2025-12-13 02:15:31,185 - INFO - Task server.tasks.process_batch_task[4c90b8f9-c7a9-419a-b4b9-08a2a4685618] succeeded in 202.06752742500976s: None
2025-12-13 02:24:27,242 - INFO - SYSTEM: Server module initialized at 2025-12-13 02:24:27.242823
2025-12-13 02:24:38,562 - INFO - SYSTEM: Server module initialized at 2025-12-13 02:24:38.562875
2025-12-13 12:32:49,313 - INFO - SYSTEM: Server module initialized at 2025-12-13 12:32:49.313602
2025-12-13 12:33:04,813 - INFO - SYSTEM: Server module initialized at 2025-12-13 12:33:04.813456
2025-12-13 12:33:38,355 - INFO - SYSTEM: Server module initialized at 2025-12-13 12:33:38.355881
2025-12-13 12:33:39,169 - INFO - SYSTEM: Server module initialized at 2025-12-13 12:33:39.169345
2025-12-13 12:33:40,425 - INFO - Connected to redis://redis:6379/0
2025-12-13 12:33:40,428 - INFO - mingle: searching for neighbors
2025-12-13 12:33:41,444 - INFO - mingle: all alone
2025-12-13 12:33:41,455 - INFO - celery@79f8ea9e01aa ready.
2025-12-13 12:46:33,739 - INFO - SYSTEM: Server module initialized at 2025-12-13 12:46:33.739751
2025-12-13 12:47:25,455 - INFO - SYSTEM: Server module initialized at 2025-12-13 12:47:25.454997
2025-12-13 12:47:26,548 - INFO - SYSTEM: Server module initialized at 2025-12-13 12:47:26.548589
2025-12-13 12:47:27,906 - INFO - Connected to redis://redis:6379/0
2025-12-13 12:47:27,909 - INFO - mingle: searching for neighbors
2025-12-13 12:47:28,920 - INFO - mingle: all alone
2025-12-13 12:47:28,939 - INFO - celery@79f8ea9e01aa ready.
2025-12-13 12:49:48,390 - INFO - SYSTEM: Server module initialized at 2025-12-13 12:49:48.390816
2025-12-13 12:49:48,621 - INFO - SYSTEM: Server module initialized at 2025-12-13 12:49:48.621598
2025-12-13 12:49:49,321 - INFO - Connected to redis://redis:6379/0
2025-12-13 12:49:49,323 - INFO - mingle: searching for neighbors
2025-12-13 12:49:50,334 - INFO - mingle: all alone
2025-12-13 12:49:50,348 - INFO - celery@8d73b207bb76 ready.
2025-12-13 13:48:55,521 - INFO - SYSTEM: Server module initialized at 2025-12-13 13:48:55.521148
2025-12-13 13:49:30,097 - INFO - SYSTEM: Server module initialized at 2025-12-13 13:49:30.097967
2025-12-13 13:50:59,360 - INFO - SYSTEM: Server module initialized at 2025-12-13 13:50:59.360294
2025-12-13 13:54:00,553 - INFO - SYSTEM: Server module initialized at 2025-12-13 13:54:00.553131
2025-12-13 13:54:12,341 - INFO - SYSTEM: Server module initialized at 2025-12-13 13:54:12.341533
2025-12-13 13:55:52,016 - INFO - JOB SUBMITTED: User eluhrs@gmail.com uploaded rock01.jpg
2025-12-13 13:56:39,047 - INFO - SYSTEM: Server module initialized at 2025-12-13 13:56:39.047055
2025-12-13 13:56:51,850 - INFO - SYSTEM: Server module initialized at 2025-12-13 13:56:51.850576
2025-12-13 13:57:19,564 - INFO - JOB SUBMITTED: User eluhrs@gmail.com uploaded rock01.jpg
2025-12-13 13:59:07,448 - INFO - SYSTEM: Server module initialized at 2025-12-13 13:59:07.448859
2025-12-13 13:59:08,345 - INFO - Connected to redis://redis:6379/0
2025-12-13 13:59:08,349 - INFO - mingle: searching for neighbors
2025-12-13 13:59:09,364 - INFO - mingle: all alone
2025-12-13 13:59:09,375 - INFO - celery@8d73b207bb76 ready.
2025-12-13 13:59:09,377 - INFO - Task server.tasks.process_document_task[67edb5e1-ac75-4f8a-abf6-25f495843f88] received
2025-12-13 13:59:09,413 - INFO - Task 7 parsed options: {'transcription': {'prompt': 'Gemini Pro 3, temp 0.1: You are a literal transcription engine for 19th-century handwritten manuscripts. Extract text from the supplied image exactly as written. Preserve all original spelling, punctuation, capitalization, and line breaks. Do not modernize, interpret, or expand abbreviations. The only modernization you should perform is to modernize obsolete characters (example, print "s" not "").', 'temperature': 0.1}}
2025-12-13 13:59:09,414 - INFO - Task 7 found prompt override: Gemini Pro 3, temp 0.1: You are a literal transcription engine for 19th-century handwritten manuscripts. Extract text from the supplied image exactly as written. Preserve all original spelling, punctuation, capitalization, and line breaks. Do not modernize, interpret, or expand abbreviations. The only modernization you should perform is to modernize obsolete characters (example, print "s" not "").
2025-12-13 13:59:09,414 - INFO - Task 7 found temp override: 0.1
2025-12-13 13:59:09,416 - INFO - TASK START: Processing rock01.jpg (ID: 7)
2025-12-13 13:59:09,417 - INFO - Command: subscript historical-manuscript gemini-pro-3 /app/documents/eluhrs@gmail.com/rock01-db2d1093/rock01.jpg --output /app/documents/eluhrs@gmail.com/rock01-db2d1093 --prompt Gemini Pro 3, temp 0.1: You are a literal transcription engine for 19th-century handwritten manuscripts. Extract text from the supplied image exactly as written. Preserve all original spelling, punctuation, capitalization, and line breaks. Do not modernize, interpret, or expand abbreviations. The only modernization you should perform is to modernize obsolete characters (example, print "s" not ""). --temperature 0.1
2025-12-13 13:59:09,426 - INFO - Running from: /app
2025-12-13 13:59:09,426 - INFO - Using config: /app/config.yml
2025-12-13 13:59:09,426 - INFO - Output directory: /app/documents/eluhrs@gmail.com/rock01-db2d1093
2025-12-13 13:59:09,427 - INFO - ----------------------------------------
2025-12-13 13:59:09,427 - WARNING - No files found for pattern: --temperature
2025-12-13 13:59:09,427 - WARNING - No files found for pattern: 0.1
2025-12-13 13:59:13,544 - INFO - 
Subscript.py initialized segmentation provider: historical-manuscript
2025-12-13 13:59:13,545 - INFO - Subscript.py Initialized transcription provider: gemini-pro-3
2025-12-13 13:59:13,545 - INFO - Processing 1 files...
2025-12-13 13:59:13,545 - INFO - Processing /app/documents/eluhrs@gmail.com/rock01-db2d1093/rock01.jpg...
2025-12-13 13:59:13,545 - INFO - Segmenting /app/documents/eluhrs@gmail.com/rock01-db2d1093/rock01.jpg with Kraken...
2025-12-13 13:59:13,551 - INFO - Loading segmentation model from /usr/local/lib/python3.10/site-packages/kraken/blla.mlmodel...
2025-12-13 13:59:14,041 - INFO - Segmenting /app/documents/eluhrs@gmail.com/rock01-db2d1093/rock01.jpg
2025-12-13 13:59:18,522 - INFO - Vectorizing regions
2025-12-13 13:59:18,711 - INFO - Vectorizing regions
2025-12-13 13:59:18,896 - INFO - Vectorizing baselines
2025-12-13 13:59:27,604 - INFO - Compute reading order on 23 lines in lr direction
2025-12-13 13:59:27,606 - INFO - Perform topological sort on partially ordered lines
2025-12-13 13:59:27,607 - INFO - Compute reading order on 1 lines in lr direction
2025-12-13 13:59:27,608 - INFO - Perform topological sort on partially ordered lines
2025-12-13 13:59:27,608 - INFO - Compute reading order on 2 lines in lr direction
2025-12-13 13:59:27,609 - INFO - Perform topological sort on partially ordered lines
2025-12-13 13:59:27,613 - INFO - Found 24 lines.
2025-12-13 13:59:27,618 - INFO - Initializing Gemini model: gemini-3-pro-preview
2025-12-13 13:59:27,788 - INFO - Resized image to (2289, 3000)
2025-12-13 13:59:27,796 - INFO - Annotating 24 regions for Visual Tagging...
2025-12-13 13:59:27,895 - INFO - Saved debug image to /app/documents/eluhrs@gmail.com/rock01-db2d1093/rock01-debug.jpg
2025-12-13 13:59:27,896 - INFO - Sending annotated image to Gemini...
2025-12-13 14:00:04,176 - INFO - Received JSON response from Gemini.
2025-12-13 14:00:04,541 - INFO - SUBSCRIPT OUTPUT for 7:

------------- gemini-pro-3 output for rock01.jpg -------------
74
Panama, Dec. 29. 1874
My dear Capt. Green,-
Your favor by Dr. Boyd duly came.
We observed our latitude stars on Sunday night, and
of course last night again. The instrument behaves well.
Yesterday morning (before your letter came) & this morn.
we observed for azimuth & variation. Though heavily on
our minds we couldn't accomplish it earlier, while the
longitude work lasted. On Sat. night we observed 24 stars.
I will enclose your signals. I think our work is a success.
To-day Mr. Spencer dismounts the telegraph line. We hope to
un
come over on Sat. Morn. - I do not think the pier is steady,
I think some one hit an arm of the instrument unconsciously
each time I found it out of meridian.
The vernier trouble is due to that arm making an angle
with the vertical. I am convinced that most of the register
troubles are due to bad quality of the fillet paper. It is un=
equal thicknes at two edges and also varies in thickness
lengthwise, so as to require frequent readjustment of
rollers & stylet.
Very truly Yrs.
Miles Rock
----------------------------------------------------------------

Saved PageXML to /app/documents/eluhrs@gmail.com/rock01-db2d1093/rock01.xml
Saved TXT to /app/documents/eluhrs@gmail.com/rock01-db2d1093/rock01.txt
Saved PDF to /app/documents/eluhrs@gmail.com/rock01-db2d1093/rock01.pdf

Time:   00:00:50
Input:  1292 tokens
Output: 419 tokens
Cost:   $0.0076

----------------------------------------------------------------


2025-12-13 14:00:04,552 - INFO - Task server.tasks.process_document_task[67edb5e1-ac75-4f8a-abf6-25f495843f88] succeeded in 55.17365944106132s: None
2025-12-13 14:00:23,213 - INFO - JOB SUBMITTED: User eluhrs@gmail.com uploaded rock01.jpg
2025-12-13 14:00:23,232 - INFO - Task server.tasks.process_document_task[f2af6bf3-cc9a-4f10-b7ac-083103bf53fc] received
2025-12-13 14:00:23,239 - INFO - Task 8 parsed options: {'transcription': {'prompt': 'Gemini Pro 3, temp 0.1: You are a literal transcription engine for 19th-century handwritten manuscripts. Extract text from the supplied image exactly as written. Preserve all original spelling, punctuation, capitalization, and line breaks. Do not modernize, interpret, or expand abbreviations. The only modernization you should perform is to modernize obsolete characters (example, print "s" not "").', 'temperature': 0.1}}
2025-12-13 14:00:23,239 - INFO - Task 8 found prompt override: Gemini Pro 3, temp 0.1: You are a literal transcription engine for 19th-century handwritten manuscripts. Extract text from the supplied image exactly as written. Preserve all original spelling, punctuation, capitalization, and line breaks. Do not modernize, interpret, or expand abbreviations. The only modernization you should perform is to modernize obsolete characters (example, print "s" not "").
2025-12-13 14:00:23,240 - INFO - Task 8 found temp override: 0.1
2025-12-13 14:00:23,241 - INFO - TASK START: Processing rock01.jpg (ID: 8)
2025-12-13 14:00:23,241 - INFO - Command: subscript historical-manuscript gemini-pro-3 /app/documents/eluhrs@gmail.com/rock01-acf9bfe6/rock01.jpg --output /app/documents/eluhrs@gmail.com/rock01-acf9bfe6 --prompt Gemini Pro 3, temp 0.1: You are a literal transcription engine for 19th-century handwritten manuscripts. Extract text from the supplied image exactly as written. Preserve all original spelling, punctuation, capitalization, and line breaks. Do not modernize, interpret, or expand abbreviations. The only modernization you should perform is to modernize obsolete characters (example, print "s" not ""). --temperature 0.1
2025-12-13 14:00:23,249 - INFO - Running from: /app
2025-12-13 14:00:23,250 - INFO - Using config: /app/config.yml
2025-12-13 14:00:23,250 - INFO - Output directory: /app/documents/eluhrs@gmail.com/rock01-acf9bfe6
2025-12-13 14:00:23,250 - INFO - ----------------------------------------
2025-12-13 14:00:23,251 - WARNING - No files found for pattern: --temperature
2025-12-13 14:00:23,251 - WARNING - No files found for pattern: 0.1
2025-12-13 14:00:23,251 - INFO - 
Subscript.py initialized segmentation provider: historical-manuscript
2025-12-13 14:00:23,252 - INFO - Subscript.py Initialized transcription provider: gemini-pro-3
2025-12-13 14:00:23,252 - INFO - Processing 1 files...
2025-12-13 14:00:23,252 - INFO - Processing /app/documents/eluhrs@gmail.com/rock01-acf9bfe6/rock01.jpg...
2025-12-13 14:00:23,253 - INFO - Segmenting /app/documents/eluhrs@gmail.com/rock01-acf9bfe6/rock01.jpg with Kraken...
2025-12-13 14:00:23,253 - INFO - Loading segmentation model from /usr/local/lib/python3.10/site-packages/kraken/blla.mlmodel...
2025-12-13 14:00:23,713 - INFO - Segmenting /app/documents/eluhrs@gmail.com/rock01-acf9bfe6/rock01.jpg
2025-12-13 14:00:27,222 - INFO - Vectorizing regions
2025-12-13 14:00:27,414 - INFO - Vectorizing regions
2025-12-13 14:00:27,598 - INFO - Vectorizing baselines
2025-12-13 14:00:36,150 - INFO - Compute reading order on 23 lines in lr direction
2025-12-13 14:00:36,152 - INFO - Perform topological sort on partially ordered lines
2025-12-13 14:00:36,153 - INFO - Compute reading order on 1 lines in lr direction
2025-12-13 14:00:36,153 - INFO - Perform topological sort on partially ordered lines
2025-12-13 14:00:36,154 - INFO - Compute reading order on 2 lines in lr direction
2025-12-13 14:00:36,156 - INFO - Perform topological sort on partially ordered lines
2025-12-13 14:00:36,160 - INFO - Found 24 lines.
2025-12-13 14:00:36,167 - INFO - Initializing Gemini model: gemini-3-pro-preview
2025-12-13 14:00:36,335 - INFO - Resized image to (2289, 3000)
2025-12-13 14:00:36,344 - INFO - Annotating 24 regions for Visual Tagging...
2025-12-13 14:00:36,441 - INFO - Saved debug image to /app/documents/eluhrs@gmail.com/rock01-acf9bfe6/rock01-debug.jpg
2025-12-13 14:00:36,442 - INFO - Sending annotated image to Gemini...
2025-12-13 14:01:39,266 - INFO - Received JSON response from Gemini.
2025-12-13 14:01:39,642 - INFO - SUBSCRIPT OUTPUT for 8:

------------- gemini-pro-3 output for rock01.jpg -------------
74
Panama, Dec. 29. 1874
My dear Capt. Green,-
Your favor by Dr. Boyd duly came.
We observed our latitude stars on Sunday night, and
of course last night again. The instrument behaves well.
Yesterday morning (before your letter came) & this morn.
we observed for azimuth & variation. Though heavily on
our minds we couldn't accomplish it earlier, while the
longitude work lasted. On Sat. night we observed 24 stars.
I will enclose your signals. I think our work is a success.
To-day Mr. Spencer dismounts the telegraph line. We hope to
un
come over on Sat. Morn. - I do not think the pier is steady,
I think some one hit an arm of the instrument unconsciously
each time I found it out of meridian.
The vernier trouble is due to that arm making an angle
with the vertical. I am convinced that most of the register
troubles are due to bad quality of the fillet paper. It is un=
equal thickness at two edges and also varies in thickness
lengthwise, so as to require frequent readjustment of
rollers & stylet.
Very truly Yrs.
Miles Rock
----------------------------------------------------------------

Saved PageXML to /app/documents/eluhrs@gmail.com/rock01-acf9bfe6/rock01.xml
Saved TXT to /app/documents/eluhrs@gmail.com/rock01-acf9bfe6/rock01.txt
Saved PDF to /app/documents/eluhrs@gmail.com/rock01-acf9bfe6/rock01.pdf

Time:   00:01:16
Input:  1292 tokens
Output: 394 tokens
Cost:   $0.0073

----------------------------------------------------------------


2025-12-13 14:01:39,652 - INFO - Task server.tasks.process_document_task[f2af6bf3-cc9a-4f10-b7ac-083103bf53fc] succeeded in 76.4176514520077s: None
2025-12-13 14:05:17,490 - INFO - SYSTEM: Server module initialized at 2025-12-13 14:05:17.489996
2025-12-13 14:49:33,572 - INFO - SYSTEM: Server module initialized at 2025-12-13 14:49:33.572343
2025-12-13 14:52:19,458 - INFO - SYSTEM: Server module initialized at 2025-12-13 14:52:19.458576
2025-12-13 14:55:44,696 - INFO - SYSTEM: Server module initialized at 2025-12-13 14:55:44.696723
2025-12-13 15:00:50,850 - INFO - SYSTEM: Server module initialized at 2025-12-13 15:00:50.850584
2025-12-13 15:01:13,258 - INFO - SYSTEM: Server module initialized at 2025-12-13 15:01:13.258410
2025-12-13 15:01:31,321 - INFO - SYSTEM: Server module initialized at 2025-12-13 15:01:31.321550
2025-12-13 15:03:56,753 - INFO - SYSTEM: Server module initialized at 2025-12-13 15:03:56.753726
2025-12-13 15:06:54,399 - INFO - JOB SUBMITTED: User eluhrs@gmail.com uploaded rock01.jpg
2025-12-13 15:06:54,534 - INFO - Task server.tasks.process_document_task[24b0f050-6edb-46e8-94cd-22a1a178ac02] received
2025-12-13 15:06:54,565 - INFO - Task 9 parsed options: {'transcription': {'prompt': 'You are a literal transcription engine for 19th-century handwritten manuscripts. Extract text from the supplied image exactly as written. Preserve all original spelling, punctuation, capitalization, and line breaks. Do not modernize, interpret, or expand abbreviations. The only modernization you should perform is to modernize obsolete characters (example, print "s" not "").', 'temperature': 0.2}, 'segmentation_model': 'historical-manuscript', 'preprocessing': {'resize_image': 'large', 'contrast': 1, 'binarize': False, 'invert': False, 'debug_image': True}}
2025-12-13 15:06:54,570 - INFO - Task 9 found prompt override: You are a literal transcription engine for 19th-century handwritten manuscripts. Extract text from the supplied image exactly as written. Preserve all original spelling, punctuation, capitalization, and line breaks. Do not modernize, interpret, or expand abbreviations. The only modernization you should perform is to modernize obsolete characters (example, print "s" not "").
2025-12-13 15:06:54,570 - INFO - Task 9 found temp override: 0.2
2025-12-13 15:06:54,574 - INFO - TASK START: Processing rock01.jpg (ID: 9)
2025-12-13 15:06:54,574 - INFO - Command: subscript historical-manuscript gemini-pro-3 /app/documents/eluhrs@gmail.com/rock01-6534afeb/rock01.jpg --output /app/documents/eluhrs@gmail.com/rock01-6534afeb --prompt You are a literal transcription engine for 19th-century handwritten manuscripts. Extract text from the supplied image exactly as written. Preserve all original spelling, punctuation, capitalization, and line breaks. Do not modernize, interpret, or expand abbreviations. The only modernization you should perform is to modernize obsolete characters (example, print "s" not ""). --temperature 0.2
2025-12-13 15:06:54,585 - INFO - Running from: /app
2025-12-13 15:06:54,586 - INFO - Using config: /app/config.yml
2025-12-13 15:06:54,586 - INFO - Output directory: /app/documents/eluhrs@gmail.com/rock01-6534afeb
2025-12-13 15:06:54,586 - INFO - ----------------------------------------
2025-12-13 15:06:54,587 - WARNING - No files found for pattern: --temperature
2025-12-13 15:06:54,587 - WARNING - No files found for pattern: 0.2
2025-12-13 15:06:54,592 - INFO - 
Subscript.py initialized segmentation provider: historical-manuscript
2025-12-13 15:06:54,593 - INFO - Subscript.py Initialized transcription provider: gemini-pro-3
2025-12-13 15:06:54,594 - INFO - Processing 1 files...
2025-12-13 15:06:54,595 - INFO - Processing /app/documents/eluhrs@gmail.com/rock01-6534afeb/rock01.jpg...
2025-12-13 15:06:54,595 - INFO - Segmenting /app/documents/eluhrs@gmail.com/rock01-6534afeb/rock01.jpg with Kraken...
2025-12-13 15:06:54,600 - INFO - Loading segmentation model from /usr/local/lib/python3.10/site-packages/kraken/blla.mlmodel...
2025-12-13 15:06:55,172 - INFO - Segmenting /app/documents/eluhrs@gmail.com/rock01-6534afeb/rock01.jpg
2025-12-13 15:06:58,760 - INFO - Vectorizing regions
2025-12-13 15:06:58,950 - INFO - Vectorizing regions
2025-12-13 15:06:59,140 - INFO - Vectorizing baselines
2025-12-13 15:07:07,910 - INFO - Compute reading order on 23 lines in lr direction
2025-12-13 15:07:07,921 - INFO - Perform topological sort on partially ordered lines
2025-12-13 15:07:07,930 - INFO - Compute reading order on 1 lines in lr direction
2025-12-13 15:07:07,932 - INFO - Perform topological sort on partially ordered lines
2025-12-13 15:07:07,939 - INFO - Compute reading order on 2 lines in lr direction
2025-12-13 15:07:07,944 - INFO - Perform topological sort on partially ordered lines
2025-12-13 15:07:07,954 - INFO - Found 24 lines.
2025-12-13 15:07:07,958 - INFO - Initializing Gemini model: gemini-3-pro-preview
2025-12-13 15:07:08,130 - INFO - Resized image to (2289, 3000)
2025-12-13 15:07:08,140 - INFO - Annotating 24 regions for Visual Tagging...
2025-12-13 15:07:08,242 - INFO - Saved debug image to /app/documents/eluhrs@gmail.com/rock01-6534afeb/rock01-debug.jpg
2025-12-13 15:07:08,242 - INFO - Sending annotated image to Gemini...
2025-12-13 15:07:49,309 - INFO - Received JSON response from Gemini.
2025-12-13 15:07:49,687 - INFO - SUBSCRIPT OUTPUT for 9:

------------- gemini-pro-3 output for rock01.jpg -------------
74
Panama, Dec. 29. 1874
My dear Capt. Green,-
Your favor by Dr. Boyd duly came.
We observed our latitude stars on Sunday night, and
of course last night again. The instrument behaves well.
Yesterday morning (before your letter came) & this morn.
we observed for azimuth & variation. Though heavily on
our minds we couldn't accomplish it earlier, while the
longitude work lasted. On Sat. night we observed 24 stars.
I will enclose your signals. I think our work is a success.
To-day Mr. Spencer dismounts the telegraph line. We hope to
un
come over on Sat. Morn. - I do not think the pier is steady,
I think some one hit an arm of the instrument unconsciously
each time I found it out of meridian.
The vernier trouble is due to that arm making an angle
with the vertical. I am convinced that most of the register
troubles are due to bad quality of the fillet paper. It is un=
equal thickness at two edges and also varies in thickness
lengthwise, so as to require frequent readjustment of
rollers & stylet.
Very truly Yrs.
Miles Rock
----------------------------------------------------------------

Saved PageXML to /app/documents/eluhrs@gmail.com/rock01-6534afeb/rock01.xml
Saved TXT to /app/documents/eluhrs@gmail.com/rock01-6534afeb/rock01.txt
Saved PDF to /app/documents/eluhrs@gmail.com/rock01-6534afeb/rock01.pdf

Time:   00:00:55
Input:  1280 tokens
Output: 394 tokens
Cost:   $0.0073

----------------------------------------------------------------


2025-12-13 15:07:49,693 - INFO - Task server.tasks.process_document_task[24b0f050-6edb-46e8-94cd-22a1a178ac02] succeeded in 55.15079031698406s: None
2025-12-13 15:13:09,166 - INFO - SYSTEM: Server module initialized at 2025-12-13 15:13:09.166290
2025-12-13 15:26:39,871 - INFO - SYSTEM: Server module initialized at 2025-12-13 15:26:39.871224
2025-12-13 15:28:12,125 - INFO - SYSTEM: Server module initialized at 2025-12-13 15:28:12.125948
2025-12-13 15:28:12,383 - INFO - SYSTEM: Server module initialized at 2025-12-13 15:28:12.383497
2025-12-13 15:28:13,684 - INFO - Connected to redis://redis:6379/0
2025-12-13 15:28:13,691 - INFO - mingle: searching for neighbors
2025-12-13 15:28:14,705 - INFO - mingle: all alone
2025-12-13 15:28:14,720 - INFO - celery@0a217f1ee2e7 ready.
2025-12-13 15:54:25,749 - INFO - SYSTEM: Server module initialized at 2025-12-13 15:54:25.749218
2025-12-13 15:54:54,196 - INFO - SYSTEM: Server module initialized at 2025-12-13 15:54:54.196007
2025-12-13 15:54:54,545 - INFO - SYSTEM: Server module initialized at 2025-12-13 15:54:54.545164
2025-12-13 15:54:55,578 - INFO - Connected to redis://redis:6379/0
2025-12-13 15:54:55,586 - INFO - mingle: searching for neighbors
2025-12-13 15:54:56,604 - INFO - mingle: all alone
2025-12-13 15:54:56,620 - INFO - celery@3bb1de873477 ready.
2025-12-13 15:55:56,290 - INFO - SYSTEM: Server module initialized at 2025-12-13 15:55:56.290504
2025-12-13 15:56:06,469 - INFO - SYSTEM: Server module initialized at 2025-12-13 15:56:06.469112
2025-12-13 15:58:02,648 - INFO - SYSTEM: Server module initialized at 2025-12-13 15:58:02.648740
2025-12-13 15:58:03,660 - INFO - SYSTEM: Server module initialized at 2025-12-13 15:58:03.660633
2025-12-13 16:02:47,977 - INFO - SYSTEM: Server module initialized at 2025-12-13 16:02:47.977481
2025-12-13 16:02:59,094 - INFO - SYSTEM: Server module initialized at 2025-12-13 16:02:59.094172
2025-12-13 16:06:28,634 - INFO - SYSTEM: Server module initialized at 2025-12-13 16:06:28.634257
2025-12-13 16:06:51,387 - INFO - SYSTEM: Server module initialized at 2025-12-13 16:06:51.387473
2025-12-13 16:06:51,575 - INFO - SYSTEM: Server module initialized at 2025-12-13 16:06:51.575504
2025-12-13 16:06:52,403 - INFO - Connected to redis://redis:6379/0
2025-12-13 16:06:52,408 - INFO - mingle: searching for neighbors
2025-12-13 16:06:53,417 - INFO - mingle: all alone
2025-12-13 16:06:53,426 - INFO - celery@b6048134c748 ready.
2025-12-13 16:11:03,543 - INFO - SYSTEM: Server module initialized at 2025-12-13 16:11:03.543009
2025-12-13 17:03:26,420 - INFO - SYSTEM: Server module initialized at 2025-12-13 17:03:26.420596
2025-12-13 17:10:19,899 - INFO - SYSTEM: Server module initialized at 2025-12-13 17:10:19.899903
2025-12-13 17:19:54,468 - INFO - SYSTEM: Server module initialized at 2025-12-13 17:19:54.468145
2025-12-13 17:25:11,504 - INFO - SYSTEM: Server module initialized at 2025-12-13 17:25:11.504238
2025-12-13 17:33:28,813 - INFO - JOB SUBMITTED: User eluhrs@gmail.com uploaded north-01.jpg
2025-12-13 17:33:28,933 - INFO - Task server.tasks.process_document_task[6525ae4a-3f24-4eee-9b5b-9300b717f68e] received
2025-12-13 17:33:29,009 - INFO - Task 1 parsed options: {'transcription': {'prompt': 'You are a literal transcription engine for 19th-century handwritten manuscripts. Extract text from the supplied image exactly as written. Preserve all original spelling, punctuation, capitalization, and line breaks. Do not modernize, interpret, or expand abbreviations. The only modernization you should perform is to modernize obsolete characters (example, print "s" not "").', 'temperature': 1}, 'segmentation_model': 'historical-manuscript', 'preprocessing': {}}
2025-12-13 17:33:29,011 - INFO - Task 1 found prompt override: You are a literal transcription engine for 19th-century handwritten manuscripts. Extract text from the supplied image exactly as written. Preserve all original spelling, punctuation, capitalization, and line breaks. Do not modernize, interpret, or expand abbreviations. The only modernization you should perform is to modernize obsolete characters (example, print "s" not "").
2025-12-13 17:33:29,011 - INFO - Task 1 found temp override: 1
2025-12-13 17:33:29,014 - INFO - TASK START: Processing north-01.jpg (ID: 1)
2025-12-13 17:33:29,014 - INFO - Command: subscript historical-manuscript gemini-pro-3 /app/documents/eluhrs@gmail.com/north-01-0ab03254/north-01.jpg --output /app/documents/eluhrs@gmail.com/north-01-0ab03254 --prompt You are a literal transcription engine for 19th-century handwritten manuscripts. Extract text from the supplied image exactly as written. Preserve all original spelling, punctuation, capitalization, and line breaks. Do not modernize, interpret, or expand abbreviations. The only modernization you should perform is to modernize obsolete characters (example, print "s" not ""). --temperature 1
2025-12-13 17:33:29,022 - INFO - Running from: /app
2025-12-13 17:33:29,022 - INFO - Using config: /app/config.yml
2025-12-13 17:33:29,023 - INFO - Output directory: /app/documents/eluhrs@gmail.com/north-01-0ab03254
2025-12-13 17:33:29,023 - INFO - ----------------------------------------
2025-12-13 17:33:29,023 - WARNING - No files found for pattern: --temperature
2025-12-13 17:33:29,024 - WARNING - No files found for pattern: 1
2025-12-13 17:33:32,944 - INFO - 
Subscript.py initialized segmentation provider: historical-manuscript
2025-12-13 17:33:32,944 - INFO - Subscript.py Initialized transcription provider: gemini-pro-3
2025-12-13 17:33:32,945 - INFO - Processing 1 files...
2025-12-13 17:33:32,945 - INFO - Processing /app/documents/eluhrs@gmail.com/north-01-0ab03254/north-01.jpg...
2025-12-13 17:33:32,945 - INFO - Segmenting /app/documents/eluhrs@gmail.com/north-01-0ab03254/north-01.jpg with Kraken...
2025-12-13 17:33:32,949 - INFO - Loading segmentation model from /usr/local/lib/python3.10/site-packages/kraken/blla.mlmodel...
2025-12-13 17:33:33,403 - INFO - Segmenting /app/documents/eluhrs@gmail.com/north-01-0ab03254/north-01.jpg
2025-12-13 17:33:37,515 - INFO - Vectorizing regions
2025-12-13 17:33:37,624 - INFO - Vectorizing regions
2025-12-13 17:33:37,730 - INFO - Vectorizing baselines
2025-12-13 17:33:42,999 - INFO - Compute reading order on 18 lines in lr direction
2025-12-13 17:33:43,000 - INFO - Perform topological sort on partially ordered lines
2025-12-13 17:33:43,000 - INFO - Compute reading order on 1 lines in lr direction
2025-12-13 17:33:43,001 - INFO - Perform topological sort on partially ordered lines
2025-12-13 17:33:43,002 - INFO - Found 18 lines.
2025-12-13 17:33:43,003 - INFO - Initializing Gemini model: gemini-3-pro-preview
2025-12-13 17:33:43,014 - INFO - Annotating 18 regions for Visual Tagging...
2025-12-13 17:33:43,045 - INFO - Saved debug image to /app/documents/eluhrs@gmail.com/north-01-0ab03254/north-01-debug.jpg
2025-12-13 17:33:43,045 - INFO - Sending annotated image to Gemini...
2025-12-13 17:35:56,081 - INFO - Received JSON response from Gemini.
2025-12-13 17:35:56,084 - WARNING - Gemini did not return text for box 9
2025-12-13 17:35:56,230 - INFO - SUBSCRIPT OUTPUT for 1:

------------- gemini-pro-3 output for north-01.jpg -------------
glad apects were preent (confirming her
Maietie wth THEODOSIES dylligence, ARETAPHE-
LIS contancie, and ANTIGONVS clemencie)
etlinge them elues euar ence, in her Princelie
bret: as ye rarenes and greatnes of her Gracis
vertue declare. Whom God prearuid from
formar perell, to rule & reygne ouer us, in
this lat leaden adge: wherin Iniquitie hath

ought to urmount ye glorie of his Deitie, and
o preumed to uppree his profeors: As if
ye Shylde of her Souerayntie (for worldlie
Quens
Ma:tie is ye par
fect protector
What Scime or ect wold not aawte us?
What treaon wold not entrapp us? When
all
----------------------------------------------------------------

Saved PageXML to /app/documents/eluhrs@gmail.com/north-01-0ab03254/north-01.xml
Saved TXT to /app/documents/eluhrs@gmail.com/north-01-0ab03254/north-01.txt
Saved PDF to /app/documents/eluhrs@gmail.com/north-01-0ab03254/north-01.pdf

Time:   00:02:23
Input:  1270 tokens
Output: 333 tokens
Cost:   $0.0065

----------------------------------------------------------------


2025-12-13 17:35:56,237 - INFO - Task server.tasks.process_document_task[6525ae4a-3f24-4eee-9b5b-9300b717f68e] succeeded in 147.2959450680064s: None
2025-12-13 17:36:59,298 - INFO - JOB SUBMITTED: User eluhrs@gmail.com uploaded rock01.jpg
2025-12-13 17:36:59,310 - INFO - Task server.tasks.process_document_task[49351340-ca39-4de8-a50b-8f466719ad07] received
2025-12-13 17:36:59,317 - INFO - Task 2 parsed options: {'transcription': {'prompt': 'Convert all dates to ISO format.', 'temperature': 1}, 'segmentation_model': 'historical-manuscript', 'preprocessing': {}}
2025-12-13 17:36:59,317 - INFO - Task 2 found prompt override: Convert all dates to ISO format.
2025-12-13 17:36:59,317 - INFO - Task 2 found temp override: 1
2025-12-13 17:36:59,319 - INFO - TASK START: Processing rock01.jpg (ID: 2)
2025-12-13 17:36:59,319 - INFO - Command: subscript historical-manuscript gemini-pro-3 /app/documents/eluhrs@gmail.com/rock01-c7fa372d/rock01.jpg --output /app/documents/eluhrs@gmail.com/rock01-c7fa372d --prompt Convert all dates to ISO format. --temperature 1
2025-12-13 17:36:59,328 - INFO - Running from: /app
2025-12-13 17:36:59,329 - INFO - Using config: /app/config.yml
2025-12-13 17:36:59,329 - INFO - Output directory: /app/documents/eluhrs@gmail.com/rock01-c7fa372d
2025-12-13 17:36:59,329 - INFO - ----------------------------------------
2025-12-13 17:36:59,330 - WARNING - No files found for pattern: --temperature
2025-12-13 17:36:59,330 - WARNING - No files found for pattern: 1
2025-12-13 17:36:59,330 - INFO - 
Subscript.py initialized segmentation provider: historical-manuscript
2025-12-13 17:36:59,330 - INFO - Subscript.py Initialized transcription provider: gemini-pro-3
2025-12-13 17:36:59,331 - INFO - Processing 1 files...
2025-12-13 17:36:59,331 - INFO - Processing /app/documents/eluhrs@gmail.com/rock01-c7fa372d/rock01.jpg...
2025-12-13 17:36:59,332 - INFO - Segmenting /app/documents/eluhrs@gmail.com/rock01-c7fa372d/rock01.jpg with Kraken...
2025-12-13 17:36:59,333 - INFO - Loading segmentation model from /usr/local/lib/python3.10/site-packages/kraken/blla.mlmodel...
2025-12-13 17:36:59,705 - INFO - Segmenting /app/documents/eluhrs@gmail.com/rock01-c7fa372d/rock01.jpg
2025-12-13 17:37:03,848 - INFO - Vectorizing regions
2025-12-13 17:37:03,999 - INFO - Vectorizing regions
2025-12-13 17:37:04,149 - INFO - Vectorizing baselines
2025-12-13 17:37:11,212 - INFO - Compute reading order on 23 lines in lr direction
2025-12-13 17:37:11,215 - INFO - Perform topological sort on partially ordered lines
2025-12-13 17:37:11,217 - INFO - Compute reading order on 1 lines in lr direction
2025-12-13 17:37:11,217 - INFO - Perform topological sort on partially ordered lines
2025-12-13 17:37:11,217 - INFO - Compute reading order on 2 lines in lr direction
2025-12-13 17:37:11,218 - INFO - Perform topological sort on partially ordered lines
2025-12-13 17:37:11,220 - INFO - Found 24 lines.
2025-12-13 17:37:11,221 - INFO - Initializing Gemini model: gemini-3-pro-preview
2025-12-13 17:37:11,361 - INFO - Resized image to (2289, 3000)
2025-12-13 17:37:11,367 - INFO - Annotating 24 regions for Visual Tagging...
2025-12-13 17:37:11,445 - INFO - Saved debug image to /app/documents/eluhrs@gmail.com/rock01-c7fa372d/rock01-debug.jpg
2025-12-13 17:37:11,446 - INFO - Sending annotated image to Gemini...
2025-12-13 17:37:42,037 - INFO - Received JSON response from Gemini.
2025-12-13 17:37:42,329 - INFO - SUBSCRIPT OUTPUT for 2:

------------- gemini-pro-3 output for rock01.jpg -------------
74
1874-12-29
My dear Capt. Green,-
Your favor by Dr. Boyd duly came.
We observed our latitude stars on Sunday night, and
of course last night again. The instrument behaves well.
Yesterday morning (before your letter came) & this morn.
we observed for azimuth & variation. Though heavily on
our minds we couldn't accomplish it earlier, while the
longitude work lasted. On Sat. night we observed 24 stars.
I will enclose your signals. I think our work is a success.
To-day Mr. Spencer dismounts the telegraph line. We hope to
un
come over on Sat. Morn. - I do not think the pier is steady,
I think some one hit an arm of the instrument unconsciously
each time I found it out of meridian.
The vernier trouble is due to that arm making an angle
with the vertical. I am convinced that most of the register
troubles are due to bad quality of the fillet paper. It is un-
equal thickness at two edges and also varies in thickness
lengthwise, so as to require frequent readjustment of
rollers & stylet.
Very truly Yrs.
Miles Rock
----------------------------------------------------------------

Saved PageXML to /app/documents/eluhrs@gmail.com/rock01-c7fa372d/rock01.xml
Saved TXT to /app/documents/eluhrs@gmail.com/rock01-c7fa372d/rock01.txt
Saved PDF to /app/documents/eluhrs@gmail.com/rock01-c7fa372d/rock01.pdf

Time:   00:00:42
Input:  1216 tokens
Output: 416 tokens
Cost:   $0.0074

----------------------------------------------------------------


2025-12-13 17:37:42,333 - INFO - Task server.tasks.process_document_task[49351340-ca39-4de8-a50b-8f466719ad07] succeeded in 43.02282206201926s: None
2025-12-13 17:40:41,489 - INFO - SYSTEM: Server module initialized at 2025-12-13 17:40:41.489278
2025-12-13 17:40:53,841 - INFO - SYSTEM: Server module initialized at 2025-12-13 17:40:53.841067
2025-12-13 17:40:54,858 - INFO - Connected to redis://redis:6379/0
2025-12-13 17:40:54,860 - INFO - mingle: searching for neighbors
2025-12-13 17:40:55,870 - INFO - mingle: all alone
2025-12-13 17:40:55,882 - INFO - celery@b6048134c748 ready.
2025-12-13 18:02:58,979 - INFO - SYSTEM: Server module initialized at 2025-12-13 18:02:58.979801
2025-12-13 18:16:21,353 - INFO - SYSTEM: Server module initialized at 2025-12-13 18:16:21.353032
2025-12-13 18:18:51,404 - INFO - JOB SUBMITTED: User eluhrs@gmail.com uploaded rock01.jpg
2025-12-13 18:20:19,827 - INFO - SYSTEM: Server module initialized at 2025-12-13 18:20:19.826995
2025-12-13 18:21:19,370 - INFO - JOB SUBMITTED: User eluhrs@gmail.com uploaded rock01.jpg
2025-12-13 18:22:36,515 - INFO - SYSTEM: Server module initialized at 2025-12-13 18:22:36.515558
2025-12-13 18:23:34,155 - INFO - JOB SUBMITTED: User eluhrs@gmail.com uploaded rock01.jpg
2025-12-13 18:24:24,593 - INFO - SYSTEM: Server module initialized at 2025-12-13 18:24:24.593794
2025-12-13 18:24:35,385 - INFO - SYSTEM: Server module initialized at 2025-12-13 18:24:35.385297
2025-12-13 18:24:36,354 - INFO - Connected to redis://redis:6379/0
2025-12-13 18:24:36,357 - INFO - mingle: searching for neighbors
2025-12-13 18:24:37,370 - INFO - mingle: all alone
2025-12-13 18:24:37,385 - INFO - celery@dc7c3f44098d ready.
2025-12-13 18:25:13,353 - INFO - JOB SUBMITTED: User eluhrs@gmail.com uploaded rock01.jpg
2025-12-13 18:25:13,514 - INFO - Task server.tasks.process_document_task[e85ea349-aeba-4579-bbbd-eb9e1e85ba47] received
2025-12-13 18:25:13,565 - INFO - Task 1 parsed options: {'transcription': {'prompt': 'You are a literal transcription engine for 19th-century handwritten manuscripts. Extract text from the supplied image exactly as written. Preserve all original spelling, punctuation, capitalization, and line breaks. Do not modernize, interpret, or expand abbreviations. The only modernization you should perform is to modernize obsolete characters (example, print "s" not "").', 'temperature': 0}, 'segmentation_model': 'historical-manuscript', 'preprocessing': {'resize_image': 'medium', 'contrast': 2}}
2025-12-13 18:25:13,565 - INFO - Task 1 found prompt override: You are a literal transcription engine for 19th-century handwritten manuscripts. Extract text from the supplied image exactly as written. Preserve all original spelling, punctuation, capitalization, and line breaks. Do not modernize, interpret, or expand abbreviations. The only modernization you should perform is to modernize obsolete characters (example, print "s" not "").
2025-12-13 18:25:13,566 - INFO - Task 1 found temp override: 0
2025-12-13 18:25:13,566 - INFO - Task 1 found temp override: 0
2025-12-13 18:25:13,569 - INFO - TASK START: Processing rock01.jpg (ID: 1)
2025-12-13 18:25:13,570 - INFO - Command: subscript historical-manuscript gemini-pro-3 /app/documents/eluhrs@gmail.com/rock01-bfb193a2/rock01.jpg --output /app/documents/eluhrs@gmail.com/rock01-bfb193a2 --prompt You are a literal transcription engine for 19th-century handwritten manuscripts. Extract text from the supplied image exactly as written. Preserve all original spelling, punctuation, capitalization, and line breaks. Do not modernize, interpret, or expand abbreviations. The only modernization you should perform is to modernize obsolete characters (example, print "s" not ""). --temp 0 --resize medium --contrast 2
2025-12-13 18:25:13,578 - INFO - Running from: /app
2025-12-13 18:25:13,579 - INFO - Using config: /app/config.yml
2025-12-13 18:25:13,579 - INFO - Output directory: /app/documents/eluhrs@gmail.com/rock01-bfb193a2
2025-12-13 18:25:13,579 - INFO - ----------------------------------------
2025-12-13 18:25:13,579 - WARNING - No files found for pattern: --resize
2025-12-13 18:25:13,580 - WARNING - No files found for pattern: medium
2025-12-13 18:25:13,580 - WARNING - No files found for pattern: --contrast
2025-12-13 18:25:13,580 - WARNING - No files found for pattern: 2
2025-12-13 18:25:17,405 - INFO - 
Subscript.py initialized segmentation provider: historical-manuscript
2025-12-13 18:25:17,405 - INFO - Subscript.py Initialized transcription provider: gemini-pro-3
2025-12-13 18:25:17,405 - INFO - Processing 1 files...
2025-12-13 18:25:17,406 - INFO - Processing /app/documents/eluhrs@gmail.com/rock01-bfb193a2/rock01.jpg...
2025-12-13 18:25:17,406 - INFO - Segmenting /app/documents/eluhrs@gmail.com/rock01-bfb193a2/rock01.jpg with Kraken...
2025-12-13 18:25:17,411 - INFO - Loading segmentation model from /usr/local/lib/python3.10/site-packages/kraken/blla.mlmodel...
2025-12-13 18:25:17,980 - INFO - Segmenting /app/documents/eluhrs@gmail.com/rock01-bfb193a2/rock01.jpg
2025-12-13 18:25:21,362 - INFO - Vectorizing regions
2025-12-13 18:25:21,567 - INFO - Vectorizing regions
2025-12-13 18:25:21,765 - INFO - Vectorizing baselines
2025-12-13 18:25:30,424 - INFO - Compute reading order on 23 lines in lr direction
2025-12-13 18:25:30,426 - INFO - Perform topological sort on partially ordered lines
2025-12-13 18:25:30,427 - INFO - Compute reading order on 1 lines in lr direction
2025-12-13 18:25:30,428 - INFO - Perform topological sort on partially ordered lines
2025-12-13 18:25:30,428 - INFO - Compute reading order on 2 lines in lr direction
2025-12-13 18:25:30,428 - INFO - Perform topological sort on partially ordered lines
2025-12-13 18:25:30,433 - INFO - Found 24 lines.
2025-12-13 18:25:30,435 - INFO - Initializing Gemini model: gemini-3-pro-preview
2025-12-13 18:25:30,604 - INFO - Resized image to (2289, 3000)
2025-12-13 18:25:30,613 - INFO - Annotating 24 regions for Visual Tagging...
2025-12-13 18:25:30,713 - INFO - Saved debug image to /app/documents/eluhrs@gmail.com/rock01-bfb193a2/rock01-debug.jpg
2025-12-13 18:25:30,714 - INFO - Sending annotated image to Gemini...
2025-12-13 18:26:41,744 - INFO - Received JSON response from Gemini.
2025-12-13 18:26:42,096 - INFO - SUBSCRIPT OUTPUT for 1:

------------- gemini-pro-3 output for rock01.jpg -------------
74
Panama, Dec. 29. 1874
My dear Capt. Green,-
Your favor by Dr. Boyd duly came.
We observed our latitude stars on Sunday night, and
of course last night again. The instrument behaves well.
Yesterday morning (before your letter came) & this morn.
we observed for azimuth & variation. Though heavily on
our minds we couldn't accomplish it earlier, while the
longitude work lasted. On Sat. night we observed 24 stars.
I will enclose your signals. I think our work is a success.
To-day Mr. Spencer dismounts the telegraph line. We hope to
un
come over on Sat. Morn. - I do not think the pier is steady,
I think some one hit an arm of the instrument unconsciously
each time I found it out of meridian.
The vernier trouble is due to that arm making an angle
with the vertical. I am convinced that most of the register
troubles are due to bad quality of the fillet paper. It is un=
equal thicknes at two edges and also varies in thickness
lengthwise, so as to require frequent readjustment of
rollers & stylet.
Very truly Yrs.
Miles Rock
----------------------------------------------------------------

Saved PageXML to /app/documents/eluhrs@gmail.com/rock01-bfb193a2/rock01.xml
Saved TXT to /app/documents/eluhrs@gmail.com/rock01-bfb193a2/rock01.txt
Saved PDF to /app/documents/eluhrs@gmail.com/rock01-bfb193a2/rock01.pdf

Time:   00:01:24
Input:  1280 tokens
Output: 419 tokens
Cost:   $0.0076

----------------------------------------------------------------


2025-12-13 18:26:42,108 - INFO - Task server.tasks.process_document_task[e85ea349-aeba-4579-bbbd-eb9e1e85ba47] succeeded in 88.60917137400247s: None
2025-12-13 18:31:36,764 - INFO - JOB SUBMITTED: User eluhrs@gmail.com uploaded rock01.jpg
2025-12-13 18:31:36,796 - INFO - Task server.tasks.process_document_task[e5592e18-c102-43f9-87ee-8d658c8b608a] received
2025-12-13 18:31:36,841 - INFO - Task 1 parsed options: {'transcription': {'prompt': 'You are a literal transcription engine for 19th-century handwritten manuscripts. Extract text from the supplied image exactly as written. Preserve all original spelling, punctuation, capitalization, and line breaks. Do not modernize, interpret, or expand abbreviations. The only modernization you should perform is to modernize obsolete characters (example, print "s" not "").', 'temperature': 0}, 'segmentation_model': 'historical-manuscript', 'preprocessing': {'resize_image': 'medium', 'contrast': 2, 'invert': True}}
2025-12-13 18:31:36,847 - INFO - Task 1 found prompt override: You are a literal transcription engine for 19th-century handwritten manuscripts. Extract text from the supplied image exactly as written. Preserve all original spelling, punctuation, capitalization, and line breaks. Do not modernize, interpret, or expand abbreviations. The only modernization you should perform is to modernize obsolete characters (example, print "s" not "").
2025-12-13 18:31:36,847 - INFO - Task 1 found temp override: 0
2025-12-13 18:31:36,847 - INFO - Task 1 found temp override: 0
2025-12-13 18:31:36,849 - INFO - TASK START: Processing rock01.jpg (ID: 1)
2025-12-13 18:31:36,850 - INFO - Command: subscript historical-manuscript gemini-pro-3 /app/documents/eluhrs@gmail.com/rock01-eec85bf3/rock01.jpg --output /app/documents/eluhrs@gmail.com/rock01-eec85bf3 --prompt You are a literal transcription engine for 19th-century handwritten manuscripts. Extract text from the supplied image exactly as written. Preserve all original spelling, punctuation, capitalization, and line breaks. Do not modernize, interpret, or expand abbreviations. The only modernization you should perform is to modernize obsolete characters (example, print "s" not ""). --temp 0 --resize medium --contrast 2 --invert
2025-12-13 18:31:36,862 - INFO - Running from: /app
2025-12-13 18:31:36,862 - INFO - Using config: /app/config.yml
2025-12-13 18:31:36,863 - INFO - Output directory: /app/documents/eluhrs@gmail.com/rock01-eec85bf3
2025-12-13 18:31:36,864 - INFO - ----------------------------------------
2025-12-13 18:31:36,865 - WARNING - No files found for pattern: --resize
2025-12-13 18:31:36,865 - WARNING - No files found for pattern: medium
2025-12-13 18:31:36,866 - WARNING - No files found for pattern: --contrast
2025-12-13 18:31:36,866 - WARNING - No files found for pattern: 2
2025-12-13 18:31:36,866 - WARNING - No files found for pattern: --invert
2025-12-13 18:31:36,869 - INFO - 
Subscript.py initialized segmentation provider: historical-manuscript
2025-12-13 18:31:36,870 - INFO - Subscript.py Initialized transcription provider: gemini-pro-3
2025-12-13 18:31:36,871 - INFO - Processing 1 files...
2025-12-13 18:31:36,872 - INFO - Processing /app/documents/eluhrs@gmail.com/rock01-eec85bf3/rock01.jpg...
2025-12-13 18:31:36,874 - INFO - Segmenting /app/documents/eluhrs@gmail.com/rock01-eec85bf3/rock01.jpg with Kraken...
2025-12-13 18:31:36,878 - INFO - Loading segmentation model from /usr/local/lib/python3.10/site-packages/kraken/blla.mlmodel...
2025-12-13 18:31:37,615 - INFO - Segmenting /app/documents/eluhrs@gmail.com/rock01-eec85bf3/rock01.jpg
2025-12-13 18:31:46,235 - INFO - Vectorizing regions
2025-12-13 18:31:46,458 - INFO - Vectorizing regions
2025-12-13 18:31:46,657 - INFO - Vectorizing baselines
2025-12-13 18:31:57,105 - INFO - Compute reading order on 23 lines in lr direction
2025-12-13 18:31:57,106 - INFO - Perform topological sort on partially ordered lines
2025-12-13 18:31:57,107 - INFO - Compute reading order on 1 lines in lr direction
2025-12-13 18:31:57,107 - INFO - Perform topological sort on partially ordered lines
2025-12-13 18:31:57,107 - INFO - Compute reading order on 2 lines in lr direction
2025-12-13 18:31:57,108 - INFO - Perform topological sort on partially ordered lines
2025-12-13 18:31:57,110 - INFO - Found 24 lines.
2025-12-13 18:31:57,111 - INFO - Initializing Gemini model: gemini-3-pro-preview
2025-12-13 18:31:57,284 - INFO - Resized image to (2289, 3000)
2025-12-13 18:31:57,293 - INFO - Annotating 24 regions for Visual Tagging...
2025-12-13 18:31:57,394 - INFO - Saved debug image to /app/documents/eluhrs@gmail.com/rock01-eec85bf3/rock01-debug.jpg
2025-12-13 18:31:57,395 - INFO - Sending annotated image to Gemini...
2025-12-13 18:32:26,275 - INFO - SYSTEM: Server module initialized at 2025-12-13 18:32:26.275797
2025-12-13 18:32:27,862 - INFO - SYSTEM: Server module initialized at 2025-12-13 18:32:27.862002
2025-12-13 18:32:29,059 - INFO - Connected to redis://redis:6379/0
2025-12-13 18:32:29,078 - INFO - mingle: searching for neighbors
2025-12-13 18:32:30,100 - INFO - mingle: all alone
2025-12-13 18:32:30,113 - INFO - celery@dc7c3f44098d ready.
2025-12-13 18:36:14,765 - INFO - JOB SUBMITTED: User eluhrs@gmail.com uploaded rock01.jpg
2025-12-13 18:36:14,892 - INFO - Task server.tasks.process_document_task[ba755830-7328-470d-a276-6d9716e8fc88] received
2025-12-13 18:36:15,030 - INFO - Task 1 parsed options: {'transcription': {'prompt': 'You are a literal transcription engine for 19th-century handwritten manuscripts. Extract text from the supplied image exactly as written. Preserve all original spelling, punctuation, capitalization, and line breaks. Do not modernize, interpret, or expand abbreviations. The only modernization you should perform is to modernize obsolete characters (example, print "s" not "").', 'temperature': 0}, 'segmentation_model': 'historical-manuscript', 'preprocessing': {'resize_image': 'medium', 'contrast': 2, 'invert': True}}
2025-12-13 18:36:15,031 - INFO - Task 1 found prompt override: You are a literal transcription engine for 19th-century handwritten manuscripts. Extract text from the supplied image exactly as written. Preserve all original spelling, punctuation, capitalization, and line breaks. Do not modernize, interpret, or expand abbreviations. The only modernization you should perform is to modernize obsolete characters (example, print "s" not "").
2025-12-13 18:36:15,031 - INFO - Task 1 found temp override: 0
2025-12-13 18:36:15,032 - INFO - Task 1 found temp override: 0
2025-12-13 18:36:15,035 - INFO - TASK START: Processing rock01.jpg (ID: 1)
2025-12-13 18:36:15,036 - INFO - Command: subscript historical-manuscript gemini-pro-3 /app/documents/eluhrs@gmail.com/rock01-21a9faec/rock01.jpg --output /app/documents/eluhrs@gmail.com/rock01-21a9faec --prompt You are a literal transcription engine for 19th-century handwritten manuscripts. Extract text from the supplied image exactly as written. Preserve all original spelling, punctuation, capitalization, and line breaks. Do not modernize, interpret, or expand abbreviations. The only modernization you should perform is to modernize obsolete characters (example, print "s" not ""). --temp 0 --resize medium --contrast 2 --invert
2025-12-13 18:36:15,047 - INFO - Running from: /app
2025-12-13 18:36:15,047 - INFO - Using config: /app/config.yml
2025-12-13 18:36:15,047 - INFO - Output directory: /app/documents/eluhrs@gmail.com/rock01-21a9faec
2025-12-13 18:36:15,047 - INFO - ----------------------------------------
2025-12-13 18:36:15,048 - WARNING - No files found for pattern: --resize
2025-12-13 18:36:15,048 - WARNING - No files found for pattern: medium
2025-12-13 18:36:15,048 - WARNING - No files found for pattern: --contrast
2025-12-13 18:36:15,049 - WARNING - No files found for pattern: 2
2025-12-13 18:36:15,049 - WARNING - No files found for pattern: --invert
2025-12-13 18:36:19,616 - INFO - 
Subscript.py initialized segmentation provider: historical-manuscript
2025-12-13 18:36:19,616 - INFO - Subscript.py Initialized transcription provider: gemini-pro-3
2025-12-13 18:36:19,617 - INFO - Processing 1 files...
2025-12-13 18:36:19,617 - INFO - Processing /app/documents/eluhrs@gmail.com/rock01-21a9faec/rock01.jpg...
2025-12-13 18:36:19,617 - INFO - Segmenting /app/documents/eluhrs@gmail.com/rock01-21a9faec/rock01.jpg with Kraken...
2025-12-13 18:36:19,622 - INFO - Loading segmentation model from /usr/local/lib/python3.10/site-packages/kraken/blla.mlmodel...
2025-12-13 18:36:20,441 - INFO - SYSTEM: Server module initialized at 2025-12-13 18:36:20.441820
2025-12-13 18:36:21,297 - INFO - SYSTEM: Server module initialized at 2025-12-13 18:36:21.297251
2025-12-13 18:36:22,507 - INFO - Connected to redis://redis:6379/0
2025-12-13 18:36:22,510 - INFO - mingle: searching for neighbors
2025-12-13 18:36:23,527 - INFO - mingle: all alone
2025-12-13 18:36:23,546 - INFO - celery@dc7c3f44098d ready.
2025-12-13 18:41:05,402 - INFO - SYSTEM: Server module initialized at 2025-12-13 18:41:05.402168
2025-12-13 18:41:05,612 - INFO - SYSTEM: Server module initialized at 2025-12-13 18:41:05.612636
2025-12-13 18:41:06,740 - INFO - Connected to redis://redis:6379/0
2025-12-13 18:41:06,743 - INFO - mingle: searching for neighbors
2025-12-13 18:41:07,761 - INFO - mingle: all alone
2025-12-13 18:41:07,778 - INFO - celery@c8bad96edfba ready.
2025-12-13 18:42:53,224 - INFO - JOB SUBMITTED: User eluhrs@gmail.com uploaded rock01.jpg
2025-12-13 18:42:53,379 - INFO - Task server.tasks.process_document_task[82b16efe-e674-4503-a2e9-ed78cdf3b28f] received
2025-12-13 18:42:53,436 - INFO - Task 1 parsed options: {'transcription': {'prompt': 'You are a literal transcription engine for 19th-century handwritten manuscripts. Extract text from the supplied image exactly as written. Preserve all original spelling, punctuation, capitalization, and line breaks. Do not modernize, interpret, or expand abbreviations. The only modernization you should perform is to modernize obsolete characters (example, print "s" not "").', 'temperature': 0}, 'segmentation_model': 'historical-manuscript', 'preprocessing': {'resize_image': 'medium', 'contrast': 2, 'invert': True}}
2025-12-13 18:42:53,437 - INFO - Task 1 found prompt override: You are a literal transcription engine for 19th-century handwritten manuscripts. Extract text from the supplied image exactly as written. Preserve all original spelling, punctuation, capitalization, and line breaks. Do not modernize, interpret, or expand abbreviations. The only modernization you should perform is to modernize obsolete characters (example, print "s" not "").
2025-12-13 18:42:53,437 - INFO - Task 1 found temp override: 0
2025-12-13 18:42:53,437 - INFO - Task 1 found temp override: 0
2025-12-13 18:42:53,441 - INFO - TASK START: Processing rock01.jpg (ID: 1)
2025-12-13 18:42:53,441 - INFO - Command: subscript historical-manuscript gemini-pro-3 /app/documents/eluhrs@gmail.com/rock01-31352d4e/rock01.jpg --output /app/documents/eluhrs@gmail.com/rock01-31352d4e --prompt You are a literal transcription engine for 19th-century handwritten manuscripts. Extract text from the supplied image exactly as written. Preserve all original spelling, punctuation, capitalization, and line breaks. Do not modernize, interpret, or expand abbreviations. The only modernization you should perform is to modernize obsolete characters (example, print "s" not ""). --temp 0 --resize medium --contrast 2 --invert
2025-12-13 18:42:53,450 - INFO - Running from: /app
2025-12-13 18:42:53,450 - INFO - Using config: /app/config.yml
2025-12-13 18:42:53,451 - INFO - Output directory: /app/documents/eluhrs@gmail.com/rock01-31352d4e
2025-12-13 18:42:53,451 - INFO - ----------------------------------------
2025-12-13 18:42:57,602 - INFO - 
Subscript.py initialized segmentation provider: historical-manuscript
2025-12-13 18:42:57,603 - INFO - Subscript.py Initialized transcription provider: gemini-pro-3
2025-12-13 18:42:57,603 - INFO - ============================================================
2025-12-13 18:42:57,603 - INFO - SUBSCRIPT CONFIGURATION MANIFEST
2025-12-13 18:42:57,604 - INFO - ============================================================
2025-12-13 18:42:57,604 - INFO - Target Input:       1 files
2025-12-13 18:42:57,604 - INFO - Output Directory:   /app/documents/eluhrs@gmail.com/rock01-31352d4e
2025-12-13 18:42:57,604 - INFO - ----------------------------------------
2025-12-13 18:42:57,605 - INFO - Segmentation Model: historical-manuscript
2025-12-13 18:42:57,605 - INFO - ----------------------------------------
2025-12-13 18:42:57,605 - INFO - Transcription Model: gemini-pro-3
2025-12-13 18:42:57,606 - INFO -   Provider:         gemini
2025-12-13 18:42:57,606 - INFO -   Model Name:       gemini-3-pro-preview
2025-12-13 18:42:57,606 - INFO -   Prompt:           You are a literal transcription engine for 19th-ce...
2025-12-13 18:42:57,606 - INFO -   Temperature:      0.0
2025-12-13 18:42:57,606 - INFO - ----------------------------------------
2025-12-13 18:42:57,607 - INFO - Preprocessing Settings:
2025-12-13 18:42:57,607 - INFO -   debug_image: True
2025-12-13 18:42:57,607 - INFO -   resize_image: medium
2025-12-13 18:42:57,607 - INFO -   contrast: 2.0
2025-12-13 18:42:57,608 - INFO -   binarize: False
2025-12-13 18:42:57,608 - INFO -   invert: True
2025-12-13 18:42:57,608 - INFO - ============================================================
2025-12-13 18:42:57,608 - INFO - Processing 1 files...
2025-12-13 18:42:57,609 - INFO - Processing /app/documents/eluhrs@gmail.com/rock01-31352d4e/rock01.jpg...
2025-12-13 18:42:57,609 - INFO - Segmenting /app/documents/eluhrs@gmail.com/rock01-31352d4e/rock01.jpg with Kraken...
2025-12-13 18:42:57,615 - INFO - Loading segmentation model from /usr/local/lib/python3.10/site-packages/kraken/blla.mlmodel...
2025-12-13 18:42:58,098 - INFO - Segmenting /app/documents/eluhrs@gmail.com/rock01-31352d4e/rock01.jpg
2025-12-13 18:43:02,654 - INFO - Vectorizing regions
2025-12-13 18:43:02,957 - INFO - Vectorizing regions
2025-12-13 18:43:03,431 - INFO - Vectorizing baselines
2025-12-13 18:43:12,532 - INFO - Compute reading order on 23 lines in lr direction
2025-12-13 18:43:12,534 - INFO - Perform topological sort on partially ordered lines
2025-12-13 18:43:12,535 - INFO - Compute reading order on 1 lines in lr direction
2025-12-13 18:43:12,535 - INFO - Perform topological sort on partially ordered lines
2025-12-13 18:43:12,536 - INFO - Compute reading order on 2 lines in lr direction
2025-12-13 18:43:12,536 - INFO - Perform topological sort on partially ordered lines
2025-12-13 18:43:12,540 - INFO - Found 24 lines.
2025-12-13 18:43:12,542 - INFO - Initializing Gemini model: gemini-3-pro-preview
2025-12-13 18:43:12,684 - INFO - Resized image to (1526, 2000)
2025-12-13 18:43:12,713 - INFO - Applied contrast enhancement: 2.0
2025-12-13 18:43:12,718 - INFO - Applied color inversion
2025-12-13 18:43:12,723 - INFO - Annotating 24 regions for Visual Tagging...
2025-12-13 18:43:12,770 - INFO - Saved debug image to /app/documents/eluhrs@gmail.com/rock01-31352d4e/rock01-debug.jpg
2025-12-13 18:43:12,770 - INFO - Sending annotated image to Gemini...
2025-12-13 18:44:20,542 - INFO - Received JSON response from Gemini.
2025-12-13 18:44:20,545 - WARNING - Gemini did not return text for box 16
2025-12-13 18:44:20,546 - WARNING - Gemini did not return text for box 17
2025-12-13 18:44:20,546 - WARNING - Gemini did not return text for box 18
2025-12-13 18:44:20,546 - WARNING - Gemini did not return text for box 19
2025-12-13 18:44:20,546 - WARNING - Gemini did not return text for box 20
2025-12-13 18:44:20,546 - WARNING - Gemini did not return text for box 21
2025-12-13 18:44:20,547 - WARNING - Gemini did not return text for box 22
2025-12-13 18:44:20,547 - WARNING - Gemini did not return text for box 23
2025-12-13 18:44:20,547 - WARNING - Gemini did not return text for box 24
2025-12-13 18:44:20,945 - INFO - SUBSCRIPT OUTPUT for 1:

------------- gemini-pro-3 output for rock01.jpg -------------
74
Dr. Boyd duly came.
We observed our latitude stars on
of course last night again. The instrument behaves well.
Yesterday morning (before your letter came) & this morn,
Sunday night, and
we observed for azimuth & variation. Though heavily on
our minds we couldn't accomplish it earlier, while the
longitude work lasted. On Sat. night we observed 24 stars.
I will enclose your signals. I think our work is a success.
To-day Mr. Spencer dismounts the telegraph line. We hope to
come over on Sat. Morn. - I do not think the pier is unsteady,
I think some one hit an arm of the instrument unconsciously
each time I found it out of meridian.
The vernier trouble is due to that arm making an angle
with the vertical. I am convinced that most of the register
troubles are due to bad quality of the fillet paper. It is un-
equal thickness at two edges and also varies in thickness
lengthwise, so as to require frequent readjustment of
rollers & stylet.
Very truly Yrs.
Miles Rock









----------------------------------------------------------------

Saved PageXML to /app/documents/eluhrs@gmail.com/rock01-31352d4e/rock01.xml
Saved TXT to /app/documents/eluhrs@gmail.com/rock01-31352d4e/rock01.txt
Saved PDF to /app/documents/eluhrs@gmail.com/rock01-31352d4e/rock01.pdf

Time:   00:01:23
Input:  1280 tokens
Output: 335 tokens
Cost:   $0.0066

----------------------------------------------------------------


2025-12-13 18:44:20,982 - INFO - Task server.tasks.process_document_task[82b16efe-e674-4503-a2e9-ed78cdf3b28f] succeeded in 87.59986795601435s: None
2025-12-13 18:44:55,251 - INFO - JOB SUBMITTED: User eluhrs@gmail.com uploaded rock01.jpg
2025-12-13 18:44:55,297 - INFO - Task server.tasks.process_document_task[08093d2e-6c8c-4f9d-88e8-16865d78139c] received
2025-12-13 18:44:55,333 - INFO - Task 2 parsed options: {'transcription': {'prompt': 'xYou are a literal transcription engine for 19th-century handwritten manuscripts. Extract text from the supplied image exactly as written. Preserve all original spelling, punctuation, capitalization, and line breaks. Do not modernize, interpret, or expand abbreviations. The only modernization you should perform is to modernize obsolete characters (example, print "s" not "").', 'temperature': 0}, 'segmentation_model': 'historical-manuscript', 'preprocessing': {'resize_image': 'medium', 'contrast': 2, 'invert': False, 'binarize': True}}
2025-12-13 18:44:55,333 - INFO - Task 2 found prompt override: xYou are a literal transcription engine for 19th-century handwritten manuscripts. Extract text from the supplied image exactly as written. Preserve all original spelling, punctuation, capitalization, and line breaks. Do not modernize, interpret, or expand abbreviations. The only modernization you should perform is to modernize obsolete characters (example, print "s" not "").
2025-12-13 18:44:55,333 - INFO - Task 2 found temp override: 0
2025-12-13 18:44:55,334 - INFO - Task 2 found temp override: 0
2025-12-13 18:44:55,335 - INFO - TASK START: Processing rock01.jpg (ID: 2)
2025-12-13 18:44:55,335 - INFO - Command: subscript historical-manuscript gemini-pro-3 /app/documents/eluhrs@gmail.com/rock01-d81f639f/rock01.jpg --output /app/documents/eluhrs@gmail.com/rock01-d81f639f --prompt xYou are a literal transcription engine for 19th-century handwritten manuscripts. Extract text from the supplied image exactly as written. Preserve all original spelling, punctuation, capitalization, and line breaks. Do not modernize, interpret, or expand abbreviations. The only modernization you should perform is to modernize obsolete characters (example, print "s" not ""). --temp 0 --resize medium --contrast 2 --binarize
2025-12-13 18:44:55,345 - INFO - Running from: /app
2025-12-13 18:44:55,346 - INFO - Using config: /app/config.yml
2025-12-13 18:44:55,347 - INFO - Output directory: /app/documents/eluhrs@gmail.com/rock01-d81f639f
2025-12-13 18:44:55,347 - INFO - ----------------------------------------
2025-12-13 18:44:55,349 - INFO - 
Subscript.py initialized segmentation provider: historical-manuscript
2025-12-13 18:44:55,351 - INFO - Subscript.py Initialized transcription provider: gemini-pro-3
2025-12-13 18:44:55,353 - INFO - ============================================================
2025-12-13 18:44:55,362 - INFO - SUBSCRIPT CONFIGURATION MANIFEST
2025-12-13 18:44:55,363 - INFO - ============================================================
2025-12-13 18:44:55,365 - INFO - Target Input:       1 files
2025-12-13 18:44:55,366 - INFO - Output Directory:   /app/documents/eluhrs@gmail.com/rock01-d81f639f
2025-12-13 18:44:55,368 - INFO - ----------------------------------------
2025-12-13 18:44:55,370 - INFO - Segmentation Model: historical-manuscript
2025-12-13 18:44:55,371 - INFO - ----------------------------------------
2025-12-13 18:44:55,372 - INFO - Transcription Model: gemini-pro-3
2025-12-13 18:44:55,375 - INFO -   Provider:         gemini
2025-12-13 18:44:55,376 - INFO -   Model Name:       gemini-3-pro-preview
2025-12-13 18:44:55,377 - INFO -   Prompt:           xYou are a literal transcription engine for 19th-c...
2025-12-13 18:44:55,378 - INFO -   Temperature:      0.0
2025-12-13 18:44:55,381 - INFO - ----------------------------------------
2025-12-13 18:44:55,381 - INFO - Preprocessing Settings:
2025-12-13 18:44:55,382 - INFO -   debug_image: True
2025-12-13 18:44:55,383 - INFO -   resize_image: medium
2025-12-13 18:44:55,384 - INFO -   contrast: 2.0
2025-12-13 18:44:55,385 - INFO -   binarize: True
2025-12-13 18:44:55,386 - INFO -   invert: False
2025-12-13 18:44:55,386 - INFO - ============================================================
2025-12-13 18:44:55,386 - INFO - Processing 1 files...
2025-12-13 18:44:55,387 - INFO - Processing /app/documents/eluhrs@gmail.com/rock01-d81f639f/rock01.jpg...
2025-12-13 18:44:55,387 - INFO - Segmenting /app/documents/eluhrs@gmail.com/rock01-d81f639f/rock01.jpg with Kraken...
2025-12-13 18:44:55,388 - INFO - Loading segmentation model from /usr/local/lib/python3.10/site-packages/kraken/blla.mlmodel...
2025-12-13 18:44:55,903 - INFO - Segmenting /app/documents/eluhrs@gmail.com/rock01-d81f639f/rock01.jpg
2025-12-13 18:45:01,208 - INFO - Vectorizing regions
2025-12-13 18:45:01,404 - INFO - Vectorizing regions
2025-12-13 18:45:01,598 - INFO - Vectorizing baselines
2025-12-13 18:45:11,794 - INFO - Compute reading order on 23 lines in lr direction
2025-12-13 18:45:11,795 - INFO - Perform topological sort on partially ordered lines
2025-12-13 18:45:11,795 - INFO - Compute reading order on 1 lines in lr direction
2025-12-13 18:45:11,796 - INFO - Perform topological sort on partially ordered lines
2025-12-13 18:45:11,796 - INFO - Compute reading order on 2 lines in lr direction
2025-12-13 18:45:11,796 - INFO - Perform topological sort on partially ordered lines
2025-12-13 18:45:11,798 - INFO - Found 24 lines.
2025-12-13 18:45:11,799 - INFO - Initializing Gemini model: gemini-3-pro-preview
2025-12-13 18:45:11,938 - INFO - Resized image to (1526, 2000)
2025-12-13 18:45:11,951 - INFO - Applied contrast enhancement: 2.0
2025-12-13 18:45:11,956 - INFO - Applied Otsu binarization (threshold: 169)
2025-12-13 18:45:11,959 - INFO - Annotating 24 regions for Visual Tagging...
2025-12-13 18:45:11,990 - INFO - Saved debug image to /app/documents/eluhrs@gmail.com/rock01-d81f639f/rock01-debug.jpg
2025-12-13 18:45:11,990 - INFO - Sending annotated image to Gemini...
2025-12-13 18:46:49,893 - INFO - Received JSON response from Gemini.
2025-12-13 18:46:49,896 - WARNING - Gemini did not return text for box 22
2025-12-13 18:46:49,896 - WARNING - Gemini did not return text for box 23
2025-12-13 18:46:49,896 - WARNING - Gemini did not return text for box 24
2025-12-13 18:46:50,277 - INFO - SUBSCRIPT OUTPUT for 2:

------------- gemini-pro-3 output for rock01.jpg -------------
Panama, Dec. 29. 1874
My dear Capt. Green,-
Your favor by Dr. Boyd duly came.
We observed our latitude stars on Sunday night, and
of course last night again. The instrument behaves well.
Yesterday morning (before your letter came) & this morn.
we observed for azimuth & variation. Though heavily on
our minds we couldn't accomplish it earlier, while the
longitude work lasted. On Sat. night we observed
I will enclose your signals. I think our work is a
To-day Mr. Spencer dismounts the tel
come over on Sat. Morn. - Did
I think some one hit an
each time I found it
The vernier trouble is due
with the vertical, I am
troubles are due to bad
equal thickness at two
lengthwise,
rollers




----------------------------------------------------------------

Saved PageXML to /app/documents/eluhrs@gmail.com/rock01-d81f639f/rock01.xml
Saved TXT to /app/documents/eluhrs@gmail.com/rock01-d81f639f/rock01.txt
Saved PDF to /app/documents/eluhrs@gmail.com/rock01-d81f639f/rock01.pdf

Time:   00:01:54
Input:  1281 tokens
Output: 321 tokens
Cost:   $0.0064

----------------------------------------------------------------


2025-12-13 18:46:50,305 - INFO - Task server.tasks.process_document_task[08093d2e-6c8c-4f9d-88e8-16865d78139c] succeeded in 114.99039463500958s: None
2025-12-13 18:53:35,265 - INFO - SYSTEM: Server module initialized at 2025-12-13 18:53:35.265829
2025-12-13 18:53:48,017 - INFO - SYSTEM: Server module initialized at 2025-12-13 18:53:48.017404
2025-12-13 18:55:17,551 - INFO - JOB SUBMITTED: User eluhrs@gmail.com uploaded rock01.jpg
2025-12-13 18:55:17,681 - INFO - Task server.tasks.process_document_task[e8896674-0dc0-4f9a-a517-643f8f378980] received
2025-12-13 18:55:17,711 - INFO - Task 1 parsed options: {'transcription': {'prompt': 'xYou are a literal transcription engine for 19th-century handwritten manuscripts. Extract text from the supplied image exactly as written. Preserve all original spelling, punctuation, capitalization, and line breaks. Do not modernize, interpret, or expand abbreviations. The only modernization you should perform is to modernize obsolete characters (example, print "s" not "").', 'temperature': 0}, 'segmentation_model': 'historical-manuscript', 'preprocessing': {'resize_image': 'medium', 'contrast': 2, 'invert': False, 'binarize': True}}
2025-12-13 18:55:17,713 - INFO - Task 1 found prompt override: xYou are a literal transcription engine for 19th-century handwritten manuscripts. Extract text from the supplied image exactly as written. Preserve all original spelling, punctuation, capitalization, and line breaks. Do not modernize, interpret, or expand abbreviations. The only modernization you should perform is to modernize obsolete characters (example, print "s" not "").
2025-12-13 18:55:17,713 - INFO - Task 1 found temp override: 0
2025-12-13 18:55:17,713 - INFO - Task 1 found temp override: 0
2025-12-13 18:55:17,716 - INFO - TASK START: Processing rock01.jpg (ID: 1)
2025-12-13 18:55:17,717 - INFO - Command: subscript historical-manuscript gemini-pro-2.5 /app/documents/eluhrs@gmail.com/rock01-bcef99d7/rock01.jpg --output /app/documents/eluhrs@gmail.com/rock01-bcef99d7 --prompt xYou are a literal transcription engine for 19th-century handwritten manuscripts. Extract text from the supplied image exactly as written. Preserve all original spelling, punctuation, capitalization, and line breaks. Do not modernize, interpret, or expand abbreviations. The only modernization you should perform is to modernize obsolete characters (example, print "s" not ""). --temp 0 --resize medium --contrast 2 --binarize
2025-12-13 18:55:17,729 - INFO - Running from: /app
2025-12-13 18:55:17,730 - INFO - Using config: /app/config.yml
2025-12-13 18:55:17,731 - INFO - Output directory: /app/documents/eluhrs@gmail.com/rock01-bcef99d7
2025-12-13 18:55:17,731 - INFO - ----------------------------------------
2025-12-13 18:55:17,733 - INFO - 
Subscript.py initialized segmentation provider: historical-manuscript
2025-12-13 18:55:17,734 - INFO - Subscript.py Initialized transcription provider: gemini-pro-2.5
2025-12-13 18:55:17,734 - INFO - ============================================================
2025-12-13 18:55:17,735 - INFO - SUBSCRIPT CONFIGURATION MANIFEST
2025-12-13 18:55:17,735 - INFO - ============================================================
2025-12-13 18:55:17,737 - INFO - Target Input:       1 files
2025-12-13 18:55:17,737 - INFO - Output Directory:   /app/documents/eluhrs@gmail.com/rock01-bcef99d7
2025-12-13 18:55:17,737 - INFO - ----------------------------------------
2025-12-13 18:55:17,738 - INFO - Segmentation Model: historical-manuscript
2025-12-13 18:55:17,738 - INFO - ----------------------------------------
2025-12-13 18:55:17,738 - INFO - Transcription Model: gemini-pro-2.5
2025-12-13 18:55:17,738 - INFO -   Provider:         gemini
2025-12-13 18:55:17,739 - INFO -   Model Name:       gemini-2.5-pro
2025-12-13 18:55:17,739 - INFO -   Prompt:           xYou are a literal transcription engine for 19th-c...
2025-12-13 18:55:17,739 - INFO -   Temperature:      0.0
2025-12-13 18:55:17,739 - INFO - ----------------------------------------
2025-12-13 18:55:17,739 - INFO - Preprocessing Settings:
2025-12-13 18:55:17,740 - INFO -   debug_image: True
2025-12-13 18:55:17,740 - INFO -   resize_image: medium
2025-12-13 18:55:17,740 - INFO -   contrast: 2.0
2025-12-13 18:55:17,740 - INFO -   binarize: True
2025-12-13 18:55:17,740 - INFO -   invert: False
2025-12-13 18:55:17,741 - INFO - ============================================================
2025-12-13 18:55:17,741 - INFO - Processing 1 files...
2025-12-13 18:55:17,741 - INFO - Processing /app/documents/eluhrs@gmail.com/rock01-bcef99d7/rock01.jpg...
2025-12-13 18:55:17,741 - INFO - Segmenting /app/documents/eluhrs@gmail.com/rock01-bcef99d7/rock01.jpg with Kraken...
2025-12-13 18:55:17,743 - INFO - Loading segmentation model from /usr/local/lib/python3.10/site-packages/kraken/blla.mlmodel...
2025-12-13 18:55:18,534 - INFO - Segmenting /app/documents/eluhrs@gmail.com/rock01-bcef99d7/rock01.jpg
2025-12-13 18:55:23,400 - INFO - Vectorizing regions
2025-12-13 18:55:23,727 - INFO - Vectorizing regions
2025-12-13 18:55:23,923 - INFO - Vectorizing baselines
2025-12-13 18:55:33,208 - INFO - Compute reading order on 23 lines in lr direction
2025-12-13 18:55:33,212 - INFO - Perform topological sort on partially ordered lines
2025-12-13 18:55:33,217 - INFO - Compute reading order on 1 lines in lr direction
2025-12-13 18:55:33,218 - INFO - Perform topological sort on partially ordered lines
2025-12-13 18:55:33,219 - INFO - Compute reading order on 2 lines in lr direction
2025-12-13 18:55:33,219 - INFO - Perform topological sort on partially ordered lines
2025-12-13 18:55:33,224 - INFO - Found 24 lines.
2025-12-13 18:55:33,225 - INFO - Initializing Gemini model: gemini-2.5-pro
2025-12-13 18:55:33,369 - INFO - Resized image to (1526, 2000)
2025-12-13 18:55:33,382 - INFO - Applied contrast enhancement: 2.0
2025-12-13 18:55:33,387 - INFO - Applied Otsu binarization (threshold: 169)
2025-12-13 18:55:33,389 - INFO - Annotating 24 regions for Visual Tagging...
2025-12-13 18:55:33,420 - INFO - Saved debug image to /app/documents/eluhrs@gmail.com/rock01-bcef99d7/rock01-debug.jpg
2025-12-13 18:55:33,420 - INFO - Sending annotated image to Gemini...
2025-12-13 18:55:47,363 - INFO - Received JSON response from Gemini.
2025-12-13 18:55:47,367 - WARNING - Gemini did not return text for box 16
2025-12-13 18:55:47,370 - WARNING - Gemini did not return text for box 17
2025-12-13 18:55:47,371 - WARNING - Gemini did not return text for box 18
2025-12-13 18:55:47,371 - WARNING - Gemini did not return text for box 19
2025-12-13 18:55:47,371 - WARNING - Gemini did not return text for box 20
2025-12-13 18:55:47,372 - WARNING - Gemini did not return text for box 21
2025-12-13 18:55:47,372 - WARNING - Gemini did not return text for box 22
2025-12-13 18:55:47,372 - WARNING - Gemini did not return text for box 23
2025-12-13 18:55:47,372 - WARNING - Gemini did not return text for box 24
2025-12-13 18:55:47,753 - INFO - SUBSCRIPT OUTPUT for 1:

------------- gemini-pro-2.5 output for rock01.jpg -------------
74
Panama, Dec. 29. 1874
My dear Capt Green.
Your favor by Dr. Boyd duly came.
We observed our latitude here on Sunday night, and
of course last night again. The instrument behaves well.
Yesterday morning (before your letter came) in the open,
we observed for azimuth & variation. Though heavily on
our minds we couldn't accomplish it earlier, while the
longitude work lasted. On Sat. night we deemed it too
I will enclose your signals. I think our results
To-day Mr. Spencer discovered that he must
come over on Sat. Next. I do
I think some one bit in an
each time I found it
The vernier trouble is
with the vertical. I am
troubles are due to bad
expect the Sun at ten
lengthwise,
matters a










----------------------------------------------------------------

Saved PageXML to /app/documents/eluhrs@gmail.com/rock01-bcef99d7/rock01.xml
Saved TXT to /app/documents/eluhrs@gmail.com/rock01-bcef99d7/rock01.txt
Saved PDF to /app/documents/eluhrs@gmail.com/rock01-bcef99d7/rock01.pdf

Time:   00:00:30
Input:  437 tokens
Output: 286 tokens
Cost:   $0.0043

----------------------------------------------------------------


2025-12-13 18:55:47,760 - INFO - Task server.tasks.process_document_task[e8896674-0dc0-4f9a-a517-643f8f378980] succeeded in 30.069858347065747s: None
2025-12-13 18:55:54,148 - INFO - JOB SUBMITTED: User eluhrs@gmail.com uploaded rock01.jpg
2025-12-13 18:55:54,151 - INFO - Task server.tasks.process_document_task[68845881-e397-4ad3-a355-c48b5bf9bef6] received
2025-12-13 18:55:54,157 - INFO - Task 2 parsed options: {'transcription': {'prompt': 'yYou are a literal transcription engine for 19th-century handwritten manuscripts. Extract text from the supplied image exactly as written. Preserve all original spelling, punctuation, capitalization, and line breaks. Do not modernize, interpret, or expand abbreviations. The only modernization you should perform is to modernize obsolete characters (example, print "s" not "").', 'temperature': 0}, 'segmentation_model': 'historical-manuscript', 'preprocessing': {'resize_image': 'small', 'invert': True}}
2025-12-13 18:55:54,158 - INFO - Task 2 found prompt override: yYou are a literal transcription engine for 19th-century handwritten manuscripts. Extract text from the supplied image exactly as written. Preserve all original spelling, punctuation, capitalization, and line breaks. Do not modernize, interpret, or expand abbreviations. The only modernization you should perform is to modernize obsolete characters (example, print "s" not "").
2025-12-13 18:55:54,158 - INFO - Task 2 found temp override: 0
2025-12-13 18:55:54,158 - INFO - Task 2 found temp override: 0
2025-12-13 18:55:54,159 - INFO - TASK START: Processing rock01.jpg (ID: 2)
2025-12-13 18:55:54,159 - INFO - Command: subscript historical-manuscript gemini-pro-3 /app/documents/eluhrs@gmail.com/rock01-d53864d3/rock01.jpg --output /app/documents/eluhrs@gmail.com/rock01-d53864d3 --prompt yYou are a literal transcription engine for 19th-century handwritten manuscripts. Extract text from the supplied image exactly as written. Preserve all original spelling, punctuation, capitalization, and line breaks. Do not modernize, interpret, or expand abbreviations. The only modernization you should perform is to modernize obsolete characters (example, print "s" not ""). --temp 0 --resize small --invert
2025-12-13 18:55:54,166 - INFO - Running from: /app
2025-12-13 18:55:54,166 - INFO - Using config: /app/config.yml
2025-12-13 18:55:54,167 - INFO - Output directory: /app/documents/eluhrs@gmail.com/rock01-d53864d3
2025-12-13 18:55:54,167 - INFO - ----------------------------------------
2025-12-13 18:55:54,168 - INFO - 
Subscript.py initialized segmentation provider: historical-manuscript
2025-12-13 18:55:54,168 - INFO - Subscript.py Initialized transcription provider: gemini-pro-3
2025-12-13 18:55:54,169 - INFO - ============================================================
2025-12-13 18:55:54,169 - INFO - SUBSCRIPT CONFIGURATION MANIFEST
2025-12-13 18:55:54,169 - INFO - ============================================================
2025-12-13 18:55:54,169 - INFO - Target Input:       1 files
2025-12-13 18:55:54,170 - INFO - Output Directory:   /app/documents/eluhrs@gmail.com/rock01-d53864d3
2025-12-13 18:55:54,170 - INFO - ----------------------------------------
2025-12-13 18:55:54,170 - INFO - Segmentation Model: historical-manuscript
2025-12-13 18:55:54,170 - INFO - ----------------------------------------
2025-12-13 18:55:54,170 - INFO - Transcription Model: gemini-pro-3
2025-12-13 18:55:54,170 - INFO -   Provider:         gemini
2025-12-13 18:55:54,171 - INFO -   Model Name:       gemini-3-pro-preview
2025-12-13 18:55:54,171 - INFO -   Prompt:           yYou are a literal transcription engine for 19th-c...
2025-12-13 18:55:54,171 - INFO -   Temperature:      0.0
2025-12-13 18:55:54,171 - INFO - ----------------------------------------
2025-12-13 18:55:54,171 - INFO - Preprocessing Settings:
2025-12-13 18:55:54,172 - INFO -   debug_image: True
2025-12-13 18:55:54,172 - INFO -   resize_image: small
2025-12-13 18:55:54,172 - INFO -   contrast: 1.0
2025-12-13 18:55:54,172 - INFO -   binarize: False
2025-12-13 18:55:54,172 - INFO -   invert: True
2025-12-13 18:55:54,173 - INFO - ============================================================
2025-12-13 18:55:54,173 - INFO - Processing 1 files...
2025-12-13 18:55:54,173 - INFO - Processing /app/documents/eluhrs@gmail.com/rock01-d53864d3/rock01.jpg...
2025-12-13 18:55:54,173 - INFO - Segmenting /app/documents/eluhrs@gmail.com/rock01-d53864d3/rock01.jpg with Kraken...
2025-12-13 18:55:54,174 - INFO - Loading segmentation model from /usr/local/lib/python3.10/site-packages/kraken/blla.mlmodel...
2025-12-13 18:55:54,679 - INFO - Segmenting /app/documents/eluhrs@gmail.com/rock01-d53864d3/rock01.jpg
2025-12-13 18:55:59,119 - INFO - Vectorizing regions
2025-12-13 18:55:59,363 - INFO - Vectorizing regions
2025-12-13 18:55:59,554 - INFO - Vectorizing baselines
2025-12-13 18:56:09,049 - INFO - Compute reading order on 23 lines in lr direction
2025-12-13 18:56:09,051 - INFO - Perform topological sort on partially ordered lines
2025-12-13 18:56:09,053 - INFO - Compute reading order on 1 lines in lr direction
2025-12-13 18:56:09,055 - INFO - Perform topological sort on partially ordered lines
2025-12-13 18:56:09,060 - INFO - Compute reading order on 2 lines in lr direction
2025-12-13 18:56:09,062 - INFO - Perform topological sort on partially ordered lines
2025-12-13 18:56:09,066 - INFO - Found 24 lines.
2025-12-13 18:56:09,067 - INFO - Initializing Gemini model: gemini-3-pro-preview
2025-12-13 18:56:09,195 - INFO - Resized image to (763, 1000)
2025-12-13 18:56:09,196 - INFO - Applied color inversion
2025-12-13 18:56:09,198 - INFO - Annotating 24 regions for Visual Tagging...
2025-12-13 18:56:09,212 - INFO - Saved debug image to /app/documents/eluhrs@gmail.com/rock01-d53864d3/rock01-debug.jpg
2025-12-13 18:56:09,212 - INFO - Sending annotated image to Gemini...
2025-12-13 18:56:29,290 - INFO - Received JSON response from Gemini.
2025-12-13 18:56:29,291 - WARNING - Gemini did not return text for box 1
2025-12-13 18:56:29,291 - WARNING - Gemini did not return text for box 2
2025-12-13 18:56:29,292 - WARNING - Gemini did not return text for box 4
2025-12-13 18:56:29,292 - WARNING - Gemini did not return text for box 7
2025-12-13 18:56:29,293 - WARNING - Gemini did not return text for box 8
2025-12-13 18:56:29,293 - WARNING - Gemini did not return text for box 9
2025-12-13 18:56:29,293 - WARNING - Gemini did not return text for box 10
2025-12-13 18:56:29,294 - WARNING - Gemini did not return text for box 11
2025-12-13 18:56:29,294 - WARNING - Gemini did not return text for box 12
2025-12-13 18:56:29,295 - WARNING - Gemini did not return text for box 13
2025-12-13 18:56:29,295 - WARNING - Gemini did not return text for box 14
2025-12-13 18:56:29,296 - WARNING - Gemini did not return text for box 15
2025-12-13 18:56:29,296 - WARNING - Gemini did not return text for box 16
2025-12-13 18:56:29,296 - WARNING - Gemini did not return text for box 17
2025-12-13 18:56:29,297 - WARNING - Gemini did not return text for box 18
2025-12-13 18:56:29,297 - WARNING - Gemini did not return text for box 19
2025-12-13 18:56:29,298 - WARNING - Gemini did not return text for box 20
2025-12-13 18:56:29,298 - WARNING - Gemini did not return text for box 21
2025-12-13 18:56:29,299 - WARNING - Gemini did not return text for box 22
2025-12-13 18:56:29,299 - WARNING - Gemini did not return text for box 23
2025-12-13 18:56:29,300 - WARNING - Gemini did not return text for box 24
2025-12-13 18:56:29,674 - INFO - SUBSCRIPT OUTPUT for 2:

------------- gemini-pro-3 output for rock01.jpg -------------


I think some one hit an arm of the instrument unconsciously
each time I found it out of meridian.
The vernier trouble is due to that arm making an angle
with the vertical. I am convinced that most of the register

rollers & stylet.
Very truly Yrs.
Miles Rock


















----------------------------------------------------------------

Saved PageXML to /app/documents/eluhrs@gmail.com/rock01-d53864d3/rock01.xml
Saved TXT to /app/documents/eluhrs@gmail.com/rock01-d53864d3/rock01.txt
Saved PDF to /app/documents/eluhrs@gmail.com/rock01-d53864d3/rock01.pdf

Time:   00:00:35
Input:  1281 tokens
Output: 84 tokens
Cost:   $0.0036

----------------------------------------------------------------


2025-12-13 18:56:29,679 - INFO - Task server.tasks.process_document_task[68845881-e397-4ad3-a355-c48b5bf9bef6] succeeded in 35.52597714099102s: None
2025-12-13 19:04:15,256 - INFO - JOB SUBMITTED: User eluhrs@gmail.com uploaded rock01.jpg
2025-12-13 19:04:15,263 - INFO - Task server.tasks.process_document_task[b92995e1-3493-4d48-8ac7-a8cb8c9e92fb] received
2025-12-13 19:04:15,302 - INFO - Task 1 parsed options: {'transcription': {'prompt': 'xYou are a literal transcription engine for 19th-century handwritten manuscripts. Extract text from the supplied image exactly as written. Preserve all original spelling, punctuation, capitalization, and line breaks. Do not modernize, interpret, or expand abbreviations. The only modernization you should perform is to modernize obsolete characters (example, print "s" not "").', 'temperature': 1}, 'segmentation_model': 'historical-manuscript', 'preprocessing': {'resize_image': 'medium', 'contrast': 1.5}}
2025-12-13 19:04:15,303 - INFO - Task 1 found prompt override: xYou are a literal transcription engine for 19th-century handwritten manuscripts. Extract text from the supplied image exactly as written. Preserve all original spelling, punctuation, capitalization, and line breaks. Do not modernize, interpret, or expand abbreviations. The only modernization you should perform is to modernize obsolete characters (example, print "s" not "").
2025-12-13 19:04:15,304 - INFO - Task 1 found temp override: 1
2025-12-13 19:04:15,304 - INFO - Task 1 found temp override: 1
2025-12-13 19:04:15,307 - INFO - TASK START: Processing rock01.jpg (ID: 1)
2025-12-13 19:04:15,307 - INFO - Command: subscript historical-manuscript gemini-pro-2.5 /app/documents/eluhrs@gmail.com/rock01-c71f85db/rock01.jpg --output /app/documents/eluhrs@gmail.com/rock01-c71f85db --prompt xYou are a literal transcription engine for 19th-century handwritten manuscripts. Extract text from the supplied image exactly as written. Preserve all original spelling, punctuation, capitalization, and line breaks. Do not modernize, interpret, or expand abbreviations. The only modernization you should perform is to modernize obsolete characters (example, print "s" not ""). --temp 1 --resize medium --contrast 1.5
2025-12-13 19:04:15,322 - INFO - Running from: /app
2025-12-13 19:04:15,322 - INFO - Using config: /app/config.yml
2025-12-13 19:04:15,324 - INFO - Output directory: /app/documents/eluhrs@gmail.com/rock01-c71f85db
2025-12-13 19:04:15,324 - INFO - ----------------------------------------
2025-12-13 19:04:15,329 - INFO - 
Subscript.py initialized segmentation provider: historical-manuscript
2025-12-13 19:04:15,332 - INFO - Subscript.py Initialized transcription provider: gemini-pro-2.5
2025-12-13 19:04:15,334 - INFO - ============================================================
2025-12-13 19:04:15,334 - INFO - SUBSCRIPT CONFIGURATION MANIFEST
2025-12-13 19:04:15,334 - INFO - ============================================================
2025-12-13 19:04:15,335 - INFO - Target Input:       1 files
2025-12-13 19:04:15,335 - INFO - Output Directory:   /app/documents/eluhrs@gmail.com/rock01-c71f85db
2025-12-13 19:04:15,335 - INFO - ----------------------------------------
2025-12-13 19:04:15,335 - INFO - Segmentation Model: historical-manuscript
2025-12-13 19:04:15,336 - INFO - ----------------------------------------
2025-12-13 19:04:15,336 - INFO - Transcription Model: gemini-pro-2.5
2025-12-13 19:04:15,336 - INFO -   Provider:         gemini
2025-12-13 19:04:15,336 - INFO -   Model Name:       gemini-2.5-pro
2025-12-13 19:04:15,337 - INFO -   Prompt:           xYou are a literal transcription engine for 19th-c...
2025-12-13 19:04:15,337 - INFO -   Temperature:      1.0
2025-12-13 19:04:15,337 - INFO - ----------------------------------------
2025-12-13 19:04:15,338 - INFO - Preprocessing Settings:
2025-12-13 19:04:15,338 - INFO -   debug_image: True
2025-12-13 19:04:15,338 - INFO -   resize_image: medium
2025-12-13 19:04:15,339 - INFO -   contrast: 1.5
2025-12-13 19:04:15,342 - INFO -   binarize: False
2025-12-13 19:04:15,342 - INFO -   invert: False
2025-12-13 19:04:15,343 - INFO - ============================================================
2025-12-13 19:04:15,343 - INFO - Processing 1 files...
2025-12-13 19:04:15,343 - INFO - Processing /app/documents/eluhrs@gmail.com/rock01-c71f85db/rock01.jpg...
2025-12-13 19:04:15,344 - INFO - Segmenting /app/documents/eluhrs@gmail.com/rock01-c71f85db/rock01.jpg with Kraken...
2025-12-13 19:04:15,353 - INFO - Loading segmentation model from /usr/local/lib/python3.10/site-packages/kraken/blla.mlmodel...
2025-12-13 19:04:15,946 - INFO - Segmenting /app/documents/eluhrs@gmail.com/rock01-c71f85db/rock01.jpg
2025-12-13 19:04:19,811 - INFO - Vectorizing regions
2025-12-13 19:04:20,187 - INFO - Vectorizing regions
2025-12-13 19:04:20,345 - INFO - Vectorizing baselines
2025-12-13 19:04:27,865 - INFO - Compute reading order on 23 lines in lr direction
2025-12-13 19:04:27,869 - INFO - Perform topological sort on partially ordered lines
2025-12-13 19:04:27,871 - INFO - Compute reading order on 1 lines in lr direction
2025-12-13 19:04:27,873 - INFO - Perform topological sort on partially ordered lines
2025-12-13 19:04:27,873 - INFO - Compute reading order on 2 lines in lr direction
2025-12-13 19:04:27,874 - INFO - Perform topological sort on partially ordered lines
2025-12-13 19:04:27,883 - INFO - Found 24 lines.
2025-12-13 19:04:27,885 - INFO - Initializing Gemini model: gemini-2.5-pro
2025-12-13 19:04:28,006 - INFO - Resized image to (1526, 2000)
2025-12-13 19:04:28,029 - INFO - Applied contrast enhancement: 1.5
2025-12-13 19:04:28,034 - INFO - Annotating 24 regions for Visual Tagging...
2025-12-13 19:04:28,072 - INFO - Saved debug image to /app/documents/eluhrs@gmail.com/rock01-c71f85db/rock01-debug.jpg
2025-12-13 19:04:28,072 - INFO - Sending annotated image to Gemini...
2025-12-13 19:04:43,207 - INFO - Received JSON response from Gemini.
2025-12-13 19:04:43,209 - WARNING - Gemini did not return text for box 16
2025-12-13 19:04:43,209 - WARNING - Gemini did not return text for box 17
2025-12-13 19:04:43,209 - WARNING - Gemini did not return text for box 18
2025-12-13 19:04:43,210 - WARNING - Gemini did not return text for box 19
2025-12-13 19:04:43,210 - WARNING - Gemini did not return text for box 20
2025-12-13 19:04:43,210 - WARNING - Gemini did not return text for box 21
2025-12-13 19:04:43,210 - WARNING - Gemini did not return text for box 22
2025-12-13 19:04:43,211 - WARNING - Gemini did not return text for box 23
2025-12-13 19:04:43,211 - WARNING - Gemini did not return text for box 24
2025-12-13 19:04:43,516 - INFO - SUBSCRIPT OUTPUT for 1:

------------- gemini-pro-2.5 output for rock01.jpg -------------
Panama, Dec. 29. 1874
My dear Captn Green,-
Your favor by Dr. Boyd duly came.
We observed our latitude stars on Sunday night, and
of course last night again. The instrument behaves well.
Yesterday morning (before your letter came) this morn,
we observed for azimuth & variation. Though heavily on
our minds we couldn't accomplish it earlier, while the
longitude work lasted. On Sat. night we observed 24 stars.
I will enclose your signals. I think our work is a success.
To-day Mr. Spencer dismantled the telegraph line. We hope to
come over on Sat. mornl. I do not think the pier is ^un steady.
I think some one hit an arm of the instrument unconsciously
each time I found it out of meridian.
The vernier trouble is due to that arm making an angle
with the vertical. I am convinced that most of the register
troubles are due to bad quality of the fillet paper. It is gum-
med thickness at its edges and also varies in thickness
lengthwise, so as to require frequent readjustment of
rollers & stylet. Very truly Yrs.
Miles Rock










----------------------------------------------------------------

Saved PageXML to /app/documents/eluhrs@gmail.com/rock01-c71f85db/rock01.xml
Saved TXT to /app/documents/eluhrs@gmail.com/rock01-c71f85db/rock01.txt
Saved PDF to /app/documents/eluhrs@gmail.com/rock01-c71f85db/rock01.pdf

Time:   00:00:28
Input:  437 tokens
Output: 324 tokens
Cost:   $0.0048

----------------------------------------------------------------


2025-12-13 19:04:43,524 - INFO - Task server.tasks.process_document_task[b92995e1-3493-4d48-8ac7-a8cb8c9e92fb] succeeded in 28.253057887079194s: None
2025-12-13 19:06:14,247 - INFO - JOB SUBMITTED: User eluhrs@gmail.com uploaded rock01.jpg
2025-12-13 19:06:14,252 - INFO - Task server.tasks.process_document_task[cefbaab0-17ca-4ff4-8918-56ea28e2c62e] received
2025-12-13 19:06:14,257 - INFO - Task 2 parsed options: {'transcription': {'prompt': 'You are a literal transcription engine for 19th-century handwritten manuscripts. Extract text from the supplied image exactly as written. Preserve all original spelling, punctuation, capitalization, and line breaks. Do not modernize, interpret, or expand abbreviations. The only modernization you should perform is to modernize obsolete characters (example, print "s" not "").', 'temperature': 0.2}, 'segmentation_model': 'historical-manuscript', 'preprocessing': {}}
2025-12-13 19:06:14,258 - INFO - Task 2 found prompt override: You are a literal transcription engine for 19th-century handwritten manuscripts. Extract text from the supplied image exactly as written. Preserve all original spelling, punctuation, capitalization, and line breaks. Do not modernize, interpret, or expand abbreviations. The only modernization you should perform is to modernize obsolete characters (example, print "s" not "").
2025-12-13 19:06:14,258 - INFO - Task 2 found temp override: 0.2
2025-12-13 19:06:14,258 - INFO - Task 2 found temp override: 0.2
2025-12-13 19:06:14,259 - INFO - TASK START: Processing rock01.jpg (ID: 2)
2025-12-13 19:06:14,259 - INFO - Command: subscript historical-manuscript gemini-pro-3 /app/documents/eluhrs@gmail.com/rock01-daf4e488/rock01.jpg --output /app/documents/eluhrs@gmail.com/rock01-daf4e488 --prompt You are a literal transcription engine for 19th-century handwritten manuscripts. Extract text from the supplied image exactly as written. Preserve all original spelling, punctuation, capitalization, and line breaks. Do not modernize, interpret, or expand abbreviations. The only modernization you should perform is to modernize obsolete characters (example, print "s" not ""). --temp 0.2
2025-12-13 19:06:14,266 - INFO - Running from: /app
2025-12-13 19:06:14,266 - INFO - Using config: /app/config.yml
2025-12-13 19:06:14,266 - INFO - Output directory: /app/documents/eluhrs@gmail.com/rock01-daf4e488
2025-12-13 19:06:14,266 - INFO - ----------------------------------------
2025-12-13 19:06:14,267 - INFO - 
Subscript.py initialized segmentation provider: historical-manuscript
2025-12-13 19:06:14,267 - INFO - Subscript.py Initialized transcription provider: gemini-pro-3
2025-12-13 19:06:14,268 - INFO - ============================================================
2025-12-13 19:06:14,268 - INFO - SUBSCRIPT CONFIGURATION MANIFEST
2025-12-13 19:06:14,268 - INFO - ============================================================
2025-12-13 19:06:14,269 - INFO - Target Input:       1 files
2025-12-13 19:06:14,269 - INFO - Output Directory:   /app/documents/eluhrs@gmail.com/rock01-daf4e488
2025-12-13 19:06:14,269 - INFO - ----------------------------------------
2025-12-13 19:06:14,269 - INFO - Segmentation Model: historical-manuscript
2025-12-13 19:06:14,269 - INFO - ----------------------------------------
2025-12-13 19:06:14,269 - INFO - Transcription Model: gemini-pro-3
2025-12-13 19:06:14,270 - INFO -   Provider:         gemini
2025-12-13 19:06:14,270 - INFO -   Model Name:       gemini-3-pro-preview
2025-12-13 19:06:14,270 - INFO -   Prompt:           You are a literal transcription engine for 19th-ce...
2025-12-13 19:06:14,270 - INFO -   Temperature:      0.2
2025-12-13 19:06:14,270 - INFO - ----------------------------------------
2025-12-13 19:06:14,270 - INFO - Preprocessing Settings:
2025-12-13 19:06:14,271 - INFO -   debug_image: True
2025-12-13 19:06:14,271 - INFO -   resize_image: large
2025-12-13 19:06:14,271 - INFO -   contrast: 1.0
2025-12-13 19:06:14,271 - INFO -   binarize: False
2025-12-13 19:06:14,271 - INFO -   invert: False
2025-12-13 19:06:14,272 - INFO - ============================================================
2025-12-13 19:06:14,272 - INFO - Processing 1 files...
2025-12-13 19:06:14,272 - INFO - Processing /app/documents/eluhrs@gmail.com/rock01-daf4e488/rock01.jpg...
2025-12-13 19:06:14,272 - INFO - Segmenting /app/documents/eluhrs@gmail.com/rock01-daf4e488/rock01.jpg with Kraken...
2025-12-13 19:06:14,273 - INFO - Loading segmentation model from /usr/local/lib/python3.10/site-packages/kraken/blla.mlmodel...
2025-12-13 19:06:14,651 - INFO - Segmenting /app/documents/eluhrs@gmail.com/rock01-daf4e488/rock01.jpg
2025-12-13 19:06:18,626 - INFO - Vectorizing regions
2025-12-13 19:06:19,161 - INFO - Vectorizing regions
2025-12-13 19:06:19,371 - INFO - Vectorizing baselines
2025-12-13 19:06:27,984 - INFO - Compute reading order on 23 lines in lr direction
2025-12-13 19:06:27,986 - INFO - Perform topological sort on partially ordered lines
2025-12-13 19:06:27,986 - INFO - Compute reading order on 1 lines in lr direction
2025-12-13 19:06:27,987 - INFO - Perform topological sort on partially ordered lines
2025-12-13 19:06:27,987 - INFO - Compute reading order on 2 lines in lr direction
2025-12-13 19:06:27,987 - INFO - Perform topological sort on partially ordered lines
2025-12-13 19:06:27,992 - INFO - Found 24 lines.
2025-12-13 19:06:27,994 - INFO - Initializing Gemini model: gemini-3-pro-preview
2025-12-13 19:06:28,149 - INFO - Resized image to (2289, 3000)
2025-12-13 19:06:28,155 - INFO - Annotating 24 regions for Visual Tagging...
2025-12-13 19:06:28,232 - INFO - Saved debug image to /app/documents/eluhrs@gmail.com/rock01-daf4e488/rock01-debug.jpg
2025-12-13 19:06:28,233 - INFO - Sending annotated image to Gemini...
2025-12-13 19:07:30,333 - INFO - Received JSON response from Gemini.
2025-12-13 19:07:30,647 - INFO - SUBSCRIPT OUTPUT for 2:

------------- gemini-pro-3 output for rock01.jpg -------------
74
Panama, Dec. 29. 1874
My dear Capt. Green,-
Your favor by Dr. Boyd duly came.
We observed our latitude stars on Sunday night, and
of course last night again. The instrument behaves well.
Yesterday morning (before your letter came) & this morn.
we observed for azimuth & variation. Though heavily on
our minds we couldn't accomplish it earlier, while the
longitude work lasted. On Sat. night we observed 24 stars.
I will enclose your signals. I think our work is a success.
To-day Mr. Spencer dismounts the telegraph line. We hope to
un
come over on Sat. Morn. - I do not think the pier is steady,
I think some one hit an arm of the instrument unconsciously
each time I found it out of meridian.
The vernier trouble is due to that arm making an angle
with the vertical. I am convinced that most of the register
troubles are due to bad quality of the fillet paper. It is un=
equal thickness at two edges and also varies in thickness
lengthwise, so as to require frequent readjustment of
rollers & stylet.
Very truly Yrs.
Miles Rock
----------------------------------------------------------------

Saved PageXML to /app/documents/eluhrs@gmail.com/rock01-daf4e488/rock01.xml
Saved TXT to /app/documents/eluhrs@gmail.com/rock01-daf4e488/rock01.txt
Saved PDF to /app/documents/eluhrs@gmail.com/rock01-daf4e488/rock01.pdf

Time:   00:01:16
Input:  1280 tokens
Output: 418 tokens
Cost:   $0.0076

----------------------------------------------------------------


2025-12-13 19:07:30,652 - INFO - Task server.tasks.process_document_task[cefbaab0-17ca-4ff4-8918-56ea28e2c62e] succeeded in 76.39832861803006s: None
2025-12-13 19:37:53,242 - INFO - JOB SUBMITTED: User eluhrs@gmail.com uploaded rock01.jpg
2025-12-13 19:37:53,266 - INFO - Task server.tasks.process_document_task[793fc221-f7b7-466f-927f-e00818863cf4] received
2025-12-13 19:37:53,292 - INFO - Task 1 parsed options: {'transcription': {'prompt': 'You are a literal transcription engine for 19th-century handwritten manuscripts. Extract text from the supplied image exactly as written. Preserve all original spelling, punctuation, capitalization, and line breaks. Do not modernize, interpret, or expand abbreviations. The only modernization you should perform is to modernize obsolete characters (example, print "s" not "").', 'temperature': 0.2}, 'segmentation_model': 'historical-manuscript', 'preprocessing': {}}
2025-12-13 19:37:53,293 - INFO - Task 1 found prompt override: You are a literal transcription engine for 19th-century handwritten manuscripts. Extract text from the supplied image exactly as written. Preserve all original spelling, punctuation, capitalization, and line breaks. Do not modernize, interpret, or expand abbreviations. The only modernization you should perform is to modernize obsolete characters (example, print "s" not "").
2025-12-13 19:37:53,294 - INFO - Task 1 found temp override: 0.2
2025-12-13 19:37:53,294 - INFO - Task 1 found temp override: 0.2
2025-12-13 19:37:53,295 - INFO - TASK START: Processing rock01.jpg (ID: 1)
2025-12-13 19:37:53,296 - INFO - Command: subscript historical-manuscript gemini-pro-3 /app/documents/eluhrs@gmail.com/rock01-6f3515d7/rock01.jpg --output /app/documents/eluhrs@gmail.com/rock01-6f3515d7 --prompt You are a literal transcription engine for 19th-century handwritten manuscripts. Extract text from the supplied image exactly as written. Preserve all original spelling, punctuation, capitalization, and line breaks. Do not modernize, interpret, or expand abbreviations. The only modernization you should perform is to modernize obsolete characters (example, print "s" not ""). --temp 0.2
2025-12-13 19:37:53,307 - INFO - Running from: /app
2025-12-13 19:37:53,308 - INFO - Using config: /app/config.yml
2025-12-13 19:37:53,308 - INFO - Output directory: /app/documents/eluhrs@gmail.com/rock01-6f3515d7
2025-12-13 19:37:53,308 - INFO - ----------------------------------------
2025-12-13 19:37:53,311 - INFO - 
Subscript.py initialized segmentation provider: historical-manuscript
2025-12-13 19:37:53,312 - INFO - Subscript.py Initialized transcription provider: gemini-pro-3
2025-12-13 19:37:53,312 - INFO - ============================================================
2025-12-13 19:37:53,313 - INFO - SUBSCRIPT CONFIGURATION MANIFEST
2025-12-13 19:37:53,313 - INFO - ============================================================
2025-12-13 19:37:53,313 - INFO - Target Input:       1 files
2025-12-13 19:37:53,314 - INFO - Output Directory:   /app/documents/eluhrs@gmail.com/rock01-6f3515d7
2025-12-13 19:37:53,314 - INFO - ----------------------------------------
2025-12-13 19:37:53,314 - INFO - Segmentation Model: historical-manuscript
2025-12-13 19:37:53,315 - INFO - ----------------------------------------
2025-12-13 19:37:53,315 - INFO - Transcription Model: gemini-pro-3
2025-12-13 19:37:53,315 - INFO -   Provider:         gemini
2025-12-13 19:37:53,316 - INFO -   Model Name:       gemini-3-pro-preview
2025-12-13 19:37:53,316 - INFO -   Prompt:           You are a literal transcription engine for 19th-ce...
2025-12-13 19:37:53,316 - INFO -   Temperature:      0.2
2025-12-13 19:37:53,316 - INFO - ----------------------------------------
2025-12-13 19:37:53,316 - INFO - Preprocessing Settings:
2025-12-13 19:37:53,317 - INFO -   debug_image: True
2025-12-13 19:37:53,317 - INFO -   resize_image: large
2025-12-13 19:37:53,317 - INFO -   contrast: 1.0
2025-12-13 19:37:53,317 - INFO -   binarize: False
2025-12-13 19:37:53,317 - INFO -   invert: False
2025-12-13 19:37:53,317 - INFO - ============================================================
2025-12-13 19:37:53,318 - INFO - Processing 1 files...
2025-12-13 19:37:53,318 - INFO - Processing /app/documents/eluhrs@gmail.com/rock01-6f3515d7/rock01.jpg...
2025-12-13 19:37:53,318 - INFO - Segmenting /app/documents/eluhrs@gmail.com/rock01-6f3515d7/rock01.jpg with Kraken...
2025-12-13 19:37:53,320 - INFO - Loading segmentation model from /usr/local/lib/python3.10/site-packages/kraken/blla.mlmodel...
2025-12-13 19:37:53,901 - INFO - Segmenting /app/documents/eluhrs@gmail.com/rock01-6f3515d7/rock01.jpg
2025-12-13 19:37:58,052 - INFO - Vectorizing regions
2025-12-13 19:37:58,251 - INFO - Vectorizing regions
2025-12-13 19:37:58,443 - INFO - Vectorizing baselines
2025-12-13 19:38:07,209 - INFO - Compute reading order on 23 lines in lr direction
2025-12-13 19:38:07,211 - INFO - Perform topological sort on partially ordered lines
2025-12-13 19:38:07,215 - INFO - Compute reading order on 1 lines in lr direction
2025-12-13 19:38:07,217 - INFO - Perform topological sort on partially ordered lines
2025-12-13 19:38:07,218 - INFO - Compute reading order on 2 lines in lr direction
2025-12-13 19:38:07,219 - INFO - Perform topological sort on partially ordered lines
2025-12-13 19:38:07,223 - INFO - Found 24 lines.
2025-12-13 19:38:07,227 - INFO - Initializing Gemini model: gemini-3-pro-preview
2025-12-13 19:38:07,405 - INFO - Resized image to (2289, 3000)
2025-12-13 19:38:07,415 - INFO - Annotating 24 regions for Visual Tagging...
2025-12-13 19:38:07,517 - INFO - Saved debug image to /app/documents/eluhrs@gmail.com/rock01-6f3515d7/rock01-debug.jpg
2025-12-13 19:38:07,518 - INFO - Sending annotated image to Gemini...
2025-12-13 19:38:08,345 - INFO - JOB SUBMITTED: User eluhrs@gmail.com uploaded north-01.jpg
2025-12-13 19:38:08,347 - INFO - Task server.tasks.process_document_task[52b9646c-ee06-4217-a630-3fc96ce975db] received
2025-12-13 19:38:08,382 - INFO - JOB SUBMITTED: User eluhrs@gmail.com uploaded north-02.jpg
2025-12-13 19:38:08,384 - INFO - Task server.tasks.process_document_task[be80af3b-e531-4ca7-9c93-f610a1c1b5e0] received
2025-12-13 19:38:08,433 - INFO - Task 2 parsed options: {'transcription': {'prompt': 'You are a literal transcription engine for 19th-century handwritten manuscripts. Extract text from the supplied image exactly as written. Preserve all original spelling, punctuation, capitalization, and line breaks. Do not modernize, interpret, or expand abbreviations. The only modernization you should perform is to modernize obsolete characters (example, print "s" not "").', 'temperature': 0.2}, 'segmentation_model': 'historical-manuscript', 'preprocessing': {}}
2025-12-13 19:38:08,435 - INFO - Task 2 found prompt override: You are a literal transcription engine for 19th-century handwritten manuscripts. Extract text from the supplied image exactly as written. Preserve all original spelling, punctuation, capitalization, and line breaks. Do not modernize, interpret, or expand abbreviations. The only modernization you should perform is to modernize obsolete characters (example, print "s" not "").
2025-12-13 19:38:08,435 - INFO - Task 2 found temp override: 0.2
2025-12-13 19:38:08,435 - INFO - Task 2 found temp override: 0.2
2025-12-13 19:38:08,440 - INFO - TASK START: Processing north-01.jpg (ID: 2)
2025-12-13 19:38:08,440 - INFO - Command: subscript historical-manuscript gemini-pro-3 /app/documents/eluhrs@gmail.com/north-01-443f4161/north-01.jpg --output /app/documents/eluhrs@gmail.com/north-01-443f4161 --prompt You are a literal transcription engine for 19th-century handwritten manuscripts. Extract text from the supplied image exactly as written. Preserve all original spelling, punctuation, capitalization, and line breaks. Do not modernize, interpret, or expand abbreviations. The only modernization you should perform is to modernize obsolete characters (example, print "s" not ""). --temp 0.2
2025-12-13 19:38:08,451 - INFO - Running from: /app
2025-12-13 19:38:08,451 - INFO - Using config: /app/config.yml
2025-12-13 19:38:08,452 - INFO - Output directory: /app/documents/eluhrs@gmail.com/north-01-443f4161
2025-12-13 19:38:08,452 - INFO - ----------------------------------------
2025-12-13 19:38:08,491 - INFO - Task 3 parsed options: {'transcription': {'prompt': 'You are a literal transcription engine for 19th-century handwritten manuscripts. Extract text from the supplied image exactly as written. Preserve all original spelling, punctuation, capitalization, and line breaks. Do not modernize, interpret, or expand abbreviations. The only modernization you should perform is to modernize obsolete characters (example, print "s" not "").', 'temperature': 0.2}, 'segmentation_model': 'historical-manuscript', 'preprocessing': {}}
2025-12-13 19:38:08,511 - INFO - Task 3 found prompt override: You are a literal transcription engine for 19th-century handwritten manuscripts. Extract text from the supplied image exactly as written. Preserve all original spelling, punctuation, capitalization, and line breaks. Do not modernize, interpret, or expand abbreviations. The only modernization you should perform is to modernize obsolete characters (example, print "s" not "").
2025-12-13 19:38:08,523 - INFO - Task 3 found temp override: 0.2
2025-12-13 19:38:08,527 - INFO - Task 3 found temp override: 0.2
2025-12-13 19:38:08,566 - INFO - TASK START: Processing north-02.jpg (ID: 3)
2025-12-13 19:38:08,567 - INFO - Command: subscript historical-manuscript gemini-pro-3 /app/documents/eluhrs@gmail.com/north-02-9aeae48f/north-02.jpg --output /app/documents/eluhrs@gmail.com/north-02-9aeae48f --prompt You are a literal transcription engine for 19th-century handwritten manuscripts. Extract text from the supplied image exactly as written. Preserve all original spelling, punctuation, capitalization, and line breaks. Do not modernize, interpret, or expand abbreviations. The only modernization you should perform is to modernize obsolete characters (example, print "s" not ""). --temp 0.2
2025-12-13 19:38:08,578 - INFO - Running from: /app
2025-12-13 19:38:08,578 - INFO - Using config: /app/config.yml
2025-12-13 19:38:08,579 - INFO - Output directory: /app/documents/eluhrs@gmail.com/north-02-9aeae48f
2025-12-13 19:38:08,579 - INFO - ----------------------------------------
2025-12-13 19:38:11,996 - INFO - 
Subscript.py initialized segmentation provider: historical-manuscript
2025-12-13 19:38:12,018 - INFO - Subscript.py Initialized transcription provider: gemini-pro-3
2025-12-13 19:38:12,023 - INFO - ============================================================
2025-12-13 19:38:12,040 - INFO - SUBSCRIPT CONFIGURATION MANIFEST
2025-12-13 19:38:12,060 - INFO - ============================================================
2025-12-13 19:38:12,070 - INFO - Target Input:       1 files
2025-12-13 19:38:12,074 - INFO - Output Directory:   /app/documents/eluhrs@gmail.com/north-01-443f4161
2025-12-13 19:38:12,075 - INFO - ----------------------------------------
2025-12-13 19:38:12,075 - INFO - Segmentation Model: historical-manuscript
2025-12-13 19:38:12,076 - INFO - ----------------------------------------
2025-12-13 19:38:12,076 - INFO - Transcription Model: gemini-pro-3
2025-12-13 19:38:12,077 - INFO -   Provider:         gemini
2025-12-13 19:38:12,077 - INFO -   Model Name:       gemini-3-pro-preview
2025-12-13 19:38:12,077 - INFO -   Prompt:           You are a literal transcription engine for 19th-ce...
2025-12-13 19:38:12,078 - INFO -   Temperature:      0.2
2025-12-13 19:38:12,078 - INFO - ----------------------------------------
2025-12-13 19:38:12,078 - INFO - Preprocessing Settings:
2025-12-13 19:38:12,079 - INFO -   debug_image: True
2025-12-13 19:38:12,079 - INFO -   resize_image: large
2025-12-13 19:38:12,079 - INFO -   contrast: 1.0
2025-12-13 19:38:12,079 - INFO -   binarize: False
2025-12-13 19:38:12,080 - INFO -   invert: False
2025-12-13 19:38:12,080 - INFO - ============================================================
2025-12-13 19:38:12,080 - INFO - Processing 1 files...
2025-12-13 19:38:12,080 - INFO - Processing /app/documents/eluhrs@gmail.com/north-01-443f4161/north-01.jpg...
2025-12-13 19:38:12,081 - INFO - Segmenting /app/documents/eluhrs@gmail.com/north-01-443f4161/north-01.jpg with Kraken...
2025-12-13 19:38:12,086 - INFO - Loading segmentation model from /usr/local/lib/python3.10/site-packages/kraken/blla.mlmodel...
2025-12-13 19:38:12,171 - INFO - 
Subscript.py initialized segmentation provider: historical-manuscript
2025-12-13 19:38:12,172 - INFO - Subscript.py Initialized transcription provider: gemini-pro-3
2025-12-13 19:38:12,172 - INFO - ============================================================
2025-12-13 19:38:12,172 - INFO - SUBSCRIPT CONFIGURATION MANIFEST
2025-12-13 19:38:12,173 - INFO - ============================================================
2025-12-13 19:38:12,173 - INFO - Target Input:       1 files
2025-12-13 19:38:12,174 - INFO - Output Directory:   /app/documents/eluhrs@gmail.com/north-02-9aeae48f
2025-12-13 19:38:12,174 - INFO - ----------------------------------------
2025-12-13 19:38:12,175 - INFO - Segmentation Model: historical-manuscript
2025-12-13 19:38:12,175 - INFO - ----------------------------------------
2025-12-13 19:38:12,176 - INFO - Transcription Model: gemini-pro-3
2025-12-13 19:38:12,177 - INFO -   Provider:         gemini
2025-12-13 19:38:12,177 - INFO -   Model Name:       gemini-3-pro-preview
2025-12-13 19:38:12,177 - INFO -   Prompt:           You are a literal transcription engine for 19th-ce...
2025-12-13 19:38:12,178 - INFO -   Temperature:      0.2
2025-12-13 19:38:12,178 - INFO - ----------------------------------------
2025-12-13 19:38:12,179 - INFO - Preprocessing Settings:
2025-12-13 19:38:12,180 - INFO -   debug_image: True
2025-12-13 19:38:12,180 - INFO -   resize_image: large
2025-12-13 19:38:12,181 - INFO -   contrast: 1.0
2025-12-13 19:38:12,181 - INFO -   binarize: False
2025-12-13 19:38:12,182 - INFO -   invert: False
2025-12-13 19:38:12,182 - INFO - ============================================================
2025-12-13 19:38:12,183 - INFO - Processing 1 files...
2025-12-13 19:38:12,183 - INFO - Processing /app/documents/eluhrs@gmail.com/north-02-9aeae48f/north-02.jpg...
2025-12-13 19:38:12,183 - INFO - Segmenting /app/documents/eluhrs@gmail.com/north-02-9aeae48f/north-02.jpg with Kraken...
2025-12-13 19:38:12,188 - INFO - Loading segmentation model from /usr/local/lib/python3.10/site-packages/kraken/blla.mlmodel...
2025-12-13 19:38:12,703 - INFO - Segmenting /app/documents/eluhrs@gmail.com/north-01-443f4161/north-01.jpg
2025-12-13 19:38:12,821 - INFO - Segmenting /app/documents/eluhrs@gmail.com/north-02-9aeae48f/north-02.jpg
2025-12-13 19:38:23,522 - INFO - Vectorizing regions
2025-12-13 19:38:23,665 - INFO - Vectorizing regions
2025-12-13 19:38:23,753 - INFO - Vectorizing regions
2025-12-13 19:38:23,812 - INFO - Vectorizing baselines
2025-12-13 19:38:23,909 - INFO - Vectorizing regions
2025-12-13 19:38:24,048 - INFO - Vectorizing baselines
2025-12-13 19:38:25,171 - INFO - Task server.tasks.process_batch_task[8ade2c5d-441e-4e35-b55c-b15107efd8c4] received
2025-12-13 19:38:25,256 - INFO - BATCH TASK START: Parent combined.pdf (ID: 4)
2025-12-13 19:38:25,257 - INFO - Command: subscript historical-manuscript gemini-pro-3 /app/documents/eluhrs@gmail.com/combined-cc6c51c6/north-01.jpg /app/documents/eluhrs@gmail.com/combined-cc6c51c6/north-02.jpg --combine /app/documents/eluhrs@gmail.com/combined-cc6c51c6/combined.pdf --output /app/documents/eluhrs@gmail.com/combined-cc6c51c6 --prompt You are a literal transcription engine for 19th-century handwritten manuscripts. Extract text from the supplied image exactly as written. Preserve all original spelling, punctuation, capitalization, and line breaks. Do not modernize, interpret, or expand abbreviations. The only modernization you should perform is to modernize obsolete characters (example, print "s" not ""). --temp 0.2
2025-12-13 19:38:25,265 - INFO - Running from: /app
2025-12-13 19:38:25,266 - INFO - Using config: /app/config.yml
2025-12-13 19:38:25,266 - INFO - Output directory: /app/documents/eluhrs@gmail.com/combined-cc6c51c6
2025-12-13 19:38:25,266 - INFO - ----------------------------------------
2025-12-13 19:38:28,614 - INFO - 
Subscript.py initialized segmentation provider: historical-manuscript
2025-12-13 19:38:28,614 - INFO - Subscript.py Initialized transcription provider: gemini-pro-3
2025-12-13 19:38:28,615 - INFO - ============================================================
2025-12-13 19:38:28,615 - INFO - SUBSCRIPT CONFIGURATION MANIFEST
2025-12-13 19:38:28,615 - INFO - ============================================================
2025-12-13 19:38:28,615 - INFO - Target Input:       2 files
2025-12-13 19:38:28,616 - INFO - Output Directory:   /app/documents/eluhrs@gmail.com/combined-cc6c51c6
2025-12-13 19:38:28,616 - INFO - ----------------------------------------
2025-12-13 19:38:28,616 - INFO - Segmentation Model: historical-manuscript
2025-12-13 19:38:28,616 - INFO - ----------------------------------------
2025-12-13 19:38:28,617 - INFO - Transcription Model: gemini-pro-3
2025-12-13 19:38:28,617 - INFO -   Provider:         gemini
2025-12-13 19:38:28,617 - INFO -   Model Name:       gemini-3-pro-preview
2025-12-13 19:38:28,617 - INFO -   Prompt:           You are a literal transcription engine for 19th-ce...
2025-12-13 19:38:28,618 - INFO -   Temperature:      0.2
2025-12-13 19:38:28,618 - INFO - ----------------------------------------
2025-12-13 19:38:28,618 - INFO - Preprocessing Settings:
2025-12-13 19:38:28,618 - INFO -   debug_image: True
2025-12-13 19:38:28,618 - INFO -   resize_image: large
2025-12-13 19:38:28,619 - INFO -   contrast: 1.0
2025-12-13 19:38:28,619 - INFO -   binarize: False
2025-12-13 19:38:28,619 - INFO -   invert: False
2025-12-13 19:38:28,619 - INFO - ============================================================
2025-12-13 19:38:28,620 - INFO - Processing 2 files...
2025-12-13 19:38:28,620 - INFO - Processing /app/documents/eluhrs@gmail.com/combined-cc6c51c6/north-01.jpg...
2025-12-13 19:38:28,620 - INFO - Segmenting /app/documents/eluhrs@gmail.com/combined-cc6c51c6/north-01.jpg with Kraken...
2025-12-13 19:38:28,625 - INFO - Loading segmentation model from /usr/local/lib/python3.10/site-packages/kraken/blla.mlmodel...
2025-12-13 19:38:29,157 - INFO - Segmenting /app/documents/eluhrs@gmail.com/combined-cc6c51c6/north-01.jpg
2025-12-13 19:38:32,618 - INFO - Compute reading order on 15 lines in lr direction
2025-12-13 19:38:32,625 - INFO - Perform topological sort on partially ordered lines
2025-12-13 19:38:32,629 - INFO - Compute reading order on 1 lines in lr direction
2025-12-13 19:38:32,632 - INFO - Perform topological sort on partially ordered lines
2025-12-13 19:38:32,633 - INFO - Compute reading order on 2 lines in lr direction
2025-12-13 19:38:32,633 - INFO - Perform topological sort on partially ordered lines
2025-12-13 19:38:32,638 - INFO - Found 16 lines.
2025-12-13 19:38:32,649 - INFO - Initializing Gemini model: gemini-3-pro-preview
2025-12-13 19:38:32,696 - INFO - Annotating 16 regions for Visual Tagging...
2025-12-13 19:38:32,748 - INFO - Compute reading order on 18 lines in lr direction
2025-12-13 19:38:32,750 - INFO - Perform topological sort on partially ordered lines
2025-12-13 19:38:32,754 - INFO - Compute reading order on 1 lines in lr direction
2025-12-13 19:38:32,754 - INFO - Perform topological sort on partially ordered lines
2025-12-13 19:38:32,757 - INFO - Found 18 lines.
2025-12-13 19:38:32,759 - INFO - Initializing Gemini model: gemini-3-pro-preview
2025-12-13 19:38:32,763 - INFO - Saved debug image to /app/documents/eluhrs@gmail.com/north-02-9aeae48f/north-02-debug.jpg
2025-12-13 19:38:32,764 - INFO - Sending annotated image to Gemini...
2025-12-13 19:38:32,776 - INFO - Annotating 18 regions for Visual Tagging...
2025-12-13 19:38:32,817 - INFO - Saved debug image to /app/documents/eluhrs@gmail.com/north-01-443f4161/north-01-debug.jpg
2025-12-13 19:38:32,818 - INFO - Sending annotated image to Gemini...
2025-12-13 19:38:36,276 - INFO - Vectorizing regions
2025-12-13 19:38:36,575 - INFO - Vectorizing regions
2025-12-13 19:38:36,712 - INFO - Vectorizing baselines
2025-12-13 19:38:44,220 - INFO - Compute reading order on 18 lines in lr direction
2025-12-13 19:38:44,221 - INFO - Perform topological sort on partially ordered lines
2025-12-13 19:38:44,222 - INFO - Compute reading order on 1 lines in lr direction
2025-12-13 19:38:44,222 - INFO - Perform topological sort on partially ordered lines
2025-12-13 19:38:44,224 - INFO - Found 18 lines.
2025-12-13 19:38:44,225 - INFO - Initializing Gemini model: gemini-3-pro-preview
2025-12-13 19:38:44,241 - INFO - Annotating 18 regions for Visual Tagging...
2025-12-13 19:38:44,278 - INFO - Saved debug image to /app/documents/eluhrs@gmail.com/combined-cc6c51c6/north-01-debug.jpg
2025-12-13 19:38:44,279 - INFO - Sending annotated image to Gemini...
2025-12-13 19:39:21,006 - INFO - Received JSON response from Gemini.
2025-12-13 19:39:21,413 - INFO - SUBSCRIPT OUTPUT for 1:

------------- gemini-pro-3 output for rock01.jpg -------------
74
Panama, Dec. 29. 1874
My dear Capt. Green,-
Your favor by Dr. Boyd duly came.
We observed our latitude stars on Sunday night, and
of course last night again. The instrument behaves well.
Yesterday morning (before your letter came) & this morn.
we observed for azimuth & variation. Though heavily on
our minds we couldn't accomplish it earlier, while the
longitude work lasted. On Sat. night we observed 24 stars.
I will enclose your signals. I think our work is a success.
To-day Mr. Spencer dismantles the telegraph line. We hope to
un
come over on Sat. Morn. - I do not think the pier is steady,
I think some one hit an arm of the instrument unconsciously
each time I found it out of meridian.
The vernier trouble is due to that arm making an angle
with the vertical. I am convinced that most of the register
troubles are due to bad quality of the fillet paper. It is of un-
equal thickness at two edges and also varies in thickness
lengthwise, so as to require frequent readjustment of
rollers & stylet.
Very truly Yrs.
Miles Rock
----------------------------------------------------------------

Saved PageXML to /app/documents/eluhrs@gmail.com/rock01-6f3515d7/rock01.xml
Saved TXT to /app/documents/eluhrs@gmail.com/rock01-6f3515d7/rock01.txt
Saved PDF to /app/documents/eluhrs@gmail.com/rock01-6f3515d7/rock01.pdf

Time:   00:01:28
Input:  1280 tokens
Output: 419 tokens
Cost:   $0.0076

----------------------------------------------------------------


2025-12-13 19:39:21,429 - INFO - Task server.tasks.process_document_task[793fc221-f7b7-466f-927f-e00818863cf4] succeeded in 88.15496504004113s: None
2025-12-13 19:39:56,354 - INFO - Received JSON response from Gemini.
2025-12-13 19:39:56,529 - INFO - SUBSCRIPT OUTPUT for 3:

------------- gemini-pro-3 output for north-02.jpg -------------
all ye euells yt may be, ar crept so near vntous .
Zeland is full, France not free, & Scotland
vnclensid: the Common people spoyled, theyr
Commonwelths racked, theyr Nobilitie
murtherid, the Councell contemnid and
theyr Kyngs disobeyed: For dissention, sedici=
on Ciuell slaughtar, & rebellion, is ye onlie
argument entreatid of among them .
If therfore it pleasid her Hyghnes, to vse ye
benefit of present tyme: to bend her browe
vpon ye disobedient: to hold vp her threatning
hand ouer them, and to aduance her pusant
arme towards them: the verie shadoe of her
sworde, wold feare and vanquyshe ye prow=
dist of them .
but
----------------------------------------------------------------

Saved PageXML to /app/documents/eluhrs@gmail.com/north-02-9aeae48f/north-02.xml
Saved TXT to /app/documents/eluhrs@gmail.com/north-02-9aeae48f/north-02.txt
Saved PDF to /app/documents/eluhrs@gmail.com/north-02-9aeae48f/north-02.pdf

Time:   00:01:44
Input:  1258 tokens
Output: 299 tokens
Cost:   $0.0061

----------------------------------------------------------------


2025-12-13 19:39:56,552 - INFO - Task server.tasks.process_document_task[be80af3b-e531-4ca7-9c93-f610a1c1b5e0] succeeded in 108.16148071701173s: None
2025-12-13 19:40:14,401 - INFO - Received JSON response from Gemini.
2025-12-13 19:40:14,602 - INFO - SUBSCRIPT OUTPUT for 2:

------------- gemini-pro-3 output for north-01.jpg -------------
glad aspects were present (confirming her
Maiestie wth THEODOSIES dylligence, ARETAPHE=
LIS constancie, and ANTIGONVS clemencie)
setlinge them selues euar sence, in her Princelie
brest: as ye rarenes and greatnes of her Gracis
vertuse declare. Whom God presaruid from
formar perell, to rule & reygne ouer us, in
this last leaden adge: wherin Iniquitie hath
sought to surmount ye glorie of his Deitie, and
so presumed to suppresse his professors: As if
ye Shylde of her Souerayntie (for worldlie
force) did not protect his poore membars a=
Quens
Matie is ye par
fect protector
of Religion
mong us: What error wold not inuade us?
What Scisme or sect wold not assawte us?
----------------------------------------------------------------

Saved PageXML to /app/documents/eluhrs@gmail.com/north-01-443f4161/north-01.xml
Saved TXT to /app/documents/eluhrs@gmail.com/north-01-443f4161/north-01.txt
Saved PDF to /app/documents/eluhrs@gmail.com/north-01-443f4161/north-01.pdf

Time:   00:02:02
Input:  1270 tokens
Output: 353 tokens
Cost:   $0.0068

----------------------------------------------------------------


2025-12-13 19:40:14,617 - INFO - Task server.tasks.process_document_task[52b9646c-ee06-4217-a630-3fc96ce975db] succeeded in 126.26390389201697s: None
2025-12-13 19:41:02,637 - INFO - Received JSON response from Gemini.
2025-12-13 19:41:02,837 - INFO - Processing /app/documents/eluhrs@gmail.com/combined-cc6c51c6/north-02.jpg...
2025-12-13 19:41:02,837 - INFO - Segmenting /app/documents/eluhrs@gmail.com/combined-cc6c51c6/north-02.jpg with Kraken...
2025-12-13 19:41:02,839 - INFO - Loading segmentation model from /usr/local/lib/python3.10/site-packages/kraken/blla.mlmodel...
2025-12-13 19:41:03,431 - INFO - Segmenting /app/documents/eluhrs@gmail.com/combined-cc6c51c6/north-02.jpg
2025-12-13 19:41:06,677 - INFO - Vectorizing regions
2025-12-13 19:41:06,815 - INFO - Vectorizing regions
2025-12-13 19:41:06,945 - INFO - Vectorizing baselines
2025-12-13 19:41:13,423 - INFO - Compute reading order on 15 lines in lr direction
2025-12-13 19:41:13,424 - INFO - Perform topological sort on partially ordered lines
2025-12-13 19:41:13,424 - INFO - Compute reading order on 1 lines in lr direction
2025-12-13 19:41:13,424 - INFO - Perform topological sort on partially ordered lines
2025-12-13 19:41:13,425 - INFO - Compute reading order on 2 lines in lr direction
2025-12-13 19:41:13,425 - INFO - Perform topological sort on partially ordered lines
2025-12-13 19:41:13,427 - INFO - Found 16 lines.
2025-12-13 19:41:13,428 - INFO - Initializing Gemini model: gemini-3-pro-preview
2025-12-13 19:41:13,443 - INFO - Annotating 16 regions for Visual Tagging...
2025-12-13 19:41:13,478 - INFO - Saved debug image to /app/documents/eluhrs@gmail.com/combined-cc6c51c6/north-02-debug.jpg
2025-12-13 19:41:13,479 - INFO - Sending annotated image to Gemini...
2025-12-13 19:42:08,241 - INFO - Received JSON response from Gemini.
2025-12-13 19:42:08,403 - INFO - Combining 2 PDFs into /app/documents/eluhrs@gmail.com/combined-cc6c51c6/combined.pdf...
2025-12-13 19:42:08,477 - INFO - Saved Combined PDF to /app/documents/eluhrs@gmail.com/combined-cc6c51c6/combined.pdf
2025-12-13 19:42:08,478 - INFO - Combining 2 TXTs into /app/documents/eluhrs@gmail.com/combined-cc6c51c6/combined.txt...
2025-12-13 19:42:08,479 - INFO - Saved Combined TXT to /app/documents/eluhrs@gmail.com/combined-cc6c51c6/combined.txt
2025-12-13 19:42:08,479 - INFO - BATCH OUTPUT:

------------- gemini-pro-3 output for north-01.jpg -------------
glad apects were preent (confirming her
Maietie wth THEODOSIES dylligence, ARETAPHE=
LIS contancie, and ANTIGONVS clemencie)
etlinge them elues euar ence, in her Princelie
bret: as ye rarenes and greatnes of her Gracis
vertue declare. Whom God prearuid from
formar perell, to rule & reygne ouer us, in
this lat leaden adge: wherin Iniquitie hath
ought to urmount ye glorie of his Deitie, and
o preumed to uppree his profeors: As if
ye Shylde of her Souerayntie (for worldlie
force) did not protect his poore membars a=
Quens
Ma:tie
is ye per fect protector of Religion
mong us: What error wold not inuade us?
What Scime or ect wold not aawte us?
all
----------------------------------------------------------------

Saved PageXML to /app/documents/eluhrs@gmail.com/combined-cc6c51c6/north-01.xml
Saved TXT to /app/documents/eluhrs@gmail.com/combined-cc6c51c6/north-01.txt
Saved PDF to /app/documents/eluhrs@gmail.com/combined-cc6c51c6/north-01.pdf

Time:   00:02:34
Input:  1270 tokens
Output: 335 tokens
Cost:   $0.0066

----------------------------------------------------------------


------------- gemini-pro-3 output for north-02.jpg -------------
all ye euells yt may be, ar crept so near vntous.
Zeland is full, France not free, & Scotland
vnclensid: the Common people spoyled, theyr
Commonwelths racked, theyr Nobilitie
murtherid, the Councell contemnid and
theyr Kyngs disobeyed: For dissention, sedici=
on Ciuell slaughtar, & rebellion, is ye onlie
argument entreatid of among them .
If therfore it pleasid her Hyghnes, to vse ye
benefit of present tyme: to bend her browe
vpon ye disobedient: to hold vp her threatning
hand ouer them, and to aduance her pusant
arme towards them; the verie shadoe of her
sworde, wold feare and vanquyshe ye prow=
dest of them .
but
----------------------------------------------------------------

Saved PageXML to /app/documents/eluhrs@gmail.com/combined-cc6c51c6/north-02.xml
Saved TXT to /app/documents/eluhrs@gmail.com/combined-cc6c51c6/north-02.txt
Saved PDF to /app/documents/eluhrs@gmail.com/combined-cc6c51c6/north-02.pdf

Time:   00:01:05
Input:  1258 tokens
Output: 298 tokens
Cost:   $0.0061

Total time:   00:03:39
Total input:  2528 tokens
Total output: 633 tokens
Total cost:   $0.0127

----------------------------------------------------------------


2025-12-13 19:42:08,553 - INFO - Task server.tasks.process_batch_task[8ade2c5d-441e-4e35-b55c-b15107efd8c4] succeeded in 223.37295393506065s: None
2025-12-13 19:42:31,176 - INFO - Task server.tasks.rebuild_pdf_task[08f07fda-ce80-47ac-afa4-23609e03f472] received
2025-12-13 19:42:31,197 - INFO - Running from: /app
2025-12-13 19:42:31,198 - INFO - Using config: /app/config.yml
2025-12-13 19:42:31,198 - INFO - Output directory: /app/documents/eluhrs@gmail.com/rock01-6f3515d7
2025-12-13 19:42:31,198 - INFO - ----------------------------------------
2025-12-13 19:42:31,200 - INFO - 
Subscript.py initialized segmentation provider: historical-manuscript
2025-12-13 19:42:31,201 - INFO - Subscript.py Initialized transcription provider: gemini-pro-3
2025-12-13 19:42:31,201 - INFO - ============================================================
2025-12-13 19:42:31,202 - INFO - SUBSCRIPT CONFIGURATION MANIFEST
2025-12-13 19:42:31,202 - INFO - ============================================================
2025-12-13 19:42:31,202 - INFO - Target Input:       1 files
2025-12-13 19:42:31,203 - INFO - Output Directory:   /app/documents/eluhrs@gmail.com/rock01-6f3515d7
2025-12-13 19:42:31,203 - INFO - ----------------------------------------
2025-12-13 19:42:31,204 - INFO - Segmentation Model: historical-manuscript
2025-12-13 19:42:31,204 - INFO - ----------------------------------------
2025-12-13 19:42:31,204 - INFO - Transcription Model: gemini-pro-3
2025-12-13 19:42:31,205 - INFO -   Provider:         gemini
2025-12-13 19:42:31,205 - INFO -   Model Name:       gemini-3-pro-preview
2025-12-13 19:42:31,205 - INFO -   Prompt:           You are a literal transcription engine for 19th-ce...
2025-12-13 19:42:31,205 - INFO -   Temperature:      0.2
2025-12-13 19:42:31,205 - INFO - ----------------------------------------
2025-12-13 19:42:31,206 - INFO - Preprocessing Settings:
2025-12-13 19:42:31,206 - INFO -   debug_image: True
2025-12-13 19:42:31,206 - INFO -   resize_image: large
2025-12-13 19:42:31,206 - INFO -   contrast: 1.0
2025-12-13 19:42:31,206 - INFO -   binarize: False
2025-12-13 19:42:31,207 - INFO -   invert: False
2025-12-13 19:42:31,207 - INFO - ============================================================
2025-12-13 19:42:31,207 - INFO - Processing 1 files...
2025-12-13 19:42:31,207 - INFO - Processing /app/documents/eluhrs@gmail.com/rock01-6f3515d7/rock01.jpg...
2025-12-13 19:42:31,208 - INFO - Using existing XML: /app/documents/eluhrs@gmail.com/rock01-6f3515d7/rock01.xml
2025-12-13 19:42:31,209 - INFO - Parsed 24 text regions from /app/documents/eluhrs@gmail.com/rock01-6f3515d7/rock01.xml
2025-12-13 19:42:31,581 - WARNING - 
------------- gemini-pro-3 output for rock01.jpg -------------
2025-12-13 19:42:31,581 - WARNING - 74
2025-12-13 19:42:31,581 - WARNING - Panama, Dec. 29. 1874
2025-12-13 19:42:31,581 - WARNING - My dear Capt. Green,
2025-12-13 19:42:31,581 - WARNING - Your favor by Dr. Boyd duly came.
2025-12-13 19:42:31,581 - WARNING - We observed our latitude stars on Sunday night, and
2025-12-13 19:42:31,582 - WARNING - of course last night again. The instrument behaves well.
2025-12-13 19:42:31,582 - WARNING - Yesterday morning (before your letter came) & this morn.
2025-12-13 19:42:31,582 - WARNING - we observed for azimuth & variation. Though heavily on
2025-12-13 19:42:31,582 - WARNING - our minds we couldn't accomplish it earlier, while the
2025-12-13 19:42:31,582 - WARNING - longitude work lasted. On Sat. night we observed 24 stars.
2025-12-13 19:42:31,582 - WARNING - I will enclose your signals. I think our work is a success.
2025-12-13 19:42:31,583 - WARNING - To-day Mr. Spencer dismantles the telegraph line. We hope to
2025-12-13 19:42:31,583 - WARNING - un
2025-12-13 19:42:31,583 - WARNING - come over on Sat. Morn. - I do not think the pier is steady,
2025-12-13 19:42:31,583 - WARNING - I think some one hit an arm of the instrument unconsciously
2025-12-13 19:42:31,583 - WARNING - each time I found it out of meridian.
2025-12-13 19:42:31,583 - WARNING - The vernier trouble is due to that arm making an angle
2025-12-13 19:42:31,583 - WARNING - with the vertical. I am convinced that most of the register
2025-12-13 19:42:31,584 - WARNING - troubles are due to bad quality of the fillet paper. It is of un-
2025-12-13 19:42:31,584 - WARNING - equal thickness at two edges and also varies in thickness
2025-12-13 19:42:31,584 - WARNING - lengthwise, so as to require frequent readjustment of
2025-12-13 19:42:31,584 - WARNING - rollers & stylet.
2025-12-13 19:42:31,584 - WARNING - Very truly Yrs.
2025-12-13 19:42:31,584 - WARNING - Miles Rock
2025-12-13 19:42:31,585 - WARNING - ----------------------------------------------------------------
2025-12-13 19:42:31,585 - WARNING - Saved PageXML to /app/documents/eluhrs@gmail.com/rock01-6f3515d7/rock01.xml
2025-12-13 19:42:31,585 - WARNING - Saved TXT to /app/documents/eluhrs@gmail.com/rock01-6f3515d7/rock01.txt
2025-12-13 19:42:31,585 - WARNING - Saved PDF to /app/documents/eluhrs@gmail.com/rock01-6f3515d7/rock01.pdf
2025-12-13 19:42:31,585 - WARNING - Time:   00:00:00
2025-12-13 19:42:31,585 - WARNING - Input:  0 tokens
2025-12-13 19:42:31,586 - WARNING - Output: 0 tokens
2025-12-13 19:42:31,586 - WARNING - Cost:   $0.0000
2025-12-13 19:42:31,586 - WARNING - ----------------------------------------------------------------
2025-12-13 19:42:31,594 - INFO - Task server.tasks.rebuild_pdf_task[08f07fda-ce80-47ac-afa4-23609e03f472] succeeded in 0.4136611670255661s: None
2025-12-13 19:56:35,735 - INFO - JOB SUBMITTED: User eluhrs@gmail.com uploaded rock01.jpg
2025-12-13 19:56:35,821 - INFO - Task server.tasks.process_document_task[50fa3f8f-3e4d-4819-91c2-bc073779aa36] received
2025-12-13 19:56:35,848 - INFO - Task 1 parsed options: {'transcription': {'prompt': 'You are a literal transcription engine for 19th-century handwritten manuscripts. Extract text from the supplied image exactly as written. Preserve all original spelling, punctuation, capitalization, and line breaks. Do not modernize, interpret, or expand abbreviations. The only modernization you should perform is to modernize obsolete characters (example, print "s" not "").', 'temperature': 0.2}, 'segmentation_model': 'historical-manuscript', 'preprocessing': {}}
2025-12-13 19:56:35,850 - INFO - Task 1 found prompt override: You are a literal transcription engine for 19th-century handwritten manuscripts. Extract text from the supplied image exactly as written. Preserve all original spelling, punctuation, capitalization, and line breaks. Do not modernize, interpret, or expand abbreviations. The only modernization you should perform is to modernize obsolete characters (example, print "s" not "").
2025-12-13 19:56:35,850 - INFO - Task 1 found temp override: 0.2
2025-12-13 19:56:35,851 - INFO - Task 1 found temp override: 0.2
2025-12-13 19:56:35,859 - INFO - TASK START: Processing rock01.jpg (ID: 1)
2025-12-13 19:56:35,860 - INFO - Command: subscript historical-manuscript gemini-pro-3 /app/documents/eluhrs@gmail.com/rock01-a6641eeb/rock01.jpg --output /app/documents/eluhrs@gmail.com/rock01-a6641eeb --prompt You are a literal transcription engine for 19th-century handwritten manuscripts. Extract text from the supplied image exactly as written. Preserve all original spelling, punctuation, capitalization, and line breaks. Do not modernize, interpret, or expand abbreviations. The only modernization you should perform is to modernize obsolete characters (example, print "s" not ""). --temp 0.2
2025-12-13 19:56:35,870 - INFO - Running from: /app
2025-12-13 19:56:35,871 - INFO - Using config: /app/config.yml
2025-12-13 19:56:35,871 - INFO - Output directory: /app/documents/eluhrs@gmail.com/rock01-a6641eeb
2025-12-13 19:56:35,871 - INFO - ----------------------------------------
2025-12-13 19:56:35,872 - INFO - 
Subscript.py initialized segmentation provider: historical-manuscript
2025-12-13 19:56:35,873 - INFO - Subscript.py Initialized transcription provider: gemini-pro-3
2025-12-13 19:56:35,873 - INFO - ============================================================
2025-12-13 19:56:35,873 - INFO - SUBSCRIPT CONFIGURATION MANIFEST
2025-12-13 19:56:35,873 - INFO - ============================================================
2025-12-13 19:56:35,874 - INFO - Target Input:       1 files
2025-12-13 19:56:35,874 - INFO - Output Directory:   /app/documents/eluhrs@gmail.com/rock01-a6641eeb
2025-12-13 19:56:35,874 - INFO - ----------------------------------------
2025-12-13 19:56:35,874 - INFO - Segmentation Model: historical-manuscript
2025-12-13 19:56:35,875 - INFO - ----------------------------------------
2025-12-13 19:56:35,875 - INFO - Transcription Model: gemini-pro-3
2025-12-13 19:56:35,875 - INFO -   Provider:         gemini
2025-12-13 19:56:35,875 - INFO -   Model Name:       gemini-3-pro-preview
2025-12-13 19:56:35,876 - INFO -   Prompt:           You are a literal transcription engine for 19th-ce...
2025-12-13 19:56:35,876 - INFO -   Temperature:      0.2
2025-12-13 19:56:35,876 - INFO - ----------------------------------------
2025-12-13 19:56:35,876 - INFO - Preprocessing Settings:
2025-12-13 19:56:35,877 - INFO -   debug_image: True
2025-12-13 19:56:35,877 - INFO -   resize_image: large
2025-12-13 19:56:35,877 - INFO -   contrast: 1.0
2025-12-13 19:56:35,877 - INFO -   binarize: False
2025-12-13 19:56:35,877 - INFO -   invert: False
2025-12-13 19:56:35,878 - INFO - ============================================================
2025-12-13 19:56:35,878 - INFO - Processing 1 files...
2025-12-13 19:56:35,878 - INFO - Processing /app/documents/eluhrs@gmail.com/rock01-a6641eeb/rock01.jpg...
2025-12-13 19:56:35,878 - INFO - Segmenting /app/documents/eluhrs@gmail.com/rock01-a6641eeb/rock01.jpg with Kraken...
2025-12-13 19:56:35,885 - INFO - Loading segmentation model from /usr/local/lib/python3.10/site-packages/kraken/blla.mlmodel...
2025-12-13 19:56:36,502 - INFO - Segmenting /app/documents/eluhrs@gmail.com/rock01-a6641eeb/rock01.jpg
2025-12-13 19:56:41,874 - INFO - Vectorizing regions
2025-12-13 19:56:42,416 - INFO - Vectorizing regions
2025-12-13 19:56:42,622 - INFO - Vectorizing baselines
2025-12-13 19:56:52,832 - INFO - Compute reading order on 23 lines in lr direction
2025-12-13 19:56:52,836 - INFO - Perform topological sort on partially ordered lines
2025-12-13 19:56:52,838 - INFO - Compute reading order on 1 lines in lr direction
2025-12-13 19:56:52,840 - INFO - Perform topological sort on partially ordered lines
2025-12-13 19:56:52,841 - INFO - Compute reading order on 2 lines in lr direction
2025-12-13 19:56:52,842 - INFO - Perform topological sort on partially ordered lines
2025-12-13 19:56:52,857 - INFO - Found 24 lines.
2025-12-13 19:56:52,862 - INFO - Initializing Gemini model: gemini-3-pro-preview
2025-12-13 19:56:53,040 - INFO - Resized image to (2289, 3000)
2025-12-13 19:56:53,050 - INFO - Annotating 24 regions for Visual Tagging...
2025-12-13 19:56:53,153 - INFO - Saved debug image to /app/documents/eluhrs@gmail.com/rock01-a6641eeb/rock01-debug.jpg
2025-12-13 19:56:53,154 - INFO - Sending annotated image to Gemini...
2025-12-13 19:56:53,845 - INFO - JOB SUBMITTED: User eluhrs@gmail.com uploaded north-01.jpg
2025-12-13 19:56:53,847 - INFO - Task server.tasks.process_document_task[32bb34eb-af3b-4db5-adb0-1c693e62e346] received
2025-12-13 19:56:53,878 - INFO - Task 2 parsed options: {'transcription': {'prompt': 'You are a literal transcription engine for 19th-century handwritten manuscripts. Extract text from the supplied image exactly as written. Preserve all original spelling, punctuation, capitalization, and line breaks. Do not modernize, interpret, or expand abbreviations. The only modernization you should perform is to modernize obsolete characters (example, print "s" not "").', 'temperature': 0.2}, 'segmentation_model': 'historical-manuscript', 'preprocessing': {}}
2025-12-13 19:56:53,880 - INFO - Task 2 found prompt override: You are a literal transcription engine for 19th-century handwritten manuscripts. Extract text from the supplied image exactly as written. Preserve all original spelling, punctuation, capitalization, and line breaks. Do not modernize, interpret, or expand abbreviations. The only modernization you should perform is to modernize obsolete characters (example, print "s" not "").
2025-12-13 19:56:53,881 - INFO - Task 2 found temp override: 0.2
2025-12-13 19:56:53,881 - INFO - Task 2 found temp override: 0.2
2025-12-13 19:56:53,883 - INFO - TASK START: Processing north-01.jpg (ID: 2)
2025-12-13 19:56:53,883 - INFO - Command: subscript historical-manuscript gemini-pro-3 /app/documents/eluhrs@gmail.com/north-01-8c0418e4/north-01.jpg --output /app/documents/eluhrs@gmail.com/north-01-8c0418e4 --prompt You are a literal transcription engine for 19th-century handwritten manuscripts. Extract text from the supplied image exactly as written. Preserve all original spelling, punctuation, capitalization, and line breaks. Do not modernize, interpret, or expand abbreviations. The only modernization you should perform is to modernize obsolete characters (example, print "s" not ""). --temp 0.2
2025-12-13 19:56:53,894 - INFO - JOB SUBMITTED: User eluhrs@gmail.com uploaded north-02.jpg
2025-12-13 19:56:53,896 - INFO - Task server.tasks.process_document_task[4c330755-696d-4401-ae24-c2d7e966ba78] received
2025-12-13 19:56:53,908 - INFO - Running from: /app
2025-12-13 19:56:53,909 - INFO - Using config: /app/config.yml
2025-12-13 19:56:53,909 - INFO - Output directory: /app/documents/eluhrs@gmail.com/north-01-8c0418e4
2025-12-13 19:56:53,910 - INFO - ----------------------------------------
2025-12-13 19:56:53,917 - INFO - 
Subscript.py initialized segmentation provider: historical-manuscript
2025-12-13 19:56:53,918 - INFO - Subscript.py Initialized transcription provider: gemini-pro-3
2025-12-13 19:56:53,919 - INFO - ============================================================
2025-12-13 19:56:53,919 - INFO - SUBSCRIPT CONFIGURATION MANIFEST
2025-12-13 19:56:53,920 - INFO - ============================================================
2025-12-13 19:56:53,920 - INFO - Target Input:       1 files
2025-12-13 19:56:53,920 - INFO - Output Directory:   /app/documents/eluhrs@gmail.com/north-01-8c0418e4
2025-12-13 19:56:53,921 - INFO - ----------------------------------------
2025-12-13 19:56:53,921 - INFO - Segmentation Model: historical-manuscript
2025-12-13 19:56:53,921 - INFO - ----------------------------------------
2025-12-13 19:56:53,922 - INFO - Transcription Model: gemini-pro-3
2025-12-13 19:56:53,922 - INFO -   Provider:         gemini
2025-12-13 19:56:53,922 - INFO -   Model Name:       gemini-3-pro-preview
2025-12-13 19:56:53,923 - INFO -   Prompt:           You are a literal transcription engine for 19th-ce...
2025-12-13 19:56:53,923 - INFO -   Temperature:      0.2
2025-12-13 19:56:53,923 - INFO - ----------------------------------------
2025-12-13 19:56:53,924 - INFO - Preprocessing Settings:
2025-12-13 19:56:53,924 - INFO -   debug_image: True
2025-12-13 19:56:53,924 - INFO -   resize_image: large
2025-12-13 19:56:53,925 - INFO -   contrast: 1.0
2025-12-13 19:56:53,925 - INFO -   binarize: False
2025-12-13 19:56:53,925 - INFO -   invert: False
2025-12-13 19:56:53,926 - INFO - ============================================================
2025-12-13 19:56:53,926 - INFO - Processing 1 files...
2025-12-13 19:56:53,927 - INFO - Processing /app/documents/eluhrs@gmail.com/north-01-8c0418e4/north-01.jpg...
2025-12-13 19:56:53,927 - INFO - Segmenting /app/documents/eluhrs@gmail.com/north-01-8c0418e4/north-01.jpg with Kraken...
2025-12-13 19:56:53,931 - INFO - Loading segmentation model from /usr/local/lib/python3.10/site-packages/kraken/blla.mlmodel...
2025-12-13 19:56:53,937 - INFO - Task 3 parsed options: {'transcription': {'prompt': 'You are a literal transcription engine for 19th-century handwritten manuscripts. Extract text from the supplied image exactly as written. Preserve all original spelling, punctuation, capitalization, and line breaks. Do not modernize, interpret, or expand abbreviations. The only modernization you should perform is to modernize obsolete characters (example, print "s" not "").', 'temperature': 0.2}, 'segmentation_model': 'historical-manuscript', 'preprocessing': {}}
2025-12-13 19:56:53,938 - INFO - Task 3 found prompt override: You are a literal transcription engine for 19th-century handwritten manuscripts. Extract text from the supplied image exactly as written. Preserve all original spelling, punctuation, capitalization, and line breaks. Do not modernize, interpret, or expand abbreviations. The only modernization you should perform is to modernize obsolete characters (example, print "s" not "").
2025-12-13 19:56:53,938 - INFO - Task 3 found temp override: 0.2
2025-12-13 19:56:53,939 - INFO - Task 3 found temp override: 0.2
2025-12-13 19:56:53,941 - INFO - TASK START: Processing north-02.jpg (ID: 3)
2025-12-13 19:56:53,941 - INFO - Command: subscript historical-manuscript gemini-pro-3 /app/documents/eluhrs@gmail.com/north-02-222456b5/north-02.jpg --output /app/documents/eluhrs@gmail.com/north-02-222456b5 --prompt You are a literal transcription engine for 19th-century handwritten manuscripts. Extract text from the supplied image exactly as written. Preserve all original spelling, punctuation, capitalization, and line breaks. Do not modernize, interpret, or expand abbreviations. The only modernization you should perform is to modernize obsolete characters (example, print "s" not ""). --temp 0.2
2025-12-13 19:56:53,961 - INFO - Running from: /app
2025-12-13 19:56:53,962 - INFO - Using config: /app/config.yml
2025-12-13 19:56:53,962 - INFO - Output directory: /app/documents/eluhrs@gmail.com/north-02-222456b5
2025-12-13 19:56:53,963 - INFO - ----------------------------------------
2025-12-13 19:56:53,965 - INFO - 
Subscript.py initialized segmentation provider: historical-manuscript
2025-12-13 19:56:53,966 - INFO - Subscript.py Initialized transcription provider: gemini-pro-3
2025-12-13 19:56:53,967 - INFO - ============================================================
2025-12-13 19:56:53,967 - INFO - SUBSCRIPT CONFIGURATION MANIFEST
2025-12-13 19:56:53,968 - INFO - ============================================================
2025-12-13 19:56:53,968 - INFO - Target Input:       1 files
2025-12-13 19:56:53,968 - INFO - Output Directory:   /app/documents/eluhrs@gmail.com/north-02-222456b5
2025-12-13 19:56:53,969 - INFO - ----------------------------------------
2025-12-13 19:56:53,970 - INFO - Segmentation Model: historical-manuscript
2025-12-13 19:56:53,970 - INFO - ----------------------------------------
2025-12-13 19:56:53,970 - INFO - Transcription Model: gemini-pro-3
2025-12-13 19:56:53,971 - INFO -   Provider:         gemini
2025-12-13 19:56:53,971 - INFO -   Model Name:       gemini-3-pro-preview
2025-12-13 19:56:53,972 - INFO -   Prompt:           You are a literal transcription engine for 19th-ce...
2025-12-13 19:56:53,972 - INFO -   Temperature:      0.2
2025-12-13 19:56:53,972 - INFO - ----------------------------------------
2025-12-13 19:56:53,972 - INFO - Preprocessing Settings:
2025-12-13 19:56:53,973 - INFO -   debug_image: True
2025-12-13 19:56:53,973 - INFO -   resize_image: large
2025-12-13 19:56:53,974 - INFO -   contrast: 1.0
2025-12-13 19:56:53,975 - INFO -   binarize: False
2025-12-13 19:56:53,975 - INFO -   invert: False
2025-12-13 19:56:53,976 - INFO - ============================================================
2025-12-13 19:56:53,976 - INFO - Processing 1 files...
2025-12-13 19:56:53,976 - INFO - Processing /app/documents/eluhrs@gmail.com/north-02-222456b5/north-02.jpg...
2025-12-13 19:56:53,977 - INFO - Segmenting /app/documents/eluhrs@gmail.com/north-02-222456b5/north-02.jpg with Kraken...
2025-12-13 19:56:53,979 - INFO - Loading segmentation model from /usr/local/lib/python3.10/site-packages/kraken/blla.mlmodel...
2025-12-13 19:56:54,620 - INFO - Segmenting /app/documents/eluhrs@gmail.com/north-01-8c0418e4/north-01.jpg
2025-12-13 19:56:54,626 - INFO - Segmenting /app/documents/eluhrs@gmail.com/north-02-222456b5/north-02.jpg
2025-12-13 19:57:05,609 - INFO - Vectorizing regions
2025-12-13 19:57:05,757 - INFO - Vectorizing regions
2025-12-13 19:57:05,893 - INFO - Vectorizing baselines
2025-12-13 19:57:06,027 - INFO - Vectorizing regions
2025-12-13 19:57:06,174 - INFO - Vectorizing regions
2025-12-13 19:57:06,314 - INFO - Vectorizing baselines
2025-12-13 19:57:13,929 - INFO - Compute reading order on 15 lines in lr direction
2025-12-13 19:57:13,930 - INFO - Perform topological sort on partially ordered lines
2025-12-13 19:57:13,930 - INFO - Compute reading order on 1 lines in lr direction
2025-12-13 19:57:13,931 - INFO - Perform topological sort on partially ordered lines
2025-12-13 19:57:13,931 - INFO - Compute reading order on 2 lines in lr direction
2025-12-13 19:57:13,931 - INFO - Perform topological sort on partially ordered lines
2025-12-13 19:57:13,933 - INFO - Found 16 lines.
2025-12-13 19:57:13,934 - INFO - Initializing Gemini model: gemini-3-pro-preview
2025-12-13 19:57:13,951 - INFO - Annotating 16 regions for Visual Tagging...
2025-12-13 19:57:13,987 - INFO - Saved debug image to /app/documents/eluhrs@gmail.com/north-02-222456b5/north-02-debug.jpg
2025-12-13 19:57:13,988 - INFO - Sending annotated image to Gemini...
2025-12-13 19:57:14,337 - INFO - Compute reading order on 18 lines in lr direction
2025-12-13 19:57:14,339 - INFO - Perform topological sort on partially ordered lines
2025-12-13 19:57:14,339 - INFO - Compute reading order on 1 lines in lr direction
2025-12-13 19:57:14,339 - INFO - Perform topological sort on partially ordered lines
2025-12-13 19:57:14,341 - INFO - Found 18 lines.
2025-12-13 19:57:14,342 - INFO - Initializing Gemini model: gemini-3-pro-preview
2025-12-13 19:57:14,358 - INFO - Annotating 18 regions for Visual Tagging...
2025-12-13 19:57:14,395 - INFO - Saved debug image to /app/documents/eluhrs@gmail.com/north-01-8c0418e4/north-01-debug.jpg
2025-12-13 19:57:14,395 - INFO - Sending annotated image to Gemini...
2025-12-13 19:58:01,382 - INFO - Received JSON response from Gemini.
2025-12-13 19:58:01,815 - INFO - SUBSCRIPT OUTPUT for 1:

------------- gemini-pro-3 output for rock01.jpg -------------
74
Panama, Dec. 29. 1874
My dear Capt. Green,-
Your favor by Dr. Boyd duly came.
We observed our latitude stars on Sunday night, and
of course last night again. The instrument behaves well.
Yesterday morning (before your letter came) & this morn.
we observed for azimuth & variation. Though heavily on
our minds we couldn't accomplish it earlier, while the
longitude work lasted. On Sat. night we observed 24 stars.
I will enclose your signals. I think our work is a success.
To-day Mr. Spencer dismounts the telegraph line. We hope to
un
come over on Sat. Morn. - I do not think the pier is steady,
I think some one hit an arm of the instrument unconsciously
each time I found it out of meridian.
The vernier trouble is due to that arm making an angle
with the vertical. I am convinced that most of the register
troubles are due to bad quality of the fillet paper. It is un=
equal thickness at two edges and also varies in thickness
lengthwise, so as to require frequent readjustment of
rollers & stylet.
Very truly Yrs.
Miles Rock
----------------------------------------------------------------

Saved PageXML to /app/documents/eluhrs@gmail.com/rock01-a6641eeb/rock01.xml
Saved TXT to /app/documents/eluhrs@gmail.com/rock01-a6641eeb/rock01.txt
Saved PDF to /app/documents/eluhrs@gmail.com/rock01-a6641eeb/rock01.pdf

Time:   00:01:25
Input:  1280 tokens
Output: 418 tokens
Cost:   $0.0076

----------------------------------------------------------------


2025-12-13 19:58:01,836 - INFO - Task server.tasks.process_document_task[50fa3f8f-3e4d-4819-91c2-bc073779aa36] succeeded in 86.0070701650111s: None
2025-12-13 19:58:15,334 - INFO - Received JSON response from Gemini.
2025-12-13 19:58:15,503 - INFO - SUBSCRIPT OUTPUT for 3:

------------- gemini-pro-3 output for north-02.jpg -------------
all ye euells yt may be, ar crept so near vntous.
Zeland is full, France not free, & Scotland
vnclensid: the Common people spoyled, theyr
Commonwelths racked, theyr Nobilitie
murtherid, the Councell contemnid and
theyr Kyngs disobeyed: For dissention, sedici=
on Ciuell slaughtar, & rebellion, is ye onlie
argument entreatid of among them.
If therfore it pleasid her Hyghnes, to vse ye
benefit of present tyme: to bend her browe
vpon ye disobedient: to hold vp her threatning
hand ouer them, and to aduance her pusant
arme towards them: the verie shadoe of her
sworde, wold feare and vanquyshe ye prow=
dest of them.
but
----------------------------------------------------------------

Saved PageXML to /app/documents/eluhrs@gmail.com/north-02-222456b5/north-02.xml
Saved TXT to /app/documents/eluhrs@gmail.com/north-02-222456b5/north-02.txt
Saved PDF to /app/documents/eluhrs@gmail.com/north-02-222456b5/north-02.pdf

Time:   00:01:21
Input:  1258 tokens
Output: 296 tokens
Cost:   $0.0061

----------------------------------------------------------------


2025-12-13 19:58:15,519 - INFO - Task server.tasks.process_document_task[4c330755-696d-4401-ae24-c2d7e966ba78] succeeded in 81.61426528706215s: None
2025-12-13 19:59:03,839 - INFO - Received JSON response from Gemini.
2025-12-13 19:59:04,029 - INFO - SUBSCRIPT OUTPUT for 2:

------------- gemini-pro-3 output for north-01.jpg -------------
glad aspects were present (confirming her
Maiestie wth THEODOSIES dylligence, ARETAPHE=
LIS constancie, and ANTIGONVS clemencie)
setlinge them selues euar sence, in her Princelie
brest: as ye rarenes and greatnes of her Gracis
vertuse declare. Whom God presaruid from
formar perell, to rule & reygn over us, in
this last leaden adge: wherin Iniquitie hath
sought to surmount ye glorie of his Deitie, and
so presumed to suppresse his professors: As if
ye
Shylde of her Souerayntie (for worldlie
Quens
Matie is ye per
fect protector
of Religion
What treason wold not entrapp us? When
all
----------------------------------------------------------------

Saved PageXML to /app/documents/eluhrs@gmail.com/north-01-8c0418e4/north-01.xml
Saved TXT to /app/documents/eluhrs@gmail.com/north-01-8c0418e4/north-01.txt
Saved PDF to /app/documents/eluhrs@gmail.com/north-01-8c0418e4/north-01.pdf

Time:   00:02:10
Input:  1270 tokens
Output: 301 tokens
Cost:   $0.0062

----------------------------------------------------------------


2025-12-13 19:59:04,050 - INFO - Task server.tasks.process_document_task[32bb34eb-af3b-4db5-adb0-1c693e62e346] succeeded in 130.19792022602633s: None
2025-12-13 22:08:00,880 - INFO - SYSTEM: Server module initialized at 2025-12-13 22:08:00.880045
2025-12-13 22:08:19,309 - INFO - SYSTEM: Server module initialized at 2025-12-13 22:08:19.309696
2025-12-14 02:03:51,869 - INFO - SYSTEM: Server module initialized at 2025-12-14 02:03:51.869673
2025-12-14 02:06:19,641 - INFO - SYSTEM: Server module initialized at 2025-12-14 02:06:19.641615
2025-12-14 02:11:47,717 - INFO - SYSTEM: Server module initialized at 2025-12-14 02:11:47.717957
2025-12-14 02:14:10,411 - INFO - SYSTEM: Server module initialized at 2025-12-14 02:14:10.411032
2025-12-14 02:52:20,026 - INFO - JOB SUBMITTED: User eluhrs@gmail.com uploaded rock01.jpg
2025-12-14 02:52:20,184 - INFO - Task server.tasks.process_document_task[80e2316f-0228-4fd1-8d43-0a046a0d0fe8] received
2025-12-14 02:52:20,214 - INFO - Task 4 parsed options: {'transcription': {'prompt': 'You are a literal transcription engine for 19th-century handwritten manuscripts. Extract text from the supplied image exactly as written. Preserve all original spelling, punctuation, capitalization, and line breaks. Do not modernize, interpret, or expand abbreviations. The only modernization you should perform is to modernize obsolete characters (example, print "s" not "").', 'temperature': 0.2}, 'segmentation_model': 'historical-manuscript', 'preprocessing': {}}
2025-12-14 02:52:20,215 - INFO - Task 4 found prompt override: You are a literal transcription engine for 19th-century handwritten manuscripts. Extract text from the supplied image exactly as written. Preserve all original spelling, punctuation, capitalization, and line breaks. Do not modernize, interpret, or expand abbreviations. The only modernization you should perform is to modernize obsolete characters (example, print "s" not "").
2025-12-14 02:52:20,215 - INFO - Task 4 found temp override: 0.2
2025-12-14 02:52:20,215 - INFO - Task 4 found temp override: 0.2
2025-12-14 02:52:20,218 - INFO - TASK START: Processing rock01.jpg (ID: 4)
2025-12-14 02:52:20,218 - INFO - Command: subscript historical-manuscript gemini-pro-3 /app/documents/eluhrs@gmail.com/rock01-81e85687/rock01.jpg --output /app/documents/eluhrs@gmail.com/rock01-81e85687 --prompt You are a literal transcription engine for 19th-century handwritten manuscripts. Extract text from the supplied image exactly as written. Preserve all original spelling, punctuation, capitalization, and line breaks. Do not modernize, interpret, or expand abbreviations. The only modernization you should perform is to modernize obsolete characters (example, print "s" not ""). --temp 0.2
2025-12-14 02:52:20,232 - INFO - Running from: /app
2025-12-14 02:52:20,232 - INFO - Using config: /app/config.yml
2025-12-14 02:52:20,232 - INFO - Output directory: /app/documents/eluhrs@gmail.com/rock01-81e85687
2025-12-14 02:52:20,233 - INFO - ----------------------------------------
2025-12-14 02:52:20,236 - INFO - 
Subscript.py initialized segmentation provider: historical-manuscript
2025-12-14 02:52:20,236 - INFO - Subscript.py Initialized transcription provider: gemini-pro-3
2025-12-14 02:52:20,237 - INFO - ============================================================
2025-12-14 02:52:20,237 - INFO - SUBSCRIPT CONFIGURATION MANIFEST
2025-12-14 02:52:20,237 - INFO - ============================================================
2025-12-14 02:52:20,238 - INFO - Target Input:       1 files
2025-12-14 02:52:20,238 - INFO - Output Directory:   /app/documents/eluhrs@gmail.com/rock01-81e85687
2025-12-14 02:52:20,239 - INFO - ----------------------------------------
2025-12-14 02:52:20,239 - INFO - Segmentation Model: historical-manuscript
2025-12-14 02:52:20,239 - INFO - ----------------------------------------
2025-12-14 02:52:20,240 - INFO - Transcription Model: gemini-pro-3
2025-12-14 02:52:20,240 - INFO -   Provider:         gemini
2025-12-14 02:52:20,240 - INFO -   Model Name:       gemini-3-pro-preview
2025-12-14 02:52:20,240 - INFO -   Prompt:           You are a literal transcription engine for 19th-ce...
2025-12-14 02:52:20,240 - INFO -   Temperature:      0.2
2025-12-14 02:52:20,240 - INFO - ----------------------------------------
2025-12-14 02:52:20,240 - INFO - Preprocessing Settings:
2025-12-14 02:52:20,241 - INFO -   debug_image: True
2025-12-14 02:52:20,241 - INFO -   resize_image: large
2025-12-14 02:52:20,241 - INFO -   contrast: 1.0
2025-12-14 02:52:20,241 - INFO -   binarize: False
2025-12-14 02:52:20,241 - INFO -   invert: False
2025-12-14 02:52:20,241 - INFO - ============================================================
2025-12-14 02:52:20,241 - INFO - Processing 1 files...
2025-12-14 02:52:20,242 - INFO - Processing /app/documents/eluhrs@gmail.com/rock01-81e85687/rock01.jpg...
2025-12-14 02:52:20,242 - INFO - Segmenting /app/documents/eluhrs@gmail.com/rock01-81e85687/rock01.jpg with Kraken...
2025-12-14 02:52:20,244 - INFO - Loading segmentation model from /usr/local/lib/python3.10/site-packages/kraken/blla.mlmodel...
2025-12-14 02:52:20,830 - INFO - Segmenting /app/documents/eluhrs@gmail.com/rock01-81e85687/rock01.jpg
2025-12-14 02:52:26,090 - INFO - Vectorizing regions
2025-12-14 02:52:26,678 - INFO - Vectorizing regions
2025-12-14 02:52:26,924 - INFO - Vectorizing baselines
2025-12-14 02:52:36,954 - INFO - Compute reading order on 23 lines in lr direction
2025-12-14 02:52:36,957 - INFO - Perform topological sort on partially ordered lines
2025-12-14 02:52:36,959 - INFO - Compute reading order on 1 lines in lr direction
2025-12-14 02:52:36,960 - INFO - Perform topological sort on partially ordered lines
2025-12-14 02:52:36,960 - INFO - Compute reading order on 2 lines in lr direction
2025-12-14 02:52:36,961 - INFO - Perform topological sort on partially ordered lines
2025-12-14 02:52:36,964 - INFO - Found 24 lines.
2025-12-14 02:52:36,965 - INFO - Initializing Gemini model: gemini-3-pro-preview
2025-12-14 02:52:37,136 - INFO - Resized image to (2289, 3000)
2025-12-14 02:52:37,145 - INFO - Annotating 24 regions for Visual Tagging...
2025-12-14 02:52:37,244 - INFO - Saved debug image to /app/documents/eluhrs@gmail.com/rock01-81e85687/rock01-debug.jpg
2025-12-14 02:52:37,244 - INFO - Sending annotated image to Gemini...
2025-12-14 02:53:33,075 - INFO - Received JSON response from Gemini.
2025-12-14 02:53:33,081 - ERROR - Failed to generate PDF: [Errno 2] No such file or directory: '/app/documents/eluhrs@gmail.com/rock01-81e85687/rock01.jpg'
2025-12-14 02:53:33,081 - ERROR - Failed to process /app/documents/eluhrs@gmail.com/rock01-81e85687/rock01.jpg: [Errno 2] No such file or directory: '/app/documents/eluhrs@gmail.com/rock01-81e85687/rock01.jpg'
2025-12-14 02:53:33,087 - INFO - SUBSCRIPT OUTPUT for 4:
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/subscript/__main__.py", line 366, in main
    output_engine.generate(image_path, regions, config.get('output_dir', 'output'), config)
  File "/usr/local/lib/python3.10/site-packages/subscript/modules/output.py", line 32, in generate
    self._generate_xml(image_path, regions, xml_path)
  File "/usr/local/lib/python3.10/site-packages/subscript/modules/output.py", line 52, in _generate_xml
    with Image.open(image_path) as im:
  File "/usr/local/lib/python3.10/site-packages/PIL/Image.py", line 3493, in open
    fp = builtins.open(filename, "rb")
FileNotFoundError: [Errno 2] No such file or directory: '/app/documents/eluhrs@gmail.com/rock01-81e85687/rock01.jpg'

2025-12-14 02:53:33,090 - WARNING - Document 4 deleted during processing. Suppressing error.
2025-12-14 02:53:33,093 - INFO - Task server.tasks.process_document_task[80e2316f-0228-4fd1-8d43-0a046a0d0fe8] succeeded in 72.90038444998208s: None
2025-12-14 02:58:33,730 - INFO - JOB SUBMITTED: User eluhrs@gmail.com uploaded rock01.jpg
2025-12-14 02:58:33,769 - INFO - Task server.tasks.process_document_task[08e7b6ee-f651-464e-b21e-74bd9388b4e7] received
2025-12-14 02:58:33,805 - INFO - Task 4 parsed options: {'transcription': {'prompt': 'You are a literal transcription engine for 19th-century handwritten manuscripts. Extract text from the supplied image exactly as written. Preserve all original spelling, punctuation, capitalization, and line breaks. Do not modernize, interpret, or expand abbreviations. The only modernization you should perform is to modernize obsolete characters (example, print "s" not "").', 'temperature': 0.2}, 'segmentation_model': 'historical-manuscript', 'preprocessing': {}}
2025-12-14 02:58:33,807 - INFO - Task 4 found prompt override: You are a literal transcription engine for 19th-century handwritten manuscripts. Extract text from the supplied image exactly as written. Preserve all original spelling, punctuation, capitalization, and line breaks. Do not modernize, interpret, or expand abbreviations. The only modernization you should perform is to modernize obsolete characters (example, print "s" not "").
2025-12-14 02:58:33,807 - INFO - Task 4 found temp override: 0.2
2025-12-14 02:58:33,807 - INFO - Task 4 found temp override: 0.2
2025-12-14 02:58:33,809 - INFO - TASK START: Processing rock01.jpg (ID: 4)
2025-12-14 02:58:33,809 - INFO - Command: subscript historical-manuscript gemini-pro-3 /app/documents/eluhrs@gmail.com/rock01-d235476e/rock01.jpg --output /app/documents/eluhrs@gmail.com/rock01-d235476e --prompt You are a literal transcription engine for 19th-century handwritten manuscripts. Extract text from the supplied image exactly as written. Preserve all original spelling, punctuation, capitalization, and line breaks. Do not modernize, interpret, or expand abbreviations. The only modernization you should perform is to modernize obsolete characters (example, print "s" not ""). --temp 0.2
2025-12-14 02:58:33,827 - INFO - Running from: /app
2025-12-14 02:58:33,827 - INFO - Using config: /app/config.yml
2025-12-14 02:58:33,827 - INFO - Output directory: /app/documents/eluhrs@gmail.com/rock01-d235476e
2025-12-14 02:58:33,828 - INFO - ----------------------------------------
2025-12-14 02:58:33,830 - INFO - 
Subscript.py initialized segmentation provider: historical-manuscript
2025-12-14 02:58:33,830 - INFO - Subscript.py Initialized transcription provider: gemini-pro-3
2025-12-14 02:58:33,831 - INFO - ============================================================
2025-12-14 02:58:33,831 - INFO - SUBSCRIPT CONFIGURATION MANIFEST
2025-12-14 02:58:33,832 - INFO - ============================================================
2025-12-14 02:58:33,833 - INFO - Target Input:       1 files
2025-12-14 02:58:33,833 - INFO - Output Directory:   /app/documents/eluhrs@gmail.com/rock01-d235476e
2025-12-14 02:58:33,834 - INFO - ----------------------------------------
2025-12-14 02:58:33,834 - INFO - Segmentation Model: historical-manuscript
2025-12-14 02:58:33,834 - INFO - ----------------------------------------
2025-12-14 02:58:33,834 - INFO - Transcription Model: gemini-pro-3
2025-12-14 02:58:33,835 - INFO -   Provider:         gemini
2025-12-14 02:58:33,835 - INFO -   Model Name:       gemini-3-pro-preview
2025-12-14 02:58:33,835 - INFO -   Prompt:           You are a literal transcription engine for 19th-ce...
2025-12-14 02:58:33,835 - INFO -   Temperature:      0.2
2025-12-14 02:58:33,836 - INFO - ----------------------------------------
2025-12-14 02:58:33,836 - INFO - Preprocessing Settings:
2025-12-14 02:58:33,836 - INFO -   debug_image: True
2025-12-14 02:58:33,836 - INFO -   resize_image: large
2025-12-14 02:58:33,837 - INFO -   contrast: 1.0
2025-12-14 02:58:33,837 - INFO -   binarize: False
2025-12-14 02:58:33,837 - INFO -   invert: False
2025-12-14 02:58:33,837 - INFO - ============================================================
2025-12-14 02:58:33,837 - INFO - Processing 1 files...
2025-12-14 02:58:33,838 - INFO - Processing /app/documents/eluhrs@gmail.com/rock01-d235476e/rock01.jpg...
2025-12-14 02:58:33,838 - INFO - Segmenting /app/documents/eluhrs@gmail.com/rock01-d235476e/rock01.jpg with Kraken...
2025-12-14 02:58:33,840 - INFO - Loading segmentation model from /usr/local/lib/python3.10/site-packages/kraken/blla.mlmodel...
2025-12-14 02:58:34,538 - INFO - Segmenting /app/documents/eluhrs@gmail.com/rock01-d235476e/rock01.jpg
2025-12-14 02:58:42,392 - INFO - Vectorizing regions
2025-12-14 02:58:42,604 - INFO - Vectorizing regions
2025-12-14 02:58:42,802 - INFO - Vectorizing baselines
2025-12-14 02:58:52,856 - INFO - Compute reading order on 23 lines in lr direction
2025-12-14 02:58:52,863 - INFO - Perform topological sort on partially ordered lines
2025-12-14 02:58:52,866 - INFO - Compute reading order on 1 lines in lr direction
2025-12-14 02:58:52,867 - INFO - Perform topological sort on partially ordered lines
2025-12-14 02:58:52,869 - INFO - Compute reading order on 2 lines in lr direction
2025-12-14 02:58:52,870 - INFO - Perform topological sort on partially ordered lines
2025-12-14 02:58:52,875 - INFO - Found 24 lines.
2025-12-14 02:58:52,882 - INFO - Initializing Gemini model: gemini-3-pro-preview
2025-12-14 02:58:53,082 - INFO - Resized image to (2289, 3000)
2025-12-14 02:58:53,093 - INFO - Annotating 24 regions for Visual Tagging...
2025-12-14 02:58:53,198 - INFO - Saved debug image to /app/documents/eluhrs@gmail.com/rock01-d235476e/rock01-debug.jpg
2025-12-14 02:58:53,199 - INFO - Sending annotated image to Gemini...
2025-12-14 02:59:29,020 - INFO - Received JSON response from Gemini.
2025-12-14 02:59:29,476 - INFO - SUBSCRIPT OUTPUT for 4:

------------- gemini-pro-3 output for rock01.jpg -------------
74
Panama, Dec. 29. 1874
My dear Capt. Green,-
Your favor by Dr. Boyd duly came.
We observed our latitude stars on Sunday night, and
of course last night again. The instrument behaves well.
Yesterday morning (before your letter came) & this morn.
we observed for azimuth & variation. Though heavily on
our minds we couldn't accomplish it earlier, while the
longitude work lasted. On Sat. night we observed 24 stars.
I will enclose your signals. I think our work is a success.
To-day Mr. Spencer dismounts the telegraph line. We hope to
un
come over on Sat. Morn. - I do not think the pier is steady,
I think some one hit an arm of the instrument unconsciously
each time I found it out of meridian.
The vernier trouble is due to that arm making an angle
with the vertical. I am convinced that most of the register
troubles are due to bad quality of the fillet paper. It is un=
equal thickness at two edges and also varies in thickness
lengthwise, so as to require frequent readjustment of
rollers & stylet.
Very truly Yrs.
Miles Rock
----------------------------------------------------------------

Saved PageXML to /app/documents/eluhrs@gmail.com/rock01-d235476e/rock01.xml
Saved TXT to /app/documents/eluhrs@gmail.com/rock01-d235476e/rock01.txt
Saved PDF to /app/documents/eluhrs@gmail.com/rock01-d235476e/rock01.pdf

Time:   00:00:55
Input:  1280 tokens
Output: 418 tokens
Cost:   $0.0076

----------------------------------------------------------------


2025-12-14 02:59:29,498 - INFO - Task server.tasks.process_document_task[08e7b6ee-f651-464e-b21e-74bd9388b4e7] succeeded in 55.719996567000635s: None
